var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(e){var k=0;return function(){return k<e.length?{done:!1,value:e[k++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,k,g){if(e==Array.prototype||e==Object.prototype)return e;e[k]=g.value;return e};$jscomp.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var k=0;k<e.length;++k){var g=e[k];if(g&&g.Math==Math)return g}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(e,k){var g=$jscomp.propertyToPolyfillSymbol[k];if(null==g)return e[k];g=e[g];return void 0!==g?g:e[k]};
$jscomp.polyfill=function(e,k,g,c){k&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,k,g,c):$jscomp.polyfillUnisolated(e,k,g,c))};$jscomp.polyfillUnisolated=function(e,k,g,c){g=$jscomp.global;e=e.split(".");for(c=0;c<e.length-1;c++){var a=e[c];if(!(a in g))return;g=g[a]}e=e[e.length-1];c=g[e];k=k(c);k!=c&&null!=k&&$jscomp.defineProperty(g,e,{configurable:!0,writable:!0,value:k})};
$jscomp.polyfillIsolated=function(e,k,g,c){var a=e.split(".");e=1===a.length;c=a[0];c=!e&&c in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var b=0;b<a.length-1;b++){var d=a[b];if(!(d in c))return;c=c[d]}a=a[a.length-1];g=$jscomp.IS_SYMBOL_NATIVE&&"es6"===g?c[a]:null;k=k(g);null!=k&&(e?$jscomp.defineProperty($jscomp.polyfills,a,{configurable:!0,writable:!0,value:k}):k!==g&&(void 0===$jscomp.propertyToPolyfillSymbol[a]&&(g=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[a]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(a):$jscomp.POLYFILL_PREFIX+g+"$"+a),$jscomp.defineProperty(c,$jscomp.propertyToPolyfillSymbol[a],{configurable:!0,writable:!0,value:k})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(e){if(e)return e;var k=function(b,d){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};k.prototype.toString=function(){return this.$jscomp$symbol$id_};var g="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",c=0,a=function(b){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new k(g+(b||"")+"_"+c++,b)};return a},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var k="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),g=0;g<k.length;g++){var c=$jscomp.global[k[g]];"function"===typeof c&&"function"!=typeof c.prototype[e]&&$jscomp.defineProperty(c.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return e},"es6",
"es3");$jscomp.iteratorPrototype=function(e){e={next:e};e[Symbol.iterator]=function(){return this};return e};$jscomp.underscoreProtoCanBeSet=function(){var e={a:!0},k={};try{return k.__proto__=e,k.a}catch(g){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(e,k){e.__proto__=k;if(e.__proto__!==k)throw new TypeError(e+" is not extensible");return e}:null;
$jscomp.polyfill("Object.setPrototypeOf",function(e){return e||$jscomp.setPrototypeOf},"es6","es5");$jscomp.findInternal=function(e,k,g){e instanceof String&&(e=String(e));for(var c=e.length,a=0;a<c;a++){var b=e[a];if(k.call(g,b,a,e))return{i:a,v:b}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(k,g){return $jscomp.findInternal(this,k,g).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(e){return e?e:function(k,g,c){var a=this.length||0;0>g&&(g=Math.max(0,a+g));if(null==c||c>a)c=a;c=Number(c);0>c&&(c=Math.max(0,a+c));for(g=Number(g||0);g<c;g++)this[g]=k;return this}},"es6","es3");$jscomp.typedArrayFill=function(e){return e?e:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Math.trunc",function(e){return e?e:function(k){k=Number(k);if(isNaN(k)||Infinity===k||-Infinity===k||0===k)return k;var g=Math.floor(Math.abs(k));return 0>k?-g:g}},"es6","es3");
$jscomp.iteratorFromArray=function(e,k){e instanceof String&&(e+="");var g=0,c=!1,a={next:function(){if(!c&&g<e.length){var b=g++;return{value:k(b,e[b]),done:!1}}c=!0;return{done:!0,value:void 0}}};a[Symbol.iterator]=function(){return a};return a};$jscomp.polyfill("Array.prototype.values",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(k,g){return g})}},"es8","es3");
$jscomp.makeIterator=function(e){var k="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return k?k.call(e):$jscomp.arrayIterator(e)};
$jscomp.polyfill("Promise",function(e){function k(){this.batch_=null}function g(d){return d instanceof a?d:new a(function(f,h){f(d)})}if(e&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return e;k.prototype.asyncExecute=function(d){if(null==this.batch_){this.batch_=[];var f=this;this.asyncExecuteFunction(function(){f.executeBatch_()})}this.batch_.push(d)};
var c=$jscomp.global.setTimeout;k.prototype.asyncExecuteFunction=function(d){c(d,0)};k.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var d=this.batch_;this.batch_=[];for(var f=0;f<d.length;++f){var h=d[f];d[f]=null;try{h()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};k.prototype.asyncThrow_=function(d){this.asyncExecuteFunction(function(){throw d;})};var a=function(d){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var f=this.createResolveAndReject_();
try{d(f.resolve,f.reject)}catch(h){f.reject(h)}};a.prototype.createResolveAndReject_=function(){function d(l){return function(m){h||(h=!0,l.call(f,m))}}var f=this,h=!1;return{resolve:d(this.resolveTo_),reject:d(this.reject_)}};a.prototype.resolveTo_=function(d){if(d===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof a)this.settleSameAsPromise_(d);else{a:switch(typeof d){case "object":var f=null!=d;break a;case "function":f=!0;break a;default:f=!1}f?this.resolveToNonPromiseObj_(d):
this.fulfill_(d)}};a.prototype.resolveToNonPromiseObj_=function(d){var f=void 0;try{f=d.then}catch(h){this.reject_(h);return}"function"==typeof f?this.settleSameAsThenable_(f,d):this.fulfill_(d)};a.prototype.reject_=function(d){this.settle_(2,d)};a.prototype.fulfill_=function(d){this.settle_(1,d)};a.prototype.settle_=function(d,f){if(0!=this.state_)throw Error("Cannot settle("+d+", "+f+"): Promise already settled in state"+this.state_);this.state_=d;this.result_=f;2===this.state_&&this.scheduleUnhandledRejectionCheck_();
this.executeOnSettledCallbacks_()};a.prototype.scheduleUnhandledRejectionCheck_=function(){var d=this;c(function(){if(d.notifyUnhandledRejection_()){var f=$jscomp.global.console;"undefined"!==typeof f&&f.error(d.result_)}},1)};a.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var d=$jscomp.global.CustomEvent,f=$jscomp.global.Event,h=$jscomp.global.dispatchEvent;if("undefined"===typeof h)return!0;"function"===typeof d?d=new d("unhandledrejection",{cancelable:!0}):
"function"===typeof f?d=new f("unhandledrejection",{cancelable:!0}):(d=$jscomp.global.document.createEvent("CustomEvent"),d.initCustomEvent("unhandledrejection",!1,!0,d));d.promise=this;d.reason=this.result_;return h(d)};a.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var d=0;d<this.onSettledCallbacks_.length;++d)b.asyncExecute(this.onSettledCallbacks_[d]);this.onSettledCallbacks_=null}};var b=new k;a.prototype.settleSameAsPromise_=function(d){var f=this.createResolveAndReject_();
d.callWhenSettled_(f.resolve,f.reject)};a.prototype.settleSameAsThenable_=function(d,f){var h=this.createResolveAndReject_();try{d.call(f,h.resolve,h.reject)}catch(l){h.reject(l)}};a.prototype.then=function(d,f){function h(p,r){return"function"==typeof p?function(v){try{l(p(v))}catch(u){m(u)}}:r}var l,m,q=new a(function(p,r){l=p;m=r});this.callWhenSettled_(h(d,l),h(f,m));return q};a.prototype.catch=function(d){return this.then(void 0,d)};a.prototype.callWhenSettled_=function(d,f){function h(){switch(l.state_){case 1:d(l.result_);
break;case 2:f(l.result_);break;default:throw Error("Unexpected state: "+l.state_);}}var l=this;null==this.onSettledCallbacks_?b.asyncExecute(h):this.onSettledCallbacks_.push(h);this.isRejectionHandled_=!0};a.resolve=g;a.reject=function(d){return new a(function(f,h){h(d)})};a.race=function(d){return new a(function(f,h){for(var l=$jscomp.makeIterator(d),m=l.next();!m.done;m=l.next())g(m.value).callWhenSettled_(f,h)})};a.all=function(d){var f=$jscomp.makeIterator(d),h=f.next();return h.done?g([]):new a(function(l,
m){function q(v){return function(u){p[v]=u;r--;0==r&&l(p)}}var p=[],r=0;do p.push(void 0),r++,g(h.value).callWhenSettled_(q(p.length-1),m),h=f.next();while(!h.done)})};return a},"es6","es3");$jscomp.owns=function(e,k){return Object.prototype.hasOwnProperty.call(e,k)};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(e,k){for(var g=1;g<arguments.length;g++){var c=arguments[g];if(c)for(var a in c)$jscomp.owns(c,a)&&(e[a]=c[a])}return e};
$jscomp.polyfill("Object.assign",function(e){return e||$jscomp.assign},"es6","es3");var TASdk;
(function(e){e.Const={nullValue:-987653421,mA_START:0,mA_END:7,simpleMovingAverage:0,exponentialMovingAverage:1,timeSeriesMovingAverage:2,triangularMovingAverage:3,variableMovingAverage:4,VIDYA:5,wellesWilderSmoothing:6,weightedMovingAverage:7};e.Unknown=-1;e.FirstIndicator=-1;e.SimpleMovingAverage=0;e.ExponentialMovingAverage=1;e.TimeSeriesMovingAverage=2;e.TriangularMovingAverage=3;e.VariableMovingAverage=4;e.VIDYA=5;e.WellesWilderSmoothing=6;e.WeightedMovingAverage=7;e.WilliamsPctR=8;e.WilliamsAccumulationDistribution=
9;e.VolumeOscillator=10;e.VerticalHorizontalFilter=11;e.UltimateOscillator=12;e.TrueRange=13;e.AverageTrueRange=14;e.RainbowOscillator=15;e.PriceOscillator=16;e.ParabolicSAR=17;e.MomentumOscillator=18;e.MACD=19;e.EaseOfMovement=20;e.DirectionalMovementSystem=21;e.DetrendedPriceOscillator=22;e.ChandeMomentumOscillator=23;e.ChaikinVolatility=24;e.Aroon=25;e.AroonOscillator=26;e.LinearRegressionRSquared=27;e.LinearRegressionForecast=28;e.LinearRegressionSlope=29;e.LinearRegressionIntercept=30;e.PriceVolumeTrend=
31;e.PerformanceIndex=32;e.CommodityChannelIndex=33;e.ChaikinMoneyFlow=34;e.WeightedClose=35;e.VolumeROC=36;e.TypicalPrice=37;e.StandardDeviation=38;e.PriceROC=39;e.MedianPrice=40;e.HighMinusLow=41;e.BollingerBands=42;e.FractalChaosBands=43;e.HighLowBands=44;e.MovingAverageEnvelope=45;e.SwingIndex=46;e.AccumulativeSwingIndex=47;e.ComparativeRelativeStrength=48;e.MassIndex=49;e.MoneyFlowIndex=50;e.NegativeVolumeIndex=51;e.OnBalanceVolume=52;e.PositiveVolumeIndex=53;e.RelativeStrengthIndex=54;e.TradeVolumeIndex=
55;e.StochasticOscillator=56;e.StochasticMomentumIndex=57;e.FractalChaosOscillator=58;e.PrimeNumberOscillator=59;e.PrimeNumberBands=60;e.HistoricalVolatility=61;e.MACDHistogram=62;e.HHV=63;e.LLV=64;e.TimeSeriesForecast=65;e.TRIX=66;e.ElderRay=67;e.ElderForceIndex=68;e.ElderThermometer=69;e.EhlerFisherTransform=70;e.KeltnerChannel=71;e.MarketFacilitationIndex=72;e.SchaffTrendCycle=73;e.QStick=74;e.STARC=75;e.CenterOfGravity=76;e.CoppockCurve=77;e.ChandeForecastOscillator=78;e.GopalakrishnanRangeIndex=
79;e.IntradayMomentumIndex=80;e.KlingerVolumeOscillator=81;e.PrettyGoodOscillator=82;e.RAVI=83;e.RandomWalkIndex=84;e.TwiggsMoneyFlow=85;e.LastIndicator=86;e.IchimokuCloud=87;e.DBox=88;e.McGinleysDynamic=89;e.MarketPriceProfile=90;e.TrendSignal=91;e.BoomVolume=92;e.MSTOI=93;e.indicatorToString=function(k){switch(k){case e.SimpleMovingAverage:return"Simple Moving Average";case e.ExponentialMovingAverage:return"Exponential Moving Average";case e.TimeSeriesMovingAverage:return"Time Series Moving Average";
case e.TriangularMovingAverage:return"Triangular Moving Average";case e.VariableMovingAverage:return"Variable Moving Average";case e.VIDYA:return"Volatility Index Dynamic Average";case e.WellesWilderSmoothing:return"Welles Wilder Smoothing";case e.WeightedMovingAverage:return"Weighted Moving Average";case e.WilliamsPctR:return"Williams %R";case e.WilliamsAccumulationDistribution:return"Williams Accumulation Distribution";case e.VolumeOscillator:return"Volume Oscillator";case e.VerticalHorizontalFilter:return"Vertical Horizontal Filter";
case e.UltimateOscillator:return"Ultimate Oscillator";case e.TrueRange:return"True Range";case e.AverageTrueRange:return"Average True Range";case e.TRIX:return"TRIX";case e.RainbowOscillator:return"Rainbow Oscillator";case e.PriceOscillator:return"Price Oscillator";case e.ParabolicSAR:return"Parabolic SAR";case e.MomentumOscillator:return"Momentum Oscillator";case e.MACD:return"MACD";case e.EaseOfMovement:return"Ease of Movement";case e.DirectionalMovementSystem:return"Directional Movement System";
case e.DetrendedPriceOscillator:return"Detrended Price Oscillator";case e.ChandeMomentumOscillator:return"Chande Momentum Oscillator";case e.ChaikinVolatility:return"Chaikin Volatility";case e.Aroon:return"Aroon";case e.AroonOscillator:return"Aroon Oscillator";case e.LinearRegressionRSquared:return"Linear Regression R2";case e.LinearRegressionForecast:return"Linear Regression Forecast";case e.LinearRegressionSlope:return"Linear Regression Slope";case e.LinearRegressionIntercept:return"Linear Regression Intercept";
case e.PriceVolumeTrend:return"Price Volume Trend";case e.PerformanceIndex:return"Performance Index";case e.CommodityChannelIndex:return"Commodity Channel Index";case e.ChaikinMoneyFlow:return"Chaikin Money Flow";case e.WeightedClose:return"Weighted Close";case e.VolumeROC:return"Volume Rate of Change";case e.TypicalPrice:return"Typical Price";case e.StandardDeviation:return"Standard Deviation";case e.PriceROC:return"Price Rate of Change";case e.MedianPrice:return"Median Price";case e.HighMinusLow:return"High Minus Low";
case e.BollingerBands:return"Bollinger Bands";case e.FractalChaosBands:return"Fractal Chaos Bands";case e.HighLowBands:return"High Low Bands";case e.MovingAverageEnvelope:return"Moving Average Envelope";case e.SwingIndex:return"Swing Index";case e.AccumulativeSwingIndex:return"Accumulative Swing Index";case e.ComparativeRelativeStrength:return"Comparative Relative Strength";case e.MassIndex:return"Mass Index";case e.MoneyFlowIndex:return"Money Flow Index";case e.NegativeVolumeIndex:return"Negative Volume Index";
case e.OnBalanceVolume:return"On Balance Volume";case e.PositiveVolumeIndex:return"Positive Volume Index";case e.RelativeStrengthIndex:return"Relative Strength Index";case e.TradeVolumeIndex:return"Trade Volume Index";case e.StochasticOscillator:return"Stochastic Oscillator";case e.StochasticMomentumIndex:return"Stochastic Momentum Index";case e.FractalChaosOscillator:return"Fractal Chaos Oscillator";case e.PrimeNumberOscillator:return"Prime Number Oscillator";case e.PrimeNumberBands:return"Prime Number Bands";
case e.HistoricalVolatility:return"Historical Volatility";case e.MACDHistogram:return"MACD Histogram";case e.HHV:return"Highest High Value";case e.LLV:return"Lowest Low Value";case e.TimeSeriesForecast:return"Time Series Forecast";case e.ElderRay:return"Elder Ray";case e.ElderForceIndex:return"Elder Force Index";case e.ElderThermometer:return"Elder Thermometer";case e.EhlerFisherTransform:return"Ehler Fisher Transform";case e.KeltnerChannel:return"Keltner Channel";case e.MarketFacilitationIndex:return"Market Facilitation Index";
case e.SchaffTrendCycle:return"Schaff Trend Cycle";case e.QStick:return"QStick";case e.STARC:return"Stoller Average Range Channel";case e.CenterOfGravity:return"Center Of Gravity";case e.CoppockCurve:return"Coppock Curve";case e.ChandeForecastOscillator:return"Chande Forecast Oscillator";case e.GopalakrishnanRangeIndex:return"Gopalakrishnan Range Index";case e.IntradayMomentumIndex:return"Intraday Momentum Index";case e.KlingerVolumeOscillator:return"Klinger Volume Oscillator";case e.PrettyGoodOscillator:return"Pretty Good Oscillator";
case e.RAVI:return"RAVI";case e.RandomWalkIndex:return"Random Walk Index";case e.TwiggsMoneyFlow:return"Twiggs Money Flow";case e.IchimokuCloud:return"Ichimoku Cloud";case e.DBox:return"Darvas Box";case e.McGinleysDynamic:return"McGinleys Dynamic";case e.MarketPriceProfile:return"Market Price Profile";case e.TrendSignal:return"Trend Signal";case e.BoomVolume:return"Boom Volume";case e.MSTOI:return"MST OI";case e.Unknown:return"";default:return null}};e.isEnableSimulateIndicator=function(k){return k==
e.SimpleMovingAverage||k==e.ExponentialMovingAverage||k==e.TimeSeriesMovingAverage||k==e.TriangularMovingAverage||k==e.VariableMovingAverage||k==e.VIDYA||k==e.WellesWilderSmoothing||k==e.WeightedMovingAverage||k==e.MACD||k==e.RelativeStrengthIndex||k==e.TrendSignal};e.Signal={NO_SIGNAL:0,BUY:1,SELL:2}})(TASdk||(TASdk={}));
(function(e){var k=function(){function g(){this._m_values=[];this.recordCount=0}g.prototype.initialize=function(c,a){this.name=a;this.recordCount=c;this._m_values=Array(c+1);for(c=0;c<this._m_values.length;c++)this._m_values[c]=0};g.prototype.setValue=function(c,a){this._m_values[c]=a};g.prototype.value=function(c){return 0<c&&c<this._m_values.length?this._m_values[c]:e.Const.nullValue};return g}();e.Field=k})(TASdk||(TASdk={}));
(function(e){var k=function(){function g(){this._m_FieldNav=[]}g.prototype.addField=function(c){this._m_FieldNav.push(c)};g.prototype.getIndex=function(c){for(var a=0;a<this._m_FieldNav.length;a++)if(this._m_FieldNav[a].name===c)return a;return-1};g.prototype.renameField=function(c,a){c=this.getIndex(c);-1!==c&&(this._m_FieldNav[c].name=a)};g.prototype.removeField=function(c){c=this.getIndex(c);-1!==c&&this._m_FieldNav.splice(c,1)};g.prototype.value=function(c,a){c=this.getIndex(c);return-1!==c?this._m_FieldNav[c].value(a):
-1};g.prototype.getField=function(c){c=this.getIndex(c);return-1!==c?this._m_FieldNav[c]:new e.Field};g.prototype.getFieldByIndex=function(c){return-1!==c&&c<this._m_FieldNav.length?this._m_FieldNav[c]:new e.Field};g.prototype.copyField=function(c,a){a=this.getIndex(a);if(-1!==a){a=this._m_FieldNav[a];for(var b=a.recordCount,d=1;d<b+1;d++)c.setValue(d,a.value(d))}};g.prototype.getName=function(c){return 0<=c&&c<this._m_FieldNav.length?this._m_FieldNav[c].name:""};g.prototype.getFieldCount=function(){return this._m_FieldNav.length};
return g}();e.Recordset=k})(TASdk||(TASdk={}));
(function(e){var k=function(){function g(){}g.prototype.simpleMovingAverage=function(c,a,b){var d,f,h=new e.Recordset,l=c.recordCount;var m=new e.Field;m.initialize(l,b);for(var q=b=d=a+1;q<l+1;q++){d=0;for(f=1;f<a+1;f++)d+=c.value(b),b--;b+=a;d/=a;m.setValue(b,d);b++}h.addField(m);return h};g.prototype.simulateSimpleMovingAverage=function(c,a,b){b=void 0===b?!1:b;var d=new e.Recordset;if(null==c||0==c.getFieldCount())return d;var f=new e.Field,h=new e.Field,l=c.getFieldByIndex(0).recordCount;f.initialize(l,
"BUY_SIGNAL");h.initialize(l,"SELL_SIGNAL");c=c.getField("Indicator");var m=a.getField("Close"),q=e.Signal.NO_SIGNAL;for(a=1;a<l+1;a++)if(m.value(a)!=e.Const.nullValue&&c.value(a)!=e.Const.nullValue){var p=m.value(a)>c.value(a)?b?e.Signal.SELL:e.Signal.BUY:b?e.Signal.BUY:e.Signal.SELL;q==e.Signal.NO_SIGNAL?q=p:q!=p&&(q=p,p==e.Signal.BUY?f.setValue(a,e.Signal.BUY):h.setValue(a,e.Signal.SELL))}null!=d&&(d.addField(f),d.addField(h));return d};g.prototype.exponentialMovingAverage=function(c,a,b){var d=
0,f=new e.Recordset,h=c.recordCount;var l=new e.Field;l.initialize(h,b);var m=2/(a+1);for(b=1;b<a+1;b++)d+=c.value(b);d/=a;d=c.value(b)*(1-m)+d*m;l.setValue(a,d);for(b=a+1;b<h+1;b++)d=l.value(b-1)*(1-m)+c.value(b)*m,l.setValue(b,d);f.addField(l);return f};g.prototype.timeSeriesMovingAverage=function(c,a,b){var d=new e.LinearRegression,f=c.recordCount;var h=new e.Field;h.initialize(f,b);a=d.regression(c,a);for(b=1;b<f+1;b++)c=a.value("Forecast",b),h.setValue(b,c);a.addField(h);return a};g.prototype.variableMovingAverage=
function(c,a,b){var d=new e.Oscillator,f=c.recordCount;var h=new e.Field;h.initialize(f,b);a=d.chandeMomentumOscillator(c,a,"CMO");for(b=2;b<f+1;b++){var l=h.value(b-1);d=a.value("CMO",b)/100;var m=c.value(b);0>d&&(d*=-1);d=d*m+(1-d)*l;h.setValue(b,d)}a.addField(h);return a};g.prototype.triangularMovingAverage=function(c,a,b){var d,f,h=new e.Recordset;var l=c.recordCount;var m=new e.Field;m.initialize(l,"MA1");var q=new e.Field;q.initialize(l,b);if(0<a%2)var p=b=parseInt(a/2,10)+1;else b=a/2,p=b+
1;var r=d=a+1;for(a=d;a<l+1;a++){var v=0;for(f=1;f<b+1;f++)v+=c.value(r),r--;r+=parseInt(b,10);v/=b;m.setValue(r,v);r++}for(a=r=d;a<l+1;a++){v=0;for(f=1;f<p+1;f++)v+=m.value(r),r--;r+=parseInt(p,10);v/=p;q.setValue(r,v);r++}h.addField(q);return h};g.prototype.weightedMovingAverage=function(c,a,b){var d,f=0,h,l,m=new e.Recordset;var q=c.recordCount;var p=new e.Field;p.initialize(q,b);for(h=1;h<a+1;h++)f+=h;for(l=b=d=a+1;l<q+1;l++){d=0;for(h=a;0<h;h--)d+=h*c.value(b),b--;b+=a;d/=f;p.setValue(b,d);b++}m.addField(p);
return m};g.prototype.VIDYA=function(c,a,b,d){var f=new e.LinearRegression;var h=c.recordCount;var l=new e.Field;l.initialize(h,d);var m=f.regression(c,a);var q=2;for(a=2;a<h+1;a++)f=c.value(q-1),d=m.value("RSquared",q)*b,l.setValue(q,d*c.value(q)+(1-d)*f),q++;m.addField(l);return m};g.prototype.wellesWilderSmoothing=function(c,a,b){var d=new e.Recordset;var f=c.recordCount;var h=new e.Field;h.initialize(f,b);for(b=2;b<f+1;++b){var l=h.value(b-1)+1/a*(c.value(b)-h.value(b-1));h.setValue(b,l)}d.addField(h);
return d};g.prototype.mcGinleysDynamic=function(c,a,b){var d=new e.Recordset,f=new g,h=c.recordCount;var l=new e.Field;l.initialize(h,b);a=f.exponentialMovingAverage(c,a,"MA");for(b=2;b<=h;b++)f=a.value("MA",b-1)+(c.value(b)-a.value("MA",b-1))/(c.value(b)/a.value("MA",b-1)*125),l.setValue(b,f);d.addField(l);return d};g.prototype.movingAverageSwitch=function(c,a,b,d){var f=null;switch(b){case 0:f=this.simpleMovingAverage(c,a,d);break;case 1:f=this.exponentialMovingAverage(c,a,d);break;case 2:f=this.timeSeriesMovingAverage(c,
a,d);break;case 3:f=this.triangularMovingAverage(c,a,d);break;case 4:f=this.variableMovingAverage(c,a,d);break;case 7:f=this.weightedMovingAverage(c,a,d);break;case 5:f=this.VIDYA(c,a,.65,d);break;case 6:f=this.wellesWilderSmoothing(c,a,d)}return f};return g}();e.MovingAverage=k})(TASdk||(TASdk={}));
(function(e){var k=function(){function g(){}g.prototype.movingAverageEnvelope=function(c,a,b,d){var f=new e.MovingAverage;var h=c.recordCount;if(b<e.Const.mA_START||b>e.Const.mA_END||1>a||a>h||0>d||100<d)return null;var l=new e.Field;l.initialize(h,"Envelope Top");var m=new e.Field;m.initialize(h,"Envelope Bottom");c=f.movingAverageSwitch(c,a,b,"Envelope Median");f=1;d/=100;for(a=1;a<h+1;a++)b=c.value("Envelope Median",f),l.setValue(f,b+b*d),b=c.value("Envelope Median",f),m.setValue(f,b-b*d),f++;
null!=c&&(c.addField(l),c.addField(m));return c};g.prototype.highLowBands=function(c,a,b,d){var f=new e.MovingAverage,h=new e.Recordset;if(6>d||d>c.recordCount)return null;c=f.VIDYA(c,d,.8,"High Low Bands Top");b=f.VIDYA(b,parseInt(d/2,10),.8,"High Low Bands Median");a=f.VIDYA(a,d,.8,"High Low Bands Bottom");h.addField(c.getField("High Low Bands Top"));h.addField(b.getField("High Low Bands Median"));h.addField(a.getField("High Low Bands Bottom"));c.removeField("High Low Bands Top");b.removeField("High Low Bands Median");
a.removeField("High Low Bands Bottom");return h};g.prototype.fractalChaosBands=function(c,a){var b=new e.MovingAverage,d=new e.Recordset,f=c.getFieldByIndex(0).recordCount,h;1>a&&(a=100);var l=new e.Field;l.initialize(f,"Fractal High");var m=new e.Field;m.initialize(f,"Low High");(new e.Field).initialize(f,"HLM");var q=c.getField("High");c=c.getField("Low");var p=new e.Field;p.initialize(f,"FR");var r=new e.Field;r.initialize(f,"High 1");var v=new e.Field;v.initialize(f,"High 2");var u=new e.Field;
u.initialize(f,"High 3");var t=new e.Field;t.initialize(f,"High 4");var w=new e.Field;w.initialize(f,"Low 1");var x=new e.Field;x.initialize(f,"Low 2");var y=new e.Field;y.initialize(f,"Low 3");var z=new e.Field;z.initialize(f,"Low 4");for(h=5;h<f+1;++h)r.setValue(h,q.value(h-4)),w.setValue(h,c.value(h-4)),v.setValue(h,q.value(h-3)),x.setValue(h,c.value(h-3)),u.setValue(h,q.value(h-2)),y.setValue(h,c.value(h-2)),t.setValue(h,q.value(h-1)),z.setValue(h,c.value(h-1));for(h=1;h<f+1;++h)l.setValue(h,
(q.value(h)+c.value(h))/3);h=b.simpleMovingAverage(l,a,"Fractal High");l=h.getField("Fractal High");h.removeField("Fractal High");h=b.simpleMovingAverage(m,a,"Fractal Low");m=h.getField("Fractal Low");h.removeField("Fractal Low");for(h=1;h<f+1;++h)l.setValue(h,u.value(h)+l.value(h)),m.setValue(h,y.value(h)-m.value(h));for(h=2;h<f+1;++h)u.value(h)>r.value(h)&&u.value(h)>v.value(h)&&u.value(h)>=t.value(h)&&u.value(h)>=q.value(h)?p.setValue(h,l.value(h)):p.setValue(h,0),p.value(h)||(y.value(h)<w.value(h)&&
y.value(h)<x.value(h)&&y.value(h)<=z.value(h)&&y.value(h)<=c.value(h)?p.setValue(h,m.value(h)):p.setValue(h,0)),l.value(h)===p.value(h)?l.setValue(h,u.value(h)):l.setValue(h,l.value(h-1)),m.value(h)===p.value(h)?m.setValue(h,y.value(h)):m.setValue(h,m.value(h-1));for(h=2;h<f+1;++h)m.value(h)||m.setValue(h,e.Const.nullValue),l.value(h)||l.setValue(h,e.Const.nullValue);d.addField(l);d.addField(m);return d};g.prototype.primeNumberBands=function(c,a){var b=new e.Recordset,d=c.recordCount,f,h=new e.Field;
h.initialize(d,"Prime Bands Top");var l=new e.Field;l.initialize(d,"Prime Bands Bottom");var m=new e.General,q,p,r=0,v=0;for(f=1;f<=d;++f){for(q=p=a.value(f);1<q;--q)if(m.isPrime(q)){v=q;break}l.setValue(f,v);for(q=p=c.value(f);q<2*p;++q)if(m.isPrime(q)){r=q;break}h.setValue(f,r)}b.addField(h);b.addField(l);return b};g.prototype.keltner=function(c,a,b,d,f){var h=new e.Recordset,l=c.getFieldByIndex(0).recordCount,m=new e.Field;m.initialize(l,f+" Top");var q=new e.Field;q.initialize(l,f+" Bottom");
var p=(new e.Oscillator).trueRange(c,"atr").getField("atr"),r=new e.MovingAverage;p=r.simpleMovingAverage(p,a,"atr").getField("atr");c=r.movingAverageSwitch(c.getField("Close"),a,d,f+" Median").getField(f+" Median");for(a=1;a<l+1;a++)d=b*p.value(a),m.setValue(a,c.value(a)+d),q.setValue(a,c.value(a)-d);h.addField(m);h.addField(c);h.addField(q);return h};g.prototype.ichimoku=function(c,a,b,d){var f=new e.Recordset,h=c.getFieldByIndex(0).recordCount,l=new e.Field,m=new e.Field,q=new e.Field,p=new e.Field,
r=new e.Field,v=c.getField("High"),u=c.getField("Low");c=c.getField("Close");l.initialize(h,"Ichimoku Tenkan Sen");m.initialize(h,"Ichimoku Kijun Sen");q.initialize(h,"Ichimoku Chikou Span");p.initialize(h,"Ichimoku Senkou Span B");r.initialize(h,"Ichimoku Senkou Span A");for(h+=1;0<=h;h--){for(var t=u.value(h),w=v.value(h),x=c.value(h),y=null,z=null,A=null,C=0;C<d&&0<=h-C;C++){var B=C+1;t=Math.min(t,u.value(h-C));w=Math.max(w,v.value(h-C));y=B===a?(t+w)/2:y;z=B===b?(t+w)/2:z;A=B===d?(t+w)/2:A}t=
null!==y&&null!==z?(y+z)/2:null;l.setValue(h,y);m.setValue(h,z);q.setValue(h,x);p.setValue(h,A);r.setValue(h,t)}f.addField(l);f.addField(m);f.addField(q);f.addField(p);f.addField(r);return f};g.prototype.darvasbox=function(c,a){var b=new e.Recordset,d=c.getFieldByIndex(1).recordCount,f=new e.Field,h=new e.Field,l=c.getField("High");c=c.getField("Low");f.initialize(d,"Top Line");h.initialize(d,"Bottom Line");for(d+=1;0<=d;d--){for(var m=c.value(d),q=l.value(d),p=null,r=null,v=0;v<a&&1<=d-v;v++){var u=
v+1;q=Math.max(q,l.value(d-v));m=Math.min(m,c.value(d-v));p=u===a?q:p;r=a?m:r}f.setValue(d,p);h.setValue(d,r)}b.addField(f);b.addField(h);return b};g.prototype.bollingerBands=function(c,a,b,d){var f=new e.MovingAverage,h,l;var m=c.recordCount;if(d<e.Const.mA_START||d>e.Const.mA_END||1>a||a>m||0>b||100<b)return null;var q=new e.Field;q.initialize(m,"Bollinger Band Bottom");var p=new e.Field;p.initialize(m,"Bollinger Band Top");d=f.movingAverageSwitch(c,a,d,"Bollinger Band Median");for(l=f=h=a+1;l<
m+1;l++){var r=0;var v=d.value("Bollinger Band Median",f);for(h=1;h<a+1;h++)r+=(c.value(f)-v)*(c.value(f)-v),f--;f+=a;v=b*Math.sqrt(r/a);q.setValue(f,d.value("Bollinger Band Median",f)-v);p.setValue(f,d.value("Bollinger Band Median",f)+v);f++}null!=d&&(d.addField(q),d.addField(p));return d};g.prototype.simulateBollingerBands=function(c){var a=new e.Recordset;if(null==c||0==c.getFieldCount())return a;var b=new e.Field,d=new e.Field,f=c.getFieldByIndex(0).recordCount;b.initialize(f,"BUY_SIGNAL");d.initialize(f,
"SELL_SIGNAL");c.getField("Bollinger Band Top");c.getField("Bollinger Band Median");c.getField("Bollinger Band Bottom");var h=1;for(c=1;c<f+1;c++)0==c%2?b.setValue(h,e.Signal.BUY):d.setValue(h,e.Signal.SELL),h++;null!=a&&(a.addField(b),a.addField(d));return a};g.prototype.marketPriceProfile=function(c,a,b,d,f){var h=new e.Recordset,l=new e.Field,m=new e.Field,q=new e.Field,p=0,r=0;r=0;p=c.getFieldByIndex(0).recordCount;l.initialize(p,"POC");m.initialize(p,"VAH");q.initialize(p,"VAL");var v=c.getField("High"),
u=c.getField("Low");c=c.getField("Date");if(0>=a||100<a||0>=b||0>d)return null;var t=r=1,w=0,x=0,y=0,z=1,A=-1;b*=100;for(var C=0,B=[],D=[],E=[],F=[];r<p+1;r++)if(date=c.value(t),0!=date){var K=moment(date.getTime());var J=K.dayOfYear();K=K.weekday();0==y&&(y=J);-1==A&&(A=K);var L=!1;1==f&&y!=J?L=!0:2==f&&y!=J&&(7<=J-y||A>=K||y>J&&7<=365-y+J)&&(L=!0);a:for(;;){if(!L){w=Math.round(100*v.value(t));for(dbPrice=x=Math.round(100*u.value(t));dbPrice<=w;){var G=!1;for(x=0;x<B.length;x++)B[x].price==dbPrice&&
(B[x].count++,G=!0);G||B.push({price:dbPrice,count:1});dbPrice+=b}r==p&&(L=!0);if(!L){t++;break a}}L=!1;y=J;A=K;B.sort(function(Q,R){return Q.price>R.price?1:-1});w=x=G=w=0;var I=-1,H=-1;x=-1;var M=0,N=0,O=G=0;for(x=0;x<B.length;x++)B[x].count>w&&(I=x,w=B[x].count),G+=B[x].count;w=B[I].price;H=I+1;x=I-1;b:for(;;){if(1<x){N=B[x].count+B[x-1].count;var P=2}else 0==x?(N=B[x].count,P=0):(P=N=0,O+=G);H<B.length-1?(M=B[H].count+B[H+1].count,I=2):H==B.length-1?(M=B[H].count,I=0):(I=M=0,O+=G);M<N?(O+=N,x-=
P):(O+=M,H+=I);if(G*a/100<=O)break b}H>=B.length&&(H=B.length-1);0>x&&(x=0);G=B[H].price;x=B[x].price;w/=100;G/=100;x/=100;B=[];D.push(w);E.push(G);F.push(x);for(n=z;n<r+2;n++)0==d?(l.setValue(n,w),m.setValue(n,G),q.setValue(n,x)):C<d?(l.setValue(n,0),m.setValue(n,0),q.setValue(n,0)):(l.setValue(n,D[C-d]),m.setValue(n,E[C-d]),q.setValue(n,F[C-d]));z=r;C++;if(r==p)break a}}null!=h&&(h.addField(l),h.addField(m),h.addField(q));return h};return g}();e.Bands=k})(TASdk||(TASdk={}));
(function(e){var k=function(){function g(){}g.prototype.regression=function(c,a){var b,d,f,h=0,l=new e.Recordset,m=c.recordCount,q=new e.Field;q.initialize(m,"Slope");var p=new e.Field;p.initialize(m,"Intercept");var r=new e.Field;r.initialize(m,"Forecast");var v=new e.Field;v.initialize(m,"RSquared");for(var u=a;u<m+1;u++){var t=a;var w=Array(t+1);var x=u-a+1;for(d=1;d<a+1;d++){var y=c.value(x);w[d]=y;x++}var z=x=f=d=b=0;for(y=1;y<t+1;y++)b+=y,d+=w[y],f+=y*y,x+=w[y]*w[y],z+=w[y]*y;y=t;t=z-b*d/y;
w=f-b*b/y;x-=d*d/y;b=t/w;d=1/y*d-parseInt(y/2,10)*b;y=y*b+d;t*t&&w*x&&(h=t*t/(w*x));u>a&&(q.setValue(u,b),p.setValue(u,d),r.setValue(u,y),v.setValue(u,h))}l.addField(q);l.addField(p);l.addField(r);l.addField(v);return l};g.prototype.timeSeriesForecast=function(c,a,b){c=this.regression(c,a);c.renameField("Forecast",b);c.removeField("Slope");c.removeField("Intercept");c.removeField("RSquared");return c};return g}();e.LinearRegression=k})(TASdk||(TASdk={}));
(function(e){var k=function(){function g(){}g.prototype.chandeMomentumOscillator=function(c,a,b){var d=new e.Recordset,f,h;var l=c.recordCount;var m=new e.Field;m.initialize(l,b);for(b=a+2;b<l+2;b++){var q=b-a;var p=h=0;for(f=1;f<a+1;f++){var r=c.value(q-1);var v=c.value(q);v>r?h+=v-r:v<r&&(p+=r-v);q++}f=h+p?100*(h-p)/(h+p):e.Const.nullValue;m.setValue(q-1,f)}d.addField(m);return d};g.prototype.TRIX=function(c,a,b){var d=new e.MovingAverage,f=new e.Recordset;var h=d.exponentialMovingAverage(c,a,"EMA1");
var l=h.getField("EMA1");h.removeField("EMA1");h=d.exponentialMovingAverage(l,a,"EMA2");l=h.getField("EMA2");h.removeField("EMA2");h=d.exponentialMovingAverage(l,a,"EMA3");l=h.getField("EMA3");h.removeField("EMA3");a=c.recordCount;c=new e.Field;c.initialize(a,b);for(b=h=2;b<a+1;b++){if(d=l.value(h-1))d=(l.value(h)-d)/d*100,c.setValue(h,d);h++}f.addField(c);return f};g.prototype.ultimateOscillator=function(c,a,b,d,f){var h=new e.Recordset,l,m,q,p,r,v;var u=c.getFieldByIndex(0).recordCount;var t=new e.Field;
t.initialize(u,f);f=a;b>f&&(f=b);d>f&&(f=d);for(f+=2;f<u+2;f++){var w=v=r=p=q=m=0;var x=f-a;for(l=1;l<a+1;l++){var y=c.getField("Low").value(x)<c.getField("Close").value(x-1)?c.getField("Low").value(x):c.getField("Close").value(x-1);y=c.getField("Close").value(x)-y;var z=c.getField("High").value(x)-c.getField("Low").value(x);z<c.getField("High").value(x)-c.getField("Close").value(x-1)&&(z=c.getField("High").value(x)-c.getField("Close").value(x-1));z<c.getField("Close").value(x-1)-c.getField("Low").value(x)&&
(z=c.getField("Close").value(x-1)-c.getField("Low").value(x));m+=y;r+=z;x++}x-=b;for(l=1;l<b+1;l++)y=c.getField("Low").value(x)<c.getField("Close").value(x-1)?c.getField("Low").value(x):c.getField("Close").value(x-1),y=c.getField("Close").value(x)-y,z=c.getField("High").value(x)-c.getField("Low").value(x),z<c.getField("High").value(x)-c.getField("Close").value(x-1)&&(z=c.getField("High").value(x)-c.getField("Close").value(x-1)),z<c.getField("Close").value(x-1)-c.getField("Low").value(x)&&(z=c.getField("Close").value(x-
1)-c.getField("Low").value(x)),q+=y,v+=z,x++;x-=d;for(l=1;l<d+1;l++)y=c.getField("Low").value(x)<c.getField("Close").value(x-1)?c.getField("Low").value(x):c.getField("Close").value(x-1),y=c.getField("Close").value(x)-y,z=c.getField("High").value(x)-c.getField("Low").value(x),z<c.getField("High").value(x)-c.getField("Close").value(x-1)&&(z=c.getField("High").value(x)-c.getField("Close").value(x-1)),z<c.getField("Close").value(x-1)-c.getField("Low").value(x)&&(z=c.getField("Close").value(x-1)-c.getField("Low").value(x)),
p+=y,w+=z,x++;l=(m/r*4+q/v*2+p/w)/7*100;t.setValue(x-1,l)}h.addField(t);return h};g.prototype.verticalHorizontalFilter=function(c,a,b){var d=new e.Recordset,f,h;var l=c.recordCount;var m=new e.Field;m.initialize(l,b);for(b=f=a+2;f<l+2;f++){var q=0;var p=c.value(b);b=f-a;for(h=1;h<a+1;h++)c.value(b)<p?p=c.value(b):c.value(b)>q&&(q=c.value(b)),b++;var r=0;b=f-a;for(h=1;h<a+1;h++){var v=c.value(b)-c.value(b-1);0>v&&(v*=-1);r+=v;b++}v=(q-p)/r;0>v&&(v*=-1);m.setValue(b-1,v)}d.addField(m);return d};g.prototype.williamsPctR=
function(c,a,b){var d=new e.Recordset,f,h;var l=c.getFieldByIndex(0).recordCount;var m=new e.Field;m.initialize(l,b);for(b=f=a+2;f<l+2;f++){var q=0;var p=c.getField("Low").value(b);b=f-a;for(h=1;h<a+1;h++)c.getField("High").value(b)>q&&(q=c.getField("High").value(b)),c.getField("Low").value(b)<p&&(p=c.getField("Low").value(b)),b++;m.setValue(b-1,(q-c.getField("Close").value(b-1))/(q-p)*-100)}d.addField(m);return d};g.prototype.williamsAccumulationDistribution=function(c,a){var b=new e.Recordset;var d=
c.getFieldByIndex(0).recordCount;var f=new e.Field;f.initialize(d,a);var h=2;for(a=1;a<d;a++){var l=c.getField("Close").value(h-1);c.getField("High").value(h)>l&&(l=c.getField("High").value(h));var m=c.getField("Close").value(h-1);c.getField("Low").value(h)<m&&(m=c.getField("Low").value(h));l=c.getField("Close").value(h)>c.getField("Close").value(h-1)?c.getField("Close").value(h)-m:c.getField("Close").value(h)<c.getField("Close").value(h-1)?c.getField("Close").value(h)-l:0;f.setValue(h,l+f.value(h-
1));h++}b.addField(f);return b};g.prototype.volumeOscillator=function(c,a,b,d,f){var h=new e.MovingAverage,l=new e.Recordset,m=0;var q=c.recordCount;var p=new e.Field;p.initialize(q,f);a=h.simpleMovingAverage(c,a,"MA1");c=h.simpleMovingAverage(c,b,"MA2");for(b=h=1;b<q+1;b++)1===d?m=a.getField("MA1").value(h)-c.getField("MA2").value(h):2===d&&0<c.getField("MA2").value(h)&&(m=(a.getField("MA1").value(h)-c.getField("MA2").value(h))/c.getField("MA2").value(h)*100),p.setValue(b,m),h++;l.addField(p);return l};
g.prototype.chaikinVolatility=function(c,a,b,d,f){var h=new e.MovingAverage,l=new e.Recordset,m,q=0;var p=c.getFieldByIndex(0).recordCount;var r=new e.Field;r.initialize(p,f);var v=new e.Field;v.initialize(p,"HL");for(m=f=1;m<p+1;m++)v.setValue(f,c.getField("High").value(f)-c.getField("Low").value(f)),f++;c=h.movingAverageSwitch(v,a,d,"HLMA");for(f=m=b+1;m<p+1;m++)a=c.getField("HLMA").value(f-b),d=c.getField("HLMA").value(f),a&&d&&(q=(a-d)/a*-100),r.setValue(m,q),f++;l.addField(r);return l};g.prototype.stochasticOscillator=
function(c,a,b,d,f){var h=new e.MovingAverage,l=new e.Recordset,m,q;var p=c.getFieldByIndex(0).recordCount;var r=new e.Field;r.initialize(p,"%K");for(m=a+2;m<p+2;m++){var v=m-a;var u=c.getField("High").value(v);var t=c.getField("Low").value(v);for(q=1;q<a+1;q++)c.getField("High").value(v)>u&&(u=c.getField("High").value(v)),c.getField("Low").value(v)<t&&(t=c.getField("Low").value(v)),v++;q=(c.getField("Close").value(v-1)-t)/(u-t)*100;r.setValue(v-1,q)}1<b?l=h.movingAverageSwitch(r,b,f,"%K"):l.addField(r);
r=l.getField("%K");c=h.movingAverageSwitch(r,d,f,"%D");null!=c&&(l.addField(c.getField("%D")),c.removeField("%D"));return l};g.prototype.priceOscillator=function(c,a,b,d,f){var h=new e.Recordset,l=new e.MovingAverage;if(a<=b)return h;var m=c.recordCount;var q=new e.Field;q.initialize(m,f);f=l.movingAverageSwitch(c,a,d,"MA");c=l.movingAverageSwitch(c,b,d,"MA");for(a=b=a>b?a:b>a?b:a;b<m+1;b++)d=f.value("MA",a),d=0===d?0:(c.value("MA",a)-f.value("MA",a))/d*100,q.setValue(a,d),a++;h.addField(q);return h};
g.prototype.easeOfMovement=function(c,a,b,d){var f=new e.MovingAverage,h=new e.Recordset,l,m=0;var q=c.getFieldByIndex(0).recordCount;var p=new e.Field;p.initialize(q,d);var r=2;for(l=2;l<q+1;l++){var v=c.value("High",r);var u=c.value("Low",r);var t=(v+u)/2-(c.value("High",r-1)+c.value("Low",r-1))/2;(v-=u)&&(m=c.value("Volume",r)/v);t/=m;p.setValue(r,1E4*t);r++}c=f.movingAverageSwitch(p,a,b,"MA");null!=c&&(p=c.getField("MA"),p.name=d,c.removeField(d));h.addField(p);return h};g.prototype.detrendedPriceOscillator=
function(c,a,b,d){var f=new e.MovingAverage,h=new e.Recordset;var l=c.recordCount;var m=new e.Field;m.initialize(l,d);b=f.movingAverageSwitch(c,a,b,"MA");for(d=f=a+1;f<l+1;f++)m.setValue(d,c.value(d)-b.value("MA",d-(a/2+1))),d++;h.addField(m);return h};g.prototype.parabolicSAR=function(c,a,b,d,f){var h=new e.Recordset;var l=c.recordCount;var m=new e.Field;m.initialize(l,f);var q=c.value(1);var p=a.value(1);if(c.value(2)-c.value(1)<a.value(2)-a.value(1)){var r=q;f=-1}else r=p,f=1;var v=b;var u=r;var t=
p;var w=q;var x=t;var y=b;for(p=2;p<l+1;++p)1===f?(c.value(p)>q&&(q=c.value(p),y<d&&(y+=b)),u=r+v*(w-r),a.value(p)<u&&(f=-1,y=b,u=w,q=0,t=a.value(p))):-1===f&&(a.value(p)<t&&(t=a.value(p),y<d&&(y+=b)),u=r+v*(x-r),c.value(p)>u&&(f=1,y=b,u=x,t=0,q=c.value(p))),w=q,x=t,r=u,v=y,m.setValue(p,u);h.addField(m);return h};g.prototype.directionalMovementSystem=function(c,a){var b=new e.MovingAverage,d=new e.Recordset,f=new e.Recordset,h;var l=c.getFieldByIndex(0).recordCount;var m=this.trueRange(c,"TR");var q=
m.getField("TR");m.removeField("TR");var p=b.wellesWilderSmoothing(q,a,"TRSum");var r=new e.Field;r.initialize(l,"UpDMI");var v=new e.Field;v.initialize(l,"DnDMI");q=new e.Field;q.initialize(l,"DI-");m=new e.Field;m.initialize(l,"DI+");for(h=2;h<l+1;++h){var u=c.value("High",h)-c.value("High",h-1);var t=c.value("Low",h-1)-c.value("Low",h);0>u&&0>t||u===t?(r.setValue(h,0),v.setValue(h,0)):u>t?(r.setValue(h,u),v.setValue(h,0)):u<t&&(r.setValue(h,0),v.setValue(h,t))}c=b.wellesWilderSmoothing(r,a,"DM+Sum");
b=b.wellesWilderSmoothing(v,a,"DM-Sum");for(h=2;h<l+1;++h)m.setValue(h,100*c.value("DM+Sum",h)/p.value("TRSum",h)),q.setValue(h,100*b.value("DM-Sum",h)/p.value("TRSum",h));b=new e.Field;b.initialize(l,"DX");for(h=2;h<l+1;++h)c=Math.abs(parseInt(m.value(h)-q.value(h),10)),v=m.value(h)+q.value(h),0<c&&0<v&&b.setValue(h,c/v*100);c=new e.Field;c.initialize(l,"ADX");f.addField(c);v=0;for(h=a+1;h<l+1&&h<=2*a;++h)v+=b.value(h);c.setValue(2*a,v/a);for(h=2*a+1;h<l+1;++h)v=(c.value(h-1)*(a-1)+b.value(h))/a,
c.setValue(h,v);c=new e.Field;c.initialize(l,"ADXR");for(h=2*a+1;h<l+1;++h)c.setValue(h,(f.value("ADX",h)+f.value("ADX",h-1))/2);d.addField(f.getField("ADX"));d.addField(c);d.addField(b);d.addField(p.getField("TRSum"));d.addField(q);d.addField(m);f.removeField("ADX");f.removeField("ADXF");p.removeField("TRSum");return d};g.prototype.rainbowOscillator=function(c,a,b,d){var f=new e.MovingAverage,h=new e.Recordset,l,m;var q=c.recordCount;var p=new e.Field;p.initialize(q,d);for(m=2;m<a+1;++m)for(d=f.movingAverageSwitch(c,
a,b,"MA"),l=1;l<q+1;++l){var r=d.value("MA",l);p.setValue(l,c.value(l)-r+p.value(l))}for(l=1;l<q+1;++l)p.value(l),p.setValue(l,p.value(l)/a);h.addField(p);return h};g.prototype.fractalChaosOscillator=function(c,a,b){a=new e.Recordset;var d=c.getFieldByIndex(0).recordCount,f=c.getField("High"),h=c.getField("Low"),l=new e.Field;l.initialize(d,"FR");var m=new e.Field;m.initialize(d,"High 1");var q=new e.Field;q.initialize(d,"High 2");var p=new e.Field;p.initialize(d,"High 3");var r=new e.Field;r.initialize(d,
"High 4");var v=new e.Field;v.initialize(d,"Low 1");var u=new e.Field;u.initialize(d,"Low 2");var t=new e.Field;t.initialize(d,"Low 3");var w=new e.Field;w.initialize(d,"Low 4");for(c=5;c<d+1;++c)m.setValue(c,f.value(c-4)),v.setValue(c,h.value(c-4)),q.setValue(c,f.value(c-3)),u.setValue(c,h.value(c-3)),p.setValue(c,f.value(c-2)),t.setValue(c,h.value(c-2)),r.setValue(c,f.value(c-1)),w.setValue(c,h.value(c-1));for(c=2;c<d+1;++c)p.value(c)>m.value(c)&&p.value(c)>q.value(c)&&p.value(c)>=r.value(c)&&p.value(c)>=
f.value(c)&&l.setValue(c,1),t.value(c)<v.value(c)&&t.value(c)<u.value(c)&&t.value(c)<=w.value(c)&&t.value(c)<=h.value(c)&&l.setValue(c,-1);l.name=b;a.addField(l);return a};g.prototype.primeNumberOscillator=function(c,a){var b=new e.Recordset,d=c.recordCount,f=new e.Field;f.initialize(d,a);var h=new e.General,l,m=0,q=0;for(a=1;a<d+1;++a){var p=c.value(a);10>p&&(p*=10);for(l=p;1<l;--l)if(h.isPrime(l)){q=l;break}for(l=p;l<2*p;++l)if(h.isPrime(l)){m=l;break}Math.abs(p-m)<Math.abs(p-q)?f.setValue(a,p-
m):f.setValue(a,p-q)}b.addField(f);return b};g.prototype.elderRay=function(c,a,b,d){var f=new e.Recordset,h=c.getFieldByIndex(0).recordCount;1>a&&(a=13);var l=new e.Field,m=new e.Field;l.initialize(h,d+" Bull Power");m.initialize(h,d+" Bear Power");var q=c.getField("Close");d=c.getField("High");c=c.getField("Low");b=(new e.MovingAverage).movingAverageSwitch(q,a,b,"ema").getField("ema");for(a+=1;a<h+1;a++)l.setValue(a,d.value(a)-b.value(a)),m.setValue(a,b.value(a)-c.value(a));f.addField(l);f.addField(m);
return f};g.prototype.ehlerFisherTransform=function(c,a,b){var d=new e.Recordset;1>a&&(a=10);var f=c.getFieldByIndex(0).recordCount,h=new e.Field;h.initialize(f,b);var l=new e.Field;l.initialize(f,b+" Trigger");var m=new e.General;c=m.medianPrice(c,"price").getField("price");b=m.HHV(c,a,"maxh").getField("maxh");a=m.LLV(c,a,"minl").getField("minl");var q;m=q=0;for(var p=1;p<f+1;p++){var r=b.value(p),v=a.value(p);q=r!==v?.66*((c.value(p)-v)/(r-v)-.5)+.67*q:0;.99<q&&(q=.999);-.99>q&&(q=-.999);r=.5*Math.log((1+
q)/(1-q))+.5*m;h.setValue(p,r);l.setValue(p,m);m=r}d.addField(h);d.addField(l);return d};g.prototype.schaffTrendCycle=function(c,a,b,d,f,h){var l=new e.Recordset,m=c.recordCount,q=new e.Field;q.initialize(m,"x");var p=new e.Field;p.initialize(m,"x");var r=new e.Field;r.initialize(m,"x");var v=new e.Field;v.initialize(m,h);h=new e.General;d=(new g).MACD(c,2,d,b,f,"x").getField("x");f=h.LLV(d,a,"x").getField("x");c=h.HHV(d,a,"x").getField("x");for(b=1;b<m+1;++b)c.setValue(b,c.value(b)-f.value(b));for(b=
2;b<m+1;++b)0<c.value(b)?q.setValue(b,(d.value(b)-f.value(b))/c.value(b)*100):q.setValue(b,q.value(b-1)),r.setValue(b,r.value(b-1)+.5*(q.value(b)-r.value(b-1)));q=h.LLV(r,a,"x").getField("x");a=h.HHV(r,a,"x").getField("x");for(b=1;b<m+1;++b)a.setValue(b,a.value(b)-q.value(b));for(b=2;b<m+1;++b)0<c.value(b)?p.setValue(b,(r.value(b)-q.value(b))/a.value(b)*100):p.setValue(b,p.value(b-1)),v.setValue(b,v.value(b-1)+.5*(p.value(b)-v.value(b-1)));l.addField(v);return l};g.prototype.centerOfGravity=function(c,
a,b){var d=new e.Recordset,f=c.recordCount,h=new e.Field;h.initialize(f,b);for(b=a+1;b<f+1;++b){for(var l=0,m=0,q=1,p=b-1;p>b-a;--p)l+=c.value(p)*(q+1),m+=c.value(p),q++;h.setValue(b,-1*l/m)}d.addField(h);return d};g.prototype.coppockCurve=function(c,a){var b=c.recordCount,d=new e.Field;d.initialize(b,a);var f=new e.General,h=f.priceROC(c,14,"x").getField("x");c=f.priceROC(c,11,"x").getField("x");for(f=1;f<b+1;++f)d.setValue(f,h.value(f)+c.value(f));return(new e.MovingAverage).weightedMovingAverage(d,
10,a)};g.prototype.chandeForecastOscillator=function(c,a,b){var d=new e.Recordset,f=c.recordCount,h=new e.Field;h.initialize(f,b);b=(new e.LinearRegression).timeSeriesForecast(c,a,"x").getField("x");for(var l=1;l<f+1;++l)h.setValue(l,(c.value(l)-b.value(l))/c.value(l)*100);for(l=1;l<a+1;++l)h.setValue(l,0);d.addField(h);return d};g.prototype.klingerVolumeOscillator=function(c,a,b,d,f,h){var l=c.getFieldByIndex(0).recordCount;(new e.Field).initialize(l,h);var m=c.getField("Volume");c=(new e.General).typicalPrice(c,
"x").getField("x");var q=new e.Field;q.initialize(l,"sv");for(var p=2;p<l+1;p++)c.value(p)>=c.value(p-1)?q.setValue(p,m.value(p)):q.setValue(p,-1*m.value(p));return(new g).MACD(q,a,b,d,f,h)};g.prototype.prettyGoodOscillator=function(c,a,b){var d=new e.Recordset,f=c.getFieldByIndex(0).recordCount,h=new e.Field;h.initialize(f,b);b=c.getField("Close");(new e.Field).initialize(f,"sv");var l=new e.MovingAverage,m=l.simpleMovingAverage(c.getField("Close"),a,"x").getField("x");c=this.trueRange(c,"x").getField("x");
c=l.exponentialMovingAverage(c,a,"x").getField("x");for(l=2;l<f+1;l++)0!==c.value(l)?h.setValue(l,(b.value(l)-m.value(l))/c.value(l)):h.setValue(0,null);for(l=1;l<a+1;++l)h.setValue(l,0);d.addField(h);return d};g.prototype.momentum=function(c,a,b){var d=new e.Recordset,f;var h=c.recordCount;var l=new e.Field;l.initialize(h,b);for(b=f=a+2;f<h+1;f++){var m=c.value(b-a);m=100+(c.value(b)-m)/m*100;l.setValue(b,m);b++}d.addField(l);return d};g.prototype.aroon=function(c,a){var b=new e.Recordset,d,f,h;
var l=c.getFieldByIndex(0).recordCount;var m=new e.Field;m.initialize(l,"Aroon Up");var q=new e.Field;q.initialize(l,"Aroon Down");var p=new e.Field;p.initialize(l,"Aroon Oscillator");for(d=a+1;d<l+1;++d){var r=c.value("High",d);var v=c.value("Low",d);var u=h=d;for(f=d-a;f<d;++f)c.value("High",f)>r&&(r=c.value("High",f),h=f),c.value("Low",f)<v&&(v=c.value("Low",f),u=f);m.setValue(d,(a-(d-h))/a*100);q.setValue(d,(a-(d-u))/a*100);p.setValue(d,m.value(d)-q.value(d))}b.addField(m);b.addField(q);b.addField(p);
return b};g.prototype.trueRange=function(c,a){var b=new e.Recordset,d;var f=c.getFieldByIndex(0).recordCount;var h=new e.Field;h.initialize(f,a);for(d=2;d<f+1;++d){var l=c.value("High",d)-c.value("Low",d);var m=Math.abs(c.value("High",d)-c.value("Close",d-1));var q=Math.abs(c.value("Close",d-1)-c.value("Low",d));var p=0;l>p&&(p=l);m>p&&(p=m);q>p&&(p=q);h.setValue(d,p)}h.name=a;b.addField(h);return b};g.prototype.MACD=function(c,a,b,d,f,h){var l=new e.Recordset,m=new e.MovingAverage;var q=c.recordCount;
var p=new e.Field;p.initialize(q,h);b=m.movingAverageSwitch(c,b,f,"MA");c=m.movingAverageSwitch(c,d,f,"MA");for(d=1;d<q+1;d++){var r=c.value("MA",d)-b.value("MA",d);p.setValue(d,r)}b=m.movingAverageSwitch(p,a,f,"MA");a=b.getField("MA");a.name=h+"Signal";l.addField(p);l.addField(a);b.removeField(h+"Signal");return l};g.prototype.simulateMACD=function(c){var a=new e.Recordset;if(null==c||0==c.getFieldCount())return a;var b=new e.Field,d=new e.Field,f=c.getFieldByIndex(0).recordCount;b.initialize(f,
"BUY_SIGNAL");d.initialize(f,"SELL_SIGNAL");var h=c.getFieldByIndex(0),l=c.getFieldByIndex(1),m=e.Signal.NO_SIGNAL;for(c=1;c<f+1;c++)if(h.value(c)!=e.Const.nullValue&&l.value(c)!=e.Const.nullValue){var q=h.value(c)>l.value(c)?e.Signal.BUY:e.Signal.SELL;m==e.Signal.NO_SIGNAL?m=q:m!=q&&(m=q,q==e.Signal.BUY?b.setValue(c,e.Signal.BUY):d.setValue(c,e.Signal.SELL))}null!=a&&(a.addField(b),a.addField(d));return a};g.prototype.macdHistogram=function(c,a,b,d,f,h){var l=new e.Recordset,m=new e.MovingAverage;
var q=c.recordCount;var p=new e.Field;p.initialize(q,h);b=m.movingAverageSwitch(c,b,f,"MA");var r=m.movingAverageSwitch(c,d,f,"MA");for(c=1;c<q+1;c++)d=r.value("MA",c)-b.value("MA",c),p.setValue(c,d);b=m.movingAverageSwitch(p,a,f,"MA");a=b.getField("MA");a.name=h+"Signal";f=new e.Field;f.initialize(q,h);for(c=1;c<q+1;c++)d=p.value(c)-a.value(c),f.setValue(c,d);l.addField(f);b.removeField(h+"Signal");return l};g.prototype.trendSignal=function(c,a,b,d){var f=c.getField("High");c=c.getField("Low");var h=
new e.Recordset;var l=f.recordCount;var m=new e.Field;m.initialize(l,"Signal");var q=new e.Field;q.initialize(l,d);var p=f.value(1);var r=c.value(1);if(f.value(2)-f.value(1)<c.value(2)-c.value(1)){var v=p;d=-1}else v=r,d=1;var u=a;var t=v;var w=r;var x=p;var y=w;var z=a;for(r=2;r<l+1;++r)1===d?(f.value(r)>p&&(p=f.value(r),z<b&&(z+=a)),t=v+u*(x-v),c.value(r)<t&&(d=-1,z=a,t=x,p=0,w=c.value(r))):-1===d&&(c.value(r)<w&&(w=c.value(r),z<b&&(z+=a)),t=v+u*(y-v),f.value(r)>t&&(d=1,z=a,t=y,w=0,p=f.value(r))),
x=p,y=w,v=t,u=z,m.setValue(r,d),q.setValue(r,1);h.addField(m);h.addField(q);return h};g.prototype.simulateTrendSignal=function(c){var a=new e.Recordset;if(null==c||0==c.getFieldCount())return a;var b=new e.Field,d=new e.Field,f=c.getFieldByIndex(0).recordCount;b.initialize(f,"BUY_SIGNAL");d.initialize(f,"SELL_SIGNAL");var h=c.getField("Signal"),l=e.Signal.NO_SIGNAL;for(c=1;c<f+1;c++)if(h.value(c)!=e.Const.nullValue){var m=0<h.value(c)?e.Signal.BUY:e.Signal.SELL;l==e.Signal.NO_SIGNAL?l=m:l!=m&&(l=
m,m==e.Signal.BUY?b.setValue(c,e.Signal.BUY):d.setValue(c,e.Signal.SELL))}null!=a&&(a.addField(b),a.addField(d));return a};g.prototype.boomVolumeHistogram=function(c,a,b){var d=new e.Recordset;var f=c.recordCount;var h=new e.Field;h.initialize(f,b);for(b=1;b<f+1;b++){var l=c.value(b)-a.value(b);h.setValue(b,l)}d.addField(h);return d};g.prototype.MSTOIHistogram=function(c,a,b){var d=new e.Recordset;var f=c.recordCount;var h=0,l=new e.Field;l.initialize(f,b);for(b=1;b<f+1;b++){var m=c.value(b)-a.value(b);
h+=m;l.setValue(b,h)}d.addField(l);return d};return g}();e.Oscillator=k})(TASdk||(TASdk={}));
(function(e){var k=function(){function g(){}g.prototype.highMinusLow=function(c,a){var b=new e.Recordset;var d=c.getFieldByIndex(0).recordCount;var f=new e.Field;f.initialize(d,a);for(a=1;a<d+1;a++){var h=c.getField("High").value(a)-c.getField("Low").value(a);f.setValue(a,h)}b.addField(f);return b};g.prototype.medianPrice=function(c,a){var b=new e.Recordset;var d=c.getFieldByIndex(0).recordCount;var f=new e.Field;f.initialize(d,a);for(a=1;a<d+1;a++){var h=(c.getField("High").value(a)+c.getField("Low").value(a))/
2;f.setValue(a,h)}b.addField(f);return b};g.prototype.typicalPrice=function(c,a){var b=new e.Recordset;var d=c.getFieldByIndex(0).recordCount;var f=new e.Field;f.initialize(d,a);for(a=1;a<d+1;a++){var h=c.getField("High").value(a);var l=c.getField("Low").value(a),m=c.getField("Close").value(a);h=(h+l+m)/3;f.setValue(a,h)}b.addField(f);return b};g.prototype.weightedClose=function(c,a){var b=new e.Recordset;var d=c.getFieldByIndex(0).recordCount;var f=new e.Field;f.initialize(d,a);for(a=1;a<d+1;a++){var h=
c.getField("High").value(a);var l=c.getField("Low").value(a),m=c.getField("Close").value(a);h=(h+l+2*m)/4;f.setValue(a,h)}b.addField(f);return b};g.prototype.volumeROC=function(c,a,b){var d=new e.Recordset,f,h=0,l;var m=c.recordCount;var q=new e.Field;q.initialize(m,b);for(b=f=a+1;f<m+1;f++)(l=c.value(b-a))&&(h=(c.value(b)-l)/l*100),q.setValue(f,h),b++;d.addField(q);return d};g.prototype.priceROC=function(c,a,b){var d=new e.Recordset,f;var h=c.recordCount;var l=new e.Field;l.initialize(h,b);for(b=
f=a+1;f<h+1;f++){var m=c.value(b-a);m=(c.value(b)-m)/m*100;l.setValue(f,m);b++}d.addField(l);return d};g.prototype.correlationAnalysis=function(c,a){var b,d=0;var f=c.recordCount;for(b=2;b<f+1;b++){var h=c.value(b)-c.value(b-1);var l=a.value(b)-a.value(b-1);0>h&&(h*=-1);0>l&&(l*=-1);d+=h*l}return 1-d/(f-2)};g.prototype.HHV=function(c,a,b){var d=new e.Recordset,f=c.recordCount;var h=new e.Field;h.initialize(f,b);for(var l=a+1;l<=f;++l){b=c.value(l);for(var m=l;m>l-a-1;--m)c.value(m)>b&&(b=c.value(m));
h.setValue(l,b)}d.addField(h);return d};g.prototype.LLV=function(c,a,b){var d=new e.Recordset,f=c.recordCount,h=new e.Field;h.initialize(f,b);for(var l=a+1;l<=f;++l){b=c.value(l);for(var m=l;m>l-a-1;--m)c.value(m)<b&&(b=c.value(m));h.setValue(l,b)}d.addField(h);return d};g.prototype.isPrime=function(c){var a;if(3<c&&!(c%2&&c%3))return!1;var b=5;var d=2;for(a=Math.sqrt(c)+1;b<=a;){if(!(c%b))return!1;b+=d;d=6-d}return!0};g.prototype.standardDeviation=function(c,a,b,d,f){var h=new e.MovingAverage,l;
var m=c.recordCount;var q=new e.Field;q.initialize(m,f);d=h.movingAverageSwitch(c,a,d,"Temp");for(l=f=h=a+1;l<m+1;l++){var p=0;var r=d.value("Temp",f);for(h=1;h<a+1;h++)p+=(c.value(f)-r)*(c.value(f)-r),f--;f+=a;r=b*Math.sqrt(p/a);q.setValue(f,r);f++}null!=d&&d.addField(q);d.removeField("Temp");return d};return g}();e.General=k})(TASdk||(TASdk={}));
(function(e){var k=function(){function g(){}g.prototype.moneyFlowIndex=function(c,a,b){var d=new e.Recordset,f,h;var l=c.getFieldByIndex(0).recordCount;if(1>a||a>l)return null;var m=new e.Field;m.initialize(l,b);for(b=a+2;b<l+2;b++){var q=h=0;var p=b-a;for(f=1;f<a+1;f++){p--;var r=c.getField("High").value(p);var v=c.getField("Low").value(p),u=c.getField("Close").value(p);var t=(r+v+u)/3;p++;var w=c.getField("Volume").value(p);1>w&&(w=1);r=c.getField("High").value(p);v=c.getField("Low").value(p);u=
c.getField("Close").value(p);r=(r+v+u)/3;r>t?h+=r*w:r<t&&(q+=r*w);p++}p--;h&&q&&(f=h/q,f=100-100/(1+f),m.setValue(p,f))}d.addField(m);return d};g.prototype.tradeVolumeIndex=function(c,a,b,d){var f=new e.Recordset,h=0,l=0,m=0;var q=c.recordCount;var p=new e.Field;p.initialize(q,d);var r=2;for(d=2;d<q+1;d++){var v=c.value(r)-c.value(r-1);v>b?h=1:v<-b&&(h=-1);v<=b&&v>=-b&&(h=l);l=h;1===h?m+=a.value(r):-1===h&&(m-=a.value(r));m/=1E4;p.setValue(r,m);r++}f.addField(p);return f};g.prototype.swingIndex=function(c,
a,b){var d=new e.Recordset,f=0;var h=c.getFieldByIndex(0).recordCount;if(0>=a)return null;var l=new e.Field;l.initialize(h,b);var m=2;for(b=2;b<h+1;b++){var q=c.getField("Open").value(m-1);var p=c.getField("Open").value(m);c.getField("High").value(m-1);var r=c.getField("High").value(m);c.getField("Low").value(m-1);var v=c.getField("Low").value(m);var u=c.getField("Close").value(m-1);var t=c.getField("Close").value(m);var w=Math.abs(r-u)>Math.abs(v-u)?Math.abs(r-u):Math.abs(v-u)>Math.abs(r-u)?Math.abs(v-
u):Math.abs(r-u);var x=Math.abs(r-u);var y=Math.abs(v-u);var z=Math.abs(r-v);x>y&&x>z?f=Math.abs(r-u)-.5*Math.abs(v-u)+.25*Math.abs(u-q):y>x&&y>z?f=Math.abs(v-u)-.5*Math.abs(r-u)+.25*Math.abs(u-q):z>x&&z>y&&(f=Math.abs(r-v)+.25*Math.abs(u-q));u=0<f&&0<a?50*(t-u+.5*(t-p)+.25*(u-q))/f*w/a:0;l.setValue(m,u);m++}d.addField(l);return d};g.prototype.accumulativeSwingIndex=function(c,a,b){var d=new e.Recordset,f=new g;var h=c.getFieldByIndex(0).recordCount;c=f.swingIndex(c,a,"SI");a=new e.Field;a.initialize(h,
b);var l=2;for(b=2;b<h+1;b++)f=c.value("SI",l)+a.value(l-1),a.setValue(l,f),l++;d.addField(a);return d};g.prototype.comparativeRelativeStrength=function(c,a,b){var d=new e.Recordset;var f=c.recordCount;var h=new e.Field;h.initialize(f,b);var l=1;for(b=1;b<f+1;b++){var m=c.value(l)/a.value(l);1===m&&(m=e.Const.nullValue);h.setValue(l,m);l++}d.addField(h);return d};g.prototype.priceVolumeTrend=function(c,a,b){var d=new e.Recordset;var f=c.recordCount;var h=new e.Field;h.initialize(f,b);var l=2;for(b=
2;b<f+1;b++){var m=c.value(l-1);m=(c.value(l)-m)/m*a.value(l)+h.value(l-1);m/=1E4;h.setValue(l,m);l++}d.addField(h);return d};g.prototype.positiveVolumeIndex=function(c,a,b){var d=new e.Recordset;var f=c.recordCount;var h=new e.Field;h.initialize(f,b);var l=2;h.setValue(1,1);for(b=2;b<f+1;b++){if(a.value(l)>a.value(l-1)){var m=c.value(l-1);m=h.value(l-1)+(c.value(l)-m)/m*h.value(l-1)}else m=h.value(l-1);h.setValue(l,m);l++}d.addField(h);return d};g.prototype.negativeVolumeIndex=function(c,a,b){var d=
new e.Recordset;var f=c.recordCount;var h=new e.Field;h.initialize(f,b);var l=2;h.setValue(1,1);for(b=2;b<f+1;b++){if(a.value(l)<a.value(l-1)){var m=c.value(l-1);m=h.value(l-1)+(c.value(l)-m)/m*h.value(l-1)}else m=h.value(l-1);h.setValue(l,m);l++}d.addField(h);return d};g.prototype.performance=function(c,a){var b=new e.Recordset;var d=c.recordCount;var f=new e.Field;f.initialize(d,a);var h=2;var l=c.value(1);for(a=2;a<d+1;a++){var m=(c.value(h)-l)/l*100;f.setValue(h,m);h++}b.addField(f);return b};
g.prototype.massIndex=function(c,a,b){var d=new e.Recordset,f=new e.General,h=new e.MovingAverage;var l=c.getFieldByIndex(0).recordCount;if(1>a||a>l)return null;var m=new e.Field;m.initialize(l,b);b=f.highMinusLow(c,"HML").getField("HML");c=h.exponentialMovingAverage(b,9,"EMA");b=c.getField("EMA");h=h.exponentialMovingAverage(b,9,"EMA");for(b=2*a+1;b<l+2;b++){var q=0;var p=b-a;for(f=1;f<a+1;f++){var r=h.value("EMA",p);0!==r&&(q+=c.value("EMA",p)/r);p++}p--;m.setValue(p,q)}d.addField(m);return d};
g.prototype.chaikinMoneyFlow=function(c,a,b){var d=new e.Recordset,f,h,l;var m=c.getFieldByIndex(0).recordCount;var q=new e.Field;q.initialize(m,b);for(b=a+1;b<m+1;b++){for(var p=f=h=l=0;p<a;++p){var r=c.value("Close",b-p);var v=c.value("Low",b-p);var u=c.value("High",b-p);r=r-v-(u-r);v=u-v;0!==r&&0!==v&&(f=r/v);h+=f*c.value("Volume",b-p);l+=c.value("Volume",b-p)}f=h/l;q.setValue(b,f)}d.addField(q);return d};g.prototype.commodityChannelIndex=function(c,a,b){var d=new e.General,f=new e.MovingAverage,
h=new e.Recordset,l,m;var q=c.getFieldByIndex(0).recordCount;var p=new e.Field;p.initialize(q,b);c=d.typicalPrice(c,"TP");f=f.simpleMovingAverage(c.getField("TP"),a,"TPMA");for(m=1;m<2*a+1;++m)p.setValue(m,0);for(m=2*a;m<q+1;++m){b=0;for(l=m-a+1;l<m+1;++l)d=Math.abs(c.getField("TP").value(l)-f.getField("TPMA").value(m)),b+=d;b/=a;d=(c.getField("TP").value(m)-f.getField("TPMA").value(m))/(.015*b);p.setValue(m,d)}h.addField(p);return h};g.prototype.stochasticMomentumIndex=function(c,a,b,d,f,h,l){var m=
new e.MovingAverage;l=new e.Recordset;var q=new e.General,p=0;b+=1;var r=c.getFieldByIndex(0).recordCount;var v=new e.Field;v.initialize(r,"%K");var u=q.HHV(c.getField("High"),a,"HHV");var t=new e.Field;t.initialize(r,"HHV");u.copyField(t,"HHV");u=q.LLV(c.getField("Low"),a,"LLV");var w=new e.Field;w.initialize(r,"LLV");u.copyField(w,"LLV");var x=new e.Field;x.initialize(r,"HHLL");for(u=1;u<r+1;++u)p=t.value(u)-w.value(u),x.setValue(u,p);q=new e.Field;q.initialize(r,"CHHLL");for(u=1;u<r+1;++u)p=c.value("Close",
u)-.5*(t.value(u)+w.value(u)),q.setValue(u,p);1<b&&(u=m.movingAverageSwitch(q,b,h,"CHHLL"),u.copyField(q,"CHHLL"));1<d&&(u=m.movingAverageSwitch(q,d,h,"CHHLL"),u.copyField(q,"CHHLL"));1<b&&(u=m.movingAverageSwitch(x,b,h,"HHLL"),u.copyField(x,"HHLL"));1<d&&(u=m.movingAverageSwitch(x,d,h,"HHLL"),u.copyField(x,"HHLL"));for(u=a+1;u<r+1;++u)c=q.value(u),a=.5*x.value(u),c!==a&&a&&(p=c/a*100),v.setValue(u,p);1<f&&(u=m.movingAverageSwitch(v,f,h,"%D"),f=new e.Field,f.initialize(r,"%D"),u.copyField(f,"%D"),
l.addField(f));l.addField(v);return l};g.prototype.elderForceIndex=function(c,a){var b=new e.Recordset,d=c.getFieldByIndex(0).recordCount,f=new e.Field;f.initialize(d,a);a=c.getField("Close");c=c.getField("Volume");for(var h=2;h<d+1;h++)f.setValue(h,(a.value(h-1)-a.value(h))*c.value(h));b.addField(f);return b};g.prototype.elderThermometer=function(c,a){var b=new e.Recordset,d=c.getFieldByIndex(0).recordCount,f=new e.Field;f.initialize(d,a);a=c.getField("High");c=c.getField("Low");for(var h=2;h<d+
1;h++){var l=Math.abs(a.value(h)-a.value(h-1)),m=Math.abs(c.value(h-1)-c.value(h));f.setValue(h,Math.max(l,m))}b.addField(f);return b};g.prototype.marketFacilitationIndex=function(c,a){var b=new e.Recordset,d=c.getFieldByIndex(0).recordCount,f=new e.Field;f.initialize(d,a);a=c.getField("High");var h=c.getField("Low");c=c.getField("Volume");for(var l=2;l<d+1;l++)f.setValue(l,(a.value(l)-h.value(l))/(c.value(l)/1E8));b.addField(f);return b};g.prototype.qStick=function(c,a,b,d){var f=c.getFieldByIndex(0).recordCount,
h=new e.Field;h.initialize(f,d);var l=c.getField("High");c=c.getField("Low");for(var m=1;m<f+1;m++)h.setValue(m,l.value(m)-c.value(m));return(new e.MovingAverage).movingAverageSwitch(h,a,b,d)};g.prototype.gopalakrishnanRangeIndex=function(c,a,b){var d=new e.Recordset,f=c.getFieldByIndex(0).recordCount,h=new e.Field;h.initialize(f,b);var l=new e.General;b=l.HHV(c.getField("High"),a,"x").getField("x");c=l.LLV(c.getField("Low"),a,"x").getField("x");for(l=1;l<f+1;l++)h.setValue(l,Math.log(b.value(l)-
c.value(l))/Math.log(a));for(l=1;l<a+1;l++)h.setValue(l,0);d.addField(h);return d};g.prototype.intradayMomentumIndex=function(c,a){var b=new e.Recordset,d=c.getFieldByIndex(0).recordCount,f=new e.Field;f.initialize(d,a);a=c.getField("Open");c=c.getField("Close");for(var h=0,l=0,m=0,q=0,p=2;p<d+1;p++)c.value(p)>a.value(p)?h=m+(c.value(p)-a.value(p)):l=q+(a.value(p)-c.value(p)),f.setValue(p,h/(h+l)*100),m=h,q=l;b.addField(f);return b};g.prototype.RAVI=function(c,a,b,d){var f=new e.Recordset,h=c.recordCount,
l=new e.Field;l.initialize(h,d);d=new e.MovingAverage;a=d.VIDYA(c,a,.65,"x").getField("x");c=d.VIDYA(c,b,.65,"x").getField("x");for(d=1;d<h+1;d++)l.setValue(d,100*(Math.abs(a.value(d)-c.value(d))/c.value(d)));for(d=1;d<b+1;d++)l.setValue(d,0);f.addField(l);return f};g.prototype.randomWalkIndex=function(c,a,b){var d=new e.Recordset,f=c.getFieldByIndex(0).recordCount,h=new e.Field;h.initialize(f,b+" High");var l=new e.Field;l.initialize(f,b+" Low");b=c.getField("High");var m=c.getField("Low"),q=new e.MovingAverage,
p=new e.Oscillator;c=q.simpleMovingAverage(p.trueRange(c,"x").getField("x"),a,"x").getField("x");for(q=a;q<f+1;q++)for(p=q-1;p>q-a;--p)h.setValue(q,(b.value(q)-m.value(p))/(c.value(p)*Math.sqrt(p))),l.setValue(q,(b.value(p)-m.value(q))/(c.value(p)*Math.sqrt(p)));for(q=1;q<2*a;q++)h.setValue(q,0),l.setValue(q,0);d.addField(h);d.addField(l);return d};g.prototype.trendIntensityIndex=function(c,a,b,d){var f=new e.Recordset,h=c.recordCount,l=new e.Field;l.initialize(h,d);d=new e.MovingAverage;a=d.VIDYA(c,
a,.65,"x").getField("x");c=d.VIDYA(c,b,.65,"x").getField("x");for(d=1;d<h+1;d++)l.setValue(d,100*(Math.abs(a.value(d)-c.value(d))/c.value(d)));for(d=1;d<b+1;d++)l.setValue(d,0);f.addField(l);return f};g.prototype.twiggsMoneyFlow=function(c,a,b){var d=new e.Recordset,f=c.getFieldByIndex(0).recordCount,h=new e.Field;h.initialize(f,b);var l=c.getField("High"),m=c.getField("Low"),q=c.getField("Close"),p=c.getField("Volume"),r=new e.MovingAverage;c=r.exponentialMovingAverage(c.getField("Volume"),a,"x").getField("x");
var v=new e.Field,u=new e.Field;u.initialize(f,"x");v.initialize(f,"x");for(var t=2;t<f+1;t++)v.setValue(t,Math.max(l.value(t),q.value(t-1))),u.setValue(t,Math.min(m.value(t),q.value(t-1)));for(t=2;t<f+1;t++)h.setValue(t,(q.value(t)-u.value(t)-(v.value(t)-q.value(t)))/(v.value(t)-u.value(t))*p.value(t));h=r.exponentialMovingAverage(h,a,b).getField(b);for(t=2;t<f+1;t++)h.setValue(t,h.value(t)/c.value(t));for(t=1;t<a+1;t++)h.setValue(t,0);d.addField(h);return d};g.prototype.onBalanceVolume=function(c,
a,b){var d=new e.Recordset;var f=c.recordCount;var h=new e.Field;h.initialize(f,b);var l=2;for(b=2;b<f+1;b++){var m=c.value(l-1)<c.value(l)?h.value(l-1)+a.value(l):c.value(l)<c.value(l-1)?h.value(l-1)-a.value(l):h.value(l-1);h.setValue(l,m);l++}d.addField(h);return d};g.prototype.historicalVolatility=function(c,a,b,d,f){var h=new e.Recordset,l=new e.General,m;var q=c.recordCount;var p=new e.Field;p.initialize(q,"TEMP");for(m=2;m<q+1;m++){var r=Math.log(c.value(m)/c.value(m-1));p.setValue(m,r)}c=l.standardDeviation(p,
a,d,0,"STDV");for(m=2;m<q+1;m++)r=c.value("STDV",m)*Math.sqrt(b),p.setValue(m,r);p.name=f;h.addField(p);return h};g.prototype.relativeStrengthIndex=function(c,a,b){var d=new e.Recordset,f,h,l=0,m=0,q=0,p=0,r=0;var v=c.recordCount;var u=new e.Field;u.initialize(v,b);b=new e.Field;b.initialize(v,"AU");var t=new e.Field;t.initialize(v,"AD");var w=2;for(h=1;h<a+1;h++)m=l=0,r!==e.Const.nullValue&&(r>c.value(w-1)?(l=c.value(w)-c.value(w-1),q+=l):c.value(w)<c.value(w-1)&&(m=c.value(w-1)-c.value(w),p+=m)),
w++;w--;b.setValue(w,q/a);t.setValue(w,p/a);for(f=a+3;f<v+2;f++){w=f-a;p=q=0;for(h=1;h<a+1;h++)m=l=0,r=c.value(w),r!==e.Const.nullValue&&(r>c.value(w-1)?(l=c.value(w)-c.value(w-1),q+=l):c.value(w)<c.value(w-1)&&(m=c.value(w-1)-c.value(w),p+=m)),w++;w--;q=(b.value(w-1)*(a-1)+l)/a;p=(t.value(w-1)*(a-1)+m)/a;b.setValue(w,q);t.setValue(w,p);p||(p=q);q/=p;q=100-100/(1+q);u.setValue(w,q)}d.addField(u);return d};g.prototype.simulateRelativeStrengthIndex=function(c,a,b){b=void 0===b?!1:b;var d=new e.Recordset;
if(null==c||0==c.getFieldCount())return d;var f=new e.Field,h=new e.Field,l=c.getFieldByIndex(0).recordCount;f.initialize(l,"BUY_SIGNAL");h.initialize(l,"SELL_SIGNAL");c=c.getField("Indicator");var m=a.getField("Close"),q=e.Signal.NO_SIGNAL;for(a=1;a<l+1;a++)if(m.value(a)!=e.Const.nullValue&&c.value(a)!=e.Const.nullValue){var p=m.value(a)>c.value(a)?b?e.Signal.SELL:e.Signal.BUY:b?e.Signal.BUY:e.Signal.SELL;q==e.Signal.NO_SIGNAL?q=p:q!=p&&(q=p,p==e.Signal.BUY?f.setValue(a,e.Signal.BUY):h.setValue(a,
e.Signal.SELL))}null!=d&&(d.addField(f),d.addField(h));return d};return g}();e.Index=k})(TASdk||(TASdk={}));var StockChartX;
(function(e){function k(a,b){a=a.toUpperCase();for(var d=0;d<b.length;d++){var f=b[d].toUpperCase();if(a===f)return!0;var h=a.lastIndexOf("."+f);if(0<h&&h===a.length-f.length-1)return!0}return!1}e=/\s*[,;]\s*/;"modulusglobal.com, missionsoftwarethailand.com, bitenium.com".split(e);var g="modulusglobal.com, missionsoftwarethailand.com, bitenium.com".split(e);"4352, 0000".split(e);var c=["localhost","127.0.0.1","61.91.1.252","10.10.11.11","192.168.1.50"];(function(){var a=window.location.hostname;if(!k(a,
c)&&!k(a,g))throw window.StockChartX=void 0,window.TASdk=void 0,alert("Invalid license stockchart"),Error("Invalid StockChartX license.");})()})(StockChartX||(StockChartX={}));
(function(e){var k,g=k=e.Browser||(e.Browser={});g[g.UNKNOWN=0]="UNKNOWN";g[g.ie=1]="ie";g[g.firefox=2]="firefox";g[g.opera=3]="opera";g[g.konqueror=4]="konqueror";g[g.iron=5]="iron";g[g.safari=6]="safari";g[g.chrome=7]="chrome";g[g.edge=8]="edge";e.Environment={isMobile:!1,isPhone:!1,isIOS:!1,isAndroid:!1,osVersion:"0",browser:k.UNKNOWN,browserVersion:"0"};Detectizr.detect({detectDeviceMode:!1,detectScreen:!1,detectOS:!0,detectBrowser:!0,detectPlugins:!1});switch(Detectizr.os.name){case "ios":e.Environment.isIOS=
!0;break;case "android":e.Environment.isAndroid=!0}e.Environment.osVersion=Detectizr.os.major+"."+Detectizr.os.minor;e.Environment.browserVersion=Detectizr.browser.major;switch(Detectizr.browser.name){case "ie":e.Environment.browser=k.ie;break;case "firefox":e.Environment.browser=k.firefox;break;case "opera":e.Environment.browser=k.opera;break;case "konqueror":e.Environment.browser=k.konqueror;break;case "iron":e.Environment.browser=k.iron;break;case "safari":e.Environment.browser=k.safari;break;
case "chrome":e.Environment.browser=k.chrome;break;case "edge":e.Environment.browser=k.edge}switch(Detectizr.device.type){case "mobile":e.Environment.isPhone=!0;break;case "tablet":e.Environment.isMobile=!0;break;default:e.Environment.isMobile=!1}Object.freeze(e.Environment)})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(c){this._length=0;this._dict={};if(c)if(Array.isArray(c))for(var a=0;a<c.length;a++){var b=c[a];this.add(b.key,b.value)}else this.add(c.key,c.value)}Object.defineProperty(g.prototype,"count",{get:function(){return this._length},enumerable:!0,configurable:!0});g.prototype.add=function(c,a){if(this.containsKey(c))throw Error("An item with the same key already exists.");this._dict[c]=a;this._length++};g.prototype.remove=function(c){if(!this.containsKey(c))return!1;
delete this._dict[c];this._length--;return!0};g.prototype.containsKey=function(c){return void 0!==this._dict[c]};g.prototype.get=function(c){return this.containsKey(c)?this._dict[c]:null};return g}();e.Dictionary=k})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(){this._constructors={}}Object.defineProperty(g.prototype,"registeredItems",{get:function(){return this._constructors},enumerable:!0,configurable:!0});g.prototype.register=function(c,a){if(!c)throw Error("Class name is not specified.");if(!a)throw Error("Constructor is not specified.");if(this._constructors[c])throw Error("'"+c+"' already registered.");this._constructors[c]=a};g.prototype.resolve=function(c){if(!c)throw Error("Class name is not specified.");
return this._constructors[c]};g.prototype.createInstance=function(c){var a=this.resolve(c);if(!a)throw Error("'"+c+"' is not registered.");return new a};return g}();e.ClassRegistrar=k})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(){}g.isNumber=function(c){return"number"===typeof c};g.isFiniteNumber=function(c){return this.isNumber(c)&&isFinite(c)};g.isFiniteNumberOrNaN=function(c){return this.isNumber(c)&&(isFinite(c)||isNaN(c))};g.isPositiveNumber=function(c){return this.isFiniteNumber(c)&&0<c};g.isNegativeNumber=function(c){return this.isFiniteNumber(c)&&0>c};g.isPositiveNumberOrNaN=function(c){return this.isNumber(c)&&(isNaN(c)||0<c&&isFinite(c))};g.isFunction=function(c){return!!(c&&
c.constructor&&c.call&&c.apply)};g.shallowClone=function(c){return jQuery.extend(!0,{},c)};g.clone=function(c){c=jQuery.extend(!0,{},c);for(var a in c)if(c.hasOwnProperty(a)){var b=c[a];if(Array.isArray(b))for(var d=0,f=b.length;d<f;d++)"object"===typeof b[d]&&(b[d]=this.clone(b[d]))}return c};g.extend=function(c,a){var b=c.prototype,d=function(){};d.prototype=a.prototype;c.prototype=new d;c.prototype.constructor=c;for(var f in b)c.prototype[f]=b[f]};g.applyMixins=function(c,a){a.forEach(function(b){Object.getOwnPropertyNames(b).forEach(function(d){Object.getOwnPropertyDescriptor(b,
d).enumerable&&"constructor"!==d&&(c[d]=b[d])});Object.getOwnPropertyNames(b.prototype).forEach(function(d){"constructor"!==d&&(c.prototype[d]=b.prototype[d])})})};g.padStr=function(c,a){for(var b=a.width-c.length,d=0;d<b;d++)c=a.alignLeft?c+a.padding:a.padding+c;return c};g.filterText=function(c){return $("<div></div>").text(c).html().trim()};g.flattenArray=function(c){var a=this;return c.reduce(function(b,d){return Array.isArray(d)?b.concat(a.flattenArray(d)):b.concat(d)},[])};g.sort=function(c,
a){for(var b=!0,d=0,f=c.length;b;){b=!1;d++;for(var h=0;h<f-d;h++){var l=c[h],m=c[h+1];0<a(l,m)&&(c[h]=m,c[h+1]=l,b=!0)}}};return g}();e.JsUtil=k;Math.roundToDecimals=function(g,c){return Number(Math.round(g+"E"+c)+"E-"+c)};Math.trunc||(Math.trunc=function(g){return 0>g?Math.ceil(g):Math.floor(g)})})(StockChartX||(StockChartX={}));(function(e){})(StockChartX||(StockChartX={}));
(function(e){e.TimeSpan={MILLISECONDS_IN_YEAR:31556926E3,MILLISECONDS_IN_MONTH:2629743830,MILLISECONDS_IN_WEEK:6048E5,MILLISECONDS_IN_DAY:864E5,MILLISECONDS_IN_HOUR:36E5,MILLISECONDS_IN_MINUTE:6E4,MILLISECONDS_IN_SECOND:1E3};Object.freeze(e.TimeSpan);e.Periodicity={TICK:"t",SECOND:"s",MINUTE:"",HOUR:"h",DAY:"d",WEEK:"w",MONTH:"m",YEAR:"y"};Object.freeze(e.Periodicity);var k=function(){function g(c,a){this.periodicity=c||e.Periodicity.MINUTE;this.interval=e.JsUtil.isFiniteNumber(a)&&0<a?a:1}Object.defineProperty(g.prototype,
"interval",{get:function(){return this._interval},set:function(c){if(!e.JsUtil.isFiniteNumber(c)||0>=c)throw Error("Invalid interval value: "+c);this._interval=c},enumerable:!0,configurable:!0});g.prototype.toString=function(){return this.interval+" "+g.periodicityToString(this.periodicity)};g.prototype.toShortString=function(){return this.interval+" "+g.periodicityToShortString(this.periodicity)};g.prototype.clone=function(){return new g(this.periodicity,this.interval)};g.periodicityToString=function(c){switch(c){case e.Periodicity.TICK:return"tick";
case e.Periodicity.SECOND:return"second";case e.Periodicity.MINUTE:return"minute";case e.Periodicity.HOUR:return"hour";case e.Periodicity.DAY:return"day";case e.Periodicity.WEEK:return"week";case e.Periodicity.MONTH:return"month";case e.Periodicity.YEAR:return"year";default:throw Error("Unsupported periodicity: "+c);}};g.periodicityToShortString=function(c){switch(c){case e.Periodicity.TICK:return"tick";case e.Periodicity.SECOND:return"sec";case e.Periodicity.MINUTE:return"min";case e.Periodicity.HOUR:return"hr";
case e.Periodicity.DAY:return"day";case e.Periodicity.WEEK:return"wk";case e.Periodicity.MONTH:return"mo";case e.Periodicity.YEAR:return"yr";default:throw Error("Unsupported periodicity: "+c);}};g.timeFrameToTimeInterval=function(c,a){switch(a){case e.Periodicity.TICK:return c;case e.Periodicity.SECOND:return c*e.TimeSpan.MILLISECONDS_IN_SECOND;case e.Periodicity.MINUTE:return c*e.TimeSpan.MILLISECONDS_IN_MINUTE;case e.Periodicity.HOUR:return c*e.TimeSpan.MILLISECONDS_IN_HOUR;case e.Periodicity.DAY:return c*
e.TimeSpan.MILLISECONDS_IN_DAY;case e.Periodicity.WEEK:return c*e.TimeSpan.MILLISECONDS_IN_WEEK;case e.Periodicity.MONTH:return c*e.TimeSpan.MILLISECONDS_IN_MONTH;case e.Periodicity.YEAR:return c*e.TimeSpan.MILLISECONDS_IN_YEAR;default:return 0}};g.timeIntervalToTimeFrame=function(c){if(c>=e.TimeSpan.MILLISECONDS_IN_YEAR)return new g(e.Periodicity.YEAR,c/e.TimeSpan.MILLISECONDS_IN_YEAR);if(c>=e.TimeSpan.MILLISECONDS_IN_MONTH)return new g(e.Periodicity.MONTH,c/e.TimeSpan.MILLISECONDS_IN_MONTH);if(c>=
e.TimeSpan.MILLISECONDS_IN_WEEK&&0===c%e.TimeSpan.MILLISECONDS_IN_WEEK)return new g(e.Periodicity.WEEK,c/e.TimeSpan.MILLISECONDS_IN_WEEK);if(c>=e.TimeSpan.MILLISECONDS_IN_DAY)return new g(e.Periodicity.DAY,c/e.TimeSpan.MILLISECONDS_IN_DAY);if(c>=e.TimeSpan.MILLISECONDS_IN_HOUR)return new g(e.Periodicity.HOUR,c/e.TimeSpan.MILLISECONDS_IN_HOUR);if(c>=e.TimeSpan.MILLISECONDS_IN_MINUTE)return new g(e.Periodicity.MINUTE,c/e.TimeSpan.MILLISECONDS_IN_MINUTE);if(c>=e.TimeSpan.MILLISECONDS_IN_SECOND)return new g(e.Periodicity.SECOND,
c/e.TimeSpan.MILLISECONDS_IN_SECOND);throw Error("Unsupported time interval: "+c);};return g}();e.TimeFrame=k})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function c(){}Object.defineProperty(c,"registeredFormatters",{get:function(){return this._registrar.registeredItems},enumerable:!0,configurable:!0});c.register=function(a,b){"string"===typeof a?this._registrar.register(a,b):this._registrar.register(a.className,a)};c.deserialize=function(a){if(!a)return null;var b=this._registrar.createInstance(a.className);b.loadState(a);return b};c._registrar=new e.ClassRegistrar;return c}(),g=function(){function c(a){this._locale=a}
Object.defineProperty(c,"className",{get:function(){return""},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"locale",{get:function(){return this._locale},set:function(a){this._locale!==a&&(this._locale=a,this._onLocaleChanged&&this._onLocaleChanged())},enumerable:!0,configurable:!0});c.prototype.saveState=function(){return{className:this.constructor.className,locale:this.locale}};c.prototype.loadState=function(a){this._locale=a&&a.locale};return c}();e.NumberFormat=g;e.JsUtil.applyMixins(g,
[k])})(StockChartX||(StockChartX={}));var __extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a,b){a=g.call(this,a)||this;a._createFormat(b);return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"StockChartX.IntlNumberFormat"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"options",{get:function(){return this._numberFormat.resolvedOptions()},set:function(a){this._createFormat(a)},enumerable:!0,configurable:!0});c.prototype._onLocaleChanged=function(){this._createFormat()};c.prototype._createFormat=function(a){var b=
this.locale||"en";a||(a=this._numberFormat&&this._numberFormat.resolvedOptions());this._numberFormat=new Intl.NumberFormat(b,a||void 0)};c.prototype.format=function(a){return this._numberFormat.format(a)};c.prototype.setDecimalDigits=function(a){if(e.JsUtil.isNegativeNumber(a))throw Error("Value must be greater or equal to zero.");var b=this._numberFormat.resolvedOptions();b.minimumFractionDigits=b.maximumFractionDigits=a;this._createFormat(b)};c.prototype.saveState=function(){var a=g.prototype.saveState.call(this);
a.options=e.JsUtil.clone(this.options);return a};c.prototype.loadState=function(a){g.prototype.loadState.call(this,a);this._createFormat(a&&a.options)};return c}(e.NumberFormat);e.IntlNumberFormat=k;e.NumberFormat.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;b.formatString=a||"%f";return b}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"StockChartX.CustomNumberFormat"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"formatString",{get:function(){return this._formatString},set:function(a){this._formatString=a;this._parseFormat()},enumerable:!0,configurable:!0});c.prototype._parseFormat=function(){var a=this.formatString;if(!a||"string"!==
typeof a)throw new TypeError("Format specifier must be a string.");a=/%(\+)?([0 ]|'(.))?(-)?([0-9]+)?(\.([0-9]+))?([bcdfoxXeEgG])/g.exec(a);this._options={sign:"+"===a[1],padding:null==a[2]?" ":"'"===a[2].substring(0,1)?a[3]:a[2],alignLeft:"-"===a[4],width:null!=a[5]?a[5]:!1,precision:null!=a[7]?a[7]:!1,type:a[8]}};c.prototype.format=function(a){var b=Number(a),d=this._options;switch(d.type){case "b":var f=b.toString(2);break;case "c":f=String.fromCharCode(b);break;case "d":f=parseInt(b,10).toString();
break;case "f":f=!1===d.precision?a.toString():b.toFixed(d.precision);break;case "o":f=b.toString(8);break;case "x":f=b.toString(16).toLowerCase();break;case "X":f=b.toString(16).toUpperCase();break;case "e":case "E":f=!1===d.precision?b.toExponential():b.toExponential(d.precision);f="e"===d.type?f.toLowerCase():f.toUpperCase();break;case "g":case "G":f=!1===d.precision?a.toString():b.toFixed(d.precision);b=!1===d.precision?b.toExponential():b.toExponential(d.precision);f=f.length<b.length?f:b;f=
"g"===d.type?f.toLowerCase():f.toUpperCase();break;default:throw'Unknown value type "'+d.type+'" detected.';}(b=!1!==d.width&&d.width>f.length)&&!d.alignLeft&&" "!==d.padding&&(f=e.JsUtil.padStr(f,d),b=!1);switch(d.type){case "d":case "f":case "e":case "E":case "g":case "G":0>a?"-"!==f[0]&&(f="-"+f):d.sign&&(f="+"+f)}b&&(f=e.JsUtil.padStr(f,d));return f};c.prototype.saveState=function(){var a=g.prototype.saveState.call(this);a.formatString=this.formatString;return a};c.prototype.loadState=function(a){g.prototype.loadState.call(this,
a);this.formatString=a&&a.formatString};return c}(e.NumberFormat);e.CustomNumberFormat=k;e.NumberFormat.register(k)})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function c(){}Object.defineProperty(c,"registeredFormatters",{get:function(){return this._formatters.registeredItems},enumerable:!0,configurable:!0});c.register=function(a,b){"string"===typeof a?this._formatters.register(a,b):this._formatters.register(a.className,a)};c.deserialize=function(a){if(!a)return null;var b=this._formatters.createInstance(a.className);b.loadState(a);return b};c._formatters=new e.ClassRegistrar;return c}(),g=function(){function c(){}Object.defineProperty(c,
"className",{get:function(){return""},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"locale",{get:function(){return this._locale},set:function(a){this._locale!==a&&(this._locale=a,this._onLocaleChanged&&this._onLocaleChanged())},enumerable:!0,configurable:!0});c.prototype.saveState=function(){return{className:this.constructor.className,locale:this.locale}};c.prototype.loadState=function(a){this.locale=a.locale};return c}();e.DateTimeFormat=g;e.JsUtil.applyMixins(g,[k])})(StockChartX||
(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;b.formatString=null;b.formatString=a;return b}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"StockChartX.CustomDateTimeFormat"},enumerable:!0,configurable:!0});c.prototype.format=function(a,b){a=moment(a);moment.locale(this.locale);return a.format(b||this.formatString)};c.prototype.saveState=function(){var a=g.prototype.saveState.call(this);a.formatString=this.formatString;return a};c.prototype.loadState=
function(a){g.prototype.loadState.call(this,a);this.formatString=a.formatString};return c}(e.DateTimeFormat);e.CustomDateTimeFormat=k;e.DateTimeFormat.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.DateTimeFormatName={YEAR_MONTH:"year-month",MONTH_DAY:"month-day",DATE:"date",SHORT_DATE_TIME:"short_date_time",LONG_DATE_TIME:"long_date_time",SHORT_TIME:"short_time",LONG_TIME:"long_time"};var k=function(g){function c(a){var b=g.call(this)||this;b._formatters={};b._timeInterval=a;return b}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"StockChartX.TimeIntervalDateTimeFormat"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"timeInterval",
{get:function(){return this._timeInterval},set:function(a){if(!e.JsUtil.isPositiveNumber(a))throw Error("Time interval must be a positive number.");this._timeInterval=a},enumerable:!0,configurable:!0});c.prototype._onLocaleChanged=function(){this._clearFormatters()};c.prototype._clearFormatters=function(){this._formatters={}};c.prototype._createFormatter=function(a){return new IntlPolyfill.DateTimeFormat(this.locale||"en",a)};c.prototype.format=function(a){var b=this._timeInterval;if(b>=e.TimeSpan.MILLISECONDS_IN_YEAR)return a.getFullYear().toString();
var d=e.DateTimeFormatName;return b>=e.TimeSpan.MILLISECONDS_IN_MONTH?this.formatter(d.YEAR_MONTH).format(a):b>=e.TimeSpan.MILLISECONDS_IN_DAY?this.formatter(d.DATE).format(a):b>=e.TimeSpan.MILLISECONDS_IN_MINUTE||b>=e.TimeSpan.MILLISECONDS_IN_SECOND?this.formatter(d.SHORT_DATE_TIME).format(a):this.formatter(d.LONG_DATE_TIME).format(a)};c.prototype.formatWithFormatter=function(a,b){return this.formatter(b).format(a)};c.prototype.formatter=function(a){var b=this._formatters[a];if(b)return b;b=e.DateTimeFormatName;
switch(a){case b.YEAR_MONTH:b=this._createFormatter({year:"numeric",month:"short"});break;case b.MONTH_DAY:b=this._createFormatter({month:"short",day:"2-digit"});break;case b.DATE:b=this._createFormatter({year:"numeric",month:"short",day:"2-digit"});break;case b.SHORT_DATE_TIME:b=this._createFormatter({year:"numeric",month:"short",day:"2-digit",hour:"2-digit",hour12:!1,minute:"2-digit"});break;case b.LONG_DATE_TIME:b=this._createFormatter({year:"numeric",month:"short",day:"2-digit",hour:"2-digit",
hour12:!1,minute:"2-digit",second:"2-digit"});break;case b.SHORT_TIME:b=this._createFormatter({hour:"2-digit",hour12:!1,minute:"2-digit"});break;case b.LONG_TIME:b=this._createFormatter({hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"});break;default:throw Error("Unknown formatter name: "+a);}return this._formatters[a]=b};c.prototype.saveState=function(){var a=g.prototype.saveState.call(this);a.timeInterval=this.timeInterval;return a};c.prototype.loadState=function(a){g.prototype.loadState.call(this,
a);this._timeInterval=a&&a.timeInterval};return c}(e.DateTimeFormat);e.TimeIntervalDateTimeFormat=k;e.DateTimeFormat.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;b._formatter=new e.CustomDateTimeFormat;b._timeInterval=a;return b}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"StockChartX.CustomTimeIntervalDateTimeFormat"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"timeInterval",{get:function(){return this._timeInterval},set:function(a){if(!e.JsUtil.isPositiveNumber(a))throw Error("Time interval must be a positive number.");this._timeInterval=
a},enumerable:!0,configurable:!0});c.prototype._onLocaleChanged=function(){this._formatter.locale=this.locale||"en"};c.prototype.format=function(a){this._formatter.formatString=this._findFormat();return this._formatter.format(a)};c.prototype._findFormat=function(){var a=this._timeInterval;return a>=e.TimeSpan.MILLISECONDS_IN_YEAR?"YYYY":a>=e.TimeSpan.MILLISECONDS_IN_MONTH?"MMM YYYY":a>=e.TimeSpan.MILLISECONDS_IN_DAY?"D MMM YYYY":a>=e.TimeSpan.MILLISECONDS_IN_MINUTE?"D MMM YYYY HH:mm":a>=e.TimeSpan.MILLISECONDS_IN_SECOND?
"D MMM YYYY HH:mm:ss":"D MMM YYYY HH:mm:ss.SSS"};c.prototype.saveState=function(){var a=g.prototype.saveState.call(this);a.timeInterval=this.timeInterval;return a};c.prototype.loadState=function(a){g.prototype.loadState.call(this,a);this._timeInterval=a&&a.timeInterval};return c}(e.DateTimeFormat);e.CustomTimeIntervalDateTimeFormat=k;e.DateTimeFormat.register(k)})(StockChartX||(StockChartX={}));
(function(e){var k=jQuery;k.fn.extend({scxGetFrame:function(g){var c=this.outerWidth(),a=this.outerHeight();if(g){var b=g.offset();g=this.offset();g.left-=b.left;g.top-=b.top}else g=this.position();return new e.Rect({left:g.left,top:g.top,width:c,height:a})},scxSize:function(){return{width:this.outerWidth(),height:this.outerHeight()}},scxContentSize:function(){return{width:this.innerWidth(),height:this.innerHeight()}},scxAppendCanvas:function(){return k("<canvas></canvas>").css("position","absolute").appendTo(this)},
scxAppend:function(g,c){g=k("<"+g+"></"+g+">").appendTo(this);if(c)if("string"===typeof c)g.addClass(c);else for(var a=0;a<c.length;a++)g.addClass(c[a]);return g},scxPrepend:function(g,c){g=k("<"+g+"></"+g+">").prependTo(this);if(c)if("string"===typeof c)g.addClass(c);else for(var a=0;a<c.length;a++)g.addClass(c[a]);return g},scxFrame:function(g){this.css("left",g.left).css("top",g.top).outerWidth(g.width).outerHeight(g.height)},scxPosition:function(g,c){this.css("left",g).css("top",c);return this},
scxClientToLocalPoint:function(g,c){var a=this.offset();return{x:Math.round(g-a.left),y:Math.round(c-a.top)}},scxLocalToClientPoint:function(g,c){var a=this.offset();return{x:Math.round(g+a.left),y:Math.round(c+a.top)}},scxTextStyle:function(g){return this.css("color",g.fillColor).css("font-size",g.fontSize+"px").css("font-family",g.fontFamily).css("font-style",g.fontStyle)},scxBorder:function(g,c){return this.css(g,c.width+"px "+c.lineStyle+" "+c.strokeColor)},scxFill:function(g){return!1===g.fillEnabled?
this:this.css("background-color",g.fillColor)}})})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(){}g.getLineWidth=function(c){return c&&!1===c.strokeEnabled?0:c&&c.width||1};g.getFontSize=function(c){return c&&c.fontSize||12};g.isDarkColor=function(c){return tinycolor(c).isDark()};g.toRgbString=function(c){return tinycolor(c).toRgbString()};g.toRgba=function(c){return tinycolor(c).toRgb()};g.toHexString=function(c){return tinycolor(c).toHexString()};g.lighten=function(c,a){void 0===a&&(a=0);c=g.toRgbString(c).replace(/[^0-9a-f]/gi,"");6>c.length&&(c=
c[0]+c[0]+c[1]+c[1]+c[2]+c[2]);for(var b="#",d,f=0;3>f;f++)d=parseInt(c.substr(2*f,2),16),d=Math.round(Math.min(Math.max(0,d+255*a),255)).toString(16),b+=("00"+d).substr(d.length);return b};g.setVisibility=function(c,a){c.css("visibility",a?"visible":"hidden")};g.setBackground=function(c,a){if(Array.isArray(a)){if(0===a.length)throw Error("Invalid theme: 'background' must be a color or array of colors.");1===a.length?g.setBackgroundColor(c,a[0]):g.setGradientBackground(c,a)}else g.setBackgroundColor(c,
a)};g.isFullscreenEnabled=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled};g.enterFullscreen=function(c){c=c||document.body;if(c.requestFullscreen)c.requestFullscreen();else if(c.msRequestFullscreen)c.msRequestFullscreen();else if(c.mozRequestFullScreen)c.mozRequestFullScreen();else if(c.webkitRequestFullscreen)c.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else throw Error("Fullscreen mode is not supported.");
};g.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()};g.setGradientBackground=function(c,a){var b="startColorstr="+g.toHexString(a[1]),d="endColorstr="+g.toHexString(a[0]);c.css("background","-webkit-gradient(linear,left bottom,left top,color-stop(0, "+(a[0]+"), color-stop(1, "+a[1]+"))")).css("background",
"linear-gradient(to top, "+a[0]+", "+a[1]+")").css("filter","progid:DXImageTransform.Microsoft.gradient(GradientType=0, "+(b+", "+d+")"))};g.setBackgroundColor=function(c,a){c.css("background-color",a)};g.removeUnsecureTags=function(c){c=$(c);for(var a=0,b="script embed object applet iframe frame frameset".split(" ");a<b.length;a++)c.find(b[a]).remove();return c};return g}();e.HtmlUtil=k})(StockChartX||(StockChartX={}));
(function(e){e.StrokePriority={COLOR:"color"};Object.freeze(e.StrokePriority);e.FillPriority={COLOR:"color"};Object.freeze(e.FillPriority);e.LineStyle={SOLID:"solid",DASH:"dash",DOT:"dot",DASH_DOT:"dash-dot"};Object.freeze(e.LineStyle);e.FontDefaults={fontFamily:"Arial",fontSize:12,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal"};e.StrokeDefaults={strokePriority:"color",strokeColor:"black",width:1,lineStyle:e.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"};e.DashArray={DOT:[1,7],DASH:[7,
7],DASH_DOT:[7,7,1,7]};e.ThemeColor={Dark:{up:"#16AB43",down:"#FF2828"},DarkBlue:{up:"#26A69A",down:"#EF5350"},Light:{up:"#26A69A",down:"#EF5350"},Gray:{up:"#909090",upBorder:"#000000",down:"#000000"}};e.Theme={Dark:{name:"Dark",chart:{background:["rgb(0, 0, 0)","rgb(30, 30, 30)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"white"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"white"}}},
splitter:{fillColor:"grey",hoverFillColor:"white"},chartPanel:{grid:{width:1,strokeColor:"#323232",lineStyle:e.LineStyle.DOT},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"},watermark:{text:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"white"}}},valueScale:{fill:{fillColor:"#000"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"},line:{width:1,strokeColor:"#505050"},border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",
fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#000"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#FFFFFF"},line:{width:1,strokeColor:"#505050"},border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"#FFFFFF"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:e.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"#545454",
width:1,lineStyle:e.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},line:{width:1,strokeColor:"darkgray",lineStyle:"dashed"},fill:{fillColor:"white"}},zoomIn:{border:{width:1,strokeColor:"white",lineStyle:"solid"},fill:{fillColor:"rgba(255, 255, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"white"}}},line:{simple:{width:1,strokeColor:"white"},mountain:{line:{width:1,strokeColor:"white"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"white"}},
histogram:{line:{width:1,strokeColor:"white"},coloredLine:{upBar:{width:1,strokeColor:e.ThemeColor.Dark.up},downBar:{width:1,strokeColor:e.ThemeColor.Dark.down}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:e.ThemeColor.Dark.up}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:e.ThemeColor.Dark.down}}}},bar:{OHLC:{width:1,strokeColor:"white"},
HLC:{width:1,strokeColor:"white"},HL:{width:1,strokeColor:"white"},coloredOHLC:{upBar:{width:1,strokeColor:e.ThemeColor.Dark.up},downBar:{width:1,strokeColor:e.ThemeColor.Dark.down}},coloredHLC:{upBar:{width:1,strokeColor:e.ThemeColor.Dark.up},downBar:{width:1,strokeColor:e.ThemeColor.Dark.down}},coloredHL:{upBar:{width:1,strokeColor:e.ThemeColor.Dark.up},downBar:{width:1,strokeColor:e.ThemeColor.Dark.down}},candle:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Dark.up},fill:{fillColor:e.ThemeColor.Dark.up},
wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Dark.down},fill:{fillColor:e.ThemeColor.Dark.down},wick:{width:1,strokeColor:"white"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Dark.up},fill:{fillColor:e.ThemeColor.Dark.up},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"white"},fill:{fillColor:e.ThemeColor.Dark.down},wick:{width:1,strokeColor:"white"}}},renko:{upCandle:{border:{strokeEnabled:!0,
width:1,strokeColor:e.ThemeColor.Dark.up},fill:{fillColor:e.ThemeColor.Dark.up}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:e.ThemeColor.Dark.down}}},lineBreak:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Dark.up},fill:{fillEnabled:!1,fillColor:e.ThemeColor.Dark.up}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:e.ThemeColor.Dark.down},fill:{fillEnabled:!0,fillColor:e.ThemeColor.Dark.down}}},hollowCandle:{upCandle:{border:{strokeEnabled:!0,
width:1,strokeColor:e.ThemeColor.Dark.up},fill:{fillColor:e.ThemeColor.Dark.up},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Dark.down},fill:{fillColor:e.ThemeColor.Dark.down},wick:{width:1,strokeColor:"white"}},upHollowCandle:{border:{width:1,strokeColor:e.ThemeColor.Dark.up},wick:{width:1,strokeColor:e.ThemeColor.Dark.up}},downHollowCandle:{border:{width:1,strokeColor:e.ThemeColor.Dark.down},wick:{width:1,strokeColor:e.ThemeColor.Dark.down}}},
pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Dark.up}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Dark.down}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Dark.up}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Dark.down}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"white"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},
line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"}}},selectionMarker:{line:{strokeColor:"white",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},fill:{fillColor:"orange"},centerPointFill:{fillColor:"rgb(68, 68, 68)"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(255, 255, 255, 0.5)"},
balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:e.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(255, 255, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"white"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},fill:{fillColor:"rgba(0, 0, 0, 0.8)"}},abstract:{line:{strokeColor:"white",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"white",
decoration:""}},trendAngle:{line:{strokeColor:"white",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"white",decoration:""},arc:{strokeColor:"white",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"white",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"white"}},fibonacci:{trendLine:{strokeColor:"white",width:1,lineStyle:"dash"},line:{strokeColor:"white",width:1},fill:{fillColor:"rgba(26, 140, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"white"}},arrowUp:{fill:{fillColor:"limegreen"}},
arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#FFFFFF",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"white",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"orange",lineStyle:e.LineStyle.SOLID},fill:{enabled:!0,color:"rgb(44, 44, 44)"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",
fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}}},DarkBlue:{name:"DarkBlue",chart:{background:["#131722","#131722"],border:{width:1,strokeColor:"#363C4E",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"white"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"white"}}},
splitter:{fillColor:"#363C4E",hoverFillColor:"white"},chartPanel:{grid:{width:1,strokeColor:"#363C4E",lineStyle:e.LineStyle.DOT},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"},watermark:{text:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"white"}}},valueScale:{fill:{fillColor:"#131722"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"},line:{width:1,strokeColor:"#505050"},border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},
valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#131722"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#FFFFFF"},line:{width:1,strokeColor:"#505050"},border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"#FFFFFF"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:e.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},
breakLine:{stroke:{strokeColor:"#545454",width:1,lineStyle:e.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},line:{width:1,strokeColor:"darkgray",lineStyle:"dashed"},fill:{fillColor:"white"}},zoomIn:{border:{width:1,strokeColor:"white",lineStyle:"solid"},fill:{fillColor:"rgba(255, 255, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"white"}}},line:{simple:{width:1,strokeColor:"white"},mountain:{line:{width:1,strokeColor:"white"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},
step:{width:1,strokeColor:"white"}},histogram:{line:{width:1,strokeColor:"white"},coloredLine:{upBar:{width:1,strokeColor:e.ThemeColor.DarkBlue.up},downBar:{width:1,strokeColor:e.ThemeColor.DarkBlue.down}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:e.ThemeColor.DarkBlue.up}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:e.ThemeColor.DarkBlue.down}}}},
bar:{OHLC:{width:1,strokeColor:"white"},HLC:{width:1,strokeColor:"white"},HL:{width:1,strokeColor:"white"},coloredOHLC:{upBar:{width:1,strokeColor:e.ThemeColor.DarkBlue.up},downBar:{width:1,strokeColor:e.ThemeColor.DarkBlue.down}},coloredHLC:{upBar:{width:1,strokeColor:e.ThemeColor.DarkBlue.up},downBar:{width:1,strokeColor:e.ThemeColor.DarkBlue.down}},coloredHL:{upBar:{width:1,strokeColor:e.ThemeColor.DarkBlue.up},downBar:{width:1,strokeColor:e.ThemeColor.DarkBlue.down}},candle:{upCandle:{border:{strokeEnabled:!0,
width:1,strokeColor:e.ThemeColor.DarkBlue.up},fill:{fillColor:e.ThemeColor.DarkBlue.up},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.DarkBlue.down},fill:{fillColor:e.ThemeColor.DarkBlue.down},wick:{width:1,strokeColor:"white"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.DarkBlue.up},fill:{fillColor:e.ThemeColor.DarkBlue.up},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!0,width:1,
strokeColor:"white"},fill:{fillColor:e.ThemeColor.DarkBlue.down},wick:{width:1,strokeColor:"white"}}},renko:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.DarkBlue.up},fill:{fillColor:e.ThemeColor.DarkBlue.up}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:e.ThemeColor.DarkBlue.down}}},lineBreak:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.DarkBlue.up},fill:{fillEnabled:!1,fillColor:e.ThemeColor.DarkBlue.up}},downCandle:{border:{strokeEnabled:!1,
width:1,strokeColor:e.ThemeColor.DarkBlue.down},fill:{fillEnabled:!0,fillColor:e.ThemeColor.DarkBlue.down}}},hollowCandle:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.DarkBlue.up},fill:{fillColor:e.ThemeColor.DarkBlue.up},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.DarkBlue.down},fill:{fillColor:e.ThemeColor.DarkBlue.down},wick:{width:1,strokeColor:"white"}},upHollowCandle:{border:{width:1,strokeColor:e.ThemeColor.DarkBlue.up},
wick:{width:1,strokeColor:e.ThemeColor.DarkBlue.up}},downHollowCandle:{border:{width:1,strokeColor:e.ThemeColor.DarkBlue.down},wick:{width:1,strokeColor:e.ThemeColor.DarkBlue.down}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.DarkBlue.up}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.DarkBlue.down}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.DarkBlue.up}},downCandle:{border:{strokeEnabled:!0,width:1,
strokeColor:e.ThemeColor.DarkBlue.down}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"white"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"}}},selectionMarker:{line:{strokeColor:"white",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},fill:{fillColor:"orange"},centerPointFill:{fillColor:"rgb(68, 68, 68)"}},
measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(255, 255, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:e.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(255, 255, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"white"},text:{fontFamily:"Calibri",
fontSize:11,fillColor:"white"},fill:{fillColor:"rgba(19, 23, 34, 0.8)"}},abstract:{line:{strokeColor:"white",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"white",decoration:""}},trendAngle:{line:{strokeColor:"white",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"white",decoration:""},arc:{strokeColor:"white",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"white",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"white"}},
fibonacci:{trendLine:{strokeColor:"white",width:1,lineStyle:"dash"},line:{strokeColor:"white",width:1},fill:{fillColor:"rgba(26, 140, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"white"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#FFFFFF",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"white",fontWeight:"normal",fontStyle:"normal",
decoration:""},border:{enabled:!0,width:1,color:"orange",lineStyle:e.LineStyle.SOLID},fill:{enabled:!0,color:"rgb(44, 44, 44)"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}}},Light:{name:"Light",chart:{background:["rgb(255, 255, 255)",
"rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#B3CFDD",lineStyle:e.LineStyle.DOT},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},watermark:{text:{fontFamily:"Arial",fontSize:40,
fontStyle:"normal",fillColor:"#666"}}},valueScale:{fill:{fillColor:"#FFF"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:e.ThemeColor.Light.up}}},dateScale:{fill:{fillColor:"#FFF"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",
lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:e.ThemeColor.Light.up},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:e.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"#545454",width:1,lineStyle:e.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#DDD"}},zoomIn:{border:{width:1,
strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:e.ThemeColor.Light.up},downBar:{width:1,strokeColor:e.ThemeColor.Light.down}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},
fill:{fillColor:"#6FA8DC"}},coloredColumn:{upBar:{line:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Light.up},fill:{fillColor:e.ThemeColor.Light.up}},downBar:{line:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Light.down},fill:{fillColor:e.ThemeColor.Light.down}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:e.ThemeColor.Light.up},downBar:{width:1,strokeColor:e.ThemeColor.Light.down}},coloredHLC:{upBar:{width:1,
strokeColor:e.ThemeColor.Light.up},downBar:{width:1,strokeColor:e.ThemeColor.Light.down}},coloredHL:{upBar:{width:1,strokeColor:e.ThemeColor.Light.up},downBar:{width:1,strokeColor:e.ThemeColor.Light.down}},candle:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Light.up},fill:{fillColor:e.ThemeColor.Light.up},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Light.down},fill:{fillColor:e.ThemeColor.Light.down},wick:{width:1,
strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Light.up},fill:{fillColor:e.ThemeColor.Light.up},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Light.down},fill:{fillColor:e.ThemeColor.Light.down},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Light.up},fill:{fillColor:e.ThemeColor.Light.up}},downCandle:{border:{strokeEnabled:!0,
width:1,strokeColor:e.ThemeColor.Light.down},fill:{fillColor:e.ThemeColor.Light.down}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:e.ThemeColor.Light.up},fill:{fillColor:e.ThemeColor.Light.up}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:e.ThemeColor.Light.down},fill:{fillColor:e.ThemeColor.Light.down}}},hollowCandle:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Light.up},fill:{fillColor:e.ThemeColor.Light.up},wick:{width:1,strokeColor:"#555"}},
downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Light.down},fill:{fillColor:e.ThemeColor.Light.down},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:e.ThemeColor.Light.up},wick:{width:1,strokeColor:e.ThemeColor.Light.up}},downHollowCandle:{border:{width:1,strokeColor:e.ThemeColor.Light.down},wick:{width:1,strokeColor:e.ThemeColor.Light.down}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Light.up}},downCandle:{border:{strokeEnabled:!0,
width:1,strokeColor:e.ThemeColor.Light.down}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Light.up}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Light.down}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"}}},selectionMarker:{line:{strokeColor:"#777",width:1},
fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,
lineStyle:e.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},
arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:e.ThemeColor.Light.down}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",
decoration:""}},image:{noImage:{line:{strokeColor:e.ThemeColor.Light.down,width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:e.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},
valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}}},Beet:{name:"Beet",chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,
strokeColor:"#CCC",lineStyle:e.LineStyle.DOT},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#dbd0d8"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#dbd0d8"},text:{fontFamily:"Calibri",fontSize:11,
fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:e.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:e.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},line:{width:1,strokeColor:"#333",
lineStyle:"dashed"},fill:{fillColor:"#DDD"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,
width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},
coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,
width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,
width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,
width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",
fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:e.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},
measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",
width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",
fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:e.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}}},
Cyan:{name:"Cyan",chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC",lineStyle:e.LineStyle.DOT},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},
valueScale:{fill:{fillColor:"#ebedf0"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#ebedf0"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",
fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:e.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:e.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#DDD"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},
plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},
downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},
fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},
fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},
fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}}},
indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,
lineStyle:e.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:e.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},
abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",
width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:e.LineStyle.SOLID},fill:{enabled:!0,
color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}}},Gray:{name:"Gray",chart:{background:["rgb(255, 255, 255)","rgb(200, 200, 200)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",
fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#5B5B5B",lineStyle:e.LineStyle.DOT},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#d8d8d8"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,
strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#d8d8d8"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:e.LineStyle.SOLID,
lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:e.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#DDD"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},
step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},
HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Gray.upBorder},fill:{fillColor:e.ThemeColor.Gray.up},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Gray.down},
fill:{fillColor:e.ThemeColor.Gray.down},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Gray.upBorder},fill:{fillColor:e.ThemeColor.Gray.up},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:e.ThemeColor.Gray.down},fill:{fillColor:e.ThemeColor.Gray.down},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,
width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"},fill:{fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},
upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",
strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},border:{width:1,
strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:e.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",
width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},
text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:e.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,
strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}}},Olive:{name:"Olive",chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,
fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC",lineStyle:e.LineStyle.DOT},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#e2e7da"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",
lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#e2e7da"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:e.LineStyle.SOLID,lineJoin:"miter",
lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:e.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#DDD"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},
step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},
HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},
wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,
width:1,strokeColor:"green"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,
strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},
line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",
fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:e.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",
width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},
text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:e.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},
bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}}},Orange:{name:"Orange",chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",
hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC",lineStyle:e.LineStyle.DOT},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#f1dcd4"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#f1dcd4"},
text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:e.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:e.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},
line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#DDD"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,
strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,
strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,
strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillColor:"red"}}},
hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},
downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},
drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:e.LineStyle.SOLID},
fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",
width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",
width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:e.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",
fontSize:11,fontStyle:"normal",fillColor:"white"}}}}},Purple:{name:"Purple",chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC",lineStyle:e.LineStyle.DOT},title:{fontFamily:"Calibri",
fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#e5dfee"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#e5dfee"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",
lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:e.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:e.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#DDD"}},zoomIn:{border:{width:1,strokeColor:"darkgray",
lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,
width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,
width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,
width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,
width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,
width:1,strokeColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,
strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:e.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},
fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",
width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,
width:1,color:"#15C",lineStyle:e.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}}},Sky:{name:"Sky",chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,
strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC",lineStyle:e.LineStyle.DOT},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#d6e2f0"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",
fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#d6e2f0"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",
strokeColor:"#696969",width:1,lineStyle:e.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:e.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#DDD"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},
mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},
bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,
width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},
fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,
strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,
lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,
lineStyle:e.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:e.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},
text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",
fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:e.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},
valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}}},Teal:{name:"Teal",chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},
details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC",lineStyle:e.LineStyle.DOT},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#dee5e5"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",
fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#dee5e5"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:e.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,
lineStyle:e.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#DDD"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,
strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,
strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,
width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,
width:1,strokeColor:"red"},fill:{fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,
width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"}}},selectionMarker:{line:{strokeColor:"#777",width:1},
fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:e.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,
lineStyle:e.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},
arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},
image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:e.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},
text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}}}}})(StockChartX||(StockChartX={}));
(function(e){function k(){g||(g=this.setLineDash?function(c){this.setLineDash(c)}:"mozDash"in this?function(c){this.mozDash=c}:"webkitLineDash"in this?function(c){this.webkitLineDash=c}:function(c){});return g}var g;jQuery.extend(CanvasRenderingContext2D.prototype,{scxApplyStrokeTheme:function(c){if(!c||!1===c.strokeEnabled)return this;switch(c.strokePriority||e.StrokeDefaults.strokePriority){case e.StrokePriority.COLOR:this.strokeStyle=c.strokeColor||e.StrokeDefaults.strokeColor}this.lineCap=c.lineCap||
e.StrokeDefaults.lineCap;this.lineJoin=c.lineJoin||e.StrokeDefaults.lineJoin;this.lineWidth=c.width||e.StrokeDefaults.width;switch(c.lineStyle||e.StrokeDefaults.lineStyle){case e.LineStyle.DASH:c=e.DashArray.DASH;break;case e.LineStyle.DOT:c=e.DashArray.DOT;break;case e.LineStyle.DASH_DOT:c=e.DashArray.DASH_DOT;break;default:c=[]}k.call(this).call(this,c);return this},scxApplyFillTheme:function(c){c&&c.fillColor&&(this.fillStyle=c.fillColor||"black");return this},scxApplyTextTheme:function(c){var a=
c?(c.fontStyle||e.FontDefaults.fontStyle)+" "+(c.fontVariant||e.FontDefaults.fontVariant)+" "+(c.fontWeight||e.FontDefaults.fontWeight)+" "+(c.fontSize||e.FontDefaults.fontSize)+"px "+(c.fontFamily||e.FontDefaults.fontFamily):e.FontDefaults.fontSize+"px "+e.FontDefaults.fontFamily;this.font=a;c&&!1===c.fillEnabled||this.scxApplyFillTheme(c);c&&!1===c.strokeEnabled||this.scxApplyStrokeTheme(c);return this},scxFill:function(c,a){if(a||c&&!1!==c.fillEnabled)this.scxApplyFillTheme(c),this.fill();return this},
scxStroke:function(c,a){if(a||c&&!1!==c.strokeEnabled)this.scxApplyStrokeTheme(c),this.stroke();return this},scxFillStroke:function(c,a){this.scxFill(c);this.scxStroke(a);return this},scxStrokePolyline:function(c,a){var b=c.length;if(2>b)throw Error("Not enough points.");this.beginPath();this.moveTo(c[0].x,c[0].y);for(var d=1;d<b;d++)this.lineTo(c[d].x,c[d].y);this.scxStroke(a);return this}})})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(c){this.height=this.width=this.top=this.left=0;c=c||{};this.left=c.left||0;this.top=c.top||0;this.width=c.width||0;this.height=c.height||0}Object.defineProperty(g.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0});g.prototype.clone=function(){return new g(this)};g.prototype.equals=function(c){return c&&
this.left===c.left&&this.top===c.top&&this.width===c.width&&this.height===c.height};g.prototype.toString=function(){return"[left: "+this.left+", top: "+this.top+", width: "+this.width+", height: "+this.height+"]"};g.prototype.containsPoint=function(c){return c.x>=this.left&&c.x<=this.right&&c.y>=this.top&&c.y<=this.bottom};g.prototype.cropLeft=function(c){c=c.right;this.left<c&&(this.width=this.right-c,this.left=c)};g.prototype.cropRight=function(c){this.right>=c.left&&(this.width=c.left-1-this.left)};
g.prototype.cropTop=function(c){c=c.bottom;this.top<c&&(this.height=this.bottom-c,this.top=c)};g.prototype.cropBottom=function(c){this.bottom>c.top&&(this.height=c.top-this.top)};g.prototype.copyFrom=function(c){this.left=c.left;this.top=c.top;this.width=c.width;this.height=c.height};g.prototype.applyPadding=function(c){c.left&&(this.left+=c.left,this.width-=c.left);c.top&&(this.top+=c.top,this.height-=c.top);c.right&&(this.width-=c.right);c.bottom&&(this.height-=c.bottom)};return g}();e.Rect=k})(StockChartX||
(StockChartX={}));
(function(e){(function(k){k.REGULAR_DEVIATION=e.Environment.isMobile?20:5;k.MAGNET_DEVIATION=e.Environment.isMobile?40:15;k.DEVIATION=k.REGULAR_DEVIATION;k.length=function(g,c){var a=Math.abs(c.x-g.x);g=Math.abs(c.y-g.y);return Math.round(Math.sqrt(a*a+g*g))};k.xProjectionLength=function(g,c){return Math.abs(g.x-c.x)};k.yProjectionLength=function(g,c){return Math.abs(g.y-c.y)};k.isValueNearValue=function(g,c){return Math.abs(g-c)<=k.DEVIATION};k.isValueBetweenOrNearValues=function(g,c,a){return g>=
Math.min(c,a)-k.DEVIATION&&g<=Math.max(c,a)+k.DEVIATION};k.isPointNearPoint=function(g,c){if(Array.isArray(c)){for(var a=0;a<c.length;a++)if(this.isPointNearPoint(g,c[a]))return!0;return!1}return this.isValueNearValue(g.x,c.x)&&this.isValueNearValue(g.y,c.y)};k.isPointNearRectPoints=function(g,c,a){var b=Math.min(c.x,a.x),d=Math.max(c.x,a.x),f=Math.min(c.y,a.y);c=Math.max(c.y,a.y);return this.isPointNearLine(g,{x:b,y:c},{x:b,y:f})||this.isPointNearLine(g,{x:b,y:f},{x:d,y:f})||this.isPointNearLine(g,
{x:d,y:f},{x:d,y:c})?!0:this.isPointNearLine(g,{x:d,y:c},{x:b,y:c})};k.isPointInsideOrNearRect=function(g,c){return this.isValueBetweenOrNearValues(g.x,c.left,c.left+c.width)&&this.isValueBetweenOrNearValues(g.y,c.top,c.top+c.height)};k.isPointInsideOrNearRectPoints=function(g,c,a){var b=Math.min(c.y,a.y),d=Math.max(c.y,a.y);return this.isValueBetweenOrNearValues(g.x,Math.min(c.x,a.x),Math.max(c.x,a.x))&&this.isValueBetweenOrNearValues(g.y,b,d)};k.isPointNearCircle=function(g,c,a){g=this.length(c,
g);c="number"===typeof a?a:this.length(c,a);return this.isValueNearValue(g,c)};k.isPointInsideOrNearCircle=function(g,c,a){g=this.length(c,g);c="number"===typeof a?a:this.length(c,a);return this.isValueBetweenOrNearValues(g,0,c)};k.isPointNearPolygon=function(g,c){if(2>c.length)return!1;for(var a=0;a<c.length-1;a++)if(this.isPointNearLine(g,c[a],c[a+1]))return!0;return this.isPointNearLine(g,c[c.length-1],c[0])};k.isPointNearLine=function(g,c,a){if(!this.isPointInsideOrNearRectPoints(g,c,a))return!1;
if(Math.abs(c.x-a.x)<=k.DEVIATION)return!0;a=(c.y-a.y)/(c.x-a.x);var b=Math.abs(180*Math.atan(a)/Math.PI);return 10>=Math.abs(b-90)||10>=Math.abs(b-270)?this.isValueNearValue((g.y-(c.y-c.x*a))/a,g.x):this.isValueNearValue(c.y+a*(g.x-c.x),g.y)};k.isPointNearPolyline=function(g,c){for(var a=0,b=c.length;a<b-1;a++)if(this.isPointNearLine(g,c[a],c[a+1]))return!0;return!1};k.isPointNearEllipse=function(g,c,a){return this.isPointNearEllipseWithRadiuses(g,c,Math.abs(a.x-c.x),Math.abs(a.y-c.y))};k.isPointNearEllipseWithRadiuses=
function(g,c,a,b){var d=g.x-c.x;g=g.y-c.y;a=d*d/(a*a)+g*g/(b*b);return.8<a&&1.3>a}})(e.Geometry||(e.Geometry={}))})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(){this._eventsDispatcher=new e.EventsDispatcher;this._suppressEvents=!1;this._event={type:null,sender:this,target:this,value:void 0,oldValue:void 0}}g.prototype.suppressEvents=function(c){void 0===c&&(c=!0);var a=this._suppressEvents;this._suppressEvents=c;return a};g.prototype.on=function(c,a,b){this._eventsDispatcher.on(c,a,b);return this};g.prototype.off=function(c,a){this._eventsDispatcher.off(c,a);return this};g.prototype.fire=function(c,a){this._suppressEvents||
(a&&(a.sender=this),this._eventsDispatcher.fire(c,a))};g.prototype.fireValueChanged=function(c,a,b){this.fireTargetValueChanged(this,c,a,b)};g.prototype.fireTargetValueChanged=function(c,a,b,d){if(!this._suppressEvents){var f=this._event;f.target=c||this;f.value=b;f.oldValue=d;this.fire(a,f)}};return g}();e.EventableObject=k})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(){this._listeners={}}g.prototype.on=function(c,a,b){c=c.split(" ");for(var d=this._listeners,f=0;f<c.length;f++){var h=c[f];if(h){var l=h.split(".");h=l[0];l=l[1]||"";d[h]||(d[h]=[]);d[h].push({name:l,handler:a,target:b})}}};g.prototype.off=function(c,a){var b=0;for(c=c.split(" ");b<c.length;b++){var d=c[b];if(d){var f=d.split(".");d=f[0];f=f[1]||"";if(d)this._off(d,f,a);else{d=this._listeners;for(var h in d)d.hasOwnProperty(h)&&this._off(h,f,a)}}}};g.prototype._off=
function(c,a,b){a=a||"";var d=this._listeners[c];if(d){for(var f=0;f<d.length;f++)d[f].name!==a||b&&b!==d[f].target||(d.splice(f,1),f--);0===d.length&&delete this._listeners[c]}};g.prototype.fire=function(c,a){var b=this._listeners[c];if(b)for(a=a||{},a.type=c,c=0;c<b.length;c++)b[c].handler(a)};return g}();e.EventsDispatcher=k})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(){this._suppressEvents=!1}g.prototype.suppressEvents=function(c){void 0===c&&(c=!0);var a=this._suppressEvents;this._suppressEvents=c;return a};g.prototype.fire=function(c,a,b){var d=this.chart;d&&!this._suppressEvents&&d.fireTargetValueChanged(this,c,a,b)};return g}();e.ChartEventsExtender=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=jQuery;e.ViewsPath="view/";e.ChartState={NORMAL:0,RESIZING_PANELS:1,USER_DRAWING:2,ZOOM_IN:3};Object.freeze(e.ChartState);e.ChartEvent={WINDOW_MODE_CHANGED:"chartWindowModeChanged",TOOLBAR_LOADED:"chartToolbarLoaded",SCROLLBAR_LOADED:"chartScrollbarLoaded",STATE_CHANGED:"chartStateChanged",TIME_INTERVAL_CHANGED:"chartTimeIntervalChanged",INDICATOR_ADDED:"chartIndicatorAdded",INDICATOR_REMOVED:"chartIndicatorRemoved",THEME_CHANGED:"chartThemeChanged",GLOBAL_THEME_CHANGED:"chartGlobalThemeChanged",
PRICE_STYLE_CHANGED:"chartPriceStyleChanged",HOVER_RECORD_CHANGED:"chartHoverRecordChanged",INSTRUMENT_CHANGED:"chartInstrumentChanged",SYMBOL_ENTERED:"chartSymbolEntered",TIME_FRAME_CHANGED:"chartTimeFrameChanged",CROSS_HAIR_CHANGED:"chartCrossHairChanged",STATE_LOADED:"chartStateLoaded",LOCALE_CHANGED:"chartLocaleChanged",ENABLE_KEYBOARD_EVENTS_CHANGED:"chartEnableKeyboardEventsChanged",ENABLE_MOUSE_EVENTS_CHANGED:"chartEnableMouseEventsChanged",VALUE_SCALE_ADDED:"chartValueScaleAdded",VALUE_SCALE_REMOVED:"chartValueScaleRemoved",
USER_DRAWING_STARTED:"chartUserDrawingStarted",USER_DRAWING_FINISHED:"chartUserDrawingFinished",USER_DRAWING_CANCELLED:"chartUserDrawingCancelled",PANEL_ADDED:"chartPanelAdded",PANEL_REMOVED:"chartPanelRemoved",DATE_SCALE_THEME_CHANGED:"dateScaleThemeChanged",FIRST_VISIBLE_RECORD_CHANGED:"firstVisibleRecordChanged",LAST_VISIBLE_RECORD_CHANGED:"lastVisibleRecordChanged",MORE_HISTORY_REQUESTED:"chartMoreHistoryRequested",ZOOM_IN_STARTED:"chartZoomInStarted",ZOOM_IN_FINISHED:"chartZoomInFinished",ZOOM_IN_CANCELLED:"chartZoomInCancelled",
SHOW_INSTRUMENT_WATERMARK_CHANGED:"chartShowInstrumentWatermarkChanged",CONTEXT_MENU:"chartContextMenu"};Object.freeze(e.ChartEvent);e.getAllInstruments=function(){return[]};var g=e.TimeSpan.MILLISECONDS_IN_MINUTE;e.version="2.19.0";var c=function(a){function b(d){var f=a.call(this)||this;f._valueScales=[];f._chartPanelsFrame=new e.Rect;f._indicators=[];f._options={};f._showDrawings=!0;f._showDrawingTooltips=!0;f._stayInDrawingMode=!1;f._state=e.ChartState.NORMAL;f._updateAnimation=new e.Animation({context:f,
recurring:!1,callback:f._onUpdateAnimationCallback});if("object"!==typeof d)throw Error("Config must be an object.");if(!d.container)throw Error("Chart container is not specified.");f._container=k(d.container);if(0===f._container.length)throw Error("Unable to find HTML element by selector '"+d.container+'".');var h=d.width||800;if(0>=h)throw Error("Width must be a positive number.");var l=d.height||600;if(0>=l)throw Error("Height must be a positive number.");f._instrument=d.instrument;f.timeInterval=
d.timeInterval||g;f._loadOptionsState(d);f._valueMarker=new e.ValueMarker;f._dateMarker=new e.DateMarker;f._selectionMarker=new e.SelectionMarker({chart:f});f._layoutHtmlElements(h,l);f._applyTheme();f._dataManager=new e.DataManager;f._dataManager.addBarDataSeries();f._dateScale=new e.DateScale({chart:f});f.valueScales.push(new e.ValueScale({chart:f}));f._chartPanelsContainer=new e.ChartPanelsContainer({chart:f});f._crossHair=new e.CrossHair({chart:f});null!=d.crossHair&&(f.crossHairType=d.crossHair);
f._sessionBreakLines=new e.BreakLinesHandler({chart:f});f._priceStyle=new e.CandlePriceStyle({chart:f});f._priceStyle.apply();null!=d.priceStyle&&(f.priceStyleKind=d.priceStyle);f._subscribeEvents();f._spread=new e.SpreadHandler({chart:f});f.layout();if(!1!==d.showToolbar){if(e.JsUtil.isFunction(d.onToolbarLoaded))f.on(e.ChartEvent.TOOLBAR_LOADED,d.onToolbarLoaded);f.toolbar=f._container.scx().toolbar(f)}if(!1!==d.showScrollbar){if(e.JsUtil.isFunction(d.onScrollbarLoaded))f.on(e.ChartEvent.SCROLLBAR_LOADED,
d.onScrollbarLoaded);f.scrollbar=f._container.scx().scrollbar(f)}f._windowModeHandler=new e.WindowModeHandler(f);d.fullWindowMode&&f._windowModeHandler.setMode(e.WindowMode.FULL_WINDOW);f._keyboardHandler=new e.KeyboardHandler(f);!1!==d.showNavigation&&(f._navigation=f._rootDiv.scx().chartNavigation(f));f.localize(f._container);f.stateHandler=d.stateHandler?d.stateHandler:new e.LocalChartStateHandler({chart:f,autoSave:!0===d.autoSave});return f}__extends(b,a);Object.defineProperty(b,"version",{get:function(){return e.version},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"rootDiv",{get:function(){return this._rootDiv},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dateScale",{get:function(){return this._dateScale},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"valueScales",{get:function(){return this._valueScales},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"valueScale",{get:function(){return this._valueScales[0]},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"chartPanelsContainer",{get:function(){return this._chartPanelsContainer},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dataManager",{get:function(){return this._dataManager},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"timeInterval",{get:function(){return this._timeInterval},set:function(d){d=parseInt(d,
10);var f=this._timeInterval;if(f!==d){if(!isFinite(d)||0>=d)throw Error("Time interval must be greater than 0.");this._timeInterval=d;this.fireValueChanged(e.ChartEvent.TIME_INTERVAL_CHANGED,d,f)}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"chartPanelsFrame",{get:function(){return this._chartPanelsFrame},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"instrument",{get:function(){return this._instrument},set:function(d){this._instrument=d;this.fireValueChanged(e.ChartEvent.INSTRUMENT_CHANGED,
d,d)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"indicators",{get:function(){return this._indicators},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"valueMarker",{get:function(){return this._valueMarker},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dateMarker",{get:function(){return this._dateMarker},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"locale",{get:function(){return this._options.locale},set:function(d){var f=
this._options.locale;f!==d&&(this._options.locale=d,e.Localization.localize(this),this.fireValueChanged(e.ChartEvent.LOCALE_CHANGED,d,f))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"keyboardEventsEnabled",{get:function(){return this._options.enableKeyboardEvents},set:function(d){this._options.enableKeyboardEvents=d;this.fireValueChanged(e.ChartEvent.ENABLE_KEYBOARD_EVENTS_CHANGED,this._options.enableKeyboardEvents)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"mouseEventsEnabled",{get:function(){return this._options.enableMouseEvents},set:function(d){this._options.enableMouseEvents=d;this.fireValueChanged(e.ChartEvent.ENABLE_MOUSE_EVENTS_CHANGED,this._options.enableMouseEvents)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scrollEnabled",{get:function(){return this._options.scrollEnabled},set:function(d){this._options.scrollEnabled=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"zoomEnabled",{get:function(){return this._options.zoomEnabled},
set:function(d){this._options.zoomEnabled=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"theme",{get:function(){return this._options.theme},set:function(d){var f=this._options.theme;this._options.theme=d;for(var h=[],l=0;l<document.body.classList.length;l++)h.push(document.body.classList[l]);for(l=0;l<h.length;l++)-1!=h[l].indexOf("scxTheme")&&document.body.classList.remove(h[l]);d&&d.name&&!e.Theme[d.name]&&(e.Theme[d.name]=d);this._applyTheme();this.updateIndicators();this.fireValueChanged(e.ChartEvent.THEME_CHANGED,
d,f)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showBarInfoInTitle",{get:function(){return this._options.showBarInfoInTitle},set:function(d){this._options.showBarInfoInTitle=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showInstrumentWatermark",{get:function(){return this._options.showInstrumentWatermark},set:function(d){var f=this.showInstrumentWatermark;d!==f&&(this._options.showInstrumentWatermark=d,this.fireValueChanged(e.ChartEvent.SHOW_INSTRUMENT_WATERMARK_CHANGED,
d,f))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"priceStyle",{get:function(){return this._priceStyle},set:function(d){var f=this.priceStyle;if(f!==d){var h=this.dateRange();this._priceStyle.destroy();d.chart=this;this._priceStyle=d;this._priceStyle.apply();var l=this.dateScale,m=l.projection,q=m.recordByX(m.xByDate(h.startDate,!1),!1);h=m.recordByX(m.xByDate(h.endDate,!1),!1);l.canSetVisibleRecord(q)&&l.canSetVisibleRecord(h)?(this.firstVisibleRecord=q,this.lastVisibleRecord=
h-1,this.lastVisibleRecord-this.firstVisibleRecord<l.minVisibleRecords?this.setNeedsAutoScaleAll():this.setNeedsAutoScale()):this.setNeedsAutoScaleAll();this.fireValueChanged(e.ChartEvent.PRICE_STYLE_CHANGED,d,f)}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"priceStyleKind",{get:function(){var d=this.priceStyle;return d&&d.constructor.className},set:function(d){this.priceStyle=e.PriceStyle.create(d)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hoveredRecord",
{get:function(){return this._hoverRecord},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"crossHair",{get:function(){return this._crossHair},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"sessionBreakLines",{get:function(){return this._sessionBreakLines},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"selectedObject",{get:function(){return this._selectedObject},set:function(d){this._selectedObject=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"selectionMarker",{get:function(){return this._selectionMarker},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showDrawings",{get:function(){return this._showDrawings},set:function(d){this._showDrawings=!!d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showDrawingTooltips",{get:function(){return this._showDrawingTooltips},set:function(d){this._showDrawingTooltips=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"stayInDrawingMode",{get:function(){return this._stayInDrawingMode},
set:function(d){this._stayInDrawingMode=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"xGridVisible",{get:function(){return this._options.xGridVisible},set:function(d){this._options.xGridVisible=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"yGridVisible",{get:function(){return this._options.yGridVisible},set:function(d){this._options.yGridVisible=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){return this._state},
set:function(d){var f=this._state;f!==d&&(this._state=d,this.fireValueChanged(e.ChartEvent.STATE_CHANGED,d,f))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"windowModeHandler",{get:function(){return this._windowModeHandler},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"windowMode",{get:function(){return this._windowModeHandler.mode},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"keyboardHandler",{get:function(){return this._keyboardHandler},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){return{width:this._rootDiv.width(),height:this._rootDiv.height()}},set:function(d){this._container.css("width","auto").css("height","auto");this._rootDiv.width(d.width).height(d.height)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"mainPanel",{get:function(){return this._priceStyle.chartPanel||this._chartPanelsContainer.panels[0]},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"recordCount",{get:function(){return this.primaryDataSeries(e.DataSeriesSuffix.DATE).length},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"firstVisibleRecord",{get:function(){return this._dateScale.firstVisibleRecord},set:function(d){this._dateScale.firstVisibleRecord=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"lastVisibleRecord",{get:function(){return this._dateScale.lastVisibleRecord},set:function(d){this._dateScale.lastVisibleRecord=d},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"firstVisibleIndex",{get:function(){return this._dateScale.firstVisibleIndex},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"lastVisibleIndex",{get:function(){return this._dateScale.lastVisibleIndex},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"chartPanels",{get:function(){return this._chartPanelsContainer.panels},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"spread",{get:function(){return this._spread},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"crossHairType",{get:function(){return this._crossHair.crossHairType},set:function(d){this._crossHair.crossHairType=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"zoomInView",{get:function(){return this._zoomInView},set:function(d){this._zoomInView=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"navigation",{get:function(){return this._navigation},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"toolbar",{get:function(){return this._toolbar},set:function(d){this._toolbar=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scrollbar",{get:function(){return this._scrollbar},set:function(d){this._scrollbar=d},enumerable:!0,configurable:!0});b.prototype.localize=function(d){i18next.use(i18nextXHRBackend);i18next.init({debug:!1,lng:this.locale,fallbackLng:"en",backend:{loadPath:e.Localization.localesPath+"/{{lng}}.json?v=5"}},function(){jqueryI18next.init(i18next,k,{handleName:"localize"});
k(".scxComponentsContainer").localize();d&&k(d).localize()})};b.prototype.getBounds=function(){return new e.Rect({left:0,top:0,width:this._rootDiv.width(),height:this._rootDiv.height()})};b.prototype.selectObject=function(d){var f=this._selectedObject;if(!f&&!d||f===d&&d.selected)return!1;f&&(f.selected=!1);d&&(d.selected=!0);this.selectedObject=d;this.setNeedsUpdate();return!0};b.prototype.addValueScale=function(d){var f=this.valueScales;if(d)for(var h=0;h<f.length;h++){if(f[h]===d)throw Error("Value scale has been added already.");
}else d=new e.ValueScale({chart:this});f.push(d);this.fireValueChanged(e.ChartEvent.VALUE_SCALE_ADDED,d);return d};b.prototype.removeValueScale=function(d){var f;if(Array.isArray(d))for(f=0;f<d.length;f++)this.removeValueScale(d[f]);else{var h=this.valueScales;for(f=0;f<h.length;f++)if(h[f]===d){if(0===f)throw Error("Cannot remove main scale.");h.splice(f,1);this.fireValueChanged(e.ChartEvent.VALUE_SCALE_REMOVED,f);break}}};b.prototype.addIndicators=function(d){if(Array.isArray(d)){for(var f=[],h=
0;h<d.length;h++){var l=d[h];f.push(this.addIndicators(l))}return f}if(e.JsUtil.isNumber(d))return this.addIndicators(new e.TAIndicator({taIndicator:d}));if(d instanceof e.Indicator){f=this._indicators;for(h=0;h<f.length;h++)if(l=f[h],l===d)return d;d.chart=this;f.push(d);d.update();this.fireValueChanged(e.ChartEvent.INDICATOR_ADDED,d);return d}if("object"===typeof d)return l=k.extend(!0,{chart:this},d),d=e.Indicator.deserialize(l),this.addIndicators(d);throw new TypeError("Unknown indicator.");};
b.prototype.removeIndicators=function(d,f){var h=this;void 0===f&&(f=!0);if(Array.isArray(d))for(var l=0;l<d.length;l++){var m=d[l];m&&this.removeIndicators(m,f)}else{l=this._indicators;for(var q=function(r){var v=r.chartPanel;v&&(v.removePlot(r.plots),f&&0===v.plots.length&&v!==h.mainPanel&&h._chartPanelsContainer.removePanel(v));r.destroy();h.fireValueChanged(e.ChartEvent.INDICATOR_REMOVED,r)},p=0;p<l.length;p++)if(d){if(l[p]===d){l.splice(p,1);q(d);break}}else m=l[p],l.splice(p,1),q(m),p--}};b.prototype.updateIndicators=
function(){for(var d=0,f=this._indicators;d<f.length;d++)f[d].update()};b.prototype.saveIndicatorsState=function(){for(var d=[],f=this._indicators,h=0,l=this.chartPanels;h<l.length;h++)for(var m=l[h],q=0,p=f;q<p.length;q++){var r=p[q];r.chartPanel===m&&d.push(r.serialize())}return d};b.prototype.loadIndicatorsState=function(d){"string"===typeof d&&(d=JSON.parse(d));this.removeIndicators();d&&this.addIndicators(d)};b.prototype.saveDrawingsState=function(){for(var d=[],f=0,h=this._chartPanelsContainer.panels;f<
h.length;f++)for(var l=0,m=h[f].drawings;l<m.length;l++)d.push(m[l].saveState());return d};b.prototype.loadDrawingsState=function(d){"string"===typeof d&&(d=JSON.parse(d));this.removeDrawings();if(d)for(var f=this._chartPanelsContainer.panels,h=0;h<d.length;h++){var l=d[h],m=f[l.panelIndex];m&&(l=e.Drawing.deserialize(l))&&m.addDrawings(l)}};b.prototype.removeDrawings=function(){for(var d=0,f=this._chartPanelsContainer.panels;d<f.length;d++)f[d].removeDrawings()};b.prototype.saveState=function(){for(var d=
[],f=0,h=this.valueScales;f<h.length;f++)d.push(h[f].saveState());return{chart:k.extend(!0,{},this._options),priceStyle:this._priceStyle.saveState(),dateScale:this._dateScale.saveState(),valueScales:d,crossHair:this._crossHair.saveState(),chartPanelsContainer:this._chartPanelsContainer.saveState(),indicators:this.saveIndicatorsState(),drawings:this.saveDrawingsState()}};b.prototype.loadState=function(d){"string"===typeof d&&(d=JSON.parse(d));d=d||{};this.suppressEvents();this.removeIndicators();this._loadOptionsState(d.chart);
this._dateScale.loadState(d.dateScale);this._restoreValueScales(d);this._crossHair.loadState(d.crossHair);this._chartPanelsContainer.loadState(d.chartPanelsContainer);d.priceStyle&&(this._priceStyle=e.PriceStyle.deserialize(d.priceStyle));this._priceStyle.chart=this;this._priceStyle.apply(!1);this.layout();this.loadIndicatorsState(d.indicators);this.loadDrawingsState(d.drawings);this.suppressEvents(!1);this.theme=this.theme;this.fireValueChanged(e.ChartEvent.STATE_LOADED)};b.prototype._restoreValueScales=
function(d){for(var f=this.valueScales,h=0;h<f.length;h++)f[h].destroy();h=d.valueScales||[d.valueScale];for(d=f.length=0;d<h.length;d++){var l=new e.ValueScale({chart:this});f.push(l);l.loadState(h[d])}0===f.length&&f.push(new e.ValueScale({chart:this}))};b.prototype.startUserDrawing=function(d){switch(this.state){case e.ChartState.USER_DRAWING:this.cancelUserDrawing();break;case e.ChartState.NORMAL:break;default:throw Error("Unable to start user drawing in this chart state.");}this.state=e.ChartState.USER_DRAWING;
this.selectObject(null);this.addCssClass(e.DrawingCursorClass.CREATE);d.startUserDrawing();this.selectedObject=d;this.fireValueChanged(e.ChartEvent.USER_DRAWING_STARTED,d)};b.prototype.cancelUserDrawing=function(){if(this.state===e.ChartState.USER_DRAWING){var d=this._selectedObject.chartPanel;d&&d.removeDrawings(this._selectedObject);this.selectObject(null);this.removeCssClass(e.DrawingCursorClass.CREATE);this.state=e.ChartState.NORMAL;this.fireValueChanged(e.ChartEvent.USER_DRAWING_CANCELLED)}};
b.prototype._finishUserDrawing=function(){this.removeCssClass(e.DrawingCursorClass.CREATE);this.state=e.ChartState.NORMAL;this.fireValueChanged(e.ChartEvent.USER_DRAWING_FINISHED,this._selectedObject);if(this.stayInDrawingMode){var d=e.Drawing.deserialize({className:this._selectedObject.className});this.startUserDrawing(d)}};b.prototype.startZoomIn=function(d){this.zoomInView=new e.ZoomInView;this.zoomInView.zoomMode=d;this.state=e.ChartState.ZOOM_IN;this.fireValueChanged(e.ChartEvent.ZOOM_IN_STARTED)};
b.prototype.cancelZoomIn=function(){this.zoomInView&&this.state===e.ChartState.ZOOM_IN&&(this.state=e.ChartState.NORMAL,this.fireValueChanged(e.ChartEvent.ZOOM_IN_CANCELLED),this.zoomInView.cancelDraw())};b.prototype.setNeedsAutoScaleAll=function(){this._dateScale.setNeedsAutoScale();this._chartPanelsContainer.setNeedsAutoScale()};b.prototype.setWindowMode=function(d){this._windowModeHandler.setMode(d)};b.prototype.setNeedsLayout=function(){this.layout()};b.prototype.layout=function(){var d=this.getBounds(),
f=this._dateScale.layoutScalePanel(d);this._chartPanelsFrame=this._chartPanelsContainer.layoutScalePanel(f);f=new e.Rect({left:f.left,top:d.top,width:f.width,height:d.height});d=new e.Rect({left:this._chartPanelsFrame.left,top:d.top,width:this._chartPanelsFrame.width,height:d.height});this._dateScale.layout(f,d);this._chartPanelsContainer.layout(this._chartPanelsFrame);this._crossHair.layout();this.spread.layout();this._sessionBreakLines.layout()};b.prototype.draw=function(){this._dateScale.draw();
this._navigation.draw();this._chartPanelsContainer.draw()};b.prototype._drawLogo=function(){var d=this.container.find(".scxLogo");if(!d.length){var f=k('<a href="http://www.modulusfe.com/products/web-mobile-stock-chart-library/stockchartx-html5-web-mobile/" target="_blank"></a>');d=k("<div></div>").addClass("scxLogo").appendTo(f);f.appendTo(this.rootDiv)}f=this.chartPanelsContainer.panelsContentFrame.left+3;var h=-this._dateScale.bottomPanel.layer.size.height-d.height()-3;d.scxPosition(f,h)};b.prototype.update=
function(){this.layout();this.draw();this.scrollEnabled&&null!=this.scrollbar&&this.scrollbar.adjustDimensions()};b.prototype.setNeedsUpdate=function(d){d&&this.setNeedsAutoScale();this._updateAnimation.start()};b.prototype._onUpdateAnimationCallback=function(){this.update()};b.prototype.updateSplitter=function(d){this._chartPanelsContainer.layoutSplitterPanels(d)};b.prototype.destroy=function(d){void 0===d&&(d=!0);this._unsubscribeEvents();e.UI.HtmlContainer.instance.reset();this._windowModeHandler.destroy();
this._priceStyle.destroy();this._crossHair.destroy();this._selectionMarker.destroy();this._chartPanelsContainer.destroy();this.valueScale.destroy();this.dateScale.destroy();this._navigation.destroy();this._updateAnimation.destroy();this.toolbar.chart=null;this.scrollbar.chart=null;for(var f=0,h=this._indicators;f<h.length;f++)h[f].destroy();this._container&&(d?this._container.remove():this._container.empty(),this._container=null)};b.prototype.showWaitingBar=function(d){this._waitingBar||(this._waitingBar=
this._container.scx().waitingBar());this._waitingBar.show(d)};b.prototype.hideWaitingBar=function(d){this._waitingBar&&this._waitingBar.hide(d)};b.prototype._copyDrawing=function(){for(var d,f=0,h=this.chartPanels;f<h.length;f++){for(var l=0,m=h[f].drawings;l<m.length;l++){var q=m[l];if(q.selected){d=q;break}}if(d)break}d&&(this._copyBuffer=d.clone())};b.prototype._pasteDrawing=function(){if(this._copyBuffer){for(var d=this._copyBuffer.chartPanel,f=0,h=this.chartPanels;f<h.length;f++)if(h[f]===d){f=
this._copyBuffer.clone();d.addDrawings(f);f.translate(0,-30);d.setNeedsUpdate();return}this._copyBuffer=null}};b.prototype._handleMouseEvents=function(d){var f=d.data,h=d.originalEvent,l=void 0!==d.pageX?d.pageX:h.pageX,m=void 0!==d.pageY?d.pageY:h.pageY;h=h&&h.changedTouches;if(f.mouseEventsEnabled&&(!l&&!m&&h&&0<h.length&&(m=h[h.length-1],l=m.pageX,m=m.pageY),l={pointerPosition:f._rootDiv.scxClientToLocalPoint(l,m),evt:d},f._updateHoverRecord.call(f,l.pointerPosition.x),!d.toElement||!k(d.toElement).hasClass("scxTooltip"))){f._dateScale.handleEvent(l)||
f._chartPanelsContainer.handleEvent(l);switch(d.type){case "click":case "mousedown":case "touchstart":case "touchend":if(!l.stopPropagation)return}d.preventDefault();d.stopPropagation();return!1}};b.prototype.saveImage=function(d){html2canvas(this._rootDiv,{onrendered:function(f){if(d)d(f);else if(f.msToBlob)navigator.msSaveBlob(f.msToBlob(),"Chart.png");else{f=f.toDataURL().replace(/^data:image\/[^;]/,"data:application/octet-stream");var h=document.createElement("a");h.download="Chart.png";h.href=
f;document.body.appendChild(h);h.click();document.body.removeChild(h)}}})};b.prototype._loadOptionsState=function(d){d=d||{};this._options={theme:d.theme||e.Theme.Dark,locale:d.locale||"en",enableKeyboardEvents:void 0!==d.enableKeyboardEvents?!!d.enableKeyboardEvents:!0,enableMouseEvents:void 0!==d.enableMouseEvents?!!d.enableMouseEvents:!0,showBarInfoInTitle:void 0!==d.showBarInfoInTitle?!!d.showBarInfoInTitle:!0,priceStyle:e.CandlePriceStyle.className,showInstrumentWatermark:null!=d.showInstrumentWatermark?
d.showInstrumentWatermark:!0,xGridVisible:null!=d.xGridVisible?d.xGridVisible:!0,yGridVisible:null!=d.yGridVisible?d.yGridVisible:!0,scrollEnabled:null!=d.scrollEnabled?d.scrollEnabled:!0,zoomEnabled:null!=d.zoomEnabled?d.zoomEnabled:!0}};b.prototype._layoutHtmlElements=function(d,f){this._container.addClass("scxRootContainer");this._rootDiv=this._container.scxAppend("div","scxContainer").addClass("scxUnSelective").width(d).height(f);this._rootDiv.scxAppend("div","scxBackground")};b.prototype._applyTheme=
function(){var d=this.theme,f=d.chart,h="scxTheme"+d.name;k("body").hasClass(h)||k("body").addClass(h);h=this._container.find(".scxBackground");e.HtmlUtil.setBackground(h,f.background);f=f.border;this._container.find(".scxContainer").css("border",f.width+"px "+f.lineStyle+" "+f.strokeColor);this._valueMarker.theme=d.valueScale.valueMarker;this._dateMarker.theme=d.dateScale.dateMarker};b.prototype._subscribeEvents=function(){this._rootDiv.on("mouseenter mouseleave mousedown mousemove mouseup click dblclick mousewheel DOMMouseScroll contextmenu touchstart touchmove touchend ".split(" ").join(".scx, "),
this,this._handleMouseEvents)};b.prototype._unsubscribeEvents=function(){this._rootDiv&&this._rootDiv.off(".scx")};b.prototype._updateHoverRecord=function(d){d=this._dateScale.projection.recordByX(d);d!==this._hoverRecord&&(this._hoverRecord=d,this.fireValueChanged(e.ChartEvent.HOVER_RECORD_CHANGED,d))};b.prototype.barDataSeries=function(){return this._dataManager.barDataSeries()};b.prototype.getCommonDataSeries=function(){return this.barDataSeries()};b.prototype.addDataSeries=function(d,f){return this._dataManager.addDataSeries(d,
f)};b.prototype.removeDataSeries=function(d){this._dataManager.removeDataSeries(d)};b.prototype.clearDataSeries=function(d){this._dataManager.clearDataSeries(d);for(var f=0,h=this._indicators;f<h.length;f++)h[f].clearDataSeries(d)};b.prototype.trimDataSeries=function(d){this.dataManager.trimDataSeries(d)};b.prototype.getDataSeries=function(d){return this._dataManager.getDataSeries(d)};b.prototype.primaryDataSeries=function(d,f){void 0===f&&(f="");var h=this.priceStyle.primaryDataSeriesSuffix(d);return this.getDataSeries(f+
h+d)};b.prototype.primaryBarDataSeries=function(d){var f=e.DataSeriesSuffix;return{date:this.primaryDataSeries(f.DATE,d),open:this.primaryDataSeries(f.OPEN,d),high:this.primaryDataSeries(f.HIGH,d),low:this.primaryDataSeries(f.LOW,d),close:this.primaryDataSeries(f.CLOSE,d),volume:this.primaryDataSeries(f.VOLUME,d),buy_volume:this.primaryDataSeries(f.BUY_VOLUME,d),sell_volume:this.primaryDataSeries(f.SELL_VOLUME,d)}};b.prototype.primaryBar=function(d,f){f=this.primaryBarDataSeries(f);return this.dataManager.bar(d,
f)};b.prototype.findDataSeries=function(d){return this._dataManager.findDataSeries(d)};b.prototype.appendBars=function(d){this._dataManager.appendBars(d)};b.prototype.addChartPanel=function(d,f,h){return this._chartPanelsContainer.addPanel(d,f,h)};b.prototype.findPanelAt=function(d){return this._chartPanelsContainer.findPanelAt(d)};b.prototype.setNeedsAutoScale=function(){this._chartPanelsContainer.setNeedsAutoScale()};b.prototype.scrollOnPixels=function(d){this._dateScale.scrollOnPixels(d)};b.prototype.scrollOnRecords=
function(d){this._dateScale.scrollOnRecords(d)};b.prototype.zoomOnPixels=function(d){this._dateScale.zoomOnPixels(d)};b.prototype.zoomOnRecords=function(d){this._dateScale.zoomOnRecords(d)};b.prototype.visibleDataRange=function(){return{firstVisibleDataRecord:Math.max(this.firstVisibleRecord,0),lastVisibleDataRecord:Math.min(this.lastVisibleRecord,this.recordCount)}};b.prototype.recordRange=function(d,f){if(null==d&&null==f)return{firstVisibleRecord:this.firstVisibleRecord,lastVisibleRecord:this.lastVisibleRecord};
var h=this.recordCount;if(null==f){if(!e.JsUtil.isFiniteNumber(d)||0>=d)throw new TypeError("Positive number expected.");this.firstVisibleRecord=Math.max(h-d,0);this.lastVisibleRecord=h-1}else{if(!e.JsUtil.isFiniteNumber(d)||0>d)throw new TypeError("First record must be a positive number or 0.");if(!e.JsUtil.isFiniteNumber(f))throw new TypeError("Last record must be a positive number.");if(f<=d)throw Error("Last record must be greater than first record.");this.firstVisibleRecord=d;this.lastVisibleRecord=
f}};b.prototype.barsBetweenPoints=function(d,f){var h=this.dateScale.projection,l=0,m=this.primaryDataSeries(e.DataSeriesSuffix.CLOSE).length;0<m&&(d=(new e.ChartPoint(d)).getRecord(h),f=(new e.ChartPoint(f)).getRecord(h),l=0<=d&&d<m||0<=f&&f<m?Math.trunc(Math.min(Math.max(f,0),m-1))-Math.trunc(Math.min(Math.max(d,0),m-1))+(f>=d?1:-1):0>=d&&f>=m?m:0>=f&&d>=m?-m:0);return l};b.prototype.dateRange=function(d,f){var h=this.dateScale,l=h.projection;if(!d&&!f)return f=h.projectionFrame,{startDate:l.dateByX(f.left),
endDate:l.dateByX(f.right)};d=l.recordByX(l.xByDate(d,!1),!1);l=l.recordByX(l.xByDate(f,!1),!1);this.firstVisibleRecord=d;this.lastVisibleRecord=l-1};b.prototype.updateComputedDataSeries=function(){this.priceStyle.updateComputedDataSeries()};b.prototype.addCssClass=function(d){this.rootDiv.addClass(d)};b.prototype.removeCssClass=function(d){this.rootDiv.removeClass(d)};return b}(e.EventableObject);e.Chart=c})(StockChartX||(StockChartX={}));
(function(e){jQuery.fn.StockChartX=function(k){k=k||{};k.container=this;return new e.Chart(k)}})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(c){var a=this;this._maxChartsCountY=this._maxChartsCountX=1;this._chartsItems=[];this._displacement={width:2,height:20};this._isFullScreenMode=this._isFullWindowMode=!1;this._parent=c;$(window).resize(function(){return a.resizeCharts()});$(window).on("scxFullscreenChanged",this,function(b,d){return a._fullScreenChange(b,d)});$(window).on("scxFullWindowChanged",this,function(b,d){return a._fullWindowChange(b,d)})}Object.defineProperty(g.prototype,"parent",{get:function(){return this._parent},
enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"toolbar",{get:function(){return this._toolbar},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"scrollbar",{get:function(){return this._scrollbar},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"containerDisplacement",{get:function(){return this._displacement},set:function(c){this._displacement=c},enumerable:!0,configurable:!0});g.prototype.addChart=function(){var c=this,a=this,b=$('<div class="scxChartContainer scxNonActiveBorder"></div>').appendTo(this._parent),
d=b.StockChartX({width:0,height:0,showToolbar:!1}),f=d.keyboardEventsEnabled,h=d.mouseEventsEnabled,l,m,q,p;d.keyboardEventsEnabled=!1;d.mouseEventsEnabled=!1;d.on(e.ChartEvent.ENABLE_KEYBOARD_EVENTS_CHANGED+".chartsContainer",function(r){l=r.target;m=r.value}).on(e.ChartEvent.ENABLE_MOUSE_EVENTS_CHANGED+".chartsContainer",function(r){q=r.target;p=r.value});this._toolbar||(this._toolbar=new e.UI.Toolbar({parent:this._parent.parent(),chart:d}),b.removeClass("scxNonActiveBorder"),b.addClass("scxActiveBorder"),
d===l&&(f=m),f&&(d.keyboardEventsEnabled=!0),d===q&&(h=p),h&&(d.mouseEventsEnabled=!0));b.mousedown(function(r){r=$(r.currentTarget);for(var v=0,u=c._chartsItems;v<u.length;v++){var t=u[v];t.chart.off(".chartsContainer");r.is(t.container)?(t.container.addClass("scxActiveBorder"),t.container.removeClass("scxNonActiveBorder"),t.chart===l&&(t.keyboardEventsEnabled=m),t.keyboardEventsEnabled&&(t.chart.keyboardEventsEnabled=!0),t.chart===q&&(t.mouseEventsEnabled=p),t.mouseEventsEnabled&&(t.chart.mouseEventsEnabled=
!0),a._toolbar.chart=t.chart):(t.container.removeClass("scxActiveBorder"),t.container.addClass("scxNonActiveBorder"),t.chart===l&&(t.keyboardEventsEnabled=m),t.keyboardEventsEnabled&&(t.chart.keyboardEventsEnabled=!1),t.chart===q&&(t.mouseEventsEnabled=p),t.mouseEventsEnabled&&(t.chart.mouseEventsEnabled=!1));t.chart.on(e.ChartEvent.ENABLE_KEYBOARD_EVENTS_CHANGED+".chartsContainer",function(w){l=w.target;m=w.value}).on(e.ChartEvent.ENABLE_MOUSE_EVENTS_CHANGED+".chartsContainer",function(w){q=w.target;
p=w.value})}});this._chartsItems.push({container:b,chart:d,keyboardEventsEnabled:f,mouseEventsEnabled:h});b.css("float","left");this._parent.css({top:0,left:0,height:"100%",width:"100%",display:"block",clear:"both",overflow:"hidden"});this._parent.parent().css({height:"100%",width:"100%",clear:"both",overflow:"hidden"});return d};g.prototype.resizeCharts=function(){if(!this._isFullWindowMode){var c=this;switch(this._chartsItems.length){case 1:this._maxChartsCountY=this._maxChartsCountX=1;break;case 2:this._maxChartsCountX=
1;this._maxChartsCountY=2;break;case 3:this._maxChartsCountX=1;this._maxChartsCountY=3;break;default:this._maxChartsCountY=this._maxChartsCountX=2}var a=this._parent.parent().parent(),b=a.height()/this._maxChartsCountY-2,d=a.width()/this._maxChartsCountX-2;$.each(this._chartsItems,function(f,h){h.chart.size={width:d-c.containerDisplacement.width,height:b-c.containerDisplacement.height};h.chart.setNeedsAutoScale();h.chart.setNeedsUpdate()});this._parent.parent().width(a.width()).height(a.height())}};
g.prototype._fullScreenChange=function(c,a){a.windowMode===e.WindowMode.FULL_SCREEN?(this.toolbar.prependTo(a.container),this.scrollbar.appendTo(a.container),this.parent.parent().parent().css({width:window.outerWidth,height:window.outerHeight}),this._isFullScreenMode=!0):(this._isFullWindowMode||(this.toolbar.prependTo(this._parent.parent()),this.scrollbar.appendTo(this._parent.parent())),this.parent.parent().parent().css({width:"100%",height:"100%"}),this._isFullScreenMode=!1,this.resizeCharts())};
g.prototype._fullWindowChange=function(c,a){a.windowMode===e.WindowMode.FULL_WINDOW||a.windowMode===e.WindowMode.FULL_SCREEN?(this._isFullWindowMode=!0,this.toolbar.prependTo(a.container),this.scrollbar.appendTo(a.container),this.containerDisplacement.width=6,this.containerDisplacement.height=42,a.container.css({"z-index":"1",position:"absolute","background-color":$("body").css("background-color")}),this._parent.parent().css({width:"100%",height:"100%"}),a.size={width:this._parent.width()-this.containerDisplacement.width,
height:this._parent.height()-this.containerDisplacement.height},a.setNeedsAutoScale(),a.setNeedsUpdate()):(this._isFullWindowMode=!1,this._isFullScreenMode||(this.toolbar.prependTo(this._parent.parent()),this.scrollbar.appendTo(this._parent.parent()),a.container.css("background-color","transparent")),this.containerDisplacement.width=2,this.containerDisplacement.height=20,a.container.css("top","0"),a.container.css("z-index","auto"),a.container.css("position","relative"),this.resizeCharts())};return g}();
e.ChartsContainer=k})(StockChartX||(StockChartX={}));(function(e){})(StockChartX||(StockChartX={}));(function(e){var k=function(){return function(){}}();e.Component=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);c.prototype.destroy=function(){this._unsubscribe&&this._unsubscribe()};return c}(e.Component);e.Handler=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;b._chart=a;return b}__extends(c,g);Object.defineProperty(c.prototype,"chart",{get:function(){return this._chart},set:function(a){var b=this._chart;b!==a&&(this._onChartChanging&&this._onChartChanging(),this._chart=a,this._onChartChanged&&this._onChartChanged(b))},enumerable:!0,configurable:!0});return c}(e.Handler);e.ChartHandler=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);return c}(e.Component);e.VisualComponent=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0});c.prototype.layout=function(){this._container||(this._container=this._createContainer(),this.update())};c.prototype.update=function(){this.applyTheme()};c.prototype._removeContainer=function(){this._container&&(this._container.remove(),this._container=null)};c.prototype.destroy=
function(){this._removeContainer()};return c}(e.VisualComponent);e.HtmlComponent=k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;a&&(b.chart=a.chart);return b}__extends(c,g);Object.defineProperty(c.prototype,"chart",{get:function(){return this._chart},set:function(a){this._chart!==a&&(this._onChartChanging(),this._chart=a,this._onChartChanged())},enumerable:!0,configurable:!0});c.prototype._onChartChanging=function(){this._removeContainer()};return c}(e.HtmlComponent);e.ChartHtmlComponent=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;a&&(b.chartPanel=a.chartPanel);return b}__extends(c,g);Object.defineProperty(c.prototype,"chartPanel",{get:function(){return this._panel},set:function(a){this._panel!==a&&(this._onChartPanelChanging(),this._panel=a,this._onChartPanelChanged())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"chart",{get:function(){return this._panel&&this._panel.chart},enumerable:!0,configurable:!0});c.prototype._onChartPanelChanging=
function(){this._unsubscribe&&this._unsubscribe();this._removeContainer()};c.prototype._onChartPanelChanged=function(){this._subscribe&&this._subscribe()};c.prototype.destroy=function(){this._unsubscribe&&this._unsubscribe();g.prototype.destroy.call(this)};return c}(e.HtmlComponent);e.ChartPanelHtmlComponent=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;a&&(b._chart=a.chart);return b}__extends(c,g);Object.defineProperty(c.prototype,"chart",{get:function(){return this._chart},set:function(a){this._chart!==a&&(this._onChartChanging(),this._chart=a,this._onChartChanged())},enumerable:!0,configurable:!0});c.prototype._onChartChanging=function(){this._unsubscribe&&this._unsubscribe()};c.prototype._onChartChanged=function(){this._subscribe&&this._subscribe()};c.prototype.destroy=function(){this._unsubscribe&&
this._unsubscribe()};return c}(e.Component);e.ChartComponent=k})(StockChartX||(StockChartX={}));(function(e){})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){var a=g.call(this)||this;a._gestures=a._initGestures&&a._initGestures()||new e.GestureArray;return a}__extends(c,g);c.prototype.hitTest=function(a){return!1};c.prototype.layout=function(a){};c.prototype.handleEvent=function(a,b){void 0===b&&(b=!0);return this._gestures.handleEvent(a,b)};return c}(e.Component);e.Control=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){var a=null!==g&&g.apply(this,arguments)||this;a._frame=new e.Rect;return a}__extends(c,g);Object.defineProperty(c.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0});c.prototype.hitTest=function(a){return e.Geometry.isPointInsideOrNearRect(a,this._frame)};c.prototype.layout=function(a){this._container||(this._container=
this._createContainer());this._container.scxFrame(a);this._frame.copyFrom(a)};c.prototype._removeContainer=function(){this._container&&(this._container.remove(),this._container=null)};c.prototype.destroy=function(){this._removeContainer()};return c}(e.Control);e.HtmlControl=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;if(!a)throw new TypeError("Config is not specified.");b._chart=a.chart;return b}__extends(c,g);Object.defineProperty(c.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0});c.prototype.destroy=function(){this._unsubscribe&&this._unsubscribe();g.prototype.destroy.call(this)};return c}(e.HtmlControl);e.ChartHtmlControl=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(){function c(){}Object.defineProperty(c,"registeredPriceStyles",{get:function(){return this._priceStyles.registeredItems},enumerable:!0,configurable:!0});c.register=function(a,b){"string"===typeof a?this._priceStyles.register(a,b):this._priceStyles.register(a.className,a)};c.create=function(a){return this._priceStyles.createInstance(a)};c.deserialize=function(a){if(!a)return null;var b=this._priceStyles.createInstance(a.className);b.loadState(a);return b};c._priceStyles=
new e.ClassRegistrar;return c}(),g=function(c){function a(b){var d=c.call(this,b)||this;b&&(d.chart=b.chart);return d}__extends(a,c);Object.defineProperty(a,"className",{get:function(){return""},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"plot",{get:function(){return this._plot},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"chartPanel",{get:function(){return this._plot&&this._plot.chartPanel},enumerable:!0,configurable:!0});a.prototype._onChartChanging=
function(){this.destroy()};a.prototype.saveState=function(){return{className:this.constructor.className}};a.prototype.loadState=function(b){};a.prototype.apply=function(b){void 0===b&&(b=!0);var d=this.chart;if(d){var f=this._plot;f||(this._plot=f=this.createPlot());if(!f)throw Error("Price style plot is not created.");this.updateComputedDataSeries();d.updateIndicators();var h=e.DataSeriesSuffix;f.dataSeries=[d.primaryDataSeries(h.CLOSE),d.primaryDataSeries(h.OPEN),d.primaryDataSeries(h.HIGH),d.primaryDataSeries(h.LOW)];
d.mainPanel.addPlot(f);b&&d.mainPanel.setNeedsAutoScale();d.setNeedsUpdate()}};a.prototype.dataSeriesSuffix=function(){return""};a.prototype.primaryDataSeriesSuffix=function(b){var d=e.DataSeriesSuffix;switch(b){case d.OPEN:case d.HIGH:case d.LOW:case d.CLOSE:return this.dataSeriesSuffix();default:return""}};a.prototype.removeComputedDataSeries=function(){var b=this.chart;if(b){var d=this.dataSeriesSuffix(),f=e.DataSeriesSuffix;d&&(b.removeDataSeries(d+f.DATE),b.removeDataSeries(d+f.OPEN),b.removeDataSeries(d+
f.HIGH),b.removeDataSeries(d+f.LOW),b.removeDataSeries(d+f.CLOSE),b.removeDataSeries(d+f.VOLUME))}};a.prototype.updateComputedDataSeries=function(){};a.prototype._calculateAtr=function(b){var d=new e.TAIndicator({taIndicator:TASdk.AverageTrueRange,chart:this.chart});d.setParameterValue(e.IndicatorParam.PERIODS,b);d._usePrimaryDataSeries=!1;b=d.calculate();if(!b.recordSet)return null;d=b.recordSet.getField(e.IndicatorField.INDICATOR);return d?(b=e.DataSeries.fromField(d,b.startIndex).lastValue)?Math.roundToDecimals(b,
5):null:null};a.prototype.destroy=function(){var b=this._plot,d=b&&b.chartPanel;d&&d.removePlot(b);this.removeComputedDataSeries()};return a}(e.ChartComponent);e.PriceStyle=g;e.JsUtil.applyMixins(g,[k])})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"bar"},enumerable:!0,configurable:!0});c.prototype.createPlot=function(){return new e.BarPlot({plotStyle:e.BarPlot.Style.OHLC,plotType:e.PlotType.PRICE_STYLE})};return c}(e.PriceStyle);e.BarPriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"HLBar"},enumerable:!0,configurable:!0});c.prototype.createPlot=function(){return new e.BarPlot({plotStyle:e.BarPlot.Style.HL,plotType:e.PlotType.PRICE_STYLE})};return c}(e.PriceStyle);e.HLBarPriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"HLCBar"},enumerable:!0,configurable:!0});c.prototype.createPlot=function(){return new e.BarPlot({plotStyle:e.BarPlot.Style.HLC,plotType:e.PlotType.PRICE_STYLE})};return c}(e.PriceStyle);e.HLCBarPriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"coloredHLBar"},enumerable:!0,configurable:!0});c.prototype.createPlot=function(){return new e.BarPlot({plotStyle:e.BarPlot.Style.COLORED_HL,plotType:e.PlotType.PRICE_STYLE})};return c}(e.PriceStyle);e.ColoredHLBarPriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"coloredHLCBar"},enumerable:!0,configurable:!0});c.prototype.createPlot=function(){return new e.BarPlot({plotStyle:e.BarPlot.Style.COLORED_HLC,plotType:e.PlotType.PRICE_STYLE})};return c}(e.PriceStyle);e.ColoredHLCBarPriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"candle"},enumerable:!0,configurable:!0});c.prototype.createPlot=function(){return new e.BarPlot({plotStyle:e.BarPlot.Style.CANDLE,plotType:e.PlotType.PRICE_STYLE})};return c}(e.PriceStyle);e.CandlePriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"coloredBar"},enumerable:!0,configurable:!0});c.prototype.createPlot=function(){return new e.BarPlot({plotStyle:e.BarPlot.Style.COLORED_OHLC,plotType:e.PlotType.PRICE_STYLE})};return c}(e.PriceStyle);e.ColoredBarPriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"heikinAshi"},enumerable:!0,configurable:!0});c.prototype.createPlot=function(){return new e.BarPlot({plotStyle:e.BarPlot.Style.CANDLE,plotType:e.PlotType.PRICE_STYLE})};c.prototype.dataSeriesSuffix=function(){return e.DataSeriesSuffix.HEIKIN_ASHI};c.prototype.updateComputedDataSeries=function(){var a=this.chart.dataManager,b=a.ohlcDataSeries(e.DataSeriesSuffix.HEIKIN_ASHI,
!0);e.BarConverter.convertToHeikinAshi(a.ohlcDataSeries(),b)};return c}(e.PriceStyle);e.HeikinAshiPriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"hollowCandle"},enumerable:!0,configurable:!0});c.prototype.createPlot=function(){return new e.BarPlot({plotStyle:e.BarPlot.Style.HOLLOW_CANDLE,plotType:e.PlotType.PRICE_STYLE})};return c}(e.PriceStyle);e.HollowCandlePriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.KagiReversalKind={ATR:"atr",FIXED:"fixed"};Object.freeze(e.KagiReversalKind);var k=function(g){function c(a){var b=g.call(this,a)||this;b.reversal=null;b.loadState(a);return b}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"kagi"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"reversalValue",{get:function(){return this._reversalValue},enumerable:!0,configurable:!0});c.prototype.saveState=function(){var a=g.prototype.saveState.call(this);
a.reversal=e.JsUtil.clone(this.reversal);return a};c.prototype.loadState=function(a){g.prototype.loadState.call(this,a);this.reversal=a&&a.reversal||e.JsUtil.clone(c.defaults.reversal)};c.prototype.createPlot=function(){return new e.BarPlot({plotStyle:e.BarPlot.Style.KAGI,plotType:e.PlotType.PRICE_STYLE})};c.prototype.dataSeriesSuffix=function(){return e.DataSeriesSuffix.KAGI};c.prototype.primaryDataSeriesSuffix=function(a){var b=g.prototype.primaryDataSeriesSuffix.call(this,a);if(b)return b;switch(a){case e.DataSeriesSuffix.DATE:case e.DataSeriesSuffix.VOLUME:return this.dataSeriesSuffix();
default:return""}};c.prototype._calculateReversalValue=function(){var a=this.reversal;switch(a.kind){case e.KagiReversalKind.ATR:a=this._calculateAtr(a.value);break;case e.KagiReversalKind.FIXED:a=a.value;break;default:throw Error("Unknown reversal amount kind: "+a.kind);}return this._reversalValue=a};c.prototype.updateComputedDataSeries=function(){var a=this.chart.dataManager,b=a.barDataSeries(e.DataSeriesSuffix.KAGI,!0),d=this._calculateReversalValue();d&&e.BarConverter.convertToKagi(a.barDataSeries(),
d,b)};c.defaults={reversal:{kind:e.KagiReversalKind.ATR,value:20}};return c}(e.PriceStyle);e.KagiPriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this,a)||this;b.loadState(a);return b}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"lineBreak"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"lines",{get:function(){return this._lines},set:function(a){if(!e.JsUtil.isFiniteNumber(a)||0>=a)throw Error("Lines count must be a number greater than 0.");this._lines=a},enumerable:!0,configurable:!0});c.prototype.saveState=function(){var a=g.prototype.saveState.call(this);
a.lines=this.lines;return a};c.prototype.loadState=function(a){g.prototype.loadState.call(this,a);this.lines=a&&a.lines||c.defaults.lines};c.prototype.createPlot=function(){return new e.BarPlot({plotStyle:e.BarPlot.Style.CANDLE,plotType:e.PlotType.PRICE_STYLE})};c.prototype.dataSeriesSuffix=function(){return e.DataSeriesSuffix.LINE_BREAK};c.prototype.primaryDataSeriesSuffix=function(a){var b=g.prototype.primaryDataSeriesSuffix.call(this,a);if(b)return b;switch(a){case e.DataSeriesSuffix.DATE:case e.DataSeriesSuffix.VOLUME:return this.dataSeriesSuffix();
default:return""}};c.prototype.updateComputedDataSeries=function(){var a=this.chart.dataManager,b=a.barDataSeries(e.DataSeriesSuffix.LINE_BREAK,!0);e.BarConverter.convertToLineBreak(a.barDataSeries(),this.lines,b)};c.defaults={lines:3};return c}(e.PriceStyle);e.LineBreakPriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"line"},enumerable:!0,configurable:!0});c.prototype.createPlot=function(){return new e.LinePlot({plotStyle:e.LinePlot.Style.SIMPLE,plotType:e.PlotType.PRICE_STYLE})};return c}(e.PriceStyle);e.LinePriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"mountain"},enumerable:!0,configurable:!0});c.prototype.createPlot=function(){return new e.LinePlot({plotStyle:e.LinePlot.Style.MOUNTAIN,plotType:e.PlotType.PRICE_STYLE})};return c}(e.PriceStyle);e.MountainPriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.PointAndFigureBoxSizeKind={ATR:"atr",FIXED:"fixed"};Object.freeze(e.PointAndFigureBoxSizeKind);e.PointAndFigureSource={CLOSE:"close",HIGH_LOW:"highLow"};Object.freeze(e.PointAndFigureSource);var k=function(g){function c(a){var b=g.call(this,a)||this;b.source=null;b.boxSize=null;b.loadState(a);return b}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"pointAndFigure"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"reversal",{get:function(){return this._reversal},
set:function(a){if(null!=a&&!e.JsUtil.isPositiveNumber(a))throw new TypeError("Reversal must be a positive number.");this._reversal=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"boxSizeValue",{get:function(){return this._boxSizeValue},enumerable:!0,configurable:!0});c.prototype.saveState=function(){var a=g.prototype.saveState.call(this);a.boxSize=e.JsUtil.clone(this.boxSize);a.reversal=this._reversal;a.source=this.source;return a};c.prototype.loadState=function(a){g.prototype.loadState.call(this,
a);this.boxSize=a&&a.boxSize||e.JsUtil.clone(c.defaults.boxSize);this.reversal=a&&a.reversal||c.defaults.reversal;this.source=a&&a.source||c.defaults.source};c.prototype.createPlot=function(){var a=new e.PointAndFigurePlot({plotStyle:e.BarPlot.Style.POINT_AND_FIGURE,plotType:e.PlotType.PRICE_STYLE});a.boxSize=this._boxSizeValue;return a};c.prototype.dataSeriesSuffix=function(){return e.DataSeriesSuffix.POINT_AND_FIGURE};c.prototype.primaryDataSeriesSuffix=function(a){var b=g.prototype.primaryDataSeriesSuffix.call(this,
a);if(b)return b;switch(a){case e.DataSeriesSuffix.DATE:case e.DataSeriesSuffix.VOLUME:return this.dataSeriesSuffix();default:return""}};c.prototype._calculateBoxSizeValue=function(){var a=this.boxSize;switch(a.kind){case e.PointAndFigureBoxSizeKind.ATR:a=this._calculateAtr(a.value);break;case e.PointAndFigureBoxSizeKind.FIXED:a=a.value;break;default:throw Error("Unknown box size kind: "+a.kind);}return this._boxSizeValue=a};c.prototype.updateComputedDataSeries=function(){var a=this.chart.dataManager,
b=a.barDataSeries(e.DataSeriesSuffix.POINT_AND_FIGURE,!0),d=this._calculateBoxSizeValue();if(d){var f=this._plot;f&&(f.boxSize=d);e.BarConverter.convertToPointAndFigure(a.barDataSeries(),d,this.reversal,this.source,b)}};c.defaults={source:e.PointAndFigureSource.CLOSE,boxSize:{kind:e.PointAndFigureBoxSizeKind.ATR,value:20},reversal:3};return c}(e.PriceStyle);e.PointAndFigurePriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.RenkoBoxSizeKind={FIXED:"fixed",ATR:"atr"};Object.freeze(e.RenkoBoxSizeKind);var k=function(g){function c(a){var b=g.call(this,a)||this;b.boxSize=null;b.loadState(a);return b}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"renko"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"boxSizeValue",{get:function(){return this._boxSizeValue},enumerable:!0,configurable:!0});c.prototype.saveState=function(){var a=g.prototype.saveState.call(this);a.boxSize=
e.JsUtil.clone(this.boxSize);return a};c.prototype.loadState=function(a){g.prototype.loadState.call(this,a);this.boxSize=a&&a.boxSize||e.JsUtil.clone(c.defaults.boxSize)};c.prototype.createPlot=function(){return new e.BarPlot({plotStyle:e.BarPlot.Style.RENKO,plotType:e.PlotType.PRICE_STYLE})};c.prototype.dataSeriesSuffix=function(){return e.DataSeriesSuffix.RENKO};c.prototype.primaryDataSeriesSuffix=function(a){var b=g.prototype.primaryDataSeriesSuffix.call(this,a);if(b)return b;switch(a){case e.DataSeriesSuffix.DATE:case e.DataSeriesSuffix.VOLUME:return this.dataSeriesSuffix();
default:return""}};c.prototype._calculateBoxSizeValue=function(){var a=this.boxSize;switch(a.kind){case e.RenkoBoxSizeKind.ATR:a=this._calculateAtr(a.value);break;case e.RenkoBoxSizeKind.FIXED:a=a.value;break;default:throw Error("Unknown box size kind: "+a.kind);}return this._boxSizeValue=a};c.prototype.updateComputedDataSeries=function(){var a=this.chart.dataManager,b=a.barDataSeries(e.DataSeriesSuffix.RENKO,!0),d=this._calculateBoxSizeValue();d&&e.BarConverter.convertToRenko(a.barDataSeries(),d,
b)};c.defaults={boxSize:{kind:e.RenkoBoxSizeKind.ATR,value:20}};return c}(e.PriceStyle);e.RenkoPriceStyle=k;e.PriceStyle.register(k)})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(c){this._isStarted=!1;this.context=null;this.recurring=!0;c&&(this.context=c.context,null!=c.recurring&&(this.recurring=c.recurring),this.callback=c.callback)}Object.defineProperty(g.prototype,"callback",{get:function(){return this._callback},set:function(c){if(null!=c&&!e.JsUtil.isFunction(c))throw new TypeError("Callback must be a function.");this._callback=c},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"started",{get:function(){return this._isStarted},
enumerable:!0,configurable:!0});g.prototype.start=function(){if(!this.callback)throw Error("Callback is not assigned.");return this._isStarted?!1:e.AnimationController.add(this)?this._isStarted=!0:!1};g.prototype.stop=function(){e.AnimationController.remove(this);this._isStarted=!1};g.prototype.handleAnimationFrame=function(){this.callback.call(this.context)};g.prototype.destroy=function(){this.stop();this.context=null};return g}();e.Animation=k})(StockChartX||(StockChartX={}));
(function(e){function k(a){return setTimeout(a,c.AnimationInterval)}function g(){var a=c;if(Date.now()-a._prevStartTime>=c.AnimationInterval){for(var b=a._animations,d=0;d<b.length;d++){var f=b[d];f.handleAnimationFrame();f.recurring||(f.stop(),d--)}a._prevStartTime=Date.now()}a.hasAnimationsToRun()&&requestAnimationFrame(g)}window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||
k;var c;(function(a){a.AnimationInterval=1E3/(e.Environment.isMobile?20:40);a._animations=[];a._prevStartTime=Date.now();a.hasAnimationsToRun=function(){return 0<this._animations.length};a.contains=function(b){return 0<=this._animations.indexOf(b)};a.add=function(b){if(this.contains(b))return!1;var d=this.hasAnimationsToRun();this._animations.push(b);d||requestAnimationFrame(g);return!0};a.remove=function(b){var d=this._animations;b=d.indexOf(b);if(0>b)return!1;d.splice(b,1);return!0}})(c=e.AnimationController||
(e.AnimationController={}))})(StockChartX||(StockChartX={}));
(function(e){var k;(function(c){c[c.LEFT=1]="LEFT";c[c.SCROLL=2]="SCROLL";c[c.RIGHT=3]="RIGHT"})(k=e.MouseButton||(e.MouseButton={}));e.MouseEvent={ENTER:"mouseenter",LEAVE:"mouseleave",MOVE:"mousemove",DOWN:"mousedown",UP:"mouseup",CLICK:"click",DOUBLE_CLICK:"dblclick",CONTEXT_MENU:"contextmenu",WHEEL:"mousewheel",SCROLL:"DOMMouseScroll"};Object.freeze(e.MouseEvent);e.TouchEvent={START:"touchstart",MOVE:"touchmove",END:"touchend"};Object.freeze(e.TouchEvent);e.GestureState={NONE:0,STARTED:1,CONTINUED:2,
FINISHED:3};Object.freeze(e.GestureState);var g=function(){function c(a){this.button=this.context=this.hitTest=this.handler=null;this._state=e.GestureState.NONE;a&&(this.handler=a.handler,this.hitTest=a.hitTest,this.context=a.context,this.button=a.button)}Object.defineProperty(c.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0});c.prototype.handleEvent=function(a){return!1};c.prototype._checkButton=function(a){var b=this.button;return null==b||b===k.LEFT&&(e.Environment.isPhone||
e.Environment.isMobile)?!0:a.evt.which===b};c.prototype._checkHit=function(a){if(a.evt.type===e.MouseEvent.LEAVE)return!1;var b=this.hitTest;return b?b.call(this.context,a.pointerPosition):!1};c.prototype._invokeHandler=function(a){var b=this.handler;b&&b.call(this.context,this,a)};c.prototype.isActive=function(){var a=this._state;return a===e.GestureState.STARTED||a===e.GestureState.CONTINUED};return c}();e.Gesture=g})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this,a)||this;b.enterEnabled=!0;b.hoverEnabled=!0;b.leaveEnabled=!0;a&&(null!=a.enterEventEnabled&&(b.enterEnabled=a.enterEventEnabled),null!=a.hoverEventEnabled&&(b.hoverEnabled=a.hoverEventEnabled),null!=a.leaveEventEnabled&&(b.leaveEnabled=a.leaveEventEnabled));return b}__extends(c,g);c.prototype.handleEvent=function(a){switch(a.evt.type){case e.MouseEvent.ENTER:case e.MouseEvent.MOVE:case e.TouchEvent.START:case e.TouchEvent.MOVE:if(this._checkHit(a))return this.isActive()?
(this._state=e.GestureState.CONTINUED,this.hoverEnabled&&this._invokeHandler(a)):(this._state=e.GestureState.STARTED,this.enterEnabled&&this._invokeHandler(a)),!0;if(this.isActive())return this._checkHit(a)||(this._state=e.GestureState.FINISHED,this.leaveEnabled&&this._invokeHandler(a)),!0;break;case e.MouseEvent.LEAVE:case e.TouchEvent.END:if(this.isActive())return this._state=e.GestureState.FINISHED,this.leaveEnabled&&this._invokeHandler(a),!0}return!1};return c}(e.Gesture);e.MouseHoverGesture=
k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this,a)||this;b.moveOffset={x:0,y:0};b._minMoveDistance=1;b.horizontalMoveEnabled=!0;b.verticalMoveEnabled=!0;b._prevPoint=null;b._lastPoint=null;b._animation=new e.Animation({context:b,recurring:!1});b._which=0;a&&(null!=a.minMoveDistance&&(b.minMoveDistance=a.minMoveDistance),null!=a.horizontalMoveEnabled&&(b.horizontalMoveEnabled=a.horizontalMoveEnabled),a.verticalMoveEnabled&&(b.verticalMoveEnabled=a.verticalMoveEnabled));return b}__extends(c,
g);Object.defineProperty(c.prototype,"minMoveDistance",{get:function(){return this._minMoveDistance},set:function(a){if(!e.JsUtil.isPositiveNumber(a))throw Error("minMoveDistance must be a positive number.");this._minMoveDistance=a},enumerable:!0,configurable:!0});c.prototype.handleEvent=function(a){var b=this._lastPoint={x:a.pointerPosition.x,y:a.pointerPosition.y};switch(a.evt.type){case e.MouseEvent.DOWN:case e.TouchEvent.START:if(this._checkButton(a)&&this._checkHit(a))return this._prevPoint=
{x:b.x,y:b.y},this._which=a.evt.type===e.TouchEvent.START?1:a.evt.which,this._state=e.GestureState.STARTED,this._invokeHandler(a),!0;break;case e.MouseEvent.MOVE:case e.TouchEvent.MOVE:var d=this.moveOffset;if(this.isActive()){d.x=b.x-this._prevPoint.x;d.y=b.y-this._prevPoint.y;b=this.minMoveDistance;if(this.horizontalMoveEnabled&&Math.abs(d.x)>=b||this.verticalMoveEnabled&&Math.abs(d.y)>=b)if(d=this._animation,this._state=e.GestureState.CONTINUED,!d.started){var f=e.JsUtil.shallowClone(a);d.callback=
function(){this._prevPoint=this._lastPoint;f.evt.which=this._which;this._invokeHandler(f)};d.start()}return!0}break;case e.MouseEvent.UP:case e.MouseEvent.LEAVE:case e.TouchEvent.END:if(this.isActive())return this._animation.stop(),this._state=e.GestureState.FINISHED,this._invokeHandler(a),!0}return!1};return c}(e.Gesture);e.PanGesture=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){a=g.call(this,a)||this;a.delta=0;a._prevScale=0;a._lastScale=0;a._scaleThreshold=.005;a._animation=new e.Animation({context:a,recurring:!1});return a}__extends(c,g);c.prototype.handleEvent=function(a){var b=a.evt,d=b.originalEvent;switch(b.type){case e.MouseEvent.WHEEL:case e.MouseEvent.SCROLL:if(this._checkHit(a))return this.delta=b.type===e.MouseEvent.SCROLL?0<d.detail?1:-1:0>d.wheelDelta?1:-1,this._state=e.GestureState.FINISHED,this._invokeHandler(a),
!0;break;case e.TouchEvent.START:if(!this.isActive()&&2===d.touches.length){this._prevScale=this._lastScale=d.scale;if(void 0===this._prevScale&&(this._prevScale=this._lastScale=c._calculateScale(d.touches),void 0===this._prevScale))break;this._state=e.GestureState.STARTED;return!0}break;case e.TouchEvent.MOVE:if(this.isActive()){b=this._lastScale=d.scale;if(void 0===b){d=d.touches;if(2!==d.length)return!0;b=this._lastScale=c._calculateScale(d)}d=b-this._prevScale;if(Math.abs(d)>=(0<this._prevScale&&
0>b||0>this._prevScale&&0<b?2:1)*this._scaleThreshold&&(this.delta=0>d?1:-1,this._state=e.GestureState.CONTINUED,d=this._animation,!d.started)){var f=e.JsUtil.shallowClone(a);d.callback=function(){this._prevScale=this._lastScale;this._invokeHandler(f)};d.start()}return!0}break;case e.TouchEvent.END:if(this.isActive())return this._state=e.GestureState.FINISHED,!0}return!1};c._calculateScale=function(a){var b=a[0].pageX-a[1].pageX;a=a[0].pageY-a[1].pageY;return Math.sqrt(b*b+a*a)/Math.max(window.innerWidth,
window.innerHeight)};return c}(e.Gesture);e.MouseWheelGesture=k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this,a)||this;b._maxTouchOffset=10;b._maxTouchInterval=500;a&&(a.maxTouchOffset&&(b.maxTouchOffset=a.maxTouchOffset),a.maxTouchInterval&&(b.maxTouchInterval=a.maxTouchInterval));return b}__extends(c,g);Object.defineProperty(c.prototype,"maxTouchOffset",{get:function(){return this._maxTouchOffset},set:function(a){if(!e.JsUtil.isPositiveNumber(a))throw Error("Max touch offset must be a number greater than 0.");this._maxTouchOffset=a},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"maxTouchInterval",{get:function(){return this._maxTouchInterval},set:function(a){if(!e.JsUtil.isPositiveNumber(a))throw Error("Max touch interval must be a number greater than 0.");this._maxTouchInterval=a},enumerable:!0,configurable:!0});c.prototype.handleEvent=function(a){switch(a.evt.type){case e.MouseEvent.CLICK:if(!c._isTouch&&this._finishGesture(a))return!0;break;case e.TouchEvent.START:c._isTouch=!0;this._checkHit(a)&&(this._startPoint=a.pointerPosition,
this._startDate=new Date,this._state=e.GestureState.STARTED);break;case e.TouchEvent.END:if(this.isActive()){var b=Math.abs(a.pointerPosition.y-this._startPoint.y),d=new Date;if(Math.abs(a.pointerPosition.x-this._startPoint.x)<=this._maxTouchOffset&&b<=this._maxTouchOffset&&d-this._startDate<=this._maxTouchInterval&&this._finishGesture(a))return!0;this._state=e.GestureState.NONE}}return!1};c.prototype._finishGesture=function(a){if(this._checkButton(a)&&this._checkHit(a))return this._state=e.GestureState.FINISHED,
this._invokeHandler(a),!0};return c}(e.Gesture);e.ClickGesture=k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this,a)||this;b._maxTouchOffset=10;b._maxTouchInterval=2500;a&&(a.maxTouchOffset&&(b.maxTouchOffset=a.maxTouchOffset),a.maxTouchInterval&&(b.maxTouchInterval=a.maxTouchInterval));return b}__extends(c,g);Object.defineProperty(c.prototype,"maxTouchOffset",{get:function(){return this._maxTouchOffset},set:function(a){if(!e.JsUtil.isPositiveNumber(a))throw Error("Max touch offset must be a number greater than 0.");this._maxTouchOffset=a},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"maxTouchInterval",{get:function(){return this._maxTouchInterval},set:function(a){if(!e.JsUtil.isPositiveNumber(a))throw Error("Max touch interval must be a number greater than 0.");this._maxTouchInterval=a},enumerable:!0,configurable:!0});c.prototype.handleEvent=function(a){switch(a.evt.type){case e.MouseEvent.DOUBLE_CLICK:if(this._finishGesture(a))return!0;break;case e.TouchEvent.START:if(this.isActive())return this._isSecondTouch=!0;if(this._checkHit(a))return this._startPoint=
a.pointerPosition,this._startDate=new Date,this._isSecondTouch=!1,this._state=e.GestureState.STARTED,!0;this._state=e.GestureState.NONE;break;case e.TouchEvent.END:if(this._isSecondTouch){var b=Math.abs(a.pointerPosition.y-this._startPoint.y),d=new Date;if(Math.abs(a.pointerPosition.x-this._startPoint.x)<=this._maxTouchOffset&&b<=this._maxTouchOffset&&d-this._startDate<=this._maxTouchInterval){if(this._finishGesture(a))return!0}else this._state=e.GestureState.NONE}}return!1};c.prototype._finishGesture=
function(a){return this._checkButton(a)&&this._checkHit(a)?(this._state=e.GestureState.FINISHED,this._invokeHandler(a),a.stopPropagation=!0):!1};return c}(e.Gesture);e.DoubleClickGesture=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this,a)||this;b._maxTouchOffset=10;b._touchInterval=2E3;a&&(a.maxTouchOffset&&(b.maxTouchOffset=a.maxTouchOffset),a.touchInterval&&(b.touchInterval=a.touchInterval));return b}__extends(c,g);Object.defineProperty(c.prototype,"maxTouchOffset",{get:function(){return this._maxTouchOffset},set:function(a){if(!e.JsUtil.isPositiveNumber(a))throw Error("Max touch offset must be a number greater than 0.");this._maxTouchOffset=a},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"touchInterval",{get:function(){return this._touchInterval},set:function(a){if(!e.JsUtil.isPositiveNumber(a))throw Error("Touch interval must be a number greater than 0.");this._touchInterval=a},enumerable:!0,configurable:!0});c.prototype.handleEvent=function(a){switch(a.evt.type){case e.MouseEvent.CONTEXT_MENU:this._isTouch=!1;if(this._finishGesture(a))return!0;break;case e.TouchEvent.START:this._isTouch=!0;this._checkHit(a)&&(this._startPoint=a.pointerPosition,
this._lastEvent=e.JsUtil.clone(a),this._state=e.GestureState.STARTED,this._startTimeout());break;case e.TouchEvent.MOVE:this.isActive()&&(this._lastEvent=e.JsUtil.clone(a));break;case e.TouchEvent.END:if(this._stopTimeout(),this._lastEvent)return this._lastEvent=null,a.stopPropagation=!0}return!1};c.prototype._startTimeout=function(){var a=this;this._timeoutId=setTimeout(function(){if(a.isActive()){var b=a._lastEvent,d=Math.abs(b.pointerPosition.y-a._startPoint.y);if(Math.abs(b.pointerPosition.x-
a._startPoint.x)<=a._maxTouchOffset&&d<=a._maxTouchOffset&&a._finishGesture(b))return!0;a._state=e.GestureState.NONE}},this._touchInterval)};c.prototype._stopTimeout=function(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)};c.prototype._finishGesture=function(a){if(this._checkHit(a))return this._state=e.GestureState.FINISHED,this._invokeHandler(a),!0};return c}(e.Gesture);e.ContextMenuGesture=k})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(c,a,b){this.gestures=[];if(c&&(this.add(c),a||b)){c=0;for(var d=this.gestures;c<d.length;c++){var f=d[c];f.context||(f.context=a);f.hitTest||(f.hitTest=b)}}}g.prototype.add=function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];a=0;for(c=e.JsUtil.flattenArray(c);a<c.length;a++){var b=c[a];this.contains(b)||this.gestures.push(b)}};g.prototype.remove=function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];c=e.JsUtil.flattenArray(c);
a=this.gestures;for(var b=0;b<c.length;b++){var d=a.indexOf(c[b]);0<=d&&a.splice(d,1)}};g.prototype.contains=function(c){return 0<=this.gestures.indexOf(c)};g.prototype.handleEvent=function(c,a){void 0===a&&(a=!0);for(var b=!1,d=0,f=this.gestures;d<f.length;d++){var h=f[d];a?!h.handleEvent(c)||h instanceof e.MouseHoverGesture||(b=!0):(h instanceof e.MouseHoverGesture||c.evt.type===e.MouseEvent.LEAVE||c.evt.type===e.MouseEvent.UP)&&h.handleEvent(c)}return b};return g}();e.GestureArray=k})(StockChartX||
(StockChartX={}));
(function(e){var k=jQuery,g,c=function(){function a(){}Object.defineProperty(a,"context",{get:function(){g||(g=k("<canvas></canvas>")[0].getContext("2d"));return g},enumerable:!0,configurable:!0});a.applyTextTheme=function(b){this.context.scxApplyTextTheme(b)};a.textWidth=function(b,d){var f=this.context;d&&f.scxApplyTextTheme(d);return f.measureText(b).width};a.measureText=function(b,d){return{width:this.textWidth(b,d),height:e.HtmlUtil.getFontSize(d)+1}};return a}();e.DummyCanvasContext=c})(StockChartX||
(StockChartX={}));(function(e){var k=function(){function g(){}g.calculateLinearRegression=function(c){for(var a=0,b=0,d=c.length,f=0;f<d;f++)a+=f,b+=c[f];a=0===d?0:a/d;b=0===d?0:b/d;var h=0,l=0;for(f=0;f<d;f++)h+=(f-a)*(c[f]-b),l+=Math.pow(f-a,2);c=0===l?0:h/l;return{slope:c,firstValue:b-c*a}};return g}();e.DrawingCalculationUtil=k})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(c,a){this._dateScale=c;this._valueScale=a}Object.defineProperty(g.prototype,"dateScale",{get:function(){return this._dateScale},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"valueScale",{get:function(){return this._valueScale},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"canResolveX",{get:function(){return!!this._dateScale},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"canResolveY",{get:function(){return!!this._valueScale},
enumerable:!0,configurable:!0});g.prototype.columnByRecord=function(c,a){c-=Math.trunc(this._dateScale.firstVisibleRecord);!1!==a&&(c=Math.trunc(c));return c};g.prototype.recordByColumn=function(c,a){c+=Math.trunc(this._dateScale.firstVisibleRecord);!1!==a&&(c=Math.trunc(c));return c};g.prototype.xByColumn=function(c,a,b){var d=this._dateScale,f=d.columnWidth,h=d.firstVisibleRecord;c=d.projectionFrame.left-(h-Math.trunc(h))*f+c*f;!1!==a&&(c+=f/2);return!1!==b?Math.round(c):c};g.prototype.columnByX=
function(c,a){var b=this._dateScale,d=b.firstVisibleRecord,f=b.columnWidth;c=(c-b.projectionFrame.left+(d-Math.trunc(d))*f)/f;return!1!==a?Math.floor(c):c};g.prototype.xByRecord=function(c,a,b){return this.xByColumn(this.columnByRecord(c,a),a,b)};g.prototype.recordByX=function(c,a){return this.recordByColumn(this.columnByX(c,a),a)};g.prototype.dateByRecord=function(c){var a=this._dateScale.getDateDataSeries().values;return 0===a.length?new Date(0):0>c?(c=a[0].getTime()+c*this._dateScale.chart.timeInterval,
new Date(c)):c>=a.length?(c=a[a.length-1].getTime()+(c-a.length+1)*this._dateScale.chart.timeInterval,new Date(c)):a[c]};g.prototype.recordByDate=function(c){var a=this._dateScale,b=a.getDateDataSeries();if(0===b.length)return-1;var d=b.floorIndex(c);0>d?(b=c.getTime()-b.firstValue.getTime(),d=Math.floor(b/a.chart.timeInterval)):d>=b.length&&(c=c.getTime()-b.lastValue.getTime(),d=b.length-1+Math.floor(c/a.chart.timeInterval));return d};g.prototype.dateByColumn=function(c){c=this.recordByColumn(c);
return this.dateByRecord(c)};g.prototype.columnByDate=function(c){c=this.xByDate(c,!1);return this.columnByX(c)};g.prototype.dateByX=function(c){c=Math.round(c);var a=this.columnByX(c),b=this.xByColumn(a,!0,!1),d=this.dateByColumn(a);if(c===b)return d;a=c<b?a-1:a+1;var f=this.xByColumn(a,!0,!1);a=this.dateByColumn(a);f=b-f;var h=d=d.getTime();0!==f&&(c=(c-b)/f,h+=(d-a.getTime())*c);return new Date(h)};g.prototype.xByDate=function(c,a){var b=this.recordByDate(c),d=this.xByRecord(b,!0,!1),f=this.dateByRecord(b),
h=b+1;b=this.xByRecord(h,!0,!1);var l=this.dateByRecord(h);h=f.getTime();l=l.getTime()-f.getTime();f=d;0!==l&&(c=(c.getTime()-h)/l,f+=(b-d)*c);return!1!==a?Math.round(f):f};g.prototype.yByValue=function(c){var a=this._valueScale,b=a.projectionFrame,d=a.maxVisibleValue;return Math.round(b.top+b.height/(d-a.minVisibleValue)*(d-c))};g.prototype.valueByY=function(c){var a=this._valueScale,b=a.projectionFrame,d=a.maxVisibleValue;return d-(d-a.minVisibleValue)/b.height*(c-b.top)};return g}();e.Projection=
k})(StockChartX||(StockChartX={}));(function(e){})(StockChartX||(StockChartX={}));
var __decorate=this&&this.__decorate||function(e,k,g,c){var a=arguments.length,b=3>a?k:null===c?c=Object.getOwnPropertyDescriptor(k,g):c,d;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)b=Reflect.decorate(e,k,g,c);else for(var f=e.length-1;0<=f;f--)if(d=e[f])b=(3>a?d(b):3<a?d(k,g,b):d(k,g))||b;return 3<a&&b&&Object.defineProperty(k,g,b),b},__awaiter=this&&this.__awaiter||function(e,k,g,c){return new (g||(g=Promise))(function(a,b){function d(l){try{h(c.next(l))}catch(m){b(m)}}function f(l){try{h(c["throw"](l))}catch(m){b(m)}}
function h(l){l.done?a(l.value):(new g(function(m){m(l.value)})).then(d,f)}h((c=c.apply(e,k||[])).next())})},__generator=this&&this.__generator||function(e,k){function g(l){return function(m){return c([l,m])}}function c(l){if(b)throw new TypeError("Generator is already executing.");for(;a;)try{if(b=1,d&&(f=l[0]&2?d["return"]:l[0]?d["throw"]||((f=d["return"])&&f.call(d),0):d.next)&&!(f=f.call(d,l[1])).done)return f;if(d=0,f)l=[l[0]&2,f.value];switch(l[0]){case 0:case 1:f=l;break;case 4:return a.label++,
{value:l[1],done:!1};case 5:a.label++;d=l[1];l=[0];continue;case 7:l=a.ops.pop();a.trys.pop();continue;default:if(!(f=a.trys,f=0<f.length&&f[f.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!f||l[1]>f[0]&&l[1]<f[3]))a.label=l[1];else if(6===l[0]&&a.label<f[1])a.label=f[1],f=l;else if(f&&a.label<f[2])a.label=f[2],a.ops.push(l);else{f[2]&&a.ops.pop();a.trys.pop();continue}}l=k.call(e,a)}catch(m){l=[6,m],d=0}finally{b=f=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}var a=
{label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},b,d,f,h;return h={next:g(0),"throw":g(1),"return":g(2)},"function"===typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h};
(function(e){var k=function(){function g(){}g.ensureLocalStorageAvailable=function(c,a,b){var d=b.value;b.value=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];if(!localStorage)throw Error("Local storage is not available.");return d.apply(this,f)};return b};g.prototype.save=function(c,a){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(b){localStorage.setItem(c,a);return[2]})})};g.prototype.load=function(c){return __awaiter(this,void 0,void 0,function(){return __generator(this,
function(a){return[2,localStorage.getItem(c)]})})};g.prototype.clear=function(c){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){c?localStorage.removeItem(c):localStorage.clear();return[2]})})};__decorate([g.ensureLocalStorageAvailable],g.prototype,"save",null);__decorate([g.ensureLocalStorageAvailable],g.prototype,"load",null);__decorate([g.ensureLocalStorageAvailable],g.prototype,"clear",null);return g}();e.LocalDataStore=k})(StockChartX||(StockChartX={}));
(function(e){e.DataSeriesSuffix={DATE:".date",OPEN:".open",HIGH:".high",LOW:".low",CLOSE:".close",VOLUME:".volume",HEIKIN_ASHI:".heikin_ashi",RENKO:".renko",LINE_BREAK:".line_break",POINT_AND_FIGURE:".point_and_figure",KAGI:"kagi",BUY_VOLUME:".buy_volume",SELL_VOLUME:".sell_volume"};Object.freeze(e.DataSeriesSuffix);var k=function(){function g(c){if(c)if("string"===typeof c)var a=c;else if("object"===typeof c){a=c.name;var b=c.values}else throw new TypeError("Unknown config.");this.name=a;this.values=
b||[]}Object.defineProperty(g.prototype,"name",{get:function(){return this._name},set:function(c){this._name=c||""},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"values",{get:function(){return this._values},set:function(c){if(!Array.isArray(c))throw new TypeError("An array of values expected.");this._values=c||[]},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,
"nameSuffix",{get:function(){var c=this.name,a=c.lastIndexOf(".");return 0<=a?c.substr(a):null},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"isValueDataSeries",{get:function(){return this.nameSuffix!==e.DataSeriesSuffix.DATE},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"isDateDataSeries",{get:function(){return this.nameSuffix===e.DataSeriesSuffix.DATE},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"firstValue",{get:function(){return this._values[0]},
enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"lastValue",{get:function(){var c=this._values;return 0<c.length?c[c.length-1]:null},enumerable:!0,configurable:!0});g.prototype.valueAtIndex=function(c,a){var b=this._values,d=b[c];void 0!==a&&(b[c]=a);return d};g.prototype.add=function(c){var a=this._values;Array.isArray(c)?this._values=a.concat(c):a.push(c)};g.prototype.updateLast=function(c){var a=this._values;0<a.length&&(a[a.length-1]=c)};g.prototype.clear=function(){this._values.length=
0};g.prototype.trim=function(c){var a=this._values;c=a.length-c;0<c?a.splice(0,c):c=0;return c};g.prototype.itemsCountBetweenValues=function(c,a){for(var b=0,d=0,f=this._values;d<f.length;d++){var h=f[d];null!=h&&h>=c&&h<=a&&b++}return b};g.prototype.minMaxValues=function(c,a){var b=this._values;if(null==c||0>c)c=0;null==a&&(a=b.length-c);a=Math.min(c+a-1,b.length-1);for(var d={min:Infinity,max:-Infinity},f=c;f<=a;f++)c=b[f],null!=c&&(c<d.min&&(d.min=c),c>d.max&&(d.max=c));return d};g.prototype.floorIndex=
function(c){var a=this.binaryIndexOf(c);if(0===a){var b=this._values;if(0===b.length||b[0]>c)return-1}return 0<=a?a:~a};g.prototype.ceilIndex=function(c){c=this.binaryIndexOf(c);return 0<=c?c:~c+1};g.prototype.binaryIndexOf=function(c){for(var a=this._values,b=0,d=a.length-1,f,h;b<=d;)if(f=(b+d)/2|0,h=a[f],h<c)b=f+1;else if(h>c)d=f-1;else return f;return~d};g.prototype.leftNearestVisibleValueIndex=function(c){var a=this._values;for(c=Math.min(c,a.length-1);0<=c;c--)if(null!=a[c])return c;return 0};
g.prototype.rightNearestVisibleValueIndex=function(c){for(var a=this._values,b=a.length;c<b;c++)if(null!=a[c])return c;return b-1};g.fromField=function(c,a){var b=new g;b.fromField(c,a);return b};g.prototype.toField=function(c){var a=new TASdk.Field;a.name=c||this.name;a.recordCount=this._values.length;a._m_values=[0].concat(this._values);a._m_values.push(0);return a};g.prototype.fromField=function(c,a){var b=c.recordCount;c=c._m_values.slice(1,a+b);var d;for(d=0;d<a-1;d++)c[d]=null;for(;d<b;)c[d]===
TASdk.Const.nullValue&&(c[d]=null),d++;this._values=c};return g}();e.DataSeries=k})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(){this._dataSeries={}}Object.defineProperty(g.prototype,"dateDataSeries",{get:function(){return this.getDataSeries(e.DataSeriesSuffix.DATE)},enumerable:!0,configurable:!0});g.prototype.findDataSeries=function(c){var a=this._dataSeries,b;for(b in a)if(a.hasOwnProperty(b)){var d=b.lastIndexOf(c);if(0<=d&&d===b.length-c.length)return a[b]}return null};g.prototype.getDataSeries=function(c,a){void 0===a&&(a=!1);var b=this._dataSeries[c];return b?b:a?this.addDataSeries(c):
null};g.prototype.indexByDate=function(c){var a=this.dateDataSeries;if(!a)return null;c=a.binaryIndexOf(c);return 0<=c?c:null};g.prototype.clearDataSeries=function(c){if(c)"string"===typeof c?(c=this.getDataSeries(c))&&c.clear():c.clear();else{c=this._dataSeries;for(var a in c)c.hasOwnProperty(a)&&c[a].clear()}};g.prototype.trimDataSeries=function(c){var a=this._dataSeries,b;for(b in a)a.hasOwnProperty(b)&&a[b].trim(c)};g.prototype.addBarDataSeries=function(c){void 0===c&&(c="");var a=e.DataSeriesSuffix;
return{date:this.addDataSeries(c+a.DATE),open:this.addDataSeries(c+a.OPEN),high:this.addDataSeries(c+a.HIGH),low:this.addDataSeries(c+a.LOW),close:this.addDataSeries(c+a.CLOSE),volume:this.addDataSeries(c+a.VOLUME),buy_volume:this.addDataSeries(c+a.BUY_VOLUME),sell_volume:this.addDataSeries(c+a.SELL_VOLUME)}};g.prototype.barDataSeries=function(c,a){void 0===c&&(c="");void 0===a&&(a=!1);var b=e.DataSeriesSuffix;return{date:this.getDataSeries(c+b.DATE,a),open:this.getDataSeries(c+b.OPEN,a),high:this.getDataSeries(c+
b.HIGH,a),low:this.getDataSeries(c+b.LOW,a),close:this.getDataSeries(c+b.CLOSE,a),volume:this.getDataSeries(c+b.VOLUME,a),buy_volume:this.getDataSeries(c+b.BUY_VOLUME,a),sell_volume:this.getDataSeries(c+b.SELL_VOLUME,a)}};g.prototype.ohlcDataSeries=function(c,a){void 0===c&&(c="");void 0===a&&(a=!1);var b=e.DataSeriesSuffix;return{open:this.getDataSeries(c+b.OPEN,a),high:this.getDataSeries(c+b.HIGH,a),low:this.getDataSeries(c+b.LOW,a),close:this.getDataSeries(c+b.CLOSE,a)}};g.prototype.addDataSeries=
function(c,a){void 0===a&&(a=!1);if(!c)throw Error("Data series is not specified.");if("string"===typeof c)return this.addDataSeries(new e.DataSeries(c),a);if(!(c instanceof e.DataSeries))throw new TypeError("Invalid data series. Name or data series object expected.");var b=c.name;if(!b||"string"!==typeof b)throw new TypeError("Data series name must be non-empty string.");if(this.getDataSeries(b)&&!a)throw Error("Data series '"+b+"' exists already.");return this._dataSeries[b]=c};g.prototype.removeDataSeries=
function(c){c?delete this._dataSeries["string"===typeof c?c:c.name]:this._dataSeries={}};g.prototype.appendBars=function(c){var a=this.barDataSeries(),b=function(f){a.date.add(f.date);a.open.add(f.open);a.high.add(f.high);a.low.add(f.low);a.close.add(f.close);a.volume.add(f.volume);a.buy_volume.add(f.buy_volume);a.sell_volume.add(f.sell_volume)};if(Array.isArray(c))for(var d=0;d<c.length;d++)b(c[d]);else b(c)};g.prototype.bar=function(c,a){a=a?a:this.barDataSeries();c="number"===typeof c?c:this.indexByDate(c);
return null==c?null:{date:a.date.valueAtIndex(c),open:a.open.valueAtIndex(c),high:a.high.valueAtIndex(c),low:a.low.valueAtIndex(c),close:a.close.valueAtIndex(c),volume:a.volume.valueAtIndex(c)}};return g}();e.DataManager=k})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(){}g._setupOhlcDataSeries=function(c,a){var b=e.DataSeriesSuffix;a=a||{open:new e.DataSeries(c+b.OPEN),high:new e.DataSeries(c+b.HIGH),low:new e.DataSeries(c+b.LOW),close:new e.DataSeries(c+b.CLOSE)};a.open.clear();a.high.clear();a.low.clear();a.close.clear();return a};g._setupBarDataSeries=function(c,a){var b=e.DataSeriesSuffix;a=this._setupOhlcDataSeries(c,a);a.date?a.date.clear():a.date=new e.DataSeries(c+b.DATE);a.volume?a.volume.clear():a.volume=new e.DataSeries(c+
b.VOLUME);a.buy_volume?a.buy_volume.clear():a.buy_volume=new e.DataSeries(c+b.BUY_VOLUME);a.sell_volume?a.sell_volume.clear():a.sell_volume=new e.DataSeries(c+b.SELL_VOLUME);return a};g.convertToHeikinAshi=function(c,a){a=this._setupOhlcDataSeries(e.DataSeriesSuffix.HEIKIN_ASHI,a);var b=c.open.values,d=c.high.values,f=c.low.values;c=c.close.values;for(var h=c.length,l=a.open.values,m=a.high.values,q=a.low.values,p=a.close.values,r=0;r<h;r++){var v=0<r?(l[r-1]+p[r-1])/2:b[r],u=(b[r]+d[r]+f[r]+c[r])/
4,t=Math.max(v,u,d[r]),w=Math.min(v,u,f[r]);l.push(v);m.push(t);q.push(w);p.push(u)}return a};g.convertToRenko=function(c,a,b){b=this._setupBarDataSeries(e.DataSeriesSuffix.RENKO,b);var d=c.date.values,f=c.close.values,h=c.volume.values,l=f.length,m=b.date.values,q=b.open.values,p=b.high.values,r=b.low.values,v=b.close.values,u=b.volume.values;if(0===l)return b;var t=null;c=Math.floor(c.open.values[0]/a)*a+a;for(var w=c-a,x=0,y=0;y<l;y++){x+=h[y];t||(t=new Date(d[y].getTime()));var z=f[y];if(z-w>=
a){z=Math.trunc((z-w)/a);for(var A=0;A<z;A++)c=w,w+=a,m.push(t),q.push(c),p.push(w),r.push(c),v.push(w),u.push(x),t=new Date(t.getTime()+1E3);x=0;t=null}else if(c-z>=a){z=Math.trunc((c-z)/a);for(A=0;A<z;A++)w=c,c-=a,m.push(t),q.push(w),p.push(w),r.push(c),v.push(c),u.push(x),t=new Date(t.getTime()+1E3);x=0;t=null}}return b};g.convertToLineBreak=function(c,a,b){b=this._setupBarDataSeries(e.DataSeriesSuffix.LINE_BREAK,b);var d=c.date.values,f=c.open.values,h=c.close.values;c=c.volume.values;var l=h.length,
m=b.date.values,q=b.open.values,p=b.high.values,r=b.low.values,v=b.close.values,u=b.volume.values;if(0===l)return b;var t=null,w=f[0];f=f[0];for(var x=0,y=0;y<l;y++){x+=c[y];null==t&&(t=new Date(d[y].getTime()));var z=h[y],A=z>f,C=z<w;if(A||C){var B=w,D=v.length;0<D&&(B=A?p[D-1]:r[D-1]);q.push(B);p.push(Math.max(B,z));r.push(Math.min(B,z));v.push(z);m.push(t);u.push(x);if(A)for(f=z,t=D-1;t>=D-a;t--)if(v[t]>q[t])w=r[t];else break;if(C)for(w=z,t=D-1;t>=D-a;t--)if(v[t]<q[t])f=p[t];else break;t=x=null}}return b};
g.convertToPointAndFigure=function(c,a,b,d,f){f=this._setupBarDataSeries(e.DataSeriesSuffix.LINE_BREAK,f);var h=c.date.values,l=c.high.values,m=c.low.values,q=c.close.values;c=c.volume.values;var p=q.length,r=f.date.values,v=f.open.values,u=f.high.values,t=f.low.values,w=f.close.values,x=f.volume.values;if(0===p)return f;var y=null;b*=a;var z=!1,A=q[0]+a/2,C=A-a,B=0;d=d===e.PointAndFigureSource.HIGH_LOW;var D;for(D=0;D<p;D++){var E=d?l[D]:q[D];if(E>A){z=!0;break}var F=d?m[D]:q[D];if(F<C){z=!1;break}B+=
c[D]}for(;D<p;D++)B+=c[D],null==y&&(y=new Date(h[D].getTime())),E=d?l[D]:q[D],F=d?m[D]:q[D],z?E>A?A+=Math.round((E-A)/a)*a:F<A-b&&(E=A-a,F=C-Math.round((C-F)/a)*a,1E-4<Math.abs(E-F)&&(v.push(C),u.push(A),t.push(C),w.push(A),x.push(B),r.push(y),C=F,A=E,B=0,y=null,z=!1)):F<C?C-=Math.round((C-F)/a)*a:E>C+b&&(F=C+a,E=A+Math.round((E-A)/a)*a,1E-4<Math.abs(E-F)&&(v.push(A),u.push(A),t.push(C),w.push(C),x.push(B),r.push(y),C=F,A=E,B=0,y=null,z=!0));y&&(r.push(y),v.push(z?C:A),u.push(A),t.push(C),w.push(z?
A:C),x.push(B));return f};g.convertToKagi=function(c,a,b){b=this._setupBarDataSeries(e.DataSeriesSuffix.LINE_BREAK,b);var d=c.date.values,f=c.close.values,h=c.volume.values,l=f.length,m=b.date.values,q=b.open.values,p=b.high.values,r=b.low.values,v=b.close.values,u=b.volume.values;if(0===l)return b;var t=null,w=0,x=f[0];c=c.open.values[0];for(var y=x>=c,z=0;z<l;z++){t||(t=new Date(d[z].getTime()));var A=f[z],C=A-x;y!==0<=C&&Math.abs(C)>=a?(m.push(t),q.push(c),p.push(Math.max(c,x)),r.push(Math.min(c,
x)),v.push(x),u.push(w),c=x,x=A,y=!y,t=null,w=0):(x=y?Math.max(x,A):Math.min(x,A),w+=h[0])}return b};return g}();e.BarConverter=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.DateScaleScrollKind={NORMAL:"normal",AUTOSCALED:"autoscaled"};Object.freeze(e.DateScaleScrollKind);e.DateScaleZoomKind={NORMAL:"normal",AUTOSCALED:"autoscaled"};Object.freeze(e.DateScaleZoomKind);e.DateScaleZoomMode={PIN_CENTER:"pin_center",PIN_LEFT:"pin_left",PIN_RIGHT:"pin_right"};Object.freeze(e.DateScaleZoomMode);var k=function(g){function c(a){var b=g.call(this,a)||this;b._updateAnimation=new e.Animation({context:b,recurring:!1,callback:b._onUpdateAnimationCallback});b._projectionFrame=
new e.Rect;b._columnWidth=0;b._formatter=new e.CustomTimeIntervalDateTimeFormat;b._moreHistoryRequested=!1;b._projection=new e.Projection(b);b._topPanel=new e.DateScalePanel({dateScale:b,cssClass:"scxTopDateScale",visible:!1});b._bottomPanel=new e.DateScalePanel({dateScale:b,cssClass:"scxBottomDateScale"});b.loadState(a);return b}__extends(c,g);Object.defineProperty(c.prototype,"topPanel",{get:function(){return this._topPanel},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"bottomPanel",
{get:function(){return this._bottomPanel},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"topPanelCssClass",{get:function(){return"scxTopDateScale"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"bottomPanelCssClass",{get:function(){return"scxBottomDateScale"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"topPanelVisible",{get:function(){return this._topPanel.visible},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"bottomPanelVisible",
{get:function(){return this._bottomPanel.visible},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"projection",{get:function(){return this._projection},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"projectionFrame",{get:function(){return this._projectionFrame},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"calibrator",{get:function(){return this._calibrator},set:function(a){this._calibrator=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"firstVisibleIndex",{get:function(){return this._firstVisibleIndex},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"lastVisibleIndex",{get:function(){return this._lastVisibleIndex},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"firstVisibleRecord",{get:function(){return this._options.firstVisibleRecord},set:function(a){this.allowPartialRecords||(a=Math.trunc(a));var b=this._options.firstVisibleRecord;b!==a&&(this._options.firstVisibleRecord=a,this._firstVisibleIndex=
Math.floor(a),this.chart.fireValueChanged(e.ChartEvent.FIRST_VISIBLE_RECORD_CHANGED,b,a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"lastVisibleRecord",{get:function(){return this._options.lastVisibleRecord},set:function(a){this.allowPartialRecords||(a=Math.trunc(a));var b=this._options.lastVisibleRecord;b!==a&&(this._options.lastVisibleRecord=a,this._lastVisibleIndex=Math.ceil(a),this.chart.fireValueChanged(e.ChartEvent.LAST_VISIBLE_RECORD_CHANGED,b,a))},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"visibleDateRange",{get:function(){var a=this.projectionFrame;return{min:this.projection.dateByX(a.left),max:this.projection.dateByX(a.right)}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"useManualHeight",{get:function(){return this._options.useManualHeight},set:function(a){this._options.useManualHeight=!!a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"manualHeight",{get:function(){return this._options.height},set:function(a){if(!e.JsUtil.isPositiveNumber(a))throw Error("Height must be a positive number.");
this._options.height=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minVisibleRecords",{get:function(){return this._options.minVisibleRecords},set:function(a){if(!e.JsUtil.isPositiveNumber(a))throw Error("Records must be a finite number greater than 0.");this._options.minVisibleRecords=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"rightAdditionalSpaceRatio",{get:function(){return this._options.rightAdditionalSpaceRatio},set:function(a){if(!e.JsUtil.isPositiveNumber(a))throw new TypeError("Ratio must be a positive number.");
this._options.rightAdditionalSpaceRatio=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"scrollKind",{get:function(){return this._options.scrollKind},set:function(a){this._options.scrollKind=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"zoomKind",{get:function(){return this._options.zoomKind},set:function(a){this._options.zoomKind=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"zoomMode",{get:function(){return this._options.zoomMode},
set:function(a){this._options.zoomMode=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"theme",{get:function(){return this._options.theme},set:function(a){var b=this._options.theme;this._options.theme=a;this.chart.fireValueChanged(e.ChartEvent.DATE_SCALE_THEME_CHANGED,b,a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"actualTheme",{get:function(){return this._options.theme||this.chart.theme.dateScale},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"columnsCount",{get:function(){return this.needsAutoScale()?0:this._options.lastVisibleRecord-this._options.firstVisibleRecord+1},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"columnWidth",{get:function(){return this._columnWidth},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxAllowedRecord",{get:function(){var a=this._projectionFrame.width*this.rightAdditionalSpaceRatio/this._columnWidth;return this.getDateDataSeries().length-1+a},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"majorTickMarkLength",{get:function(){return this._options.majorTickMarkLength},set:function(a){this._options.majorTickMarkLength=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minorTickMarkLength",{get:function(){return this._options.minorTickMarkLength},set:function(a){this._options.minorTickMarkLength=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"textPadding",{get:function(){return this._options.textPadding},set:function(a){this._options.textPadding=
a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"allowPartialRecords",{get:function(){return this._options.allowPartialRecords},set:function(a){this._options.allowPartialRecords!==a&&(this._options.allowPartialRecords=a,this.firstVisibleRecord=this.firstVisibleRecord,this.lastVisibleRecord=this.lastVisibleRecord)},enumerable:!0,configurable:!0});c.prototype._subscribe=function(){var a=this;this.chart.on(e.ChartEvent.LOCALE_CHANGED+".scxDateScale",function(b){a._formatter.locale=
b.value},this)};c.prototype._unsubscribe=function(){this.chart.off(".scxDateScale",this)};c.prototype._calculateProjectionMetrics=function(){this._columnWidth=this._projectionFrame.width/this.columnsCount};c.prototype.setNeedsAutoScale=function(){this.lastVisibleRecord=this.firstVisibleRecord=null};c.prototype.needsAutoScale=function(){return null==this.firstVisibleRecord||null==this.lastVisibleRecord};c.prototype.autoScale=function(){var a=this.chart.recordCount;this.firstVisibleRecord=0<a?0:null;
this.lastVisibleRecord=0<a?a-1:null};c.prototype.getDateDataSeries=function(){return this.chart.primaryDataSeries(e.DataSeriesSuffix.DATE)};c.prototype.handleEvent=function(a){return this._bottomPanel.handleEvent(a)||this._topPanel.handleEvent(a)};c.prototype.formatDate=function(a){this._formatter.timeInterval=this.chart.timeInterval;return this._formatter.format(a)};c.prototype.scrollOnPixels=function(a){if(!isFinite(a))throw Error("Finite number expected.");if(3>Math.abs(a))return!1;var b=Math.abs(a)/
this.columnWidth;this.allowPartialRecords||(b=Math.ceil(b));return this.scrollOnRecords(0<=a?b:-b)};c.prototype.scrollOnRecords=function(a){if(0===a)return!1;var b=this.firstVisibleRecord,d=this.lastVisibleRecord,f=b-a;a=d-a;this.allowPartialRecords||(f=Math.round(f),a=Math.round(a));if(!this.canSetVisibleRecord(f)||!this.canSetVisibleRecord(a)){if(0<=f)return!1;f=0;a=d-b;if(!this.canSetVisibleRecord(f)||!this.canSetVisibleRecord(a))return!1}this.firstVisibleRecord=f;this.lastVisibleRecord=a;this._requestMoreHistoryIfNeed();
return!0};c.prototype.zoomOnPixels=function(a,b){null==b&&(b=a);if(!isFinite(a)||!isFinite(b))throw Error("Pixels must be a finite number.");if(3>Math.abs(a)&&3>Math.abs(b))return!1;var d=this.columnWidth,f=Math.abs(a)/d;d=Math.abs(b)/d;this.allowPartialRecords||(f=Math.ceil(f),d=Math.ceil(d));return this.zoomOnRecords(0<a?f:-f,0<b?d:-d)};c.prototype.zoomOnRecords=function(a,b){null==b&&(b=a);if(0===a&&0===b)return!1;var d=this.firstVisibleRecord,f=this.lastVisibleRecord;a=d+a;b=f-b;this.allowPartialRecords||
(a=Math.round(a),b=Math.round(b));a>b&&(a=b=Math.max(b,f));this.canSetVisibleRecord(a)||(a=0);this.canSetVisibleRecord(b)||(b=this.maxAllowedRecord);var h=a!==d||b!==f;if(h){var l=b-a+1;if(l<f-d+1&&l<this.minVisibleRecords||a>=this.getDateDataSeries().length)return!1;this.firstVisibleRecord=a;this.lastVisibleRecord=b;this._requestMoreHistoryIfNeed()}return h};c.prototype._handleZoom=function(a){switch(this.zoomMode){case e.DateScaleZoomMode.PIN_CENTER:this.zoomOnPixels(a);break;case e.DateScaleZoomMode.PIN_LEFT:this.zoomOnPixels(0,
a);break;case e.DateScaleZoomMode.PIN_RIGHT:this.zoomOnPixels(a,0);break;default:throw Error("Unknown zoom mode: "+this.zoomMode);}a=!1;this.zoomKind===e.DateScaleZoomKind.AUTOSCALED&&(a=!0);this.chart.setNeedsUpdate(a)};c.prototype._requestMoreHistoryIfNeed=function(){var a=this.chart;0<a.firstVisibleIndex?this._moreHistoryRequested=!1:this._moreHistoryRequested||(a.fireValueChanged(e.ChartEvent.MORE_HISTORY_REQUESTED),this._moreHistoryRequested=!0)};c.prototype.saveState=function(){var a=e.JsUtil.clone(this._options);
a.formatter=this._formatter.saveState();a.calibrator=this._calibrator.saveState();return a};c.prototype.loadState=function(a){a=a||{};this._options={};this.theme=a.theme;this.allowPartialRecords=null!=a.allowPartialRecords?!!a.allowPartialRecords:!0;this.firstVisibleRecord=null!=a.firstVisibleRecord?a.firstVisibleRecord:null;this.lastVisibleRecord=null!=a.lastVisibleRecord?a.lastVisibleRecord:null;this.minVisibleRecords=a.minVisibleRecords||5;this.textPadding=a.textPadding||{left:3,top:null,right:3,
bottom:3};this.manualHeight=a.height||15;this.useManualHeight=null!=a.useManualHeight?a.useManualHeight:!1;this.scrollKind=a.scrollKind||e.DateScaleScrollKind.AUTOSCALED;this.zoomKind=a.zoomKind||e.DateScaleZoomKind.AUTOSCALED;this.zoomMode=a.zoomMode||e.DateScaleZoomMode.PIN_CENTER;this.rightAdditionalSpaceRatio=a.rightAdditionalSpaceRatio||.5;a.formatter&&(this._formatter=e.DateTimeFormat.deserialize(a.formatter));this._formatter.locale=this.chart.locale;this.majorTickMarkLength=a.majorTickMarkLength||
5;this.minorTickMarkLength=a.minorTickMarkLength||3;this._calibrator=a.calibrator?e.DateScaleCalibrator.deserialize(a.calibrator):new e.CustomDateScaleCalibrator};c.prototype.canSetVisibleRecord=function(a){return 0<=a&&a<=this.maxAllowedRecord};c.prototype._onUpdateAnimationCallback=function(){this.layoutScalePanel(this.chart.getBounds());this.draw()};c.prototype.setNeedsUpdate=function(a){a&&this.setNeedsAutoScale();this._updateAnimation.start()};c.prototype.layoutScalePanel=function(a){this.needsAutoScale()&&
this.autoScale();var b=this._topPanel.layoutPanel(a,!0),d=this._bottomPanel.layoutPanel(a,!1);a=a.clone();b&&a.cropTop(b);d&&a.cropBottom(d);return a};c.prototype.layout=function(a,b){this.needsAutoScale()&&this.autoScale();this._projectionFrame.copyFrom(b);this._projectionFrame.applyPadding(this.chart.chartPanelsContainer.panelPadding);this._calculateProjectionMetrics();this._calibrator.calibrate(this);this._topPanel.layout(a,!0);this._bottomPanel.layout(a,!1)};c.prototype._canvasStartX=function(){return this._projectionFrame.left-
this.chart.chartPanelsFrame.left-this.chart.chartPanelsContainer.panelPadding.left};c.prototype._textDrawBounds=function(){return{left:this.textPadding.left,top:null,width:this.chart.chartPanelsContainer.frame.width,height:null}};c.prototype.clear=function(){this._topPanel.clearPanel();this._bottomPanel.clearPanel()};c.prototype.draw=function(){this._topPanel.draw();this._bottomPanel.draw();if(this.chart.showDrawings)for(var a=0,b=this.chart.chartPanels;a<b.length;a++)for(var d=0,f=b[a].drawings;d<
f.length;d++){var h=f[d];h.selected||h.drawDateMarkers()}};return c}(e.ChartComponent);e.DateScale=k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;b._isVisible=!0;if(!(a.dateScale instanceof e.DateScale))throw new TypeError("'config.dateScale' must be an instance of StockChartX.DateScale.");b._dateScale=a.dateScale;if(null==a.cssClass)throw Error("'config.cssClass' is not specified.");b._cssClass=a.cssClass;b._isVisible=null!=a.visible?!!a.visible:!0;b._initGestures();b.chart.on(e.ChartEvent.THEME_CHANGED+".scxDateScalePanel",function(){b.applyTheme()});return b}__extends(c,
g);Object.defineProperty(c.prototype,"dateScale",{get:function(){return this._dateScale},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"chart",{get:function(){return this._dateScale&&this._dateScale.chart},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"cssClass",{get:function(){return this._cssClass},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",{get:function(){return this._isVisible},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0});c.prototype._initGestures=function(){return new e.GestureArray([new e.DoubleClickGesture({handler:this._handleDoubleClickGesture}),new e.PanGesture({handler:this._handlePanGesture,verticalMoveEnabled:!1}),new e.MouseWheelGesture({handler:this._handleMouseWheel})],this,this.hitTest)};c.prototype._handleDoubleClickGesture=function(){this.chart.setNeedsUpdate(!0)};c.prototype._handlePanGesture=function(a,b){var d=this.chart;
b=1===b.evt.which;if(!b||d.scrollEnabled)if(b||d.zoomEnabled)switch(a.state){case e.GestureState.STARTED:d.rootDiv.addClass("scxDateScaleScroll");break;case e.GestureState.FINISHED:d.rootDiv.removeClass("scxDateScaleScroll");break;case e.GestureState.CONTINUED:a=a.moveOffset.x,b=b?(a=this._dateScale.scrollOnPixels(a))&&this._dateScale.scrollKind===e.DateScaleScrollKind.AUTOSCALED:(a=this._dateScale.zoomOnPixels(a))&&this._dateScale.zoomKind===e.DateScaleZoomKind.AUTOSCALED,a&&d.setNeedsUpdate(b)}};
c.prototype._handleMouseWheel=function(a){this.chart.zoomEnabled&&this._dateScale._handleZoom(.05*-a.delta*this.frame.width)};c.prototype.applyTheme=function(){var a=this.container;if(a){var b=this._dateScale.actualTheme,d=b.border;a.css(this._cssClass===this._dateScale.topPanelCssClass?"border-bottom":"border-top",d.width+"px "+d.lineStyle+" "+d.strokeColor);e.HtmlUtil.setBackground(a,b.fill.fillColor)}};c.prototype._getClientHeight=function(){var a=this._dateScale;return a.useManualHeight?a.manualHeight:
e.HtmlUtil.getFontSize(a.actualTheme)+a.textPadding.bottom+a.majorTickMarkLength+1};c.prototype.hitTest=function(a){var b=this.frame;return b?e.Geometry.isPointInsideOrNearRect(a,b):!1};c.prototype._createContainer=function(){return this.chart.rootDiv.scxAppend("div","scxDateScale").addClass(this._cssClass)};c.prototype.layoutPanel=function(a,b){var d=this.container,f=null;this._isVisible?(d||(this._container=d=this._createContainer(),this.applyTheme()),d.outerWidth(a.width).innerHeight(this._getClientHeight()),
f=this.frame,f.left=a.left,f.width=a.width,f.height=d.outerHeight(),f.top=b?0:a.bottom-f.height,d.css("left",f.left).css("top",f.top)):this._removeContainer();return f};c.prototype.layout=function(a,b){this.layoutPanel(a,b);if(this._isVisible)a=this.container,this._layer||(this._layer=new e.Layer({parent:a})),this._layer.size={width:a.width(),height:a.height()};else if(a=this._layer)a.destroy(),this._layer=null};c.prototype.clearPanel=function(){this._layer&&this._layer.canvas&&this._layer.context.clearRect(0,
0,this._layer.size.width,this._layer.size.height)};c.prototype.draw=function(){if(this._isVisible){var a=this._layer.context,b=this._dateScale,d=b.actualTheme,f=this._layer.size.height-b.textPadding.bottom;this.clearPanel();a.save();a.translate(.5,.5);a.scxApplyTextTheme(d.text);a.textBaseline="bottom";a.beginPath();for(var h=0,l=b.calibrator.majorTicks;h<l.length;h++){var m=l[h];a.moveTo(m.x,0);a.lineTo(m.x,b.majorTickMarkLength);a.textAlign=m.textAlign;a.fillText(m.text,m.textX,f)}f=0;for(h=b.calibrator.minorTicks;f<
h.length;f++)l=h[f],a.moveTo(l.x,0),a.lineTo(l.x,b.minorTickMarkLength);a.scxApplyStrokeTheme(d.line);a.stroke();a.restore()}};return c}(e.HtmlControl);e.DateScalePanel=k})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function c(){}Object.defineProperty(c,"registeredCalibrators",{get:function(){return this._calibrators.registeredItems},enumerable:!0,configurable:!0});c.register=function(a,b){"string"===typeof a?this._calibrators.register(a,b):this._calibrators.register(a.className,a)};c.deserialize=function(a){if(!a)return null;var b=this._calibrators.createInstance(a.className);b.loadState(a);return b};c._calibrators=new e.ClassRegistrar;return c}(),g=function(){function c(a){this._majorTicks=
[];this._minorTicks=[];this._options={};a&&this.loadState({options:a})}Object.defineProperty(c,"className",{get:function(){return""},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"majorTicks",{get:function(){return this._majorTicks},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minorTicks",{get:function(){return this._minorTicks},enumerable:!0,configurable:!0});c.prototype.calibrate=function(a){this._majorTicks.length=0;this._minorTicks.length=0;this._calibrateMajorTicks&&
this._calibrateMajorTicks(a);this._calibrateMinorTicks()};c.prototype._calibrateMinorTicks=function(a){if(a)for(var b=this.majorTicks,d=0,f=b.length;d<f-1;d++)for(var h=b[d],l=(b[d+1].x-h.x)/(a+1),m=1;m<=a;m++)this.minorTicks.push({x:Math.round(h.x+m*l)})};c.prototype.saveState=function(){return{className:this.constructor.className,options:e.JsUtil.clone(this._options)}};c.prototype.loadState=function(a){this._options=a&&e.JsUtil.clone(a.options)||{}};return c}();e.DateScaleCalibrator=g;e.JsUtil.applyMixins(g,
[k])})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){a=g.call(this,a)||this;a._formatter=new e.TimeIntervalDateTimeFormat;return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"StockChartX.AutoDateScaleCalibrator"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minLabelsOffset",{get:function(){var a=this._options.majorTicks;return a&&null!=a.minOffset?a.minOffset:c.defaults.majorTicks.minOffset},set:function(a){if(null!=a&&e.JsUtil.isNegativeNumber(a))throw Error("Min labels offset must be greater or equal to 0.");
var b=this._options;(b.majorTicks||(b.majorTicks={})).minOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minorTicksCount",{get:function(){var a=this._options.minorTicks;return a&&null!=a.count?a.count:c.defaults.minorTicks.count},set:function(a){if(null!=a&&e.JsUtil.isNegativeNumber(a))throw Error("Ticks count must be a positive number or 0.");var b=this._options;(b.minorTicks||(b.minorTicks={})).count=a},enumerable:!0,configurable:!0});c.prototype._calibrateMajorTicks=
function(a){var b=a.getDateDataSeries().values,d=a.chart,f=a.projectionFrame,h=a.projection,l=h.recordByColumn(0),m=a.maxAllowedRecord,q=this.minLabelsOffset,p=a._textDrawBounds(),r=p.left;p=p.left+p.width;var v=new Date(0),u=null,t=-Infinity,w=e.DummyCanvasContext;this._formatter.timeInterval=d.timeInterval;this._formatter.locale=d.locale;w.applyTextTheme(a.actualTheme.text);for(a=w.textWidth("9");l<=m;){d=0<=l&&l<b.length?b[l]:h.dateByRecord(l);var x=this._labelDateString(d,v);if(x&&x!==u){var y=
h.xByRecord(l);if(y<f.left)l++;else{if(y>=f.right)break;var z=x.length*a,A=y-z/2;A<t?y=t+z/2:(z=w.textWidth(x),A=y-z/2,A<t?y=t+z/2:(v=y,u="center",A<r?(A=v=r,u="left"):A+z>p&&(v=p,A=v-z,u="right"),this.majorTicks.push({x:y,textX:v,textAlign:u,date:d,text:x}),t=A+z+q,y=Math.ceil(t),v=d,u=x));if(y>f.right)break;d=h.recordByX(y)+1;l=d>l?d:l+1}}else l++}};c.prototype._calibrateMinorTicks=function(){g.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)};c.prototype._labelDateString=function(a,
b){if(a<=b)return null;var d=e.TimeSpan,f=this._formatter,h=f.timeInterval,l=a.getFullYear(),m=b.getFullYear();if(h>=d.MILLISECONDS_IN_YEAR)return l!==m?l.toString():null;var q=e.DateTimeFormatName,p=a.getMonth()+1,r=b.getMonth()+1;if(h>=d.MILLISECONDS_IN_MONTH)return l!==m||p!==r?f.formatWithFormatter(a,q.YEAR_MONTH):null;var v=a.getDate(),u=b.getDate();if(h>=d.MILLISECONDS_IN_DAY)return l!==m?f.formatWithFormatter(a,q.DATE):p!==r||v!==u?f.formatWithFormatter(a,q.MONTH_DAY):null;var t=a.getHours(),
w=b.getHours(),x=a.getMinutes(),y=b.getMinutes();if(h>=d.MILLISECONDS_IN_MINUTE)return l!==m||p!==r||v!==u?f.formatWithFormatter(a,q.SHORT_DATE_TIME):t!==w||x!==y?f.formatWithFormatter(a,q.SHORT_TIME):null;var z=a.getSeconds(),A=b.getSeconds();if(h>=d.MILLISECONDS_IN_SECOND)return l!==m||p!==r||v!==u?f.formatWithFormatter(a,q.SHORT_DATE_TIME):t!==w||x!==y||z!==A?f.formatWithFormatter(a,q.LONG_TIME):null;d=a.getMilliseconds();b=b.getMilliseconds();return l!==m||p!==r||v!==u?f.formatWithFormatter(a,
q.LONG_DATE_TIME):t!==w||x!==y||z!==A||d!==b?f.formatWithFormatter(a,q.LONG_TIME):null};c.defaults={majorTicks:{minOffset:30},minorTicks:{count:0}};return c}(e.DateScaleCalibrator);e.AutoDateScaleCalibrator=k;e.DateScaleCalibrator.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){a=g.call(this,a)||this;a._formatter=new e.CustomDateTimeFormat;return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"StockChartX.CustomDateScaleCalibrator"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minLabelsOffset",{get:function(){var a=this._options.majorTicks;return a&&null!=a.minOffset?a.minOffset:c.defaults.majorTicks.minOffset},set:function(a){if(null!=a&&e.JsUtil.isNegativeNumber(a))throw Error("Min labels offset must be greater or equal to 0.");
var b=this._options;(b.majorTicks||(b.majorTicks={})).minOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minorTicksCount",{get:function(){var a=this._options.minorTicks;return a&&null!=a.count?a.count:c.defaults.minorTicks.count},set:function(a){if(null!=a&&e.JsUtil.isNegativeNumber(a))throw Error("Ticks count must be a positive number or 0.");var b=this._options;(b.minorTicks||(b.minorTicks={})).count=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"monospaced",{get:function(){var a=this._options.majorTicks;return a&&null!=a.monospaced?a.monospaced:c.defaults.majorTicks.monospaced},set:function(a){var b=this._options;(b.majorTicks||(b.majorTicks={})).monospaced=a},enumerable:!0,configurable:!0});c.prototype._calibrateMajorTicks=function(a){var b=a.getDateDataSeries().values,d=a.chart,f=a.projectionFrame,h=a.projection,l=h.recordByColumn(0),m=a.maxAllowedRecord,q=this.minLabelsOffset,p=a._textDrawBounds(),r=p.left;p=p.left+p.width;var v=f.left,
u=e.DummyCanvasContext,t=a.chart.timeInterval,w=this.monospaced,x;this._formatter.locale=d.locale;u.applyTextTheme(a.actualTheme.text);for(a=u.textWidth("9");l<=m;){var y=0<=l&&l<b.length?b[l]:h.dateByRecord(l),z=this._labelDateString(y,D&&D.date,t);if(z&&z!==(D&&D.text))if(d=h.xByRecord(l),d<f.left)l++;else{if(d>=f.right)break;var A=z.length*a,C=d-A/2,B=void 0;if(C<v)B=v+A/2;else if(x&&d-D.x<x)B+=x-(d-D.x);else if(A=u.textWidth(z),C=d-A/2,C<v)B=v+A/2;else{v=d;B="center";C<r?(C=v=r,B="left"):C+A>
p&&(v=p,C=v-A,B="right");y={x:d,textX:v,textAlign:B,date:y,text:z};this.majorTicks.push(y);w&&!x&&D&&(x=d-D.x);v=C+A+q;B=Math.ceil(v);var D=y}if(B>f.right)break;d=h.recordByX(B)+1;l=d>l?d:l+1}else l++}};c.prototype._calibrateMinorTicks=function(){g.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)};c.prototype._labelDateString=function(a,b,d){b||(b=new Date(0));return(b=this._findFormat(a,b,d))?this._formatter.format(a,b):null};c.prototype._findFormat=function(a,b,d){if(a<=b)return null;
var f=e.TimeSpan,h={},l={};h.year=a.getFullYear();l.year=b.getFullYear();if(d>=f.MILLISECONDS_IN_YEAR)return this._yearPeriodicityFormat(h,l);h.month=a.getMonth()+1;l.month=b.getMonth()+1;if(d>=f.MILLISECONDS_IN_MONTH)return this._monthPeriodicityFormat(h,l);h.day=a.getDate();l.day=b.getDate();if(d>=f.MILLISECONDS_IN_DAY)return this._dayPeriodicityFormat(h,l);h.minute=a.getMinutes();l.minute=b.getMinutes();if(d>=f.MILLISECONDS_IN_MINUTE)return this._minutePeriodicityFormat(h,l);h.hour=a.getHours();
l.hour=b.getHours();if(d>=f.MILLISECONDS_IN_HOUR)return this._hourPeriodicityFormat(h,l);h.second=a.getSeconds();l.second=b.getSeconds();if(d>=f.MILLISECONDS_IN_SECOND)return this._secondPeriodicityFormat(h,l);h.minute=a.getMilliseconds();l.minute=b.getMilliseconds();return this._millisecondPeriodicityFormat(h,l)};c.prototype._yearPeriodicityFormat=function(a,b){return a.year!==b.year?"YYYY":null};c.prototype._monthPeriodicityFormat=function(a,b){return a.year!==b.year?1===a.month?"YYYY":"MMM YYYY":
a.month!==b.month?"MMM":null};c.prototype._dayPeriodicityFormat=function(a,b){return a.year!==b.year?1===a.day?this._monthPeriodicityFormat(a,b):"D MMM YYYY":a.month!==b.month?1===a.day?"MMM":"D MMM":a.day!==b.day?"D":null};c.prototype._hourPeriodicityFormat=function(a,b,d){void 0===d&&(d=!1);return 0===a.hour?this._dayPeriodicityFormat(a,b):a.year!==b.year?"D MMM YYYY HH:mm":a.month!==b.month||a.day!==b.day?"D MMM HH:mm":d||a.hour!==b.hour?"HH:mm":null};c.prototype._minutePeriodicityFormat=function(a,
b,d){return this._hourPeriodicityFormat(a,b,a.minute!==b.minute)};c.prototype._secondPeriodicityFormat=function(a,b){(b=this._minutePeriodicityFormat(a,b,a.second!==b.second))&&0!==a.second&&(b+=":ss");return b};c.prototype._millisecondPeriodicityFormat=function(a,b){var d=this._secondPeriodicityFormat(a,b);return 0===a.millisecond||a.millisecond===b.millisecond?d:d?d+".SSS":"ss.SSS"};c.defaults={majorTicks:{minOffset:30,monospaced:!0},minorTicks:{count:0}};return c}(e.DateScaleCalibrator);e.CustomDateScaleCalibrator=
k;e.DateScaleCalibrator.register(k)})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){a=g.call(this,a)||this;a._formatter=new e.CustomDateTimeFormat;return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"StockChartX.FixedDateScaleCalibrator"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"majorTicksCount",{get:function(){var a=this._options.majorTicks;return a&&null!=a.count?a.count:c.defaults.majorTicks.count},set:function(a){if(null!=a&&e.JsUtil.isNegativeNumber(a))throw Error("Ticks count must be a positive number.");
var b=this._options;(b.majorTicks||(b.majorTicks={})).count=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minorTicksCount",{get:function(){var a=this._options.minorTicks;return a&&null!=a.count?a.count:c.defaults.minorTicks.count},set:function(a){if(null!=a&&e.JsUtil.isNegativeNumber(a))throw Error("Ticks count must be a positive number.");var b=this._options;(b.minorTicks||(b.minorTicks={})).count=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"majorTicksFormat",
{get:function(){var a=this._options.majorTicks;return a&&a.format||c.defaults.majorTicks.format},set:function(a){var b=this._options;(b.majorTicks||(b.majorTicks={})).format=a},enumerable:!0,configurable:!0});c.prototype._calibrateMajorTicks=function(a){var b=a.projectionFrame,d=a._textDrawBounds(),f=d.left;d=d.left+d.width;var h=a.projection,l=a.chart.chartPanelsContainer.panelPadding,m=b.left-l.left,q=e.DummyCanvasContext,p=this.majorTicksCount;b=(b.right+l.right-m)/(p-1);(l=this.majorTicksFormat)||
(l={});l.other||(l.other=c._createAutoFormat(a.chart));q.applyTextTheme(a.actualTheme.text);for(a=0;a<p;a++){var r=m+a*b;this._updateFormatterForLabel(a,a===p-1,l);var v=h.dateByX(r),u=this._formatter.format(v),t=q.textWidth(u),w="center",x=r;x-t/2<f?w="left":x+t/2>d&&(w="right");this.majorTicks.push({x:r,textX:r,textAlign:w,date:v,text:u})}};c.prototype._calibrateMinorTicks=function(){g.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)};c.prototype._updateFormatterForLabel=function(a,
b,d){this._formatter.formatString=b?d.last||d.other:0===a?d.first||d.other:d.other};c._createAutoFormat=function(a){a=a.timeInterval;return a>=e.TimeSpan.MILLISECONDS_IN_YEAR?"YYYY":a>=e.TimeSpan.MILLISECONDS_IN_MONTH?"YYYY MMM":a>=e.TimeSpan.MILLISECONDS_IN_DAY?"YYYY-MM-DD":a>=e.TimeSpan.MILLISECONDS_IN_MINUTE?"YYYY-MM-DD HH:mm":a>=e.TimeSpan.MILLISECONDS_IN_SECOND?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm:ss.SSS"};c.defaults={majorTicks:{count:3},minorTicks:{count:0}};return c}(e.DateScaleCalibrator);
e.FixedDateScaleCalibrator=k;e.DateScaleCalibrator.register(k)})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=jQuery,g=function(c){function a(b){var d=c.call(this,b)||this;d._options=null;d._leftPanel=new e.ValueScalePanel({valueScale:d,cssClass:"scxLeftValueScale"});d._rightPanel=new e.ValueScalePanel({valueScale:d,cssClass:"scxRightValueScale"});d.loadState(b);return d}__extends(a,c);Object.defineProperty(a.prototype,"leftPanel",{get:function(){return this._leftPanel},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"rightPanel",{get:function(){return this._rightPanel},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"leftPanelCssClass",{get:function(){return"scxLeftValueScale"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"rightPanelCssClass",{get:function(){return"scxRightValueScale"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"useManualWidth",{get:function(){return this._options.useManualWidth},set:function(b){this._options.useManualWidth=b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"manualWidth",{get:function(){return this._options.width},set:function(b){if(!e.JsUtil.isFiniteNumber(b)||0>=b)throw Error("Width must be greater than 0.");this._options.width=b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"leftPanelVisible",{get:function(){return this._options.showLeftPanel},set:function(b){this._leftPanel.visible=this._options.showLeftPanel=b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"rightPanelVisible",{get:function(){return this._options.showRightPanel},
set:function(b){this._rightPanel.visible=this._options.showRightPanel=b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return this.chart.valueScales.indexOf(this)},enumerable:!0,configurable:!0});a.prototype.saveState=function(){return k.extend(!0,{},this._options)};a.prototype.loadState=function(b){b=b||{};this._options={};this.leftPanelVisible=void 0!==b.showLeftPanel?b.showLeftPanel:!1;this.rightPanelVisible=void 0!==b.showRightPanel?b.showRightPanel:
!0;this.manualWidth=b.width||100;this.useManualWidth=void 0!==b.useManualWidth?b.useManualWidth:!1};a.prototype.layout=function(b){var d=this._leftPanel.layout(b,!0),f=this._rightPanel.layout(b,!1);b=b.clone();d&&b.cropLeft(d);f&&b.cropRight(f);return b};a.prototype.destroy=function(){this.leftPanel.destroy();this.rightPanel.destroy();c.prototype.destroy.call(this)};return a}(e.ChartComponent);e.ValueScale=g})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;b._isVisible=!0;if(!a)throw Error("Config is not specified.");if(!(a.valueScale instanceof e.ValueScale))throw new TypeError("Config.valueScale must be an instance of StockChartX.ValueScale");b._valueScale=a.valueScale;if(!a.cssClass)throw Error("'config.cssClass' is not specified.");b._cssClass=a.cssClass;b._isVisible=null!=a.visible?a.visible:!0;b.chart.on(e.ChartEvent.THEME_CHANGED+".scxValueScalePanel",function(){b.applyTheme()});
return b}__extends(c,g);Object.defineProperty(c.prototype,"valueScale",{get:function(){return this._valueScale},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"cssClass",{get:function(){return this._cssClass},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",{get:function(){return this._isVisible},set:function(a){this._isVisible=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"chart",{get:function(){return this._valueScale&&this._valueScale.chart},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"size",{get:function(){var a=this.container;return a&&a.scxSize()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"contentSize",{get:function(){var a=this.container;return a&&a.scxContentSize()},enumerable:!0,configurable:!0});c.prototype._createContainer=function(){return this.chart.chartPanelsContainer.container.scxPrepend("div","scxValueScale").addClass(this._cssClass)};c.prototype.layout=function(a,b){var d=this.container,
f=null;this._isVisible?(d||(this._container=d=this._createContainer(),this.applyTheme()),d.width(this.getWidth()).outerHeight(a.height),f=this.frame,f.width=d.outerWidth(),f.left=b?a.left:a.right-f.width,f.height=a.height,d.css("left",f.left)):this._removeContainer();return f};c.prototype.getWidth=function(){var a=this._valueScale;if(a.useManualWidth)return a.manualWidth;for(var b=a=0,d=this.chart.chartPanels;b<d.length;b++)a=Math.max(d[b].preferredValueScaleWidth(this._valueScale),a);return a};c.prototype.applyTheme=
function(){var a=this.container;if(a){var b=this.chart.theme.valueScale;a.css(this._cssClass===this._valueScale.leftPanelCssClass?"border-right":"border-left",b.border.width+"px "+b.border.lineStyle+" "+b.border.strokeColor);e.HtmlUtil.setBackground(a,b.fill.fillColor)}};return c}(e.HtmlControl);e.ValueScalePanel=k})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function c(){}Object.defineProperty(c,"registeredCalibrators",{get:function(){return this._calibrators.registeredItems},enumerable:!0,configurable:!0});c.register=function(a,b){"string"===typeof a?this._calibrators.register(a,b):this._calibrators.register(a.className,a)};c.deserialize=function(a){if(!a)return null;var b=this._calibrators.createInstance(a.className);b.loadState(a);return b};c._calibrators=new e.ClassRegistrar;return c}(),g=function(){function c(a){this._majorTicks=
[];this._minorTicks=[];this._options={};a&&this.loadState({options:a})}Object.defineProperty(c,"className",{get:function(){return""},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"majorTicks",{get:function(){return this._majorTicks},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minorTicks",{get:function(){return this._minorTicks},enumerable:!0,configurable:!0});c.prototype.calibrate=function(a){this._majorTicks.length=0;this._minorTicks.length=0;this._calibrateMajorTicks&&
this._calibrateMajorTicks(a);this._calibrateMinorTicks()};c.prototype._calibrateMinorTicks=function(a){if(a)for(var b=this.majorTicks,d=0,f=b.length;d<f-1;d++)for(var h=b[d],l=(b[d+1].y-h.y)/(a+1),m=1;m<=a;m++)this.minorTicks.push({y:Math.round(h.y+m*l)})};c.prototype.saveState=function(){return{className:this.constructor.className,options:e.JsUtil.clone(this._options)}};c.prototype.loadState=function(a){this._options=a&&e.JsUtil.clone(a.options)||{}};return c}();e.ValueScaleCalibrator=g;e.JsUtil.applyMixins(g,
[k])})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"StockChartX.AutoValueScaleCalibrator"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minValuesOffset",{get:function(){var a=this._options.majorTicks;return null!=a&&null!=a.minOffset?a.minOffset:c.defaults.majorTicks.minOffset},set:function(a){if(null!=a&&e.JsUtil.isNegativeNumber(a))throw Error("Values offset must be a value greater or equal to 0.");
var b=this._options;(b.majorTicks||(b.majorTicks={})).minOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minorTicksCount",{get:function(){var a=this._options.minorTicks;return a&&null!=a.count?a.count:c.defaults.minorTicks.count},set:function(a){if(null!=a&&e.JsUtil.isNegativeNumber(a))throw Error("Tick count must be greater or equal to 0.");var b=this._options;(b.minorTicks||(b.minorTicks={})).count=a},enumerable:!0,configurable:!0});c.prototype._calibrateMajorTicks=
function(a){var b=e.HtmlUtil.getFontSize(a.actualTheme.text),d=this.minValuesOffset,f=a.padding,h=Math.round(Math.max(f.top,a.chartPanel.chartPanelsContainer.panelPadding.top)+b/2);f=a.chartPanel.layer.canvas.height()-f.bottom-b/2;for(var l=a.projection,m=null;h<f;){var q=l.valueByY(h),p=a.formatValue(q);p!==m&&(this.majorTicks.push({y:h,value:q,text:p}),m=p);h+=b+d}};c.prototype._calibrateMinorTicks=function(){g.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)};c.defaults={majorTicks:{minOffset:10},
minorTicks:{count:0}};return c}(e.ValueScaleCalibrator);e.AutoValueScaleCalibrator=k;e.ValueScaleCalibrator.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"StockChartX.FixedValueScaleCalibrator"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"majorTicksCount",{get:function(){var a=this._options.majorTicks;return a&&null!=a.count?a.count:c.defaults.majorTicks.count},set:function(a){if(null!=a&&e.JsUtil.isNegativeNumber(a))throw Error("Tick count must be greater or equal to 0.");
var b=this._options;(b.majorTicks||(b.majorTicks={})).count=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minorTicksCount",{get:function(){var a=this._options.minorTicks;return a&&null!=a.count?a.count:c.defaults.minorTicks.count},set:function(a){if(null!=a&&e.JsUtil.isNegativeNumber(a))throw Error("Tick count must be greater or equal to 0.");var b=this._options;(b.minorTicks||(b.minorTicks={})).count=a},enumerable:!0,configurable:!0});c.prototype._calibrateMajorTicks=function(a){var b=
a.padding,d=a.chartPanel.chartPanelsContainer.panelPadding,f=Math.max(b.top,d.top),h=a.chartPanel.layer.canvas.height()-Math.max(b.bottom,d.bottom)-f;b=a.projection;d=this.majorTicksCount;h/=d-1;for(var l=0;l<d;l++){var m=Math.round(f+l*h),q=b.valueByY(m);this.majorTicks.push({y:m,value:q,text:a.formatValue(q)})}};c.prototype._calibrateMinorTicks=function(){g.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)};c.defaults={majorTicks:{count:3},minorTicks:{count:0}};return c}(e.ValueScaleCalibrator);
e.FixedValueScaleCalibrator=k;e.ValueScaleCalibrator.register(k)})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){return g.call(this,a)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"StockChartX.IntervalValueScaleCalibrator"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"interval",{get:function(){var a=this._options.majorTicks;return a&&a.interval?a.interval:c.defaults.majorTicks.interval},set:function(a){if(null!=a){if(!e.JsUtil.isPositiveNumber(a))throw Error("Interval must be a value greater than 0.");if(1E-8>
a)throw Error("Interval is too small.");}var b=this._options;(b.majorTicks||(b.majorTicks={})).interval=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minValuesOffset",{get:function(){var a=this._options.majorTicks;return a&&null!=a.minOffset?a.minOffset:c.defaults.majorTicks.minOffset},set:function(a){if(null!=a&&e.JsUtil.isNegativeNumber(a))throw Error("Values offset must be a value greater or equal to 0.");var b=this._options;(b.majorTicks||(b.majorTicks={})).minOffset=a},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minorTicksCount",{get:function(){var a=this._options.minorTicks;return a&&null!=a.count?a.count:c.defaults.minorTicks.count},set:function(a){if(null!=a&&e.JsUtil.isNegativeNumber(a))throw Error("Tick count must be greater or equal to 0.");var b=this._options;(b.minorTicks||(b.minorTicks={})).count=a},enumerable:!0,configurable:!0});c.prototype._calibrateMajorTicks=function(a){this._calibrateIntervalMajorTicks(a);1>=this.majorTicks.length&&
(this.majorTicks.length=0,this._calibrateRangeMajorTicks(a))};c.prototype._calibrateMinorTicks=function(){g.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)};c.prototype._calibrateIntervalMajorTicks=function(a){var b=this.interval;if(!(1E-8>b||a.maxVisibleValue-a.minVisibleValue<=b)){var d=e.HtmlUtil.getFontSize(a.actualTheme.text),f=d+this.minValuesOffset,h=a.padding,l=a.chartPanel.layer.size.height-h.bottom-d/2,m=a.projection,q=m.valueByY(0);h=d=Math.round(h.top+d/2);for(var p,r=null;d<
l;){var v=h;do{p=b*Math.trunc(m.valueByY(d)/b);p>=q&&(p=q-b);q=p;d=Math.round(m.yByValue(p));if(d>=h)break;v=d=v+1}while(d<l);h=d+f;if(d>=l)break;v=a.formatValue(p);v!==r&&(this.majorTicks.push({y:d,value:p,text:v}),r=v);d=h}}};c.prototype._calibrateRangeMajorTicks=function(a){var b=e.HtmlUtil.getFontSize(a.actualTheme.text),d=b/2,f=a.padding,h=a.chartPanel.layer.size.height,l=f.top+d;d=h-f.bottom-d;f=a.projection;d-l<b+this.minValuesOffset?(l=h/2,b=f.valueByY(l),this.majorTicks.push({y:l,value:b,
text:a.formatValue(b)})):(b=f.valueByY(l),this.majorTicks.push({y:l,value:b,text:a.formatValue(b)}),l=f.valueByY(d),this.majorTicks.push({y:d,value:l,text:a.formatValue(l)}))};c.defaults={majorTicks:{interval:.005,minOffset:10},minorTicks:{count:0}};return c}(e.ValueScaleCalibrator);e.IntervalValueScaleCalibrator=k;e.ValueScaleCalibrator.register(k)})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(){}Object.defineProperty(g.prototype,"textOffset",{get:function(){var c=this._textOffset;return null!=c?c:g.defaults.textOffset},set:function(c){if(null!=c&&e.JsUtil.isNegativeNumber(c))throw Error("Text offset must be greater or equal to 0.");this._textOffset=c},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"theme",{get:function(){return this._theme},set:function(c){this._theme=c},enumerable:!0,configurable:!0});g.prototype.draw=function(c,
a,b){var d=a.leftFrame,f=a.rightFrame;if(d||f){b||(b=this.theme);var h=a.chartPanel.layer.context,l=a.formatValue(c);c=a.projection.yByValue(c);var m=this.textOffset,q=b.text.fontSize/2+1;h.save();a.clip();h.textBaseline="middle";h.beginPath();d&&(a=d.right-1,h.moveTo(a,c),h.lineTo(a-q,c+q),h.lineTo(d.left,c+q),h.lineTo(d.left,c-q),h.lineTo(a-q,c-q),h.closePath(),h.scxFillStroke(b.fill,b.line),h.scxApplyTextTheme(b.text),h.textAlign="right",h.fillText(l,d.right-m,c));f&&(a=f.right-1,h.moveTo(f.left,
c),h.lineTo(f.left+q,c-q),h.lineTo(a,c-q),h.lineTo(a,c+q),h.lineTo(f.left+q,c+q),h.closePath(),h.scxFillStroke(b.fill,b.line),h.scxApplyTextTheme(b.text),h.textAlign="left",h.fillText(l,f.left+m,c));h.restore()}};g.defaults={textOffset:8};return g}();e.ValueMarker=k})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(){}Object.defineProperty(g.prototype,"theme",{get:function(){return this._theme},set:function(c){this._theme=c},enumerable:!0,configurable:!0});g.prototype.draw=function(c,a){var b=this,d=a.formatDate(c),f=this.theme,h=e.DummyCanvasContext.measureText(d,f.text),l=a.projection.xByDate(c)-h.width/2,m=l-5,q=h.width+10;c=function(p){var r=p.layer.context;r.textBaseline="middle";r.beginPath();r.rect(m,0,q,p.frame.height);r.scxFillStroke(f.fill,f.stroke);r.scxFill(b.theme.fill);
r.scxApplyTextTheme(f.text);r.textAlign="left";r.fillText(d,l,p.frame.height-h.height)};a.bottomPanelVisible&&c(a.bottomPanel);a.topPanelVisible&&c(a.topPanel)};return g}();e.DateMarker=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;b._options={};b._tooltip=new e.UI.Tooltip({parent:b});b.loadState(a);return b}__extends(c,g);Object.defineProperty(c.prototype,"tooltip",{get:function(){return this._tooltip},set:function(a){null!=a&&(this._tooltip=a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"chartPanel",{get:function(){return this._panel},set:function(a){var b=this._panel;if(b!==a){if(a&&!(a instanceof e.ChartPanel))throw new TypeError("Panel must be an instance of StockChartX.ChartPanel.");
this._panel=a;this._onChartPanelChanged(b);a&&!this._valueScale&&(a=this._options.valueScaleIndex)&&(this.valueScale=this.chart.valueScales[a])}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"context",{get:function(){return this._panel.layer.context},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"chart",{get:function(){var a=this._panel;return a&&a.chart},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"valueScale",{get:function(){return this._valueScale||
this.chart.valueScale},set:function(a){var b=this._valueScale;b!==a&&(this._valueScale=a,this._onValueScaleChanged(b))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"panelValueScale",{get:function(){return this._panel.getValueScale(this.valueScale)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"projection",{get:function(){return this._panel&&this._panel.getProjection(this.valueScale)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",
{get:function(){return this._options.visible},set:function(a){var b=this.visible;b!==a&&(this._options.visible=a,this._onVisibleChanged(b))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"zIndex",{get:function(){return this._options.zIndex},set:function(a){if(!e.JsUtil.isFiniteNumber(a))throw Error("Z-index must be a finite number.");this._options.zIndex=a},enumerable:!0,configurable:!0});c.prototype._setOption=function(a,b,d){var f=this._options,h=f[a];h!==b&&(f[a]=b,d&&this.fire(d,
b,h))};c.prototype._onChartPanelChanged=function(a){};c.prototype._onValueScaleChanged=function(a){};c.prototype._onVisibleChanged=function(a){};c.prototype.addChartCssClass=function(a){var b=this.chart;b&&b.addCssClass(a)};c.prototype.removeChartCssClass=function(a){var b=this.chart;b&&b.removeCssClass(a)};c.prototype.changeCursor=function(a){this._prevCursor&&this.removeChartCssClass(this._prevCursor);a&&this.addChartCssClass(a);this._prevCursor=a};c.prototype.saveState=function(){var a={options:e.JsUtil.clone(this._options),
tooltip:this.tooltip.saveState()};this.chartPanel&&(a.panelIndex=this.chartPanel.getIndex());this.valueScale&&(a.valueScaleIndex=this.valueScale.index);return a};c.prototype.loadState=function(a){var b=this.suppressEvents();a=a||{};this._options=a.options||{};this.tooltip.loadState(a.tooltip);this.suppressEvents(b)};c.prototype.draw=function(){};c.prototype.drawValueMarkers=function(){};c.prototype.showTooltip=function(a){if(a){var b=this.chartPanel;a=b.container.scxLocalToClientPoint(a.x,a.y);var d=
this.tooltip;d.layoutRect={top:this.chart.rootDiv.offset().top,left:b.container.offset().left+b.contentFrame.left,width:b.contentFrame.width,height:this.chart.getBounds().height};d.visible?d.moveTo(a):d.show(a)}};c.prototype.hideTooltip=function(){this.tooltip.hide()};c.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy();this.chartPanel=null};return c}(e.ChartEventsExtender);e.ChartPanelObject=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=jQuery,g=function(c){function a(b){var d=c.call(this,b)||this;d._panels=[];d._splitters=[];d._options={};d._panelsContentFrame=new e.Rect;d.loadState(b);0===d._panels.length&&d._panels.push(new e.ChartPanel({chartPanelsContainer:d}));return d}__extends(a,c);Object.defineProperty(a.prototype,"panels",{get:function(){return this._panels},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"newPanelHeightRatio",{get:function(){return this._options.newPanelHeightRatio},
set:function(b){if(!e.JsUtil.isPositiveNumber(b)||1<=b)throw Error("Ratio must be a number in range (0..1)");this._options.newPanelHeightRatio=b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"panelPadding",{get:function(){return this._options.panelPadding},set:function(b){this._options.panelPadding=b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"panelsContentFrame",{get:function(){return this._panelsContentFrame},enumerable:!0,configurable:!0});a.prototype._initGestures=
function(){return new e.GestureArray([new e.MouseHoverGesture({handler:this._handleMouseHoverGesture,hitTest:this._mouseHoverHitTest})],this)};a.prototype._subscribe=function(){var b=this;this.chart.on(e.ChartEvent.THEME_CHANGED+".scxPanelsContainer",function(){for(var d=0,f=b._splitters;d<f.length;d++)f[d].invalidateTheme()})};a.prototype._unsubscribe=function(){this.chart.off(".scxPanelsContainer",this)};a.prototype.handleEvent=function(b){for(var d=0,f=this._splitters;d<f.length;d++)if(f[d].handleEvent(b))return!0;
c.prototype.handleEvent.call(this,b);b.pointerPosition.x-=this.frame.left;b.pointerPosition.y-=this.frame.top;d=0;for(f=this._panels;d<f.length;d++)if(f[d].handleEvent(b))return!0;return!1};a.prototype._handleMouseHoverGesture=function(b,d){this.chart.crossHair.handleMouseHoverGesture(b,d)};a.prototype._mouseHoverHitTest=function(b){return this._panelsContentFrame.containsPoint(b)};a.prototype.addPanel=function(b,d,f){var h=this._panels,l=d||this.newPanelHeightRatio;d=new e.ChartPanel({chartPanelsContainer:this,
options:{heightRatio:l}});try{if(f&&0<h.length){var m=this.chart.mainPanel,q=m.heightRatio-l;q>=m.minHeightRatio?m.heightRatio=q:this._adjustHeightRatiosToEncloseNewRatio(l)}else this._adjustHeightRatiosToEncloseNewRatio(l)}catch(p){if(f=this._availableHeightRatio(),0<f&&f>=d.minHeightRatio)d.heightRatio=f;else throw p;}null==b?h.push(d):h.splice(b,0,d);this._updateSplitters();this.chart.fireValueChanged(e.ChartEvent.PANEL_ADDED,d);return d};a.prototype.removePanel=function(b){b="number"===typeof b?
this._panels[b]:b;var d=this.chart,f=d.mainPanel;if(b===f)throw Error("Main panel cannot be removed.");for(var h=this._panels,l=0;l<h.length;l++)if(h[l]===b){d.removeIndicators(b.indicators,!1);f.heightRatio=Math.min(Math.roundToDecimals(f.heightRatio+b.heightRatio,8),1);h.splice(l,1);b.destroy();this._updateSplitters();d.fireValueChanged(e.ChartEvent.PANEL_REMOVED,b);break}};a.prototype.movePanel=function(b,d){if(!e.JsUtil.isFiniteNumber(d))throw new TypeError("Offset must be a number.");for(var f=
this._panels,h=0;h<f.length;h++)if(f[h]===b){d=Math.min(Math.max(h-d,0),f.length-1);d!==h&&(f.splice(h,1),f.splice(d,0,b));break}this._updateSplitters()};a.prototype.totalPanelsHeight=function(){var b=this.container.scxContentSize(),d=e.ChartPanelSplitter.getHeight();return b.height-d*(this._panels.length-1)};a.prototype.findPanelAt=function(b){b-=this.frame.top;for(var d=0,f=this._panels;d<f.length;d++){var h=f[d],l=h.frame;if(b>=l.top&&b<=l.bottom)return h}return null};a.prototype.setPanelHeightRatio=
function(b,d){var f=this.chart.mainPanel;if(b===f)b.heightRatio=d;else{var h=b.heightRatio;b.heightRatio=d;f.heightRatio-=b.heightRatio-h}};a.prototype._availableHeightRatio=function(){return 1-this._panels.reduce(function(b,d){return b+d.heightRatio},0)};a.prototype._adjustHeightRatiosToEncloseNewRatio=function(b){for(var d=this._panels,f=d.map(function(v){return v.heightRatio});;){var h=b-this._availableHeightRatio();if(1E-5>=h)break;for(var l=!1,m=0,q=d;m<q.length;m++){var p=q[m],r=p.heightRatio-
h*p.heightRatio;r>=p.minHeightRatio&&(p.heightRatio=r,l=!0)}if(!l){for(b=0;b<f.length;b++)d[b].heightRatio=f[b];throw Error("Insufficient height. Other panels use too much height. You have to update minimum height weight of existing panels to free some space.");}}};a.prototype._updateSplitters=function(){var b=this._panels,d=this._splitters,f=b.length-1,h=d.length-1-f;if(0<=h){for(var l=0;l<d.length;l++)d[l].destroy();d.splice(h,d.length-h)}for(h=0;h<f;h++){var m=(l=h>=d.length)?new e.ChartPanelSplitter:
d[h];m.setPanels(h,b[h],b[h+1]);l&&d.push(m)}};a.prototype.saveState=function(){var b=e.JsUtil.clone(this._options);b.panels=[];for(var d=0,f=this._panels;d<f.length;d++)b.panels.push(f[d].saveState());return b};a.prototype.loadState=function(b){b=b||{};this._options={};this.newPanelHeightRatio=b.newPanelHeightRatio||.2;this.panelPadding=b.panelPadding||{left:5,top:10,right:5,bottom:10};for(var d=this._panels,f=0;f<d.length;f++){var h=d[f];h.destroy()}d.length=0;if(b.panels)for(f=0,b=b.panels;f<b.length;f++)h=
k.extend({chartPanelsContainer:this},b[f]),h=new e.ChartPanel(h),d.push(h);this._updateSplitters()};a.prototype._createContainer=function(){return this.chart.rootDiv.scxAppend("div","scxPanelsContainer")};a.prototype.setNeedsAutoScale=function(){for(var b=0,d=this._panels;b<d.length;b++)d[b].setNeedsAutoScale()};a.prototype.layoutScalePanel=function(b){c.prototype.layout.call(this,b);var d=this.container.scxContentSize(),f=this._panelsContentFrame;f.left=b.left;f.top=b.top;f.width=d.width;f.height=
d.height;d=this.chart.valueScales;for(var h=d.length-1;0<=h;h--)f=d[h].layout(f);this._panelsContentFrame=f;return new e.Rect({left:f.left,top:f.top,width:f.width,height:b.height})};a.prototype.layout=function(b){b=this.container.scxContentSize();for(var d=e.ChartPanelSplitter.getHeight(),f=this._panels.length,h=this.totalPanelsHeight(),l=0,m=0;m<f;m++){var q=this._panels[m],p=Math.round(h*q.heightRatio),r=new e.Rect({left:0,top:l,width:b.width,height:p});l+=p;q.layout(r);m<f-1&&(q=new e.Rect({left:0,
top:l,width:b.width,height:d}),this._splitters[m].layout(q),l+=d)}};a.prototype.layoutSplitterPanels=function(b){var d=this.totalPanelsHeight(),f=function(m){m.frame.height=Math.round(d*m.heightRatio);m.setNeedsUpdate()},h=b.topPanel;f(h);var l=b.frame;l.top=h.frame.bottom;b.layout(l);b=b.bottomPanel;b.frame.top=l.top+e.ChartPanelSplitter.getHeight();f(b)};a.prototype.draw=function(){for(var b=0,d=this._panels;b<d.length;b++)d[b].draw()};a.prototype.destroy=function(){for(var b=0,d=this._panels;b<
d.length;b++)d[b].destroy();b=0;for(d=this._splitters;b<d.length;b++)d[b].destroy();c.prototype.destroy.call(this)};return a}(e.ChartHtmlControl);e.ChartPanelsContainer=g})(StockChartX||(StockChartX={}));
(function(e){var k=function(){function g(c){this._panel=c}g.prototype.layout=function(c){var a=this._panel;a!==a.chart.mainPanel&&(this._options||this._createControls(c),c=a.getIndex(),this._moveUp.css("display",1<c?"inline-block":"none"),this._moveDown.css("display",c===a.chartPanelsContainer.panels.length-1?"none":"inline-block"))};g.prototype._createControls=function(c){var a=this,b=this._panel;c=this._options=c.scxAppend("div","scxPanelOptions");c.hide();b.chart.localize(c);this._moveUp=c.scxAppend("span",
["scxPanelTitleIcon","scxPanelMoveUp"]).on("mouseenter",function(){a._moveUp.attr("title",i18next.t("chartPanelOptionControls.moveUp"))}).on(eventClickByPlatform,function(){1<b.getIndex()&&(b.chartPanelsContainer.movePanel(b,1),b.chart.setNeedsUpdate())});this._moveDown=c.scxAppend("span",["scxPanelTitleIcon","scxPanelMoveDown"]).on("mouseenter",function(){a._moveDown.attr("title",i18next.t("chartPanelOptionControls.moveDown"))}).on(eventClickByPlatform,function(){b.chartPanelsContainer.movePanel(b,
-1);b.chart.setNeedsUpdate()});this._close=c.scxAppend("span",["scxPanelTitleIcon","scxPanelClose"]).on("mouseenter",function(){a._close.attr("title",i18next.t("chartPanelOptionControls.close"))}).on(eventClickByPlatform,function(){b.chartPanelsContainer.removePanel(b);b.chart.setNeedsUpdate()})};g.prototype.handleMouseHoverGesture=function(c){switch(c.state){case e.GestureState.STARTED:case e.GestureState.CONTINUED:this._panel.container.find(".scxPanelOptions").show();break;case e.GestureState.NONE:case e.GestureState.FINISHED:this._panel.container.find(".scxPanelOptions").hide()}};
return g}();e.ChartPanelOptionControls=k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.PanelMoveDirection={NONE:"none",HORIZONTAL:"horizontal",VERTICAL:"vertical",ANY:"any"};Object.freeze(e.PanelMoveDirection);e.PanelMoveKind={NORMAL:"normal",AUTOSCALED:"autoscaled"};Object.freeze(e.PanelMoveKind);e.PanelEvent={THEME_CHANGED:"panelThemeChanged",X_GRID_VISIBLE_CHANGED:"panelXGridVisibleChanged",Y_GRID_VISIBLE_CHANGED:"panelYGridVisibleChanged",PLOT_ADDED:"panelPlotAdded",PLOT_REMOVED:"panelPlotRemoved",DRAWING_ADDED:"panelDrawingAdded",OBJECT_ADDED:"panelObjectAdded",
DRAWING_REMOVED:"panelDrawingRemoved",OBJECT_REMOVED:"panelObjectRemoved",DOUBLE_CLICKED:"panelDoubleClicked",CONTEXT_MENU:"panelContextMenu"};Object.freeze(e.PanelEvent);var k=function(g){function c(a){var b=g.call(this)||this;b._valueScales=[];b._components=[];b._objects=[];b._contentFrame=new e.Rect;b._controls={title:null,options:null};b._barInfoControls=null;b._updateAnimation=new e.Animation({context:b,recurring:!1,callback:b._onUpdateAnimationCallback});b._objectTrendlineOrders=[];b.lastPointerPosition=
{x:0,y:0};if(!(a.chartPanelsContainer instanceof e.ChartPanelsContainer))throw new TypeError("Invalid chart panels container.");b._panelsContainer=a.chartPanelsContainer;b._optionControls=new e.ChartPanelOptionControls(b);b.loadState(a);return b}__extends(c,g);Object.defineProperty(c.prototype,"chartPanelsContainer",{get:function(){return this._panelsContainer},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"chart",{get:function(){return this._panelsContainer._chart},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"valueScales",{get:function(){return this._valueScales},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"valueScale",{get:function(){return this._valueScales[0]},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"formatter",{get:function(){return this.valueScale.formatter},set:function(a){this.valueScale.formatter=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"layer",{get:function(){return this._layer},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"components",{get:function(){return this._components},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"heightRatio",{get:function(){return this._options.heightRatio},set:function(a){if(!e.JsUtil.isFiniteNumber(a)||a<this._options.minHeightRatio||a>this._options.maxHeightRatio)throw Error("Height ratio must be a number in range [minHeightRatio..maxHeightRatio]");this._options.heightRatio=a},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"minHeightRatio",{get:function(){return this._options.minHeightRatio},set:function(a){if(!e.JsUtil.isFiniteNumber(a)||0>a||a>this._options.maxHeightRatio)throw Error("Min height ratio must be a number in range [0..maxHeightRatio].");this._options.minHeightRatio=a;this._options.heightRatio<a&&(this._options.heightRatio=a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxHeightRatio",{get:function(){return this._options.maxHeightRatio},set:function(a){if(!e.JsUtil.isFiniteNumber(a)||
a<this.minHeightRatio||1<a)throw Error("Max height ratio must be a number in range [minHeightRatio..1]");this._options.maxHeightRatio=a;this.heightRatio>a&&(this._options.heightRatio=a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"moveDirection",{get:function(){return this._options.moveDirection},set:function(a){this._options.moveDirection=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"moveKind",{get:function(){return this._options.moveKind},set:function(a){this._options.moveKind=
a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"xGridVisible",{get:function(){return this._options.showXGrid},set:function(a){var b=this._options.showXGrid;b!==a&&(this._options.showXGrid=a,this._fire(e.PanelEvent.X_GRID_VISIBLE_CHANGED,a,b))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"yGridVisible",{get:function(){return this._options.showYGrid},set:function(a){var b=this._options.showYGrid;b!==a&&(this._options.showYGrid=a,this._fire(e.PanelEvent.Y_GRID_VISIBLE_CHANGED,
a,b))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"objects",{get:function(){return this._objects},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"plots",{get:function(){return this._objects.filter(function(a){return a instanceof e.Plot})},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"drawings",{get:function(){return this._objects.filter(function(a){return a instanceof e.Drawing})},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"theme",{get:function(){return this._options.theme},set:function(a){var b=this._options.theme;this._options.theme=a;this._fire(e.PanelEvent.THEME_CHANGED,a,b)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"actualTheme",{get:function(){return this._options.theme||this.chart.theme.chartPanel},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"projection",{get:function(){return this.valueScale.projection},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"titleDiv",{get:function(){return this._controls.title},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"indicators",{get:function(){var a=this;return this.chart.indicators.filter(function(b){return b.chartPanel===a})},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"contentFrame",{get:function(){return this._contentFrame},enumerable:!0,configurable:!0});c.prototype._fire=function(a,b,d){var f=this.chart;f&&f.fireTargetValueChanged(this,a,b,d)};c.prototype.getIndex=
function(){return this._panelsContainer.panels.indexOf(this)};c.prototype.getProjection=function(a){return this.valueScales[a?a.index:0].projection};c.prototype.getValueScale=function(a){return this.valueScales[a?a.index:0]};c.prototype.setHeightRatio=function(a){this._panelsContainer.setPanelHeightRatio(this,a)};c.prototype.setNeedsAutoScale=function(){for(var a=0,b=this._valueScales;a<b.length;a++)b[a].setNeedsAutoScale()};c.prototype.containsPlot=function(a){return 0<=this.plots.indexOf(a)};c.prototype.addPlot=
function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];b=0;for(a=e.JsUtil.flattenArray(a);b<a.length;b++){var d=a[b];if(!(d instanceof e.Plot))throw new TypeError("Plot must be an instance of StockChartX.Plot.");this.containsPlot(d)||(d.chartPanel=this,this._objects.push(d),this._fire(e.PanelEvent.PLOT_ADDED,d))}};c.prototype.removePlot=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];b=0;for(a=a&&0<a.length?e.JsUtil.flattenArray(a):this.plots.slice(0);b<a.length;b++){var d=
a[b],f=this._objects.indexOf(d);0<=f&&(this._objects.splice(f,1),this._fire(e.PanelEvent.PLOT_REMOVED,d))}};c.prototype.containsDrawing=function(a){return 0<=this.drawings.indexOf(a)};c.prototype.addDrawings=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];b=0;for(a=e.JsUtil.flattenArray(a);b<a.length;b++){var d=a[b];if(!(d instanceof e.Drawing))throw new TypeError("Drawing is not an instance of StockChartX.Drawing.");if(this.containsDrawing(d))throw Error("Drawing already added.");
d.chartPanel=this;d.className!=e.TrendLineOrderDrawing.className&&this._objects.push(d);this._fire(e.PanelEvent.DRAWING_ADDED,d)}};c.prototype.removeDrawings=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=(a&&0<a.length?e.JsUtil.flattenArray(a):this.drawings.slice(0)).filter(function(d){return d.canRemove});this.forceRemoveDrawings(a)};c.prototype.forceRemoveDrawings=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];b=this.chart;var d=null,f=0;for(a=a&&0<
a.length?e.JsUtil.flattenArray(a):this.drawings.slice(0);f<a.length;f++){var h=a[f],l=this._objects.indexOf(h);0>l||(b.selectedObject===h&&(b.state===e.ChartState.USER_DRAWING?d=b.selectedObject:b.selectObject(null)),h.destroy(),this._objects.splice(l,1),this._fire(e.PanelEvent.DRAWING_REMOVED,h))}d&&b.cancelUserDrawing()};c.prototype.addObjects=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];b=0;for(a=e.JsUtil.flattenArray(a);b<a.length;b++){var d=a[b];if(!(d instanceof e.ChartPanelObject))throw new TypeError("Object is not an instance of StockChartX.ChartPanelObject.");
if(this.containsObject(d))throw Error("Object already added.");d.chartPanel=this;this._objects.push(d);this._fire(e.PanelEvent.OBJECT_ADDED,d)}};c.prototype.removeObjects=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=a&&0<a.length?e.JsUtil.flattenArray(a):this.objects.slice(0);b=this.chart;for(var d=0;d<a.length;d++){var f=a[d],h=this._objects.indexOf(f);0>h||(b.selectedObject===f&&b.selectObject(null),this._objects.splice(h,1),this._fire(e.PanelEvent.OBJECT_REMOVED,f))}};
c.prototype.addTrendlineOrder=function(a){if(!(a instanceof e.Drawing))throw new TypeError("Object is not an instance of StockChartX.Drawing.");if(this.containsObject(a))throw Error("Object already added.");for(var b=!1,d=0;d<this._objectTrendlineOrders.length;d++)if(this._objectTrendlineOrders[d].id==a.id){b=!0;break}b||(a.chartPanel=this,b=$.extend(!0,{},a.actualTheme),b.line.lineStyle=e.LineStyle.DASH,a.theme=b,this._objectTrendlineOrders.push(a))};c.prototype.updateTrendlineOrder=function(a,b,
d,f){for(var h=0;h<this._objectTrendlineOrders.length;h++){var l=this._objectTrendlineOrders[h];if(l.id==a){l.title=b;l.lineColor=f;l.chartPoints[0].value=d;break}}};c.prototype.removeTrendlineOrder=function(a){for(var b=null,d=-1,f=0;f<this._objectTrendlineOrders.length;f++)if(this._objectTrendlineOrders[f].id==a){d=f;b=this._objectTrendlineOrders[f];break}0>d||(a=this.chart,a.selectedObject===b&&a.selectObject(null),this._objectTrendlineOrders.splice(d,1))};c.prototype.containsObject=function(a){return 0<=
this.objects.indexOf(a)};c.prototype.handleEvent=function(a){var b=a.pointerPosition,d=this.chart;if(d.state===e.ChartState.ZOOM_IN)return d.zoomInView.panel=this,d.zoomInView.handleEvent(a);var f={x:b.x-this.frame.left,y:b.y-this.frame.top};a.pointerPosition=f;for(var h=0,l=this._valueScales;h<l.length;h++)if(l[h].handleEvent(a))return!0;h=this.hitTest(b);try{if(d.state===e.ChartState.USER_DRAWING){if(!h)return!1;var m=d.selectedObject,q=m.chartPanel;if(q&&q!==this)return;a.pointerPosition=f;a.chartPanel=
this;m.handleEvent(a);$(".scxPanelTitle").css("pointer-events","none");$(".scxNavigation").css("pointer-events","none");return!0}$(".scxPanelTitle").css("pointer-events","all");$(".scxNavigation").css("pointer-events","all");var p=this.drawings;if(!h){for(var r=p.length-1;0<=r;r--)p[r].hideTooltip();a.pointerPosition=b;g.prototype.handleEvent.call(this,a,!1);return!1}for(r=p.length-1;0<=r;r--)if(p[r].handleEvent(a))return!0;p=this._objectTrendlineOrders;if(!h){for(r=p.length-1;0<=r;r--)p[r].hideTooltip();
a.pointerPosition=b;g.prototype.handleEvent.call(this,a,!1);return!1}for(r=p.length-1;0<=r;r--)if(p[r].handleEvent(a))return!0}finally{a.pointerPosition=b}return g.prototype.handleEvent.call(this,a)};c.prototype.minMaxValues=function(a,b,d){for(var f=Infinity,h=-Infinity,l=0,m=this.plots;l<m.length;l++){var q=m[l];d&&q.valueScale!==d||(q=q.minMaxValues(a,b),q.min<f&&(f=q.min),q.max>h&&(h=q.max))}isFinite(f)||(f=-1);isFinite(h)||(h=1);f===h&&(f--,h++);return{min:f,max:h}};c.prototype.autoScaledMinMaxValues=
function(a){var b=this.chart.dateScale,d=b.firstVisibleIndex;return this.minMaxValues(d,b.lastVisibleIndex-d+1,a)};c.prototype.formatValue=function(a){return this.valueScale.formatValue(a)};c.prototype.hitTest=function(a){return this._contentFrame.containsPoint(a)};c.prototype.saveState=function(){for(var a={options:e.JsUtil.clone(this._options),valueScales:[]},b=0,d=this._valueScales;b<d.length;b++)a.valueScales.push(d[b].saveState());return a};c.prototype.loadState=function(a){a=a||{};var b=a.options||
{};this._options={};this.minHeightRatio=void 0!==b.minHeightRatio?b.minHeightRatio:.05;this.maxHeightRatio=b.maxHeightRatio||1;this.heightRatio=b.heightRatio||1;this.xGridVisible=void 0!==b.showXGrid?!!b.showXGrid:!0;this.yGridVisible=void 0!==b.showYGrid?!!b.showYGrid:!0;this.moveDirection=b.moveDirection||e.PanelMoveDirection.HORIZONTAL;this.moveKind=b.moveKind||e.PanelMoveKind.AUTOSCALED;b=this._valueScales=[];a=a.valueScales||[a.valueScale];for(var d=0,f=this.chart.valueScales.length;d<f;d++){var h=
new e.ChartPanelValueScale({chartPanel:this});b.push(h);h.loadState(a[d])}};c.prototype.preferredValueScaleWidth=function(a){for(var b=0,d=0,f=this._valueScales;d<f.length;d++){var h=f[d];h.chartValueScale===a&&(b=Math.max(b,h.preferredWidth()))}return b};c.prototype.layout=function(a){this._layoutHtmlElements(a);for(var b=0,d=this._valueScales;b<d.length;b++)d[b].layout(a);e.JsUtil.sort(this._objects,function(f,h){return Math.roundToDecimals(f.zIndex-h.zIndex,5)})};c.prototype.draw=function(){var a=
this._layer.context,b=this._layer.size.width,d=this._layer.size.height;a.save();a.clearRect(0,0,b,d);a.translate(.5,.5);this.drawGridLines();b=0;for(d=this._valueScales;b<d.length;b++)d[b].draw();d=0;for(var f=this._objects;d<f.length;d++)b=f[d],b.drawValueMarkers();d=0;for(f=this._objectTrendlineOrders;d<f.length;d++)b=f[d],b.drawValueMarkers();b=this._contentFrame;a.beginPath();a.rect(b.left,0,b.width,b.height);a.clip();d=0;for(f=this._objects;d<f.length;d++)b=f[d],b instanceof e.Drawing?this.chart.showDrawings?
(b.draw(),b.selected&&b.drawDateMarkers()):b.tooltip.hide():b.draw();d=0;for(f=this._objectTrendlineOrders;d<f.length;d++)b=f[d],b instanceof e.Drawing?(b.draw(),b.selected&&b.drawDateMarkers()):b.draw();b=0;for(d=this.chart.indicators;b<d.length;b++)f=d[b],f.chartPanel===this&&f.draw();a.restore();this.updateHoverRecord()};c.prototype.drawGridLines=function(){var a=this.chart.xGridVisible&&this.xGridVisible,b=this.chart.yGridVisible&&this.yGridVisible;if(a||b){var d=this._contentFrame,f=this._layer.context;
f.scxApplyStrokeTheme(this.actualTheme.grid);f.beginPath();if(a){a=this.chart.dateScale.calibrator.majorTicks;for(var h=0,l=a;h<l.length;h++)a=l[h],f.moveTo(a.x,0),f.lineTo(a.x,d.height)}if(b)for(a=this.valueScale.calibrator.majorTicks,b=0,h=a;b<h.length;b++)a=h[b],f.moveTo(d.left,a.y),f.lineTo(d.left+d.width,a.y);f.stroke()}};c.prototype.update=function(){this.layout(this.frame);this.draw()};c.prototype.setNeedsUpdate=function(a){a&&this.setNeedsAutoScale();this._updateAnimation.start()};c.prototype._onUpdateAnimationCallback=
function(){this.update()};c.prototype.destroy=function(){this._unsubscribe();this.chartContextMenu&&this.chartContextMenu.destroy();this._updateAnimation.destroy();for(var a=0,b=this._objects;a<b.length;a++)b[a].destroy();a=0;for(b=this._components;a<b.length;a++)b[a].destroy();g.prototype.destroy.call(this)};c.prototype._initInstrumentPanelTitle=function(){var a=this,b={chart:this.chart,showOnClick:!0,onItemSelected:function(r){switch(r.data("id")){case e.UI.ChartContextMenu.MenuItem.FORMAT:a.showPriceStyleFormatDialog();
break;default:this.chart.fire(e.ChartEvent.CONTEXT_MENU,{value:r.data("id"),pos:this.menuContainer.position()})}}},d=this._controls.title.scxAppend("div"),f=d.scxAppend("span","scxPanelTitleCaption"),h=d.scxAppend("span","scxPanelTitleValue");d.scxAppend("span","scxPanelTitleValue").text("O:");var l=d.scxAppend("span","scxPanelTitleValue");d.scxAppend("span","scxPanelTitleValue").text("H: ");var m=d.scxAppend("span","scxPanelTitleValue");d.scxAppend("span","scxPanelTitleValue").text("L: ");var q=
d.scxAppend("span","scxPanelTitleValue");d.scxAppend("span","scxPanelTitleValue").text("C: ");var p=d.scxAppend("span","scxPanelTitleValue");this._barInfoControls={rootDiv:d,symbol:f,date:h,open:l,high:m,low:q,close:p,series:this.chart.barDataSeries()};this._titleNeedsUpdate=!0;this._updateInstrument();this.updateHoverRecord();this.chartContextMenu=f.scx().chartContextMenu(b)};c.prototype.showPriceStyleFormatDialog=function(){var a=this;e.UI.ViewLoader.priceStyleSettingsDialog(function(b){b.show({chart:a.chart,
priceStyle:a.chart.priceStyle})})};c.prototype.updateHoverRecord=function(a){if(this._barInfoControls){var b=this._barInfoControls.series,d=b.close.length;if(!(0>=d)){null==a&&(a=this.chart.hoveredRecord);if(null==a||0>a||a>=d||isNaN(a))a=d-1;d=this._barInfoControls;var f=b.open.valueAtIndex(a),h=b.close.valueAtIndex(a),l=this.chart.theme,m=l.plot.bar.candle;m=(h>=f?m.upCandle:m.downCandle).fill.fillColor;var q=this.chart.dateScale.formatDate(b.date.valueAtIndex(a));d.date.text(q);d.open.text(this.formatValue(f)).css("color",
m);d.high.text(this.formatValue(b.high.valueAtIndex(a))).css("color",m);d.low.text(this.formatValue(b.low.valueAtIndex(a))).css("color",m);d.close.text(this.formatValue(h)).css("color",m);e.Environment.isMobile||e.Environment.isPhone||!this._titleNeedsUpdate||(a=e.DummyCanvasContext.textWidth(q,l.valueScale.text)+10,b=d.date.width(),(b<a||b>1.3*a)&&d.date.width("auto").width(a),this._titleNeedsUpdate=!1)}}};c.prototype._subscribe=function(){var a=this,b=this.chart;b.on(e.ChartEvent.THEME_CHANGED+
".scxPanel",function(){a._applyTheme()},this);b.mainPanel===this&&(b.on(e.ChartEvent.HOVER_RECORD_CHANGED+".scxPanel",function(d){a.updateHoverRecord(d.value)},this),b.on(e.ChartEvent.INSTRUMENT_CHANGED+".scxPanel",function(){a._updateInstrument()},this));b.on(e.ChartEvent.VALUE_SCALE_ADDED+".scxPanel",function(){a._valueScales.push(new e.ChartPanelValueScale({chartPanel:a}))},this);b.on(e.ChartEvent.VALUE_SCALE_REMOVED+".scxPanel",function(d){a._valueScales.splice(d.value,1)},this);b.on(e.ChartEvent.PRICE_STYLE_CHANGED+
".scxPanel",function(d){a._barInfoControls&&(a._barInfoControls.series=a.chart.primaryBarDataSeries())},this)};c.prototype._unsubscribe=function(){var a=this.chart;a&&a.off(".scxPanel",this)};c.prototype._initGestures=function(){return new e.GestureArray([new e.PanGesture({handler:this._handlePanGesture,hitTest:this._panGestureHitTest}),new e.MouseWheelGesture({handler:this._handleMouseWheel,hitTest:this.hitTest}),new e.ClickGesture({handler:this._handleClickGesture,hitTest:this.hitTest}),new e.DoubleClickGesture({handler:this._handleDoubleClickGesture,
hitTest:this.hitTest}),new e.MouseHoverGesture({handler:this._handleMouseHoverGesture,hitTest:this.hitTest,hoverEventEnabled:!1}),new e.ContextMenuGesture({handler:this._handleContextMenuGesture,hitTest:this.hitTest})],this)};c.prototype._panGestureHitTest=function(a){return this.moveDirection===e.PanelMoveDirection.NONE?!1:this.hitTest(a)};c.prototype._handlePanGesture=function(a){var b=this.chart;if(b.scrollEnabled)switch(a.state){case e.GestureState.STARTED:b.rootDiv.addClass("scxPanelScroll");
break;case e.GestureState.FINISHED:b.rootDiv.removeClass("scxPanelScroll");break;case e.GestureState.CONTINUED:a=a.moveOffset;var d;switch(this.moveDirection){case e.PanelMoveDirection.HORIZONTAL:b.dateScale.scrollOnPixels(a.x)&&(a=this.moveKind===e.PanelMoveKind.AUTOSCALED,b.setNeedsUpdate(a));break;case e.PanelMoveDirection.VERTICAL:var f=0;for(d=this.valueScales;f<d.length;f++)d[f]._zoomOrScrollWithUpdate(a.y,this.valueScale.scrollOnPixels);break;case e.PanelMoveDirection.ANY:if(b.dateScale.scrollOnPixels(a.x)||
this.moveKind===e.PanelMoveKind.AUTOSCALED){f=0;for(d=this.valueScales;f<d.length;f++)d[f].scrollOnPixels(a.y);a=this.moveKind===e.PanelMoveKind.AUTOSCALED;b.setNeedsUpdate(a)}else for(f=0,d=this.valueScales;f<d.length;f++)d[f]._zoomOrScrollWithUpdate(a.y,this.valueScale.scrollOnPixels)}}};c.prototype._handleMouseHoverGesture=function(a){this._optionControls.handleMouseHoverGesture(a)};c.prototype._handleMouseWheel=function(a){this.chart.zoomEnabled&&this.chart.dateScale._handleZoom(.05*-a.delta*
this.frame.width)};c.prototype._handleClickGesture=function(){var a=this.chart,b=a.selectedObject;b&&(a.selectObject(null),this.containsDrawing(b)?this.setNeedsUpdate():a.setNeedsUpdate())};c.prototype._handleDoubleClickGesture=function(){this._fire(e.PanelEvent.DOUBLE_CLICKED,this)};c.prototype._handleContextMenuGesture=function(a,b){this._fire(e.PanelEvent.CONTEXT_MENU,this);this.lastPointerPosition=b.pointerPosition;this.chartContextMenu.show(b.evt)};c.prototype._createContainer=function(){var a=
this.chartPanelsContainer.container.scxAppend("div","scxChartPanel"),b=this===this.chart.mainPanel;this._container=a;this._layer=new e.Layer({parent:a});this._controls.title=a.scxAppend("div","scxPanelTitle");b&&(this.addComponent(new e.InstrumentWatermark),this._initInstrumentPanelTitle());this._applyTheme();this._subscribe();return a};c.prototype._layoutHtmlElements=function(a){g.prototype.layout.call(this,a);var b=this._panelsContainer.panelsContentFrame;this._contentFrame.copyFrom(a);this._contentFrame.left=
b.left;this._contentFrame.width=b.width;this._layer.size={width:this.container.width(),height:this.container.height()};this===this.chart.mainPanel&&this._barInfoControls.rootDiv.css("display",this.chart.showBarInfoInTitle?"block":"none");b=0;for(var d=this._components;b<d.length;b++)d[b].layout(a);a=this._controls.title;a.scxPosition(this._contentFrame.left,0).outerWidth(this._contentFrame.width);this._optionControls.layout(a)};c.prototype._updateInstrument=function(){if(this._barInfoControls){var a=
this.chart.instrument;a&&this._barInfoControls.symbol.text(a.symbol)}};c.prototype._applyTheme=function(){var a=this.titleDiv;if(a){this._titleNeedsUpdate=!0;a.scxTextStyle(this.actualTheme.title);a=0;for(var b=this._components;a<b.length;a++)b[a].applyTheme()}};c.prototype.addComponent=function(a){if(0<=this._components.indexOf(a))throw Error("An item already exists.");a.chartPanel=this;this._components.push(a)};c.prototype.removeComponent=function(a){var b=this._components;a=b.indexOf(a);0<=a&&
(b[a].destroy(),b.splice(a,1))};return c}(e.HtmlControl);e.ChartPanel=k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){return g.call(this,a&&{options:a})||this}__extends(c,g);Object.defineProperty(c.prototype,"point",{get:function(){return this._options.point},set:function(a){this._setOption("point",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extended",{get:function(){return this._options.extended},set:function(a){this._setOption("extended",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"theme",{get:function(){return this._options.theme},
set:function(a){this._setOption("theme",a)},enumerable:!0,configurable:!0});c.prototype.loadState=function(a){g.prototype.loadState.call(this,a);if(a&&a.options){var b=a.options;if(b){a=this.suppressEvents();if(b=b.point)this.point=new e.ChartPoint(b);this.suppressEvents(a)}}};c.prototype.draw=function(){if(this.visible){var a=this.point.toPoint(this.projection),b=this.chartPanel.contentFrame,d=this.panelValueScale,f=this.context;f.beginPath();null!=d.leftFrame&&(f.moveTo(b.left,a.y),f.lineTo(this.extended?
b.right:a.x,a.y));null!=d.rightFrame&&(f.moveTo(this.extended?b.left:a.x,a.y),f.lineTo(b.right,a.y));f.scxStroke(this.theme)}};return c}(e.ChartPanelObject);e.ValueLine=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){return g.call(this,a&&{options:a})||this}__extends(c,g);Object.defineProperty(c.prototype,"ask",{get:function(){return this._options.ask},set:function(a){this._setOption("ask",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"bid",{get:function(){return this._options.bid},set:function(a){this._setOption("bid",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"theme",{get:function(){return this._options.theme},set:function(a){this._setOption("theme",
a)},enumerable:!0,configurable:!0});c.prototype.draw=function(){var a=this.projection,b=this.context,d=this.chartPanel.contentFrame,f=this.theme||this.chart.theme.spread;if(this.ask){var h=a.yByValue(this.ask);b.beginPath();b.moveTo(d.left,h);b.lineTo(d.right,h);b.scxStroke(f.ask.line)}this.bid&&(a=a.yByValue(this.bid),b.beginPath(),b.moveTo(d.left,a),b.lineTo(d.right,a),b.scxStroke(f.bid.line))};c.prototype.drawValueMarkers=function(){var a=this.chart.valueMarker,b=this.panelValueScale,d=this.theme||
this.chart.theme.spread,f=this.bid,h=function(l,m){l&&(a.theme.fill.fillColor=m,a.theme.text.fillColor=e.HtmlUtil.isDarkColor(m)?"white":"black",a.draw(l,b))};h(this.ask,d.ask.valueMarker.fill.fillColor);h(f,d.bid.valueMarker.fill.fillColor)};return c}(e.ChartPanelObject);e.Spread=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this,a&&{options:a})||this;b._handler=a.breakLinesHandler;return b}__extends(c,g);c.prototype.draw=function(){if(this._handler.chart.timeInterval<e.TimeSpan.MILLISECONDS_IN_DAY){var a=this.projection,b=this.chartPanel.contentFrame,d=this.context,f=moment(a.dateByX(0)).startOf("day").hours(this._handler.time.hours).minutes(this._handler.time.minutes).toDate(),h=a.dateByRecord(a.dateScale.lastVisibleIndex+1);d.scxApplyStrokeTheme(this._handler.theme);
for(d.beginPath();f<=h;){var l=a.xByDate(moment(f).add(1,"day").toDate());d.moveTo(l,0);d.lineTo(l,b.bottom-b.top);f=moment(f).add(1,"day").toDate()}d.stroke()}};return c}(e.ChartPanelObject);e.BreakLines=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;b._projectionFrame=new e.Rect;b.range={};if(!a)throw Error("Config is not specified.");if(!(a.chartPanel instanceof e.ChartPanel))throw new TypeError("Config.chartPanel must be an instance of StockChartX.ChartPanel.");b._panel=a.chartPanel;b._projection=new e.Projection(b.chart.dateScale,b);b.loadState(a);b._updateFormatter();b._initGestures();b.chart.on(e.ChartEvent.LOCALE_CHANGED+".scxValueScale",function(){b._updateFormatter()},
b);return b}__extends(c,g);Object.defineProperty(c.prototype,"chartPanel",{get:function(){return this._panel},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"chart",{get:function(){return this._panel.chart},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"projectionFrame",{get:function(){return this._projectionFrame},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"leftFrame",{get:function(){return this._leftFrame},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"rightFrame",{get:function(){return this._rightFrame},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"formatter",{get:function(){return this._formatter},set:function(a){if(!a||!e.JsUtil.isFunction(a.format))throw new TypeError("Invalid formatter.");this._formatter=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minVisibleValue",{get:function(){return this._options.minVisibleValue},set:function(a){if(!e.JsUtil.isFiniteNumberOrNaN(a))throw new TypeError("Value must be a number.");
this._setMinVisibleValue(a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxVisibleValue",{get:function(){return this._options.maxVisibleValue},set:function(a){if(!e.JsUtil.isFiniteNumberOrNaN(a))throw new TypeError("Value must be a number.");this._setMaxVisibleValue(a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minAllowedValue",{get:function(){return this._options.minAllowedValue},set:function(a){if(!e.JsUtil.isNumber(a))throw new TypeError("Value must be a number.");
this._options.minAllowedValue=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxAllowedValue",{get:function(){return this._options.maxAllowedValue},set:function(a){if(!e.JsUtil.isNumber(a))throw new TypeError("Value must be a number.");this._options.maxAllowedValue=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minAllowedValueRatio",{get:function(){return this._options.minAllowedValueRatio},set:function(a){if(!e.JsUtil.isPositiveNumberOrNaN(a))throw Error("Ratio must be a positive number.");
this._options.minAllowedValueRatio=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxAllowedValueRatio",{get:function(){return this._options.maxAllowedValueRatio},set:function(a){if(!e.JsUtil.isPositiveNumberOrNaN(a))throw Error("Ratio must be a positive number or NaN.");this._options.maxAllowedValueRatio=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minValueRangeRatio",{get:function(){return this._options.minValueRangeRatio},set:function(a){if(!e.JsUtil.isPositiveNumberOrNaN(a)||
1<a)throw Error("Ratio must be in range (0..1]");this._options.minValueRangeRatio=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxValueRangeRatio",{get:function(){return this._options.maxValueRangeRatio},set:function(a){if(!e.JsUtil.isPositiveNumberOrNaN(a)||1>a)throw Error("Ratio must be greater or equal to 1.");this._options.maxValueRangeRatio=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"theme",{get:function(){return this._options.theme},set:function(a){this._options.theme=
a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"majorTickMarkLength",{get:function(){return this._options.majorTickMarkLength},set:function(a){this._options.majorTickMarkLength=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minorTickMarkLength",{get:function(){return this._options.minorTickMarkLength},set:function(a){this._options.minorTickMarkLength=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"projection",{get:function(){return this._projection},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"padding",{get:function(){return this._options.padding},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"calibrator",{get:function(){return this._calibrator},set:function(a){this._calibrator=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"actualTheme",{get:function(){return this._options.theme||this.chart.theme.valueScale},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"chartValueScale",
{get:function(){var a=this._index();return 0<=a?this.chart.valueScales[a]:null},enumerable:!0,configurable:!0});c.prototype._initGestures=function(){return new e.GestureArray([new e.DoubleClickGesture({handler:this._handleDoubleClickGesture}),new e.PanGesture({handler:this._handlePanGesture,horizontalMoveEnabled:!1}),new e.MouseWheelGesture({handler:this._handleMouseWheelGesture})],this,this.hitTest)};c.prototype._updateFormatter=function(){var a=this.chart.locale,b=this.formatter;b?b.locale=a:this.formatter=
new e.IntlNumberFormat(a,{minimumFractionDigits:3,maximumFractionDigits:3})};c.prototype._setMinVisibleValue=function(a){this._options.minVisibleValue=a};c.prototype._setMaxVisibleValue=function(a){this._options.maxVisibleValue=a};c.prototype._index=function(){for(var a=this._panel.valueScales,b=0;b<a.length;b++)if(a[b]===this)return b;return-1};c.prototype.needsAutoScale=function(){return isNaN(this._options.minVisibleValue)||isNaN(this._options.maxVisibleValue)};c.prototype.setNeedsAutoScale=function(){this.maxVisibleValue=
this.minVisibleValue=NaN};c.prototype.autoScale=function(){var a=this.chart.dateScale,b=a.firstVisibleIndex,d=a.lastVisibleIndex-b+1;a=Infinity;for(var f=-Infinity,h=this.chartValueScale,l=0,m=this._panel.plots;l<m.length;l++){var q=m[l];q.valueScale===h&&"signal"!=q._plotThemeKey&&(q=q.minMaxValues(b,d),q.min<a&&(a=q.min),q.max>f&&(f=q.max))}isFinite(a)||(a=-1);isFinite(f)||(f=1);a===f&&(a--,f++);if(b=this.range)null!=b.min&&a>b.min&&(a=b.min),null!=b.max&&f<b.max&&(f=b.max);this._setMinVisibleValue(a);
this._setMaxVisibleValue(f)};c.prototype.formatValue=function(a){return this.formatter.format(a)};c.prototype.preferredWidth=function(){this.needsAutoScale()&&this.autoScale();var a=this._options,b=this.actualTheme.text,d=this.formatValue(a.minVisibleValue),f=this.formatValue(a.maxVisibleValue);d=e.DummyCanvasContext.measureText(d,b).width;b=e.DummyCanvasContext.measureText(f,b).width;a=a.padding;return Math.max(d,b)+a.left+a.right};c.prototype.hitTest=function(a){var b=this._leftContentFrame,d=this._rightContentFrame;
return b&&e.Geometry.isPointInsideOrNearRect(a,b)||d&&e.Geometry.isPointInsideOrNearRect(a,d)};c.prototype.scrollOnPixels=function(a){if(!isFinite(a))throw Error("Finite number expected.");if(!a)return!1;a=this._valueOffset(a);return this.scrollOnValue(a)};c.prototype.scrollOnValue=function(a){if(!a)return!1;var b=this.minVisibleValue+a;a=this.maxVisibleValue+a;var d=this.range;d&&(null!=d.min&&b>d.min&&(b=d.min),null!=d.max&&a<d.max&&(a=d.max));if(!this._canSetVisibleValueRange(b,a))return!1;this._setMinVisibleValue(b);
this._setMaxVisibleValue(a);return!0};c.prototype.zoomOnPixels=function(a){if(!isFinite(a))throw Error("Finite number expected.");if(!a)return!1;a=this._valueOffset(a);return this.zoomOnValue(a)};c.prototype.zoomOnValue=function(a){if(!a)return!1;var b=this.minVisibleValue,d=this.maxVisibleValue,f=b-a;a=d+a;var h=this.range;if(!this._canSetVisibleValueRange(f,a))if(this._canSetVisibleValueRange(b,a))f=b;else if(this._canSetVisibleValueRange(f,d))a=d;else if(!h)return!1;h&&(null!=h.min&&f>h.min&&(f=
h.min),null!=h.max&&a<h.max&&(a=h.max));return(f!==b||a!==d)&&.1<=a-f?(this._setMinVisibleValue(f),this._setMaxVisibleValue(a),!0):!1};c.prototype._zoomOrScrollWithUpdate=function(a,b){var d=this.chartValueScale.useManualWidth,f=d||this.preferredWidth();a=b.call(this,a);d=d||this.preferredWidth();a&&(f===d?this._panel.setNeedsUpdate():this.chart.setNeedsUpdate());return a};c.prototype.saveState=function(){return{options:e.JsUtil.clone(this._options),formatter:this.formatter.saveState(),calibrator:this.calibrator.saveState()}};
c.prototype.loadState=function(a){a=a||{};var b=a.options||{};this._options={};this._options.minVisibleValue=null!=b.minVisibleValue?b.minVisibleValue:NaN;this._options.maxVisibleValue=null!=b.maxVisibleValue?b.maxVisibleValue:NaN;this.minAllowedValue=null!=b.minAllowedValue?b.minAllowedValue:NaN;this.maxAllowedValue=null!=b.maxAllowedValue?b.maxAllowedValue:NaN;this.minAllowedValueRatio=b.minAllowedValue||.8;this.maxAllowedValueRatio=b.maxAllowedValueRatio||.8;this.minValueRangeRatio=b.minValueRangeRatio||
.1;this.maxValueRangeRatio=b.maxValueRangeRatio||5;this.majorTickMarkLength=b.majorTickMarkLength||3;this.minorTickMarkLength=b.minorTickMarkLength||3;this._options.padding=b.padding||{left:6,top:3,right:3,bottom:3};this.range=b.range||{};a.formatter?this.formatter=e.NumberFormat.deserialize(a.formatter):(this.formatter=new e.IntlNumberFormat,this.formatter.setDecimalDigits(3));this.calibrator=a.calibrator?e.ValueScaleCalibrator.deserialize(a.calibrator):new e.IntervalValueScaleCalibrator};c.prototype.layout=
function(a){this.needsAutoScale()?this.autoScale():.1>this.maxVisibleValue-this.minVisibleValue&&this.autoScale();a=this._projectionFrame;a.left=0;a.top=0;a.width=this._panel.layer.size.width;a.height=this._panel.layer.size.height;a.applyPadding(this._panel.chartPanelsContainer.panelPadding);this._calibrator.calibrate(this);this._layoutContentFrames()};c.prototype._layoutContentFrames=function(){var a=this._panel,b=this.chartValueScale,d=b.rightPanelVisible,f=this._options.padding;if(b.leftPanelVisible){var h=
b.leftPanel,l=parseFloat(h.container.css("border-left-width")),m=parseFloat(a.container.css("border-left-width")),q=h.contentSize.width,p=Math.round(Math.max(l-m,0));h=this._leftFrame;h||(h=this._leftFrame=new e.Rect);h.left=p;h.top=0;h.width=q-Math.max(m-l);h.height=a.container.height();l=this._leftContentFrame;l||(l=this._leftContentFrame=new e.Rect);l.left=h.left+f.right;l.top=h.top;l.width=h.width-f.left-f.right;l.height=h.height}else this._leftFrame=this._leftContentFrame=null;d?(d=b.rightPanel,
l=parseFloat(d.container.css("border-left-width")),b=d.contentSize.width,l=d.frame.left+l,d=this._rightFrame,d||(d=this._rightFrame=new e.Rect),d.left=l,d.top=0,d.width=b,d.height=a.container.height(),a=this._rightContentFrame,a||(a=this._rightContentFrame=new e.Rect),a.left=d.left+f.left,a.top=d.top,a.width=d.width-f.left-f.right,a.height=d.height):this._rightFrame=this._rightContentFrame=null};c.prototype.clip=function(){var a=this._leftFrame,b=this._rightFrame;if(!a&&!b)return!1;var d=this._panel.layer.context;
a&&d.rect(a.left,a.top,a.width,a.height);b&&d.rect(b.left,b.top,b.width,b.height);d.clip();return!0};c.prototype.draw=function(){var a=this._panel.layer.context;a.save();if(this.clip()){var b=this.actualTheme,d=this._leftContentFrame,f=this._rightContentFrame,h=this._leftFrame,l=this._rightFrame,m=h&&h.right-1,q=this.majorTickMarkLength,p=this.minorTickMarkLength;a.scxApplyTextTheme(b.text);a.textBaseline="middle";a.beginPath();for(var r=0,v=this.calibrator.majorTicks;r<v.length;r++){var u=v[r];d&&
(a.moveTo(m,u.y),a.lineTo(m-q,u.y),a.textAlign="right",a.fillText(u.text,d.right,u.y));f&&(a.moveTo(l.left,u.y),a.lineTo(l.left+q,u.y),a.textAlign="left",a.fillText(u.text,f.left,u.y))}d=0;for(f=this.calibrator.minorTicks;d<f.length;d++)u=f[d],h&&(a.moveTo(m,u.y),a.lineTo(m-p,u.y)),l&&(a.moveTo(l.left,u.y),a.lineTo(l.left+p,u.y));a.scxApplyStrokeTheme(b.line);a.stroke()}a.restore()};c.prototype._handleDoubleClickGesture=function(){var a=this.chartValueScale.useManualWidth,b=a||this.preferredWidth();
this.autoScale();a=a||this.preferredWidth();b===a?this._panel.setNeedsUpdate():this.chart.setNeedsUpdate()};c.prototype._handlePanGesture=function(a,b){var d=this.chart;b=1===b.evt.which;if(!b||d.scrollEnabled)if(b||d.zoomEnabled)switch(a.state){case e.GestureState.STARTED:d.rootDiv.addClass("scxValueScaleScroll");break;case e.GestureState.FINISHED:d.rootDiv.removeClass("scxValueScaleScroll");break;case e.GestureState.CONTINUED:this._zoomOrScrollWithUpdate(a.moveOffset.y,b?this.scrollOnPixels:this.zoomOnPixels)}};
c.prototype._handleMouseWheelGesture=function(a){this.chart.zoomEnabled&&this._zoomOrScrollWithUpdate(.05*a.delta*this._panel.frame.height,this.zoomOnPixels)};c.prototype._valueOffset=function(a){return(this.maxVisibleValue-this.minVisibleValue)/this._panel.contentFrame.height*a};c.prototype._canSetVisibleValueRange=function(a,b){var d=b-a;if(.1>d)return!1;var f=this.minAllowedValue;if(!isNaN(f)&&a<f)return!1;f=this.maxAllowedValue;if(!isNaN(f)&&b>f)return!1;f=this._panel.autoScaledMinMaxValues(this.chartValueScale);
var h=this.minAllowedValueRatio,l=this.maxAllowedValueRatio;if(!isNaN(h)&&(a=(f.min-a)/d,a>h)||!isNaN(l)&&(a=(b-f.max)/d,a>l))return!1;b=this.minValueRangeRatio;a=(f.max-f.min)/d;if(!isNaN(b)&&a<b)return!1;b=this.maxValueRangeRatio;return!isNaN(b)&&a>b?!1:!0};c.prototype.destroy=function(){};return c}(e.Control);e.ChartPanelValueScale=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){var a=null!==g&&g.apply(this,arguments)||this;a._index=null;a._isMoving=!1;a._needsTheme=!0;return a}__extends(c,g);Object.defineProperty(c.prototype,"topPanel",{get:function(){return this._topPanel},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"bottomPanel",{get:function(){return this._bottomPanel},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"chart",{get:function(){return this._topPanel&&this._topPanel.chart},
enumerable:!0,configurable:!0});c.getHeight=function(){return 1};c.prototype._initGestures=function(){return new e.GestureArray([new e.MouseHoverGesture({handler:this._handleMouseHoverGesture,hoverEventEnabled:!1}),new e.PanGesture({handler:this._handlePanGesture,horizontalMoveEnabled:!1}),new e.ClickGesture({handler:function(){}})],this,this.hitTest)};c.prototype._handlePanGesture=function(a){var b=this.chart;if(b.state!==e.ChartState.ZOOM_IN)switch(a.state){case e.GestureState.STARTED:this._prevChartState=
b.state;this._isMoving=!0;b.state=e.ChartState.RESIZING_PANELS;this._startMove();break;case e.GestureState.CONTINUED:this.move(a.moveOffset.y)&&b.updateSplitter(this);break;case e.GestureState.FINISHED:this._isMoving=!1,b.state=this._prevChartState}};c.prototype._handleMouseHoverGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:this._startMove();break;case e.GestureState.FINISHED:this._stopMove(),this.chart.crossHair.setPosition(b.pointerPosition)}};c.prototype._startMove=function(){this.chart.rootDiv.addClass("scxSplitterMove");
this.container.addClass("scxHover");this._applyTheme(!0);this.chart.crossHair.hide()};c.prototype._stopMove=function(){this.chart.rootDiv.removeClass("scxSplitterMove");this.container.removeClass("scxHover");this._applyTheme(!1);this.chart.crossHair.show()};c.prototype.setPanels=function(a,b,d){this._index=a;this._topPanel=b;this._bottomPanel=d};c.prototype.invalidateTheme=function(){this._needsTheme=!0};c.prototype._applyTheme=function(a){var b=this.chart.theme.splitter;this.container.css("background-color",
a?b.hoverFillColor:b.fillColor);this._needsTheme=!1};c.prototype.move=function(a){if(0===a)return!1;var b=this._topPanel,d=this._bottomPanel;a=b.frame.height+a;var f=b.chart.chartPanelsContainer.totalPanelsHeight();a/=f;f=d.heightRatio+(b.heightRatio-a);if(a<b.minHeightRatio||a>b.maxHeightRatio||f<d.minHeightRatio||f>d.maxHeightRatio)return!1;b.heightRatio=a;d.heightRatio=f;return!0};c.prototype.hitTest=function(a){return this._isMoving?!0:g.prototype.hitTest.call(this,a)};c.prototype._createContainer=
function(){return this.chart.chartPanelsContainer.container.scxAppend("div","scxPanelSplitter")};c.prototype.layout=function(a){g.prototype.layout.call(this,a);this.frame.top+=this._topPanel.chartPanelsContainer.frame.top;this._needsTheme&&this._applyTheme(!1)};return c}(e.HtmlControl);e.ChartPanelSplitter=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);c.prototype._createContainer=function(){return this.chartPanel.container.scxAppend("div","scxWatermark")};return c}(e.ChartPanelHtmlComponent);e.ChartPanelWatermark=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);c.prototype.actualTheme=function(){return this.theme||this.chart.theme.chart.instrumentWatermark};c.prototype._subscribe=function(){var a=this;this.chart.on(e.ChartEvent.INSTRUMENT_CHANGED+".scxInstrumentWatermark",function(){a.applyText()},this).on(e.ChartEvent.SHOW_INSTRUMENT_WATERMARK_CHANGED+".scxInstrumentWatermark",function(){a.update()},this)};c.prototype._unsubscribe=function(){var a=
this.chart;a&&a.off(".scxInstrumentWatermark",this)};c.prototype._createContainer=function(){var a=g.prototype._createContainer.call(this),b=a.scxAppend("div","scxWatermarkContent");b.scxAppend("div","scxWatermarkSymbol");b.scxAppend("div","scxWatermarkInfo");return a};c.prototype.update=function(){var a=this.chart.showInstrumentWatermark;e.HtmlUtil.setVisibility(this.container,a);a&&(this.applyText(),g.prototype.update.call(this))};c.prototype.applyText=function(){var a=this.container;if(a){var b=
this.chart.instrument;if(b){a.find(".scxWatermarkSymbol").text(b.symbol);var d=b.company;b.exchange&&(d+=" - "+b.exchange);a.find(".scxWatermarkInfo").text(d)}}};c.prototype.applyTheme=function(){var a=this.container;if(a){var b=this.chart.theme.chart.instrumentWatermark;a.find(".scxWatermarkSymbol").scxTextStyle(b.symbol);a.find(".scxWatermarkInfo").scxTextStyle(b.details)}};return c}(e.ChartPanelWatermark);e.InstrumentWatermark=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this,a)||this;a&&(b.text=a.text,b.theme=a.theme);return b}__extends(c,g);Object.defineProperty(c.prototype,"actualTheme",{get:function(){return this.theme||this.chartPanel.actualTheme.watermark},enumerable:!0,configurable:!0});c.prototype.update=function(){this.applyText();g.prototype.update.call(this)};c.prototype.applyText=function(){var a=this.container;a&&a.text(this.text)};c.prototype.applyTheme=function(){var a=this.container;a&&a.scxTextStyle(this.actualTheme.text)};
return c}(e.ChartPanelWatermark);e.TextWatermark=k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.PlotType={INDICATOR:"indicator",PRICE_STYLE:"priceStyle",USER:"user"};Object.freeze(e.PlotType);var k;(function(c){c.DATA_SERIES_CHANGED="plotDataSeriesChanged";c.PANEL_CHANGED="plotPanelChanged";c.THEME_CHANGED="plotThemeChanged";c.STYLE_CHANGED="plotStyleChanged";c.SHOW_VALUE_MARKERS_CHANGED="plotShowValueMarkersChanged";c.SHOW_VALUE_LINES_CHANGED="plotShowValueLinesChanged";c.EXTEND_VALUE_LINES_CHANGED="plotExtendValueLinesChanged";c.VISIBLE_CHANGED="plotVisibleChanged";c.VALUE_SCALE_CHANGED=
"plotValueScaleChanged";c.BASE_VALUE_CHANGED="plotBaseValueChanged"})(k=e.PlotEvent||(e.PlotEvent={}));var g=function(c){function a(b){var d=c.call(this,b)||this;d._plotThemeKey="";d._dataSeries=[];d._plotType=e.PlotType.USER;var f=d.suppressEvents(!0);b&&(null!=b.dataSeries&&d.setDataSeries(b.dataSeries),null!=b.chartPanel&&(d.chartPanel=b.chartPanel),null!=b.theme&&(d.theme=b.theme),b.plotType&&(d._plotType=b.plotType),b.options&&(d._options=b.options),b.valueScale&&(d.valueScale=b.valueScale),
d.plotStyle=b.plotStyle,b.zIndex&&(d.zIndex=b.zIndex));b=d._options;null==b.showValueMarkers&&(b.showValueMarkers=!0);null==b.visible&&(b.visible=!0);null==d.zIndex&&(d.zIndex=d.plotType===e.PlotType.PRICE_STYLE?0:100);d.suppressEvents(f);return d}__extends(a,c);Object.defineProperty(a.prototype,"dataSeries",{get:function(){return this._dataSeries},set:function(b){this.setDataSeries(b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"theme",{get:function(){return this._theme},set:function(b){var d=
this._theme;this._theme=b;this.fire(k.THEME_CHANGED,b,d)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"actualTheme",{get:function(){return this._theme?this._theme:this.chart.theme.plot[this._plotThemeKey][this.plotStyle]},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"plotStyle",{get:function(){var b=this._options.plotStyle;return b?b:(b=this.constructor.defaults)&&b.plotStyle},set:function(b){this._setOption("plotStyle",b,k.STYLE_CHANGED)},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"showValueMarkers",{get:function(){return this._options.showValueMarkers},set:function(b){this._setOption("showValueMarkers",b,k.SHOW_VALUE_MARKERS_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"showValueLines",{get:function(){return this._options.showValueLines},set:function(b){this._setOption("showValueLines",b,k.SHOW_VALUE_LINES_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"extendValueLines",
{get:function(){return this._options.extendValueLines},set:function(b){this._setOption("extendValueLines",b,k.EXTEND_VALUE_LINES_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"plotType",{get:function(){return this._plotType},enumerable:!0,configurable:!0});a.prototype.setDataSeries=function(b){if(b instanceof e.DataSeries)b=[b];else if(!Array.isArray(b))throw new TypeError("Single data series or an array of data series expected.");var d=this._dataSeries;d!==b&&(this._dataSeries=
b,this.fire(k.DATA_SERIES_CHANGED,b,d))};a.prototype._onChartPanelChanged=function(b){this.fire(k.PANEL_CHANGED,this.chartPanel,b)};a.prototype._onValueScaleChanged=function(b){this.fire(k.VALUE_SCALE_CHANGED,this.valueScale,b)};a.prototype._onVisibleChanged=function(b){this.fire(k.VISIBLE_CHANGED,this.visible,b)};a.prototype.findDataSeries=function(b){for(var d=0,f=this._dataSeries;d<f.length;d++){var h=f[d];if(h.nameSuffix===b)return h}return null};a.prototype.minMaxValues=function(b,d){for(var f=
Infinity,h=-Infinity,l=0,m=this._dataSeries;l<m.length;l++){var q=m[l];q.isValueDataSeries&&(q=q.minMaxValues(b,d),q.min<f&&(f=q.min),q.max>h&&(h=q.max))}return{min:f,max:h}};a.prototype._valueDrawParams=function(){var b=this.chart,d=this._dataSeries[0],f=this.findDataSeries(e.DataSeriesSuffix.DATE),h=this.projection;if(f){b=b.dateScale.visibleDateRange;var l=f.floorIndex(b.min);b=f.ceilIndex(b.max)}else l=b.firstVisibleIndex,b=b.lastVisibleIndex;l=Math.max(d.leftNearestVisibleValueIndex(l)-1,0);
b=Math.min(d.rightNearestVisibleValueIndex(b)+1,d.length-1);var m=f?0:h.columnByRecord(l);return{context:this.context,projection:h,dates:f&&f.values,values:d.values,startIndex:l,endIndex:b,startColumn:m,theme:this.actualTheme}};a.prototype._barDrawParams=function(){var b=this.chart,d=this._dataSeries,f=this.projection,h=null,l=null,m=null,q=null,p=null,r;for(r=0;r<d.length;r++){var v=d[r];switch(v.nameSuffix){case e.DataSeriesSuffix.DATE:h=v;break;case e.DataSeriesSuffix.OPEN:l=v;break;case e.DataSeriesSuffix.HIGH:m=
v;break;case e.DataSeriesSuffix.LOW:q=v;break;case e.DataSeriesSuffix.CLOSE:p=v}}h?(b=b.dateScale.visibleDateRange,r=h.floorIndex(b.min),v=h.ceilIndex(b.max)):(r=b.firstVisibleIndex,v=b.lastVisibleIndex);b=Math.max(d[0].leftNearestVisibleValueIndex(r)-1,0);d=Math.min(d[0].rightNearestVisibleValueIndex(v)+1,d[0].length-1);r=h?0:f.columnByRecord(b);return{context:this.context,projection:f,values:this._dataSeries[0].values,dates:h&&h.values,open:l&&l.values,high:m&&m.values,low:q&&q.values,close:p&&
p.values,startIndex:b,endIndex:d,startColumn:r,theme:this.actualTheme,signal:this.signalSeries&&this.signalSeries.values}};a.prototype.drawValueMarkers=function(){if(this.showValueMarkers){var b=this.chart.valueMarker,d=this._dataSeries[0].lastValue,f=b.theme,h=this.actualTheme;if(h.valueMarker)f=h.valueMarker;else{var l=h.strokeColor&&!1!==h.strokeEnabled?h.strokeColor:h.fill&&!1!==h.fill.fillEnabled?h.fill.fillColor:h.line&&!1!==h.line.strokeEnabled?h.line.strokeColor:f.fill.fillColor;f.fill.fillColor=
l;f.text.fillColor=e.HtmlUtil.isDarkColor(l)?"white":"black"}b.draw(d,this.panelValueScale,f);this.showValueLines&&null!=d&&(b=h.valueLine,d=new e.ValueLine({point:{record:this._dataSeries[0].length-1+.5,value:d},theme:{strokeColor:b&&h.valueLine.strokeColor||f.fill.fillColor,width:b&&h.valueLine.width||1,lineStyle:b&&b.lineStyle||e.LineStyle.DASH},extended:this.extendValueLines,visible:this.showValueLines}),d.chartPanel=this.chartPanel,d.valueScale=this.valueScale,d.draw())}};return a}(e.ChartPanelObject);
e.Plot=g})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k;(function(a){a.COLUMN_WIDTH_RATIO_CHANGED="plotColumnWidthRatioChanged";a.MIN_WIDTH_CHANGED="plotMinWidthChanged"})(k=e.PlotEvent||(e.PlotEvent={}));var g={OHLC:"OHLC",COLORED_OHLC:"coloredOHLC",HLC:"HLC",COLORED_HLC:"coloredHLC",HL:"HL",COLORED_HL:"coloredHL",CANDLE:"candle",HOLLOW_CANDLE:"hollowCandle",HEIKIN_ASHI:"heikinAshi",RENKO:"renko",LINE_BREAK:"lineBreak",POINT_AND_FIGURE:"pointAndFigure",KAGI:"kagi"};Object.freeze(g);var c=function(a){function b(d){d=a.call(this,d)||
this;d._plotThemeKey="bar";return d}__extends(b,a);Object.defineProperty(b.prototype,"columnWidthRatio",{get:function(){return this._options.columnWidthRatio||b.defaults.columnWidthRatio},set:function(d){if(e.JsUtil.isNegativeNumber(d)||1<d)throw Error("Ratio must be in range [0..1]");this._setOption("columnWidthRatio",d,k.COLUMN_WIDTH_RATIO_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"minWidth",{get:function(){return this._options.minWidth||b.defaults.minWidth},set:function(d){if(!e.JsUtil.isPositiveNumber(d))throw Error("Min width must be greater than 0.");
this._setOption("minWidth",d,k.MIN_WIDTH_CHANGED)},enumerable:!0,configurable:!0});b.prototype.draw=function(){if(this.visible)switch(this.plotStyle){case g.OHLC:case g.HLC:case g.HL:this._drawBars();break;case g.COLORED_OHLC:case g.COLORED_HLC:case g.COLORED_HL:this._drawColoredBars();break;case g.HOLLOW_CANDLE:this._drawHollowCandles();break;case g.RENKO:case g.LINE_BREAK:this._drawBricks();break;case g.KAGI:this._drawKagi();break;default:this._drawCandles()}};b.prototype.drawValueMarkers=function(){if(this.showValueMarkers){var d=
this._barDrawParams();if(0!==d.values.length){var f=this.chart.valueMarker,h=this._valueMarkerTheme(d),l=d.values.length-1,m=d.close[l];f.draw(m,this.panelValueScale,h);this.showValueLines&&null!=m&&(d=d.theme.valueLine,h=new e.ValueLine({point:{record:l+.5,value:m},theme:{strokeColor:d&&d.strokeColor||h.fill.fillColor,width:d&&d.width||1,lineStyle:d&&d.lineStyle||e.LineStyle.DASH},extended:this.extendValueLines,visible:this.showValueLines}),h.chartPanel=this.chartPanel,h.valueScale=this.valueScale,
h.draw())}}};b.prototype._valueMarkerTheme=function(d){var f=d.theme,h=f.valueMarker;if(h)return h;h=d.values.length-1;if(h=d.close[h]>=d.open[h]?f.upCandle&&f.upCandle.valueMarker:f.downCandle&&f.downCandle.valueMarker)return h;d=this._getMarkerFillColor(d);h=this.chart.valueMarker.theme;h.fill.fillColor=d;h.text.fillColor=e.HtmlUtil.isDarkColor(d)?"white":"black";return h};b.prototype._getMarkerFillColor=function(d){var f=d.values.length-1;f=d.close[f]>=d.open[f];switch(this.plotStyle){case g.OHLC:case g.HLC:case g.HL:return d.theme.strokeColor;
case g.COLORED_OHLC:case g.COLORED_HLC:case g.COLORED_HL:return d.theme[f?"upBar":"downBar"].strokeColor;case g.CANDLE:case g.HOLLOW_CANDLE:case g.HEIKIN_ASHI:case g.RENKO:return d.theme[f?"upCandle":"downCandle"].fill.fillColor;case g.LINE_BREAK:return f?d.theme.upCandle.border.strokeColor:d.theme.downCandle.fill.fillColor;case g.POINT_AND_FIGURE:case g.KAGI:return d.theme[f?"upCandle":"downCandle"].border.strokeColor;default:return null}};b.prototype._drawBars=function(){var d=this._barDrawParams();
if(0!==d.values.length){var f=d.context,h=d.projection,l=d.dates,m=0,q=this.plotStyle,p=q===b.Style.OHLC;q=q===b.Style.HLC;if(p||q)m=Math.round(Math.max(this.chart.dateScale.columnWidth*this.columnWidthRatio,this.minWidth)/2);f.beginPath();for(var r=d.startIndex,v=d.startColumn;r<=d.endIndex;r++,v++){var u=d.open[r],t=d.high[r],w=d.low[r],x=d.close[r];if(null!=u&&null!=t&&null!=w&&null!=x){var y=l?h.xByDate(l[r]):h.xByColumn(v);t=h.yByValue(t);w=h.yByValue(w);p&&(u=h.yByValue(u),f.moveTo(y,u),f.lineTo(y-
m,u));if(p||q)x=h.yByValue(x),f.moveTo(y,x),f.lineTo(y+m,x);t===w&&w--;f.moveTo(y,t);f.lineTo(y,w)}}f.scxApplyStrokeTheme(d.theme);f.stroke()}};b.prototype._drawColoredBars=function(){var d=this._barDrawParams();0!==d.values.length&&(this._drawColoredBarItems(d,!0,d.theme.upBar),this._drawColoredBarItems(d,!1,d.theme.downBar))};b.prototype._drawColoredBarItems=function(d,f,h){var l=d.context,m=d.projection,q=this.plotStyle,p=q===b.Style.COLORED_OHLC;q=q===b.Style.COLORED_HLC;var r=0;if(p||q)r=Math.round(Math.max(this.chart.dateScale.columnWidth*
this.columnWidthRatio,this.minWidth)/2);l.beginPath();for(var v=d.startIndex,u=d.startColumn;v<=d.endIndex;v++,u++){var t=d.open[v],w=d.high[v],x=d.low[v],y=d.close[v];if(null!=t&&null!=w&&null!=x&&null!=y&&f===y>=t){var z=d.dates?m.xByDate(d.dates[v]):m.xByColumn(u);w=m.yByValue(w);x=m.yByValue(x);p&&(t=m.yByValue(t),l.moveTo(z,t),l.lineTo(z-r,t));if(p||q)y=m.yByValue(y),l.moveTo(z,y),l.lineTo(z+r,y);w===x&&x--;l.moveTo(z,w);l.lineTo(z,x)}}l.scxApplyStrokeTheme(h);l.stroke()};b.prototype._drawCandles=
function(){var d=this._barDrawParams();if(0!==d.values.length){var f=d.context,h=d.theme.upCandle,l=d.theme.downCandle;this._drawCandleItems(d,!0,!0);f.scxFillStroke(h.fill,h.border);this._drawCandleItems(d,!1,!0);f.scxFillStroke(l.fill,l.border);this._drawCandleItems(d,!0,!1);f.scxStroke(h.wick);this._drawCandleItems(d,!1,!1);f.scxStroke(l.wick)}};b.prototype._drawCandleItems=function(d,f,h){var l=d.context,m=d.projection,q=Math.max(this.chart.dateScale.columnWidth*this.columnWidthRatio,this.minWidth),
p=Math.round(q/2);q=2*p;l.beginPath();for(var r=d.startIndex,v=d.startColumn;r<=d.endIndex;r++,v++){var u=d.open[r],t=d.high[r],w=d.low[r],x=d.close[r];if(null!=u&&null!=t&&null!=w&&null!=x&&f===x>=u){var y=d.dates?m.xByDate(d.dates[r]):m.xByColumn(v);u=m.yByValue(u);x=m.yByValue(x);h?l.rect(y-p,Math.min(u,x),q,Math.max(Math.abs(u-x),1)):(t=m.yByValue(t),w=m.yByValue(w),l.moveTo(y,Math.min(u,x)),l.lineTo(y,t),l.moveTo(y,Math.max(u,x)),l.lineTo(y,w))}}};b.prototype._drawHollowCandles=function(){var d=
this._barDrawParams();if(0!==d.values.length){var f=d.context,h=d.theme.upCandle,l=d.theme.downCandle,m=d.theme.upHollowCandle,q=d.theme.downHollowCandle;this._drawHollowCandleItems(d,!0,!0,!1);f.scxStroke(m.border);this._drawHollowCandleItems(d,!0,!0,!0);f.scxStroke(m.wick);this._drawHollowCandleItems(d,!0,!1,!1);f.scxFillStroke(h.fill,h.border);this._drawHollowCandleItems(d,!0,!1,!0);f.scxStroke(h.wick);this._drawHollowCandleItems(d,!1,!0,!1);f.scxStroke(q.border);this._drawHollowCandleItems(d,
!1,!0,!0);f.scxStroke(q.wick);this._drawHollowCandleItems(d,!1,!1,!1);f.scxFillStroke(l.fill,l.border);this._drawHollowCandleItems(d,!1,!1,!0);f.scxStroke(l.wick)}};b.prototype._drawHollowCandleItems=function(d,f,h,l){var m=d.context,q=d.projection,p=null,r=Math.max(this.chart.dateScale.columnWidth*this.columnWidthRatio,this.minWidth),v=Math.round(r/2);r=2*v;for(var u=d.startIndex-1;0<=u;u--)if(null==d.open[u]&&null==d.high[u]&&null==d.low[u]&&null==d.close[u]){p=d.close[u];break}m.beginPath();u=
d.startIndex;for(var t=d.startColumn;u<=d.endIndex;u++,t++){var w=d.open[u],x=d.high[u],y=d.low[u],z=d.close[u];if(null!=w&&null!=x&&null!=y&&null!=z){null==p&&(p=w);var A=z>=p,C=z>w;p=z;f===A&&h===C&&(A=d.dates?q.xByDate(d.dates[u]):q.xByColumn(t),w=q.yByValue(w),z=q.yByValue(z),l?(x=q.yByValue(x),y=q.yByValue(y),m.moveTo(A,Math.min(w,z)),m.lineTo(A,x),m.moveTo(A,Math.max(w,z)),m.lineTo(A,y)):m.rect(A-v,Math.min(w,z),r,Math.max(Math.abs(w-z),1)))}}};b.prototype._drawBricks=function(){var d=this._barDrawParams();
0!==d.values.length&&(this._drawBrickItems(d,!0),this._drawBrickItems(d,!1))};b.prototype._drawBrickItems=function(d,f){var h=d.context,l=d.projection,m=Math.max(this.chart.dateScale.columnWidth*this.columnWidthRatio,this.minWidth),q=Math.round(m/2);h.beginPath();for(var p=d.startIndex,r=d.startColumn;p<=d.endIndex;p++,r++){var v=d.open[p],u=d.close[p],t=u>=v;m=2*q;null==v||null==u||f&&!t||!f&&t||(t=d.dates?l.xByDate(d.dates[p]):l.xByColumn(r),v=l.yByValue(v),u=l.yByValue(u),h.rect(t-q-.5,Math.min(v,
u)-.5,m,Math.max(Math.abs(v-u),1)))}d=f?d.theme.upCandle:d.theme.downCandle;h.scxFillStroke(d.fill,d.border)};b.prototype._drawKagi=function(){var d=this._barDrawParams();0!==d.values.length&&(this._drawKagiItems(d,!0),this._drawKagiItems(d,!1))};b.prototype._drawKagiItems=function(d,f){var h=d.context,l=d.projection,m=null,q=null,p=!1,r=null;h.beginPath();for(var v=0;v<=d.endIndex;v++){var u=d.open[v],t=d.close[v],w=u,x=t,y=!0;null!=u&&null!=t&&(null===q?(q=t>=u,y=!1):q?t<r&&(p=!0,w=(y=f)?u:r,x=
f?r:t):t>r&&(p=!0,y=!f,w=f?r:u,x=f?t:r),r=d.dates?l.xByDate(d.dates[v]):l.xByRecord(v),v>=d.startIndex&&(q===f||p)&&(w=l.yByValue(w),x=l.yByValue(x),y?(h.moveTo(m,w),h.lineTo(r,w)):h.moveTo(r,w),h.lineTo(r,x)),m=r,r=q?p?Math.max(u,t):Math.min(u,t):p?Math.min(u,t):Math.max(u,t),p&&(q=!q,p=!1))}h.scxStroke(d.theme[f?"upCandle":"downCandle"].border)};b.Style=g;b.defaults={plotStyle:g.CANDLE,minWidth:3,columnWidthRatio:.8};return b}(e.Plot);e.BarPlot=c})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k={LINE:"line",COLORED_LINE:"coloredLine",COLUMN:"column",COLORED_COLUMN:"coloredColumn",TREND:"trend",COLUMN_UPDOWN:"columnUpDown"};Object.freeze(k);var g=function(c){function a(b){b=c.call(this,b)||this;b._plotThemeKey="histogram";return b}__extends(a,c);Object.defineProperty(a.prototype,"baseValue",{get:function(){var b=this._options.baseValue;return null!=b?b:a.defaults.baseValue},set:function(b){if(!e.JsUtil.isFiniteNumber(b))throw new TypeError("Value must be a finite number.");
this._setOption("baseValue",b,e.PlotEvent.BASE_VALUE_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"columnWidthRatio",{get:function(){return this._options.columnWidthRatio||a.defaults.columnWidthRatio},set:function(b){if(e.JsUtil.isNegativeNumber(b)||1<b)throw Error("Ratio must be in range (0..1]");this._setOption("columnWidthRatio",b,e.PlotEvent.COLUMN_WIDTH_RATIO_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"minColumnWidth",{get:function(){return this._options.minColumnWidth||
a.defaults.minWidth},set:function(b){if(!e.JsUtil.isPositiveNumber(b))throw Error("Min width must be a positive number.");this._setOption("minColumnWidth",b,e.PlotEvent.MIN_WIDTH_CHANGED)},enumerable:!0,configurable:!0});a.prototype.draw=function(){if(this.visible)switch(this.plotStyle){case k.COLORED_LINE:this._drawColoredLines();break;case k.COLUMN:this._drawColumns();break;case k.COLORED_COLUMN:this._drawColoredColumns();break;case k.TREND:this._drawTrends();break;case k.COLUMN_UPDOWN:this._drawColumnsUpDown();
break;default:this._drawLines()}};a.prototype._drawLines=function(){var b=this._valueDrawParams();if(0!==b.values.length){var d=b.context,f=b.projection,h=b.dates,l=f.yByValue(this.baseValue),m=null,q=-Infinity;d.beginPath();for(var p=b.startIndex,r=b.startColumn;p<=b.endIndex;p++,r++){var v=b.values[p];if(null!=v){var u=h?f.xByDate(h[p]):f.xByColumn(r)-.5;u===m?q=Math.max(q,v):(null!==m&&(d.moveTo(m,f.yByValue(q)),d.lineTo(m,l)),q=v,m=u)}}d.moveTo(m,f.yByValue(q));d.lineTo(m,l);d.scxApplyStrokeTheme(b.theme);
d.stroke()}};a.prototype._drawColoredLines=function(){var b=this._barDrawParams();if(0!==b.values.length){var d=b.context,f=b.projection,h=b.dates,l=f.yByValue(this.baseValue),m=function(q,p){var r=null,v=-Infinity;d.beginPath();for(var u=b.startIndex,t=b.startColumn;u<=b.endIndex;u++,t++){var w=b.values[u];if(null!=w&&!(q&&b.close[u]<b.open[u]||!q&&b.close[u]>=b.open[u])){var x=h?f.xByDate(h[u]):f.xByColumn(t);x===r?v=Math.max(v,w):(null!==r&&(d.moveTo(x,f.yByValue(w)),d.lineTo(x,l)),v=w,r=x)}}d.moveTo(r,
f.yByValue(v));d.lineTo(r,l);d.scxApplyStrokeTheme(p);d.stroke()};m(!0,b.theme.upBar);m(!1,b.theme.downBar)}};a.prototype._drawColumns=function(){var b=this._barDrawParams();if(0!==b.values.length){var d=b.context,f=b.projection,h=b.dates,l=f.yByValue(this.baseValue),m=Math.round(Math.max(this.chart.dateScale.columnWidth*this.columnWidthRatio,this.minColumnWidth)/2),q=2*m,p=null;var r=-Infinity;d.beginPath();for(var v=b.startIndex,u=b.startColumn;v<=b.endIndex;v++,u++){var t=b.values[v];if(null!=
t){var w=h?f.xByDate(h[v]):f.xByColumn(u);w===p?r=Math.max(r,t):(null!==p&&(r=f.yByValue(r),d.rect(p-m-.5,Math.min(r,l)-.5,q,Math.max(Math.abs(r-l),1))),r=t,p=w)}}r=f.yByValue(r);d.rect(p-m-.5,Math.min(r,l)-.5,q,Math.max(Math.abs(r-l),1));b=b.theme;d.scxFillStroke(b.fill,b.line)}};a.prototype._drawColumnsUpDown=function(){var b=this._barDrawParams();if(0!==b.values.length){var d=b.context,f=b.projection,h=b.dates,l=f.yByValue(this.baseValue),m,q=Math.round(Math.max(this.chart.dateScale.columnWidth*
this.columnWidthRatio,this.minColumnWidth)/2),p=2*q,r=function(v,u){var t=null,w=-Infinity;d.beginPath();for(var x=b.startIndex,y=b.startColumn;x<=b.endIndex;x++,y++){var z=b.values[x];if(null!=z&&!(v&&0>z||!v&&0<=z)){var A=h?f.xByDate(h[x]):f.xByColumn(y);A===t?w=Math.max(w,z):(null!==t&&(m=f.yByValue(w),d.rect(t-q-.5,Math.min(m,l)-.5,p,Math.max(Math.abs(m-l),1))),w=z,t=A)}}m=f.yByValue(w);d.rect(t-q-.5,Math.min(m,l)-.5,p,Math.max(Math.abs(m-l),1));d.scxFillStroke(u.fill,u.line)};r(!0,b.theme.upCandle);
r(!1,b.theme.downCandle)}};a.prototype._drawTrends=function(){var b=this._barDrawParams();if(0!==b.values.length){var d=b.context,f=b.projection,h=b.dates,l=f.yByValue(this.baseValue),m,q=Math.round(Math.max(this.chart.dateScale.columnWidth*this.columnWidthRatio,this.minColumnWidth)/2),p=2*q;b.projection.valueScale.minVisibleValue=0;b.projection.valueScale.maxVisibleValue=1;var r=function(v,u){var t=null,w=-Infinity;b.projection.valueScale.minVisibleValue=0;b.projection.valueScale.maxVisibleValue=
1;d.beginPath();for(var x=b.startIndex,y=b.startColumn;x<=b.endIndex;x++,y++){var z=b.values[x];if(null!=z&&!(v&&0>b.signal[x]||!v&&0<b.signal[x])){z=1;var A=h?f.xByDate(h[x]):f.xByColumn(y);A===t?w=Math.max(w,z):(null!==t&&(m=f.yByValue(w),d.rect(t-q-.5,Math.min(m,l)-.5,p,Math.max(Math.abs(m-l),1))),w=z,t=A)}}m=f.yByValue(w);d.rect(t-q-.5,Math.min(m,l)-.5,p,Math.max(Math.abs(m-l),1));d.scxFillStroke(u.fill,u.line)};r(!0,b.theme.upCandle);r(!1,b.theme.downCandle)}};a.prototype._drawColoredColumns=
function(){var b=this._barDrawParams();if(0!==b.values.length){var d=b.context,f=b.projection,h=b.dates,l=f.yByValue(this.baseValue),m,q=Math.round(Math.max(this.chart.dateScale.columnWidth*this.columnWidthRatio,this.minColumnWidth)/2),p=2*q,r=function(v,u){var t=null,w=-Infinity;d.beginPath();for(var x=b.startIndex,y=b.startColumn;x<=b.endIndex;x++,y++){var z=b.values[x];if(null!=z&&!(v&&b.close[x]<b.open[x]||!v&&b.close[x]>=b.open[x])){var A=h?f.xByDate(h[x]):f.xByColumn(y);A===t?w=Math.max(w,z):
(null!==t&&(m=f.yByValue(w),d.rect(t-q-.5,Math.min(m,l)-.5,p,Math.max(Math.abs(m-l),1))),w=z,t=A)}}m=f.yByValue(w);d.rect(t-q-.5,Math.min(m,l)-.5,p,Math.max(Math.abs(m-l),1));d.scxFillStroke(u.fill,u.line)};r(!0,b.theme.upCandle);r(!1,b.theme.downCandle)}};a.Style=k;a.defaults={plotStyle:k.LINE,baseValue:0,columnWidthRatio:.5,minWidth:3};return a}(e.Plot);e.HistogramPlot=g})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k={SIMPLE:"simple",MOUNTAIN:"mountain",STEP:"step"};Object.freeze(k);var g=function(c){function a(b){b=c.call(this,b)||this;b._plotThemeKey="line";return b}__extends(a,c);a.prototype.draw=function(){if(this.visible)switch(this.plotStyle){case k.MOUNTAIN:this._drawMountainLine();break;case k.STEP:this._drawStepLine();break;default:this._drawSimpleLine()}};a.prototype._drawSimpleLine=function(){var b=this._valueDrawParams();if(0!==b.values.length){var d=b.context,f=b.projection,h=b.dates,
l=null,m=null,q=Infinity,p=-Infinity,r=!0,v=null;d.beginPath();for(var u=b.startIndex,t=b.startColumn;u<=b.endIndex;u++,t++){var w=b.values[u];if(null!=w){var x=w!==w;if(!x||!r){var y=h?f.xByDate(h[u]):f.xByColumn(t);r?(d.moveTo(y,f.yByValue(w)),r=!1):(x&&(r=!0),r||y!==l?(Infinity!==q&&(x=f.yByValue(q),v=1.8<Math.abs(v-x),1E-5>Math.abs(p-q)?v&&d.lineTo(l,x):(q=f.yByValue(p),1.8>Math.abs(q-x)?v&&d.lineTo(l,x):(v&&d.moveTo(l,x),d.lineTo(l,q),1E-5<Math.abs(m-p)&&(m=f.yByValue(m),1.8<Math.abs(m-q)&&d.moveTo(l,
m))))),r?(q=Infinity,p=m=-Infinity,v=null):(v=f.yByValue(w),d.lineTo(y,v),q=p=m=w),l=y):(q=Math.min(q,w),p=Math.max(p,w),m=w))}}}Infinity!==q&&q!==p&&(d.moveTo(l,f.yByValue(q)),d.lineTo(l,f.yByValue(p)));d.scxApplyStrokeTheme(b.theme.line||b.theme);d.stroke()}};a.prototype._drawMountainLine=function(){var b=this._valueDrawParams();if(0!==b.values.length){var d=b.context,f=b.projection,h=null,l=null,m=Infinity,q=!0,p=this.chartPanel.layer.size.height;d.scxApplyFillTheme(b.theme.fill);for(var r=b.startIndex,
v=b.startColumn;r<=b.endIndex;r++,v++){var u=b.values[r];if(null!=u){var t=u!==u;if(!t||!q){var w=f.xByColumn(v);q?(d.beginPath(),d.moveTo(w,f.yByValue(u)),h=l=w,q=!1):(t&&(q=!0),q||w!==l?(Infinity!==m&&d.lineTo(l,f.yByValue(m)),q?(m=Infinity,d.lineTo(l,p),d.lineTo(h,p),d.closePath(),d.fill(),h=w):(d.lineTo(w,f.yByValue(u)),m=u),l=w):m=Math.min(m,u))}}}Infinity!==m&&d.lineTo(l,f.yByValue(m));d.lineTo(l,p);d.lineTo(h,p);d.closePath();d.fill();this._drawSimpleLine()}};a.prototype._drawStepLine=function(){var b=
this._valueDrawParams();if(0!==b.values.length){var d=b.context,f=b.projection,h=b.dates,l=null,m=null,q=null,p=Infinity,r=-Infinity,v=!0;d.beginPath();for(var u=b.startIndex,t=b.startColumn;u<=b.endIndex;u++,t++){var w=b.values[u];if(null!=w){var x=w!==w;if(!x||!v){var y=h?f.xByDate(h[u]):f.xByColumn(t);v?(l=y,m=f.yByValue(w),d.moveTo(y,m),p=r=w,v=!1):(x&&(v=!0),v||y!==l?(v?(p=Infinity,r=q=-Infinity):(d.lineTo(l,m),m=f.yByValue(p),1E-5>Math.abs(r-p)?d.lineTo(l,m):(p=f.yByValue(r),1.8>Math.abs(p-
m)?d.lineTo(l,m):(d.moveTo(l,m),d.lineTo(l,p),m=f.yByValue(q),d.moveTo(l,m))),p=r=q=w),l=y):(p=Math.min(p,w),r=Math.max(r,w),q=w))}}}null!=q&&-Infinity!==q&&(d.lineTo(y,m),d.lineTo(y,f.yByValue(q)));d.scxApplyStrokeTheme(b.theme.line||b.theme);d.stroke()}};a.Style=k;a.defaults={plotStyle:k.SIMPLE};return a}(e.Plot);e.LinePlot=g})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k;(k=e.PlotEvent||(e.PlotEvent={})).POINT_SIZE_CHANGED="plotPointSizeChanged";var g={DOT:"dot"};Object.freeze(g);var c=function(a){function b(d){d=a.call(this,d)||this;d._plotThemeKey="point";return d}__extends(b,a);Object.defineProperty(b.prototype,"pointSize",{get:function(){return this._options.pointSize||b.defaults.pointSize},set:function(d){if(e.JsUtil.isNegativeNumber(d))throw new TypeError("Value must be a positive number.");this._setOption("pointSize",d,k.POINT_SIZE_CHANGED)},
enumerable:!0,configurable:!0});b.prototype.draw=function(){if(this.visible){var d=this._valueDrawParams();if(0!==d.values.length){var f=d.context,h=d.projection,l=d.dates,m=this.pointSize,q=null,p=[],r=[],v=function(z){for(var A=0,C=r.length;A<C;A++)f.beginPath(),f.arc(z,r[A],m,0,2*Math.PI),f.fill()};f.scxApplyFillTheme(d.theme.fill?d.theme.fill:d.theme);for(var u=d.startIndex,t=d.startColumn;u<=d.endIndex;u++,t++){var w=d.values[u];if(null!=w){var x=l?h.xByDate(l[u]):h.xByColumn(t);if(x===q){if(!(0<=
p.indexOf(w))){var y=h.yByValue(w);0<=r.indexOf(y)||(p.push(w),r.push(y))}}else null!=q&&(v(q),r.length=p.length=0),q=x,p.push(w),r.push(h.yByValue(w))}}v(x)}}};b.Style=g;b.defaults={plotStyle:b.Style.DOT,pointSize:2};return b}(e.Plot);e.PointPlot=c})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){return g.call(this,a)||this}__extends(c,g);c.prototype.draw=function(){if(this.visible){var a=this._barDrawParams();if(0!==a.values.length){var b=this.context,d=this.projection;b.beginPath();var f=this.dataSeries[0].values[a.startIndex];var h=d.xByRecord(a.startIndex);f=d.yByValue(f);b.moveTo(h,f);for(var l=a.startIndex+1;l<=a.endIndex;l++)f=this.dataSeries[0].values[l],null!=f&&(h=d.xByRecord(l),f=d.yByValue(f),b.lineTo(h,f));f=this.dataSeries[1].values[a.endIndex+
1];null==f&&(f=this.dataSeries[1].values[this.getLastNotNullValueIndex(this.dataSeries[1])],a.endIndex=this.getLastNotNullValueIndex(this.dataSeries[0]));h=d.xByRecord(a.endIndex);f=d.yByValue(f);b.lineTo(h,f);for(l=a.endIndex;l>=a.startIndex;l--)f=this.dataSeries[1].values[l],null!=f&&(h=d.xByRecord(l),f=d.yByValue(f),b.lineTo(h,f));f=this.dataSeries[0].values[a.startIndex];null==f&&(f=this.dataSeries[0].values[this.getFirstNotNullValueIndex(this.dataSeries[0])],a.startIndex=this.getFirstNotNullValueIndex(this.dataSeries[0]));
h=d.xByRecord(a.startIndex);f=d.yByValue(f);b.lineTo(h,f);b.scxFill(a.theme)}}};c.prototype.getFirstNotNullValueIndex=function(a){for(var b=0,d=!0;d&&b<a.length;)null==a.values[b]?b++:d=!1;return b};c.prototype.getLastNotNullValueIndex=function(a){for(var b=a.length,d=!0;d&&0<b;)null==a.values[b]?b--:d=!1;return b};return c}(e.Plot);e.KumoPlot=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c.prototype,"boxSize",{get:function(){return this._boxSize},set:function(a){this._boxSize=a},enumerable:!0,configurable:!0});c.prototype.draw=function(){if(this.visible){var a=this._barDrawParams();0!==a.values.length&&(a.context.beginPath(),this._drawColumns(a,!0),a.context.scxStroke(a.theme.upCandle.border),this._drawColumns(a,!1))}};c.prototype._drawColumns=function(a,
b){for(var d=a.context,f=a.projection,h=this.boxSize,l=Math.round(Math.max(this.chart.dateScale.columnWidth*this.columnWidthRatio,this.minWidth)/2),m=b?null:a.theme.downCandle.border,q=a.startIndex,p=a.startColumn;q<=a.endIndex;q++,p++){var r=a.open[q],v=a.close[q];if(null!=r&&null!=v&&b===v>=r){r=a.dates?f.xByDate(a.dates[q]):f.xByColumn(p);v=a.low[q];for(var u=a.high[q];1E-6<u-v;){var t=f.yByValue(v),w=f.yByValue(v+h);if(b)d.moveTo(r-l,t),d.lineTo(r+l,w),d.moveTo(r-l,w),d.lineTo(r+l,t);else{var x=
l,y=(w-t)/2;d.beginPath();d.save();d.translate(r,(t+w)/2);x!==y&&d.scale(1,y/x);d.arc(0,0,x,0,2*Math.PI);d.restore();d.closePath();d.scxStroke(m)}v+=h}}}};return c}(e.BarPlot);e.PointAndFigurePlot=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k={BUY:"buy",SELL:"sell"};Object.freeze(k);var g=function(c){function a(b){b=c.call(this,b)||this;b._plotThemeKey="signal";b._offsetBar=20;b._lineWidth=30;b._boxSize=20;return b}__extends(a,c);a.prototype.draw=function(){this.visible&&this._drawSignal()};a.prototype._drawSignal=function(){var b=this._valueDrawParams();if(0!==b.values.length){var d=this._barDrawParams();if(0!==d.values.length){d.high=this.chart.getDataSeries(".high").values;d.low=this.chart.getDataSeries(".low").values;
var f=b.context;this._drawSignalLine(b,d);f.strokeStyle="#ffffff";f.stroke();this._drawSignalBox(b,d);f.strokeStyle="#ffffff";f.fillStyle=this.plotStyle==k.BUY?"#008040":"#DC23AE";f.fill();f.stroke();f.font="16px Arial";f.fillStyle="#ffffff";this._drawSignalText(b,d,this.plotStyle==k.BUY?"B":"S")}}};a.prototype._drawSignalLine=function(b,d){var f=b.context,h=b.projection,l=this._offsetBar,m=this._lineWidth;f.beginPath();for(var q=b.startIndex,p=b.startColumn;q<=b.endIndex;q++,p++){var r=b.values[q];
if(null!=r&&r!=TASdk.Signal.NO_SIGNAL){var v=d.dates?h.xByDate(d.dates[q]):h.xByColumn(p),u=r==TASdk.Signal.BUY?h.yByValue(d.low[q])+l:h.yByValue(d.high[q])-l;f.moveTo(v,u);r==TASdk.Signal.BUY?f.lineTo(v,u+m):f.lineTo(v,u-m)}}};a.prototype._drawSignalBox=function(b,d){var f=b.context,h=b.projection,l=this._offsetBar,m=this._lineWidth,q=this._boxSize;f.beginPath();for(var p=b.startIndex,r=b.startColumn;p<=b.endIndex;p++,r++){var v=b.values[p];if(null!=v&&v!=TASdk.Signal.NO_SIGNAL){var u=d.dates?h.xByDate(d.dates[p]):
h.xByColumn(r),t=v==TASdk.Signal.BUY?h.yByValue(d.low[p])+l:h.yByValue(d.high[p])-l;f.moveTo(u,t);v==TASdk.Signal.BUY?f.rect(u-q/2,t+m,q,q):f.rect(u-q/2,t-m-q,q,q)}}};a.prototype._drawSignalText=function(b,d,f){var h=b.context,l=b.projection,m=this._offsetBar,q=this._lineWidth,p=this._boxSize;h.beginPath();for(var r=b.startIndex,v=b.startColumn;r<=b.endIndex;r++,v++){var u=b.values[r];if(null!=u&&u!=TASdk.Signal.NO_SIGNAL){var t=d.dates?l.xByDate(d.dates[r]):l.xByColumn(v),w=u==TASdk.Signal.BUY?l.yByValue(d.low[r])+
m:l.yByValue(d.high[r])-m;h.moveTo(t,w);u==TASdk.Signal.BUY?h.fillText(f,t-p/4,w+q+15):h.fillText(f,t-p/4,w-q-p/4)}}};a.Style=k;a.defaults={plotStyle:k.BUY};return a}(e.Plot);e.SignalPlot=g})(StockChartX||(StockChartX={}));
(function(e){var k=jQuery;e.VolumeIndicator=1E3;e.ColoredVolumeIndicator=1001;e.IndicatorParam={SOURCE:"Source",SOURCE2:"Source 2",PERIODS:"Periods",STANDARD_DEVIATIONS:"Standard Deviations",MA_TYPE:"Moving Average Type",SHIFT:"Shift",MIN_TICK:"Min Tick Value",LIMIT_MOVE:"Limit Move Value",PCT_K_PERIODS:"%K Periods",PCT_K_SMOOTHING:"%K Smoothing",PCT_K_DOUBLE_SMOOTHING:"%K Double Smoothing",PCT_D_PERIODS:"%D Periods",PCT_D_MA_TYPE:"%D Moving Average Type",BAR_HISTORY:"Bar History",R2_SCALE:"R2 Scale",
CYCLE_1:"Cycle 1",CYCLE_2:"Cycle 2",CYCLE_3:"Cycle 3",SHORT_TERM:"Short Term",LONG_TERM:"Long Term",POINTS_OR_PERCENT:"Points or Percent",RATE_OF_CHANGE:"Rate of Change",SHORT_CYCLE:"Short Cycle",LONG_CYCLE:"Long Cycle",SIGNAL_PERIODS:"Signal Periods",MIN_AF:"Min AF",MAX_AF:"Max AF",LEVELS:"Levels",LINE_WIDTH:"Line Width",LINE_STYLE:"Line Style",LINE_COLOR:"Line Color",LINE2_WIDTH:"Line 2 Width",LINE2_STYLE:"Line 2 Style",LINE2_COLOR:"Line 2 Color",LINE3_WIDTH:"Line 3 Width",LINE3_STYLE:"Line 3 Style",
LINE3_COLOR:"Line 3 Color",BASE_TYPE:"Base",PCT_AREA:"%Area",STEP_PRICE:"Step Price",SHIFT_BASE:"Shift Base",MIN_TREND:"Min",MAX_TREND:"Max"};Object.freeze(e.IndicatorParam);var g=function(){function c(a){this._isOverlay=!1;this._plotItems=[];this._options={};this._usePrimaryDataSeries=!0;this._collapseIndicatorTitle=!1;if(!a||"object"!==typeof a)throw new TypeError("Config expected.");this._chart=a.chart;this._options={panelHeightRatio:a.panelHeightRatio,showParamsInTitle:!0,showValueMarkers:!0,
showValuesInTitle:!0,showNameInTitle:!0,allowSettingsDialog:!0,visible:!0,simulateIndicator:!1};this.allowSettingsDialog=void 0!==a.allowSettingsDialog?a.allowSettingsDialog:!0;this.showParamsInTitle=void 0!==a.showParamsInTitle?a.showParamsInTitle:!0;this.showValueMarkers=void 0!==a.showValueMarkers?a.showValueMarkers:!0;this.showValuesInTitle=void 0!==a.showValuesInTitle?a.showValuesInTitle:!0;this.showNameInTitle=void 0!==a.showNameInTitle?a.showNameInTitle:!0;this.visible=void 0!==a.visible?a.visible:
!0;this.coloredVolumeTheme=void 0!==a.coloredVolumeTheme?a.coloredVolumeTheme:null;this._options.valueScaleIndex=a.valueScaleIndex;this._options.simulateIndicator=void 0!==a.simulateIndicator?a.simulateIndicator:!1;this._enableSimulate=!1;this._chart&&(null!=a.panelIndex&&(this._panel=this._chart.chartPanelsContainer.panels[a.panelIndex]),a.valueScaleIndex&&(this.valueScale=this._chart.valueScales[a.valueScaleIndex]));this._initIndicator(a);if(a.parameters)for(var b in a.parameters)a.parameters.hasOwnProperty(b)&&
this.setParameterValue(b,a.parameters[b])}Object.defineProperty(c.prototype,"chart",{get:function(){return this._chart},set:function(a){if(a&&!(a instanceof e.Chart))throw new TypeError("Chart must be an instance of StockChartX.Chart.");this._removeControls();(this._chart=a)&&this._options.valueScaleIndex&&(this.valueScale=this._chart.valueScales[this._options.valueScaleIndex])},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"chartPanel",{get:function(){return this._panel},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"valueScale",{get:function(){return this._valueScale},set:function(a){if(a&&!(a instanceof e.ValueScale))throw new TypeError("Value scale must be an instance of StockChartX.ValueScale.");this._valueScale=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isOverlay",{get:function(){return this._isOverlay},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"panelHeightRatio",{get:function(){return this._options.panelHeightRatio},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"showValueMarkers",{get:function(){return this._options.showValueMarkers},set:function(a){a=!!a;this._options.showValueMarkers!==a&&(this._options.showValueMarkers=a,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"coloredVolumeTheme",{get:function(){return this._options.coloredVolumeTheme},set:function(a){this._options.coloredVolumeTheme=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"showValuesInTitle",{get:function(){return this._options.showValuesInTitle},set:function(a){a=!!a;this._options.showValuesInTitle!==a&&(this._options.showValuesInTitle=a,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"showNameInTitle",{get:function(){return this._options.showNameInTitle},set:function(a){a=!!a;this._options.showNameInTitle!==a&&(this._options.showNameInTitle=a,this.updateTitleControlsVisibility(),this._collapseIndicatorName(this._options.showNameInTitle))},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"showParamsInTitle",{get:function(){return this._options.showParamsInTitle},set:function(a){a=!!a;this._options.showParamsInTitle!==a&&(this._options.showParamsInTitle=a,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"allowSettingsDialog",{get:function(){return this._options.allowSettingsDialog},set:function(a){a=!!a;this._options.allowSettingsDialog!==a&&(this._options.allowSettingsDialog=
a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"parameters",{get:function(){return this._options.parameters},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fieldNames",{get:function(){return this._fieldNames},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"plots",{get:function(){for(var a=[],b=0,d=this._plotItems;b<d.length;b++)a.push(d[b].plot);return a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",{get:function(){return this._options.visible},
set:function(a){a=!!a;this._options.visible=a;for(var b=0,d=this._plotItems.length;b<d;b++){var f=this._plotItems[b].plot;f&&(f.visible=a)}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isInitialized",{get:function(){return 0<this._plotItems.length},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"simulateIndicator",{get:function(){return this._options.simulateIndicator},set:function(a){a=!!a;this._options.simulateIndicator!==a&&(this._options.simulateIndicator=
a,this._options.simulateIndicator?this.update():this._removeSignal(),this._chart.setNeedsUpdate(!0))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"enableSimulate",{get:function(){return this._enableSimulate},set:function(a){a=!!a;this._enableSimulate!==a&&(this._enableSimulate=a)},enumerable:!0,configurable:!0});c.prototype.hasParameter=function(a){return void 0!==this._options.parameters[a]};c.prototype.getParameterValue=function(a){return this._options.parameters[a]};c.prototype.setParameterValue=
function(a,b){this._options.parameters[a]=b};c.prototype.getName=function(){return""};c.prototype.getShortName=function(){return""};c.prototype.getPlotName=function(a){return""};c.prototype.getPlots=function(){return this._plotItems.map(function(a){return a.plot})};c.prototype.serialize=function(){var a=this._panel;a&&(this._options.panelHeightRatio=a.heightRatio);this.valueScale?this._options.valueScaleIndex=this.valueScale.index:delete this._options.valueScaleIndex;var b=k.extend(!0,{},this._options);
a&&(b.panelIndex=a.getIndex());return b};c.prototype.calculate=function(){};c.prototype._initPanel=function(){};c.prototype._updatePlotItem=function(a){return!1};c.prototype.clearDataSeries=function(a){};c.prototype.update=function(){var a=this.calculate(),b=this.getShortName(),d=a.parameters?"("+a.parameters+")":"",f=b+d;this._panel||(this._isOverlay?this._panel=this._chart.mainPanel:(this._panel=this._chart.addChartPanel(this._chart.chartPanels.length,this.panelHeightRatio,!0),this._initPanel(),
this._chart.layout(),this._panel.setNeedsAutoScale()));this._initPanelTitle();this._titleControls.name.text(b);this._titleControls.parameters.text(d);b=0;for(d=this._plotItems;b<d.length;b++){var h=d[b];h.plot&&"signal"==h.plot._plotThemeKey?this._chart.mainPanel.removePlot(h.plot):this._panel.removePlot(h.plot)}for(b=0;b<this._fieldNames.length;b++){d=this._plotItems[b];var l=h=void 0;if(!this._updatePlotItem(b)){h=this._fieldNames[b];l=this.getPlotName(h);var m=a.recordSet&&a.recordSet.getField(h);
m=m?e.DataSeries.fromField(m,a.startIndex):new e.DataSeries(h);d.dataSeries=m;m.name=1!==this._fieldNames.length&&l?f+"."+l:f;this._chart.dataManager.addDataSeries(m,!0);switch(h){case e.IndicatorField.INDICATOR_HISTOGRAM:var q=this._getHistogramTheme(b);d.plot=new e.HistogramPlot({plotStyle:e.HistogramPlot.Style.COLUMN,dataSeries:m,theme:q});d.color=q.fill.fillColor;this.taIndicator!==TASdk.BoomVolume&&this.taIndicator!==TASdk.MSTOI||this._updateColoredHistogramIndicator(d);break;default:this.taIndicator===
TASdk.TrendSignal?(q=a.recordSet.getField("Signal"),q=e.DataSeries.fromField(q,a.startIndex),q.name=".signal",this._updateColoredTrendIndicator(d,m,q)):(q=this._getLineTheme(b),d.plot=new e.LinePlot({dataSeries:m,theme:q}))}}d.plot._plotType=e.PlotType.INDICATOR;d.plot.showValueMarkers=this.showValueMarkers;d.plot.visible=this.visible;d.plot.valueScale=this._valueScale;this._panel.addPlot(d.plot);d.titlePlotSpan.css("color",d.color).text(l?l+":":"");d.titleValueSpan.css("color",d.color).attr("title",
h!==e.IndicatorField.INDICATOR?h:this.getName())}if(this._enableSimulate&&this._options.simulateIndicator&&null!=a.recordSet)for(this._plotItems.length==this._fieldNames.length&&(this._plotItems.push({titlePlotSpan:this._titleControls.rootDiv.scxAppend("span","scxPanelTitleValue"),titleValueSpan:this._titleControls.rootDiv.scxAppend("span","scxPanelTitleValue")}),this._plotItems.push({titlePlotSpan:this._titleControls.rootDiv.scxAppend("span","scxPanelTitleValue"),titleValueSpan:this._titleControls.rootDiv.scxAppend("span",
"scxPanelTitleValue")})),b=this._fieldNames.length;b<this._fieldNames.length+2;b++)d=this._plotItems[b],h=this._fieldNames.length==b?"BUY_SIGNAL":"SELL_SIGNAL",m=(m=a.simulate&&a.simulate.getField(h))?e.DataSeries.fromField(m,a.startIndex):new e.DataSeries(h),d.dataSeries=m,l=this.getPlotName(h),d.plot=new e.SignalPlot({dataSeries:m,theme:this._getLineTheme(0)}),d.plot._plotType=e.PlotType.INDICATOR,d.plot.showValueMarkers=!1,d.plot.visible=this.visible,d.plot.valueScale=this._valueScale,d.plot.plotStyle=
this._fieldNames.length==b?e.SignalPlot.Style.BUY:e.SignalPlot.Style.SELL,this._chart.mainPanel.addPlot(d.plot),d.titlePlotSpan.css("color",d.color).text(l?l+":":""),d.titleValueSpan.css("color",d.color).attr("title",h!==e.IndicatorField.INDICATOR?h:this.getName());this.updateHoverRecord()};c.prototype._updateColoredTrendIndicator=function(a,b,d){var f=null!=this.coloredVolumeTheme?this.coloredVolumeTheme:e.JsUtil.clone(this.chart.theme.plot.bar.candle);if(!this.coloredVolumeTheme){var h=e.HtmlUtil.toRgba(f.upCandle.fill.fillColor),
l=e.HtmlUtil.toRgba(f.downCandle.fill.fillColor);h.a=.4;l.a=.4;f.upCandle.fill.fillColor=e.HtmlUtil.toRgbString(h);f.downCandle.fill.fillColor=e.HtmlUtil.toRgbString(l)}this.coloredVolumeTheme=f;a.dataSeries=b;a.plot=new e.HistogramPlot({dataSeries:a.dataSeries,theme:f,plotStyle:e.HistogramPlot.Style.TREND});a.plot.signalSeries=d;a.color=e.HtmlUtil.isDarkColor(this._chart.theme.plot.line.simple.strokeColor)?"rgba(51, 51, 51, 0.3)":"white"};c.prototype._getHistogramTheme=function(a){switch(a){case 0:a=
e.IndicatorParam.LINE_COLOR;a=this.getParameterValue(a)||this.chart.theme.plot.indicator.line1.strokeColor;break;case 1:a=e.IndicatorParam.LINE2_COLOR;a=this.getParameterValue(a)||this.chart.theme.plot.indicator.line3.strokeColor;break;case 2:a=e.IndicatorParam.LINE3_COLOR;a=this.getParameterValue(a)||this.chart.theme.plot.indicator.line2.strokeColor;break;default:return null}return{line:{strokeEnabled:!1},fill:{fillEnabled:!0,fillColor:a}}};c.prototype._getLineTheme=function(a){switch(a){case 0:var b=
e.IndicatorParam.LINE_COLOR;var d=e.IndicatorParam.LINE_WIDTH;var f=e.IndicatorParam.LINE_STYLE;switch(this._fieldNames.length){case 1:"Volume"===this.fieldNames[a]?(a=this.getParameterValue(b)||this.chart.theme.plot.indicator.line4.strokeColor,d=this.getParameterValue(d)||this.chart.theme.plot.indicator.line4.width,f=this.getParameterValue(f)||this.chart.theme.plot.indicator.line4.lineStyle):(a=this.getParameterValue(b)||this.chart.theme.plot.indicator.line1.strokeColor,d=this.getParameterValue(d)||
this.chart.theme.plot.indicator.line1.width,f=this.getParameterValue(f)||this.chart.theme.plot.indicator.line1.lineStyle);break;case 2:a=this.getParameterValue(b)||this.chart.theme.plot.indicator.line2.strokeColor;d=this.getParameterValue(d)||this.chart.theme.plot.indicator.line2.width;f=this.getParameterValue(f)||this.chart.theme.plot.indicator.line2.lineStyle;break;case 3:a=this.getParameterValue(b)||this.chart.theme.plot.indicator.line3.strokeColor;d=this.getParameterValue(d)||this.chart.theme.plot.indicator.line3.width;
f=this.getParameterValue(f)||this.chart.theme.plot.indicator.line3.lineStyle;break;default:a=this.getParameterValue(b)||this.chart.theme.plot.indicator.line1.strokeColor,d=this.getParameterValue(d)||this.chart.theme.plot.indicator.line1.width,f=this.getParameterValue(f)||this.chart.theme.plot.indicator.line1.lineStyle}break;case 1:b=e.IndicatorParam.LINE2_COLOR;d=e.IndicatorParam.LINE2_WIDTH;f=e.IndicatorParam.LINE2_STYLE;switch(this._fieldNames.length){case 2:a=this.getParameterValue(b)||this.chart.theme.plot.indicator.line3.strokeColor;
d=this.getParameterValue(d)||this.chart.theme.plot.indicator.line3.width;f=this.getParameterValue(f)||this.chart.theme.plot.indicator.line3.lineStyle;break;case 3:a=this.getParameterValue(b)||this.chart.theme.plot.indicator.line1.strokeColor;d=this.getParameterValue(d)||this.chart.theme.plot.indicator.line1.width;f=this.getParameterValue(f)||this.chart.theme.plot.indicator.line1.lineStyle;break;default:a=this.getParameterValue(b)||this.chart.theme.plot.indicator.line3.strokeColor,d=this.getParameterValue(d)||
this.chart.theme.plot.indicator.line3.width,f=this.getParameterValue(f)||this.chart.theme.plot.indicator.line3.lineStyle}break;case 2:b=e.IndicatorParam.LINE3_COLOR;d=e.IndicatorParam.LINE3_WIDTH;f=e.IndicatorParam.LINE3_STYLE;switch(this._fieldNames.length){case 2:a=this.getParameterValue(b)||this.chart.theme.plot.indicator.line1.strokeColor;d=this.getParameterValue(d)||this.chart.theme.plot.indicator.line1.width;f=this.getParameterValue(f)||this.chart.theme.plot.indicator.line1.lineStyle;break;
case 3:a=this.getParameterValue(b)||this.chart.theme.plot.indicator.line2.strokeColor;d=this.getParameterValue(d)||this.chart.theme.plot.indicator.line2.width;f=this.getParameterValue(f)||this.chart.theme.plot.indicator.line2.lineStyle;break;default:a=this.getParameterValue(b)||this.chart.theme.plot.indicator.line1.strokeColor,d=this.getParameterValue(d)||this.chart.theme.plot.indicator.line1.width,f=this.getParameterValue(f)||this.chart.theme.plot.indicator.line1.lineStyle}break;default:return null}return{strokeEnabled:!0,
width:d,strokeColor:a,lineStyle:f}};c.prototype.draw=function(){};c.prototype._removeControls=function(){this._titleControls&&(this._unSubscribeEvents(),this._titleControls.rootDiv.remove(),this._titleControls=null)};c.prototype.destroy=function(){this._removeControls();this._panel=this.chart=null};c.prototype.getInfoAbout=function(){return""};c.prototype.showInfoDialog=function(){var a=this;e.UI.ViewLoader.indicatorInfoDialog(function(b){b.show({chart:a.chart,indicator:a})})};c.prototype.showSettingsDialog=
function(){var a=this;e.UI.ViewLoader.indicatorSettingsDialog(function(b){b.show({chart:a.chart,indicator:a,done:function(){a.update();a._panel.setNeedsUpdate(!0)}})})};c.prototype.updateHoverRecord=function(a){if(this.showValuesInTitle&&this.showNameInTitle){null==a&&(a=this._chart.hoveredRecord);for(var b=0,d=this._plotItems;b<d.length;b++){var f=d[b],h=f.dataSeries?f.dataSeries.length:0;if(!(0>=h)&&"signal"!=f.plot._plotThemeKey){if(null==a||0>a||a>=h)a=h-1;h=f.dataSeries.valueAtIndex(a);h=this._panel.formatValue(h);
f.titleValueSpan.text(h)}}}};c.prototype._addPlot=function(a,b){this._panel.addPlot(a);this._initPanelTitle();for(var d=0,f=this._plotItems;d<f.length;d++){var h=f[d];if(!h.plot)return h.plot=a,h.dataSeries=a.dataSeries[0],h.color=b,this._updatePanelTitle(),h}};c.prototype._initPanelTitle=function(){var a=this;if(!this._titleControls){var b=this._titleControls={},d={menuContainer:null,showOnClick:!0,indicator:this,onItemSelected:function(h,l){h=h.data("id");switch(h){case e.UI.IndicatorContextMenu.MenuItem.ABOUT:a.showInfoDialog();
break;case e.UI.IndicatorContextMenu.MenuItem.SETTINGS:a.showSettingsDialog();break;case e.UI.IndicatorContextMenu.MenuItem.SHOW_PARAMS:a.showParamsInTitle=l;a._panel.setNeedsUpdate();break;case e.UI.IndicatorContextMenu.MenuItem.SHOW_MARKERS:a.showValueMarkers=l;a._panel.setNeedsUpdate();break;case e.UI.IndicatorContextMenu.MenuItem.SHOW_VALUES:a.showValuesInTitle=l;a._panel.setNeedsUpdate();break;case e.UI.IndicatorContextMenu.MenuItem.VISIBLE:a.visible=l;a.updateTitleControlsVisibility();a._panel.setNeedsUpdate();
break;case e.UI.IndicatorContextMenu.MenuItem.DELETE:a._remove();break;case e.UI.IndicatorContextMenu.MenuItem.SIMULATE_INDICATOR:a.simulateIndicator=l;break;case void 0:break;default:throw Error("Unknown menu item '"+h+"'");}}},f=b.rootDiv=this._panel.titleDiv.scxAppend("div");b.name=f.scxAppend("div","scxPanelTitleCaption").text(this.getShortName());b.name.scx().indicatorContextMenu(d);b.parameters=f.scxAppend("div","scxPanelTitleCaption");b.parameters.scx().indicatorContextMenu(d);this._collapseIndicatorIcon=
f.scxAppend("span",["scxPanelTitleIcon","scxIndicatorCollapseHide"]).attr("title","Show/Hide Indicator`s Title").on(eventClickByPlatform,function(){a.showNameInTitle=a._collapseIndicatorTitle});f.scxAppend("span",["scxPanelTitleIcon","scxIndicatorRemoveIcon"]).attr("title","Remove indicator").on(eventClickByPlatform,function(){a._remove()});b=0;for(d=this._fieldNames.length;b<d;b++)this._plotItems.push({titlePlotSpan:f.scxAppend("span","scxPanelTitleValue"),titleValueSpan:f.scxAppend("span","scxPanelTitleValue")});
this.updateTitleControlsVisibility();this._subscribeEvents()}};c.prototype.getParametersString=function(){return null};c.prototype._updatePanelTitle=function(){this._titleControls.name.text(this.getShortName());this._titleControls.parameters.text(this.getParametersString());for(var a=0;a<this._plotItems.length;a++){var b=this._plotItems[a],d=this._fieldNames[a];b.titlePlotSpan.css("color",b.color).text(d?d+":":"");b.titleValueSpan.css("color",b.color).attr("title",d)}};c.prototype.updateTitleControlsVisibility=
function(){var a=this.showValueMarkers,b=this.showValuesInTitle?"inline-block":"none",d=this._titleControls;d&&(d.parameters.css("display",this.showParamsInTitle?"inline-block":"none"),d.name.css("display",this.showNameInTitle?"inline-block":"none"),d.name.css("opacity",this.visible?"1":"0.5"));d=0;for(var f=this._plotItems;d<f.length;d++){var h=f[d];h.plot&&(h.plot.showValueMarkers=a);h.titlePlotSpan.css("display",b);h.titleValueSpan.css("display",b)}};c.prototype._initIndicator=function(a){this._isOverlay=
!1;this._options.parameters={}};c.prototype._subscribeEvents=function(){var a=this;this._chart.on(e.ChartEvent.HOVER_RECORD_CHANGED+".scxIndicator",function(b){a.updateHoverRecord(b.value)},this)};c.prototype._unSubscribeEvents=function(){this._chart&&this._chart.off(e.ChartEvent.HOVER_RECORD_CHANGED+".scxIndicator",this)};c.prototype._remove=function(){this._removeSignal();var a=this._chart;a.removeIndicators(this);a.setNeedsUpdate(!0)};c.prototype._removeSignal=function(){for(var a=[],b=[],d=0;d<
this._plotItems.length;d++)"signal"==this._plotItems[d].plot._plotThemeKey&&(a.push(this._plotItems[d].plot),b.push(this._plotItems[d]));for(d=0;d<b.length;d++){var f=this._plotItems.indexOf(b[d]);0<=f&&this._plotItems.splice(f,1)}this._chart.mainPanel.removePlot(a)};c.prototype._collapseIndicatorName=function(a){(this._collapseIndicatorTitle=!a)?this._collapseIndicatorIcon.removeClass("scxIndicatorCollapseHide").addClass("scxIndicatorCollapseShow"):this._collapseIndicatorIcon.removeClass("scxIndicatorCollapseShow").addClass("scxIndicatorCollapseHide");
this._panel.setNeedsUpdate()};c.prototype._getMaTypeString=function(a){switch(a){case TASdk.Const.simpleMovingAverage:return"Simple";case TASdk.Const.exponentialMovingAverage:return"Exponential";case TASdk.Const.triangularMovingAverage:return"Triangular";case TASdk.Const.timeSeriesMovingAverage:return"Time Series";case TASdk.Const.variableMovingAverage:return"Variable";case TASdk.Const.VIDYA:return"VIDYA";case TASdk.Const.wellesWilderSmoothing:return"Welles Wilder";case TASdk.Const.weightedMovingAverage:return"Weighted";
default:return""}};c.deserialize=function(a){return a.isIchimokuIndicator?new e.IchimokuIndicator(a):a.taIndicator===TASdk.DBox?new e.DarvasBox(a):new e.TAIndicator(a)};c.allIndicators=function(){return this.bands().concat(this.general(),this.indices(),this.regressions(),this.movingAverages(),this.oscillators())};c.bands=function(){return[TASdk.BollingerBands,TASdk.MovingAverageEnvelope,TASdk.HighLowBands,TASdk.FractalChaosBands,TASdk.PrimeNumberBands,TASdk.KeltnerChannel,TASdk.STARC,TASdk.DBox,TASdk.IchimokuCloud,
TASdk.MarketPriceProfile]};c.general=function(){return[TASdk.HighMinusLow,TASdk.MedianPrice,TASdk.TypicalPrice,TASdk.WeightedClose,TASdk.VolumeROC,TASdk.PriceROC,TASdk.StandardDeviation,TASdk.HHV,TASdk.LLV,e.ColoredVolumeIndicator,e.VolumeIndicator]};c.indices=function(){return[TASdk.HistoricalVolatility,TASdk.OnBalanceVolume,TASdk.MoneyFlowIndex,TASdk.TradeVolumeIndex,TASdk.SwingIndex,TASdk.AccumulativeSwingIndex,TASdk.ComparativeRelativeStrength,TASdk.PriceVolumeTrend,TASdk.PositiveVolumeIndex,
TASdk.NegativeVolumeIndex,TASdk.PerformanceIndex,TASdk.MassIndex,TASdk.ChaikinMoneyFlow,TASdk.CommodityChannelIndex,TASdk.StochasticMomentumIndex,TASdk.ElderForceIndex,TASdk.ElderThermometer,TASdk.MarketFacilitationIndex,TASdk.QStick,TASdk.GopalakrishnanRangeIndex,TASdk.IntradayMomentumIndex,TASdk.RAVI,TASdk.RandomWalkIndex,TASdk.TwiggsMoneyFlow,TASdk.RelativeStrengthIndex]};c.regressions=function(){return[TASdk.LinearRegressionRSquared,TASdk.LinearRegressionForecast,TASdk.LinearRegressionSlope,TASdk.LinearRegressionIntercept,
TASdk.TimeSeriesForecast]};c.movingAverages=function(){return[TASdk.ExponentialMovingAverage,TASdk.TimeSeriesMovingAverage,TASdk.VariableMovingAverage,TASdk.TriangularMovingAverage,TASdk.WeightedMovingAverage,TASdk.VIDYA,TASdk.WellesWilderSmoothing,TASdk.McGinleysDynamic,TASdk.SimpleMovingAverage]};c.oscillators=function(){return[TASdk.Aroon,TASdk.MomentumOscillator,TASdk.AverageTrueRange,TASdk.ChandeMomentumOscillator,TASdk.TRIX,TASdk.UltimateOscillator,TASdk.VerticalHorizontalFilter,TASdk.WilliamsPctR,
TASdk.WilliamsAccumulationDistribution,TASdk.VolumeOscillator,TASdk.ChaikinVolatility,TASdk.StochasticOscillator,TASdk.PriceOscillator,TASdk.MACDHistogram,TASdk.EaseOfMovement,TASdk.DetrendedPriceOscillator,TASdk.ParabolicSAR,TASdk.DirectionalMovementSystem,TASdk.TrueRange,TASdk.AroonOscillator,TASdk.RainbowOscillator,TASdk.FractalChaosOscillator,TASdk.PrimeNumberOscillator,TASdk.ElderRay,TASdk.EhlerFisherTransform,TASdk.SchaffTrendCycle,TASdk.CenterOfGravity,TASdk.CoppockCurve,TASdk.ChandeForecastOscillator,
TASdk.KlingerVolumeOscillator,TASdk.PrettyGoodOscillator,TASdk.MACD,TASdk.TrendSignal,TASdk.BoomVolume,TASdk.MSTOI]};return c}();e.Indicator=g})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.IndicatorField={OPEN:"Open",HIGH:"High",LOW:"Low",CLOSE:"Close",VOLUME:"Volume",INDICATOR:"Indicator",INDICATOR_HIGH:"Indicator High",INDICATOR_LOW:"Indicator Low",INDICATOR_SIGNAL:"Indicator Signal",INDICATORSIGNAL:"IndicatorSignal",INDICATOR_HISTOGRAM:"Indicator Histogram",BOLLINGER_BAND_TOP:"Bollinger Band Top",BOLLINGER_BAND_MEDIAN:"Bollinger Band Median",BOLLINGER_BAND_BOTTOM:"Bollinger Band Bottom",ENVELOPE_TOP:"Envelope Top",ENVELOPE_MEDIAN:"Envelope Median",ENVELOPE_BOTTOM:"Envelope Bottom",
HIGH_LOW_BANDS_TOP:"High Low Bands Top",HIGH_LOW_BANDS_MEDIAN:"High Low Bands Median",HIGH_LOW_BANDS_BOTTOM:"High Low Bands Bottom",FRACTAL_HIGH:"Fractal High",FRACTAL_LOW:"Fractal Low",PRIME_BANDS_TOP:"Prime Bands Top",PRIME_BANDS_BOTTOM:"Prime Bands Bottom",KELTNER_CHANNEL_TOP:"Keltner Top",KELTNER_CHANNEL_MEDIAN:"Keltner Median",KELTNER_CHANNEL_BOTTOM:"Keltner Bottom",STARC_CHANNEL_TOP:"STARC Top",STARC_CHANNEL_MEDIAN:"STARC Median",STARC_CHANNEL_BOTTOM:"STARC Bottom",PCT_D:"%D",PCT_K:"%K",RSQUARED:"RSquared",
FORECAST:"Forecast",SLOPE:"Slope",INTERCEPT:"Intercept",SIGNAL:"Signal",HISTOGRAM:"Histogram",ADX:"ADX",DI_PLUS:"DI+",DI_MINUS:"DI-",AROON_UP:"Aroon Up",AROON_DOWN:"Aroon Down",AROON_OSCILLATOR:"Aroon Oscillator",BULL_POWER:"Indicator Bull Power",BEAR_POWER:"Indicator Bear Power",TRIGGER:"Indicator Trigger",MARKET_PRICE_PROFILE_TOP:"VAH",MARKET_PRICE_PROFILE_MEDIAN:"POC",MARKET_PRICE_PROFILE_BOTTOM:"VAL",BUY_VOLUME:"Buy Volume",SELL_VOLUME:"Sell Volume"};Object.freeze(e.IndicatorField);e.IndicatorParamValue=
{POINT:1,PERCENT:2,DAY:1,WEEK:2};Object.freeze(e.IndicatorParamValue);var k=function(g){function c(a){var b=g.call(this,a)||this;b._options.taIndicator=null!=a.taIndicator?a.taIndicator:TASdk.Unknown;b.enableSimulate=TASdk.isEnableSimulateIndicator(b._options.taIndicator);return b}__extends(c,g);Object.defineProperty(c.prototype,"taIndicator",{get:function(){return this._options.taIndicator},enumerable:!0,configurable:!0});c.prototype.getName=function(){return this.taIndicator===e.ColoredVolumeIndicator?
"Colored Volume":TASdk.indicatorToString(this.taIndicator)};c.prototype.getShortName=function(){switch(this.taIndicator){case TASdk.SimpleMovingAverage:return"SMA";case TASdk.ExponentialMovingAverage:return"EMA";case TASdk.TimeSeriesMovingAverage:return"TSMA";case TASdk.TriangularMovingAverage:return"TMA";case TASdk.VariableMovingAverage:return"VMA";case TASdk.VIDYA:return"VIDYA";case TASdk.WellesWilderSmoothing:return"Welles Wilder Smoothing";case TASdk.WeightedMovingAverage:return"WMA";case TASdk.WilliamsPctR:return"Williams %R";
case TASdk.WilliamsAccumulationDistribution:return"Williams Accumulation Distribution";case TASdk.VolumeOscillator:return"Volume Oscillator";case TASdk.VerticalHorizontalFilter:return"Vertical Horizontal Filter";case TASdk.UltimateOscillator:return"Ultimate Oscillator";case TASdk.TrueRange:return"True Range";case TASdk.AverageTrueRange:return"ATR";case TASdk.TRIX:return"TRIX";case TASdk.RainbowOscillator:return"Rainbow Oscillator";case TASdk.PriceOscillator:return"Price Oscillator";case TASdk.ParabolicSAR:return"PSAR";
case TASdk.MomentumOscillator:return"Momentum Oscillator";case TASdk.MACD:return"MACD";case TASdk.EaseOfMovement:return"Ease of Movement";case TASdk.DirectionalMovementSystem:return"Directional Movement System";case TASdk.DetrendedPriceOscillator:return"Detrended Price Oscillator";case TASdk.ChandeMomentumOscillator:return"Chande Momentum Oscillator";case TASdk.ChaikinVolatility:return"Chaikin Volatility";case TASdk.Aroon:return"Aroon";case TASdk.AroonOscillator:return"Aroon Oscillator";case TASdk.LinearRegressionRSquared:return"Linear Regression R2";
case TASdk.LinearRegressionForecast:return"Linear Regression Forecast";case TASdk.LinearRegressionSlope:return"Linear Regression Slope";case TASdk.LinearRegressionIntercept:return"Linear Regression Intercept";case TASdk.PriceVolumeTrend:return"Price Volume Trend";case TASdk.PerformanceIndex:return"Performance Index";case TASdk.CommodityChannelIndex:return"Commodity Channel Index";case TASdk.ChaikinMoneyFlow:return"Chaikin Money Flow";case TASdk.WeightedClose:return"Weighted Close";case TASdk.VolumeROC:return"Volume ROC";
case TASdk.TypicalPrice:return"Typical Price";case TASdk.StandardDeviation:return"Standard Deviation";case TASdk.PriceROC:return"Price ROC";case TASdk.MedianPrice:return"Median Price";case TASdk.HighMinusLow:return"High Minus Low";case TASdk.BollingerBands:return"Bollinger";case TASdk.FractalChaosBands:return"Fractal Chaos Bands";case TASdk.HighLowBands:return"High Low Bands";case TASdk.MovingAverageEnvelope:return"MA Env";case TASdk.SwingIndex:return"Swing Index";case TASdk.AccumulativeSwingIndex:return"Accumulative Swing Index";
case TASdk.ComparativeRelativeStrength:return"Comparative Relative Strength";case TASdk.MassIndex:return"Mass Index";case TASdk.MoneyFlowIndex:return"Money Flow Index";case TASdk.NegativeVolumeIndex:return"Negative Volume Index";case TASdk.OnBalanceVolume:return"On Balance Volume";case TASdk.PositiveVolumeIndex:return"Positive Volume Index";case TASdk.RelativeStrengthIndex:return"RSI";case TASdk.TradeVolumeIndex:return"Trade Volume Index";case TASdk.StochasticOscillator:return"Stochastic Oscillator";
case TASdk.StochasticMomentumIndex:return"Stochastic Momentum Index";case TASdk.FractalChaosOscillator:return"Fractal Chaos Oscillator";case TASdk.PrimeNumberOscillator:return"Prime Number Oscillator";case TASdk.PrimeNumberBands:return"Prime Number Bands";case TASdk.HistoricalVolatility:return"Historical Volatility";case TASdk.MACDHistogram:return"MACD Histogram";case TASdk.HHV:return"Highest High Value";case TASdk.LLV:return"Lowest Low Value";case TASdk.TimeSeriesForecast:return"TSF";case TASdk.ElderRay:return"Elder Ray";
case TASdk.ElderForceIndex:return"Elder Force Index";case TASdk.ElderThermometer:return"Elder Thermometer";case TASdk.EhlerFisherTransform:return"Ehler Fisher Transform";case TASdk.KeltnerChannel:return"Keltner Channel";case TASdk.MarketFacilitationIndex:return"Market Facilitation Index";case TASdk.SchaffTrendCycle:return"Schaff Trend Cycle";case TASdk.QStick:return"QStick";case TASdk.STARC:return"STARC";case TASdk.CenterOfGravity:return"Center Of Gravity";case TASdk.CoppockCurve:return"Coppock Curve";
case TASdk.ChandeForecastOscillator:return"Chande Forecast Oscillator";case TASdk.GopalakrishnanRangeIndex:return"Gopalakrishnan Range Index";case TASdk.IntradayMomentumIndex:return"Intraday Momentum Index";case TASdk.KlingerVolumeOscillator:return"Klinger Volume Oscillator";case TASdk.PrettyGoodOscillator:return"Pretty Good Oscillator";case TASdk.RAVI:return"RAVI";case TASdk.RandomWalkIndex:return"Random Walk Index";case TASdk.TwiggsMoneyFlow:return"Twiggs Money Flow";case e.VolumeIndicator:return"Volume";
case e.ColoredVolumeIndicator:return"Colored Volume";case TASdk.McGinleysDynamic:return"McGinleys Dynamic";case TASdk.MarketPriceProfile:return"MPP";case TASdk.TrendSignal:return"Trend Signal";case TASdk.BoomVolume:return"Boom Volume";case TASdk.MSTOI:return"MST OI";default:return""}};c.prototype.getPlotName=function(a){switch(a){case e.IndicatorField.INDICATOR_HIGH:case e.IndicatorField.FRACTAL_HIGH:return"High";case e.IndicatorField.INDICATOR_LOW:case e.IndicatorField.FRACTAL_LOW:return"Low";case e.IndicatorField.INDICATOR_SIGNAL:case e.IndicatorField.INDICATORSIGNAL:return"Signal";
case e.IndicatorField.INDICATOR_HISTOGRAM:return"Histogram";case e.IndicatorField.BOLLINGER_BAND_TOP:case e.IndicatorField.ENVELOPE_TOP:case e.IndicatorField.HIGH_LOW_BANDS_TOP:case e.IndicatorField.PRIME_BANDS_TOP:case e.IndicatorField.KELTNER_CHANNEL_TOP:case e.IndicatorField.STARC_CHANNEL_TOP:return"Top";case e.IndicatorField.MARKET_PRICE_PROFILE_TOP:return"VAH";case e.IndicatorField.BOLLINGER_BAND_MEDIAN:case e.IndicatorField.ENVELOPE_MEDIAN:case e.IndicatorField.HIGH_LOW_BANDS_MEDIAN:case e.IndicatorField.KELTNER_CHANNEL_MEDIAN:case e.IndicatorField.STARC_CHANNEL_MEDIAN:return"Median";
case e.IndicatorField.MARKET_PRICE_PROFILE_MEDIAN:return"POC";case e.IndicatorField.BOLLINGER_BAND_BOTTOM:case e.IndicatorField.ENVELOPE_BOTTOM:case e.IndicatorField.HIGH_LOW_BANDS_BOTTOM:case e.IndicatorField.PRIME_BANDS_BOTTOM:case e.IndicatorField.KELTNER_CHANNEL_BOTTOM:case e.IndicatorField.STARC_CHANNEL_BOTTOM:return"Bottom";case e.IndicatorField.MARKET_PRICE_PROFILE_BOTTOM:return"VOL";case e.IndicatorField.PCT_D:case e.IndicatorField.PCT_K:case e.IndicatorField.ADX:case e.IndicatorField.DI_PLUS:case e.IndicatorField.DI_MINUS:return a;
case e.IndicatorField.AROON_UP:return"Up";case e.IndicatorField.AROON_DOWN:return"Down";case e.IndicatorField.BULL_POWER:return"Bull Power";case e.IndicatorField.BEAR_POWER:return"Bear Power";case e.IndicatorField.TRIGGER:return"Trigger";case e.IndicatorField.VOLUME:return"Volume";default:return""}};c.prototype._initIndicator=function(a){g.prototype._initIndicator.call(this,a);var b=this._options.parameters,d=e.DataSeriesSuffix,f=e.IndicatorParam,h=e.IndicatorField;this._options.taIndicator=null!=
a.taIndicator?a.taIndicator:TASdk.Unknown;switch(this.taIndicator){case TASdk.BollingerBands:this._isOverlay=!0;this._fieldNames=[h.BOLLINGER_BAND_TOP,h.BOLLINGER_BAND_MEDIAN,h.BOLLINGER_BAND_BOTTOM];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;b[f.STANDARD_DEVIATIONS]=2;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.MovingAverageEnvelope:this._isOverlay=!0;this._fieldNames=[h.ENVELOPE_TOP,h.ENVELOPE_MEDIAN,h.ENVELOPE_BOTTOM];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;b[f.SHIFT]=5;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;
break;case TASdk.HighLowBands:this._isOverlay=!0;this._fieldNames=[h.HIGH_LOW_BANDS_TOP,h.HIGH_LOW_BANDS_MEDIAN,h.HIGH_LOW_BANDS_BOTTOM];b[f.PERIODS]=14;break;case TASdk.FractalChaosBands:this._isOverlay=!0;this._fieldNames=[h.FRACTAL_HIGH,h.FRACTAL_LOW];b[f.PERIODS]=14;break;case TASdk.PrimeNumberBands:this._isOverlay=!0;this._fieldNames=[h.PRIME_BANDS_TOP,h.PRIME_BANDS_BOTTOM];break;case TASdk.KeltnerChannel:this._isOverlay=!0;this._fieldNames=[h.KELTNER_CHANNEL_TOP,h.KELTNER_CHANNEL_MEDIAN,h.KELTNER_CHANNEL_BOTTOM];
b[f.PERIODS]=14;b[f.SHIFT]=5;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.STARC:this._isOverlay=!0;this._fieldNames=[h.STARC_CHANNEL_TOP,h.STARC_CHANNEL_MEDIAN,h.STARC_CHANNEL_BOTTOM];b[f.PERIODS]=14;b[f.SHIFT]=5;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.HighMinusLow:this._fieldNames=[h.INDICATOR];break;case TASdk.MedianPrice:case TASdk.TypicalPrice:case TASdk.WeightedClose:this._isOverlay=!0;this._fieldNames=[h.INDICATOR];break;case TASdk.VolumeROC:this._fieldNames=
[h.INDICATOR];b[f.SOURCE]=d.VOLUME;b[f.PERIODS]=14;break;case TASdk.PriceROC:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.StandardDeviation:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;b[f.STANDARD_DEVIATIONS]=2;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.HHV:case TASdk.LLV:this._isOverlay=!0;this._fieldNames=[h.INDICATOR];b[f.PERIODS]=14;break;case TASdk.MoneyFlowIndex:this._fieldNames=[h.INDICATOR];b[f.PERIODS]=14;break;
case TASdk.TradeVolumeIndex:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.MIN_TICK]=.5;break;case TASdk.SwingIndex:case TASdk.AccumulativeSwingIndex:this._fieldNames=[h.INDICATOR];b[f.LIMIT_MOVE]=.5;break;case TASdk.RelativeStrengthIndex:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.ComparativeRelativeStrength:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.SOURCE2]=d.OPEN;break;case TASdk.PriceVolumeTrend:case TASdk.PositiveVolumeIndex:case TASdk.NegativeVolumeIndex:case TASdk.PerformanceIndex:case TASdk.OnBalanceVolume:this._fieldNames=
[h.INDICATOR];b[f.SOURCE]=d.CLOSE;break;case TASdk.MassIndex:case TASdk.ChaikinMoneyFlow:case TASdk.CommodityChannelIndex:this._fieldNames=[h.INDICATOR];b[f.PERIODS]=14;break;case TASdk.StochasticMomentumIndex:this._fieldNames=[h.PCT_D,h.PCT_K];b[f.PCT_K_PERIODS]=13;b[f.PCT_K_SMOOTHING]=25;b[f.PCT_K_DOUBLE_SMOOTHING]=2;b[f.PCT_D_PERIODS]=9;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;b[f.PCT_D_MA_TYPE]=TASdk.Const.VIDYA;break;case TASdk.HistoricalVolatility:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=
d.CLOSE;b[f.PERIODS]=14;b[f.BAR_HISTORY]=10;b[f.STANDARD_DEVIATIONS]=2;break;case TASdk.ElderForceIndex:this._fieldNames=[h.INDICATOR,h.INDICATOR_SIGNAL];break;case TASdk.ElderThermometer:case TASdk.MarketFacilitationIndex:this._fieldNames=[h.INDICATOR];break;case TASdk.QStick:this._fieldNames=[h.INDICATOR];b[f.PERIODS]=14;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.GopalakrishnanRangeIndex:this._fieldNames=[h.INDICATOR];b[f.PERIODS]=14;break;case TASdk.IntradayMomentumIndex:this._fieldNames=
[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.RAVI:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.SHORT_CYCLE]=9;b[f.LONG_CYCLE]=14;break;case TASdk.RandomWalkIndex:this._fieldNames=[h.INDICATOR_HIGH,h.INDICATOR_LOW];b[f.PERIODS]=14;break;case TASdk.TwiggsMoneyFlow:this._fieldNames=[h.INDICATOR];b[f.PERIODS]=14;break;case TASdk.LinearRegressionRSquared:this._fieldNames=[h.RSQUARED];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.LinearRegressionForecast:this._isOverlay=
!0;this._fieldNames=[h.FORECAST];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.LinearRegressionSlope:this._fieldNames=[h.SLOPE];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.LinearRegressionIntercept:this._isOverlay=!0;this._fieldNames=[h.INTERCEPT];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.TimeSeriesForecast:this._isOverlay=!0;this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.SimpleMovingAverage:case TASdk.ExponentialMovingAverage:case TASdk.TimeSeriesMovingAverage:case TASdk.VariableMovingAverage:case TASdk.TriangularMovingAverage:case TASdk.WeightedMovingAverage:case TASdk.WellesWilderSmoothing:this._isOverlay=
!0;this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.VIDYA:this._isOverlay=!0;this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;b[f.R2_SCALE]=.65;break;case TASdk.MomentumOscillator:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.ChandeMomentumOscillator:case TASdk.TRIX:case TASdk.VerticalHorizontalFilter:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.UltimateOscillator:this._fieldNames=
[h.INDICATOR];b[f.CYCLE_1]=3;b[f.CYCLE_2]=8;b[f.CYCLE_3]=14;break;case TASdk.AverageTrueRange:case TASdk.FractalChaosOscillator:case TASdk.PrettyGoodOscillator:case TASdk.WilliamsPctR:this._fieldNames=[h.INDICATOR];b[f.PERIODS]=14;break;case TASdk.WilliamsAccumulationDistribution:this._fieldNames=[h.INDICATOR];break;case TASdk.VolumeOscillator:this._fieldNames=[h.INDICATOR];b[f.SHORT_TERM]=8;b[f.LONG_TERM]=14;b[f.POINTS_OR_PERCENT]=e.IndicatorParamValue.PERCENT;break;case TASdk.ChaikinVolatility:this._fieldNames=
[h.INDICATOR];b[f.PERIODS]=14;b[f.RATE_OF_CHANGE]=2;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.StochasticOscillator:this._fieldNames=[h.PCT_K,h.PCT_D];b[f.PCT_K_PERIODS]=13;b[f.PCT_K_SMOOTHING]=25;b[f.PCT_D_PERIODS]=9;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.PriceOscillator:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.SHORT_CYCLE]=3;b[f.LONG_CYCLE]=8;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.MACD:this._fieldNames=[h.INDICATOR,h.INDICATORSIGNAL,
h.INDICATOR_HISTOGRAM];b[f.SOURCE]=d.CLOSE;b[f.SIGNAL_PERIODS]=3;b[f.LONG_CYCLE]=25;b[f.SHORT_CYCLE]=13;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.MACDHistogram:this._fieldNames=[h.INDICATOR_HISTOGRAM];b[f.SOURCE]=d.CLOSE;b[f.SIGNAL_PERIODS]=3;b[f.LONG_CYCLE]=25;b[f.SHORT_CYCLE]=13;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.EaseOfMovement:this._fieldNames=[h.INDICATOR];b[f.PERIODS]=14;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.DetrendedPriceOscillator:this._fieldNames=
[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.ParabolicSAR:this._isOverlay=!0;this._fieldNames=[h.INDICATOR];b[f.MIN_AF]=.02;b[f.MAX_AF]=3;break;case TASdk.DirectionalMovementSystem:this._fieldNames=[h.ADX,h.DI_PLUS,h.DI_MINUS];b[f.PERIODS]=14;break;case TASdk.TrueRange:this._fieldNames=[h.INDICATOR];break;case TASdk.Aroon:this._fieldNames=[h.AROON_UP,h.AROON_DOWN];b[f.PERIODS]=14;break;case TASdk.AroonOscillator:this._fieldNames=[h.AROON_OSCILLATOR];
b[f.PERIODS]=14;break;case TASdk.RainbowOscillator:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.LEVELS]=3;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.PrimeNumberOscillator:this._fieldNames=[h.INDICATOR];break;case TASdk.ElderRay:this._fieldNames=[h.BULL_POWER,h.BEAR_POWER];b[f.PERIODS]=14;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.EhlerFisherTransform:this._fieldNames=[h.INDICATOR,h.TRIGGER];b[f.PERIODS]=14;break;case TASdk.SchaffTrendCycle:this._fieldNames=
[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;b[f.SHORT_CYCLE]=13;b[f.LONG_CYCLE]=25;b[f.MA_TYPE]=TASdk.Const.simpleMovingAverage;break;case TASdk.CenterOfGravity:case TASdk.ChandeForecastOscillator:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.CoppockCurve:this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;break;case TASdk.KlingerVolumeOscillator:this._fieldNames=[h.INDICATOR,h.INDICATORSIGNAL];b[f.PERIODS]=13;b[f.LONG_CYCLE]=55;b[f.SHORT_CYCLE]=34;b[f.MA_TYPE]=
TASdk.Const.simpleMovingAverage;break;case e.VolumeIndicator:case e.ColoredVolumeIndicator:this._fieldNames=[h.VOLUME];break;case TASdk.McGinleysDynamic:this._isOverlay=!0;this._fieldNames=[h.INDICATOR];b[f.SOURCE]=d.CLOSE;b[f.PERIODS]=14;break;case TASdk.MarketPriceProfile:this._isOverlay=!0;this._fieldNames=[h.MARKET_PRICE_PROFILE_TOP,h.MARKET_PRICE_PROFILE_MEDIAN,h.MARKET_PRICE_PROFILE_BOTTOM];b[f.PCT_AREA]=70;b[f.STEP_PRICE]=1;b[f.SHIFT_BASE]=0;b[f.BASE_TYPE]=e.IndicatorParamValue.DAY;break;case TASdk.TrendSignal:this._fieldNames=
[h.INDICATOR];b[f.MIN_TREND]=.002;b[f.MAX_TREND]=.07;break;case TASdk.BoomVolume:this._fieldNames=[h.INDICATOR_HISTOGRAM];break;case TASdk.MSTOI:this._fieldNames=[h.INDICATOR_HISTOGRAM];break;default:throw Error("Unknown indicator: "+this.taIndicator);}0<this._fieldNames.length&&(b[f.LINE_WIDTH]=1,b[f.LINE_STYLE]=e.LineStyle.SOLID);1<this._fieldNames.length&&(b[f.LINE2_WIDTH]=1,b[f.LINE2_STYLE]=e.LineStyle.SOLID);2<this._fieldNames.length&&(b[f.LINE3_WIDTH]=1,b[f.LINE3_STYLE]=e.LineStyle.SOLID)};
c.prototype._initPanel=function(){if(this.taIndicator===e.VolumeIndicator||this.taIndicator===e.ColoredVolumeIndicator){var a=this._panel.valueScale.formatter;a instanceof e.IntlNumberFormat&&a.setDecimalDigits(0)}};c.prototype.calculate=function(){var a=this.getParameterValue(e.IndicatorParam.SOURCE),b=this._createField(a),d=this.getParameterValue(e.IndicatorParam.PERIODS),f=e.IndicatorField.INDICATOR,h=this.getParameterValue(e.IndicatorParam.MA_TYPE);a=d+1;var l=TASdk.Bands.prototype,m=TASdk.General.prototype,
q=TASdk.LinearRegression.prototype,p=TASdk.Oscillator.prototype,r=TASdk.Index.prototype,v;switch(this.taIndicator){case TASdk.BollingerBands:p=this.getParameterValue(e.IndicatorParam.STANDARD_DEVIATIONS);var u=[b.name,d,p,this._getMaTypeString(h)];var t=l.bollingerBands(b,d,p,h);this.enableSimulate&&this.simulateIndicator&&(v=l.simulateBollingerBands(t));break;case TASdk.MovingAverageEnvelope:f=this.getParameterValue(e.IndicatorParam.SHIFT);u=[b.name,d,f,this._getMaTypeString(h)];t=l.movingAverageEnvelope(b,
d,h,f);break;case TASdk.HighLowBands:u=[d];t=l.highLowBands(this._createHighField(),this._createLowField(),this._createCloseField(),d);break;case TASdk.FractalChaosBands:u=[d];t=l.fractalChaosBands(this._createRecordset(),d);break;case TASdk.PrimeNumberBands:a=1;t=l.primeNumberBands(this._createHighField(),this._createLowField());break;case TASdk.KeltnerChannel:f=this.getParameterValue(e.IndicatorParam.SHIFT);u=[d,f,this._getMaTypeString(h)];t=l.keltner(this._createRecordset(),d,f,h,"Keltner");break;
case TASdk.STARC:f=this.getParameterValue(e.IndicatorParam.SHIFT);u=[d,f,this._getMaTypeString(h)];t=l.keltner(this._createRecordset(),d,f,h,"STARC");break;case TASdk.HighMinusLow:a=1;t=m.highMinusLow(this._createRecordset(),f);break;case TASdk.MedianPrice:a=1;t=m.medianPrice(this._createRecordset(),f);break;case TASdk.TypicalPrice:a=1;t=m.typicalPrice(this._createRecordset(),f);break;case TASdk.WeightedClose:a=1;t=m.weightedClose(this._createRecordset(),f);break;case TASdk.VolumeROC:u=[b.name,d];
t=m.volumeROC(b,d,f);break;case TASdk.PriceROC:u=[b.name,d];t=m.priceROC(b,d,f);break;case TASdk.StandardDeviation:p=this.getParameterValue(e.IndicatorParam.STANDARD_DEVIATIONS);u=[b.name,d,p,this._getMaTypeString(h)];t=m.standardDeviation(b,d,p,h,f);break;case TASdk.HHV:u=[d];t=m.HHV(this._createHighField(),d,f);break;case TASdk.LLV:u=[d];t=m.LLV(this._createLowField(),d,f);break;case TASdk.MoneyFlowIndex:u=[d];t=r.moneyFlowIndex(this._createRecordset(),d,f);break;case TASdk.TradeVolumeIndex:p=this.getParameterValue(e.IndicatorParam.MIN_TICK);
a=1;u=[b.name,p];t=r.tradeVolumeIndex(b,this._createVolumeField(),p,f);break;case TASdk.SwingIndex:p=this.getParameterValue(e.IndicatorParam.LIMIT_MOVE);a=1;u=[p];t=r.swingIndex(this._createRecordset(),p,f);break;case TASdk.AccumulativeSwingIndex:p=this.getParameterValue(e.IndicatorParam.LIMIT_MOVE);a=1;u=[p];t=r.accumulativeSwingIndex(this._createRecordset(),p,f);break;case TASdk.RelativeStrengthIndex:a=d+2;u=[b.name,d];t=r.relativeStrengthIndex(b,d,f);this.enableSimulate&&this.simulateIndicator&&
(v=r.simulateRelativeStrengthIndex(t,this._createRecordset(),!0));break;case TASdk.ComparativeRelativeStrength:p=this._createField(this.getParameterValue(e.IndicatorParam.SOURCE2));a=1;u=[b.name,p.name];t=r.comparativeRelativeStrength(b,p,f);break;case TASdk.PriceVolumeTrend:a=1;u=[b.name];t=r.priceVolumeTrend(b,this._createVolumeField(),f);break;case TASdk.PositiveVolumeIndex:a=1;u=[b.name];t=r.positiveVolumeIndex(b,this._createVolumeField(),f);break;case TASdk.NegativeVolumeIndex:a=1;u=[b.name];
t=r.negativeVolumeIndex(b,this._createVolumeField(),f);break;case TASdk.PerformanceIndex:a=1;u=[b.name];t=r.performance(b,f);break;case TASdk.OnBalanceVolume:a=1;u=[b.name];t=r.onBalanceVolume(b,this._createVolumeField(),f);break;case TASdk.MassIndex:a=Math.floor(3*d);u=[d];t=r.massIndex(this._createRecordset(),d,f);break;case TASdk.ChaikinMoneyFlow:u=[d];t=r.chaikinMoneyFlow(this._createRecordset(),d,f);break;case TASdk.CommodityChannelIndex:a=Math.floor(2*d);u=[d];t=r.commodityChannelIndex(this._createRecordset(),
d,f);break;case TASdk.StochasticMomentumIndex:f=this.getParameterValue(e.IndicatorParam.PCT_K_PERIODS);p=this.getParameterValue(e.IndicatorParam.PCT_K_SMOOTHING);d=this.getParameterValue(e.IndicatorParam.PCT_K_DOUBLE_SMOOTHING);b=this.getParameterValue(e.IndicatorParam.PCT_D_PERIODS);l=this.getParameterValue(e.IndicatorParam.PCT_D_MA_TYPE);a=f+p+b;u=[f,p,d,b,this._getMaTypeString(h),this._getMaTypeString(l)];t=r.stochasticMomentumIndex(this._createRecordset(),f,p,d,b,h,l);break;case TASdk.HistoricalVolatility:h=
this.getParameterValue(e.IndicatorParam.BAR_HISTORY);p=this.getParameterValue(e.IndicatorParam.STANDARD_DEVIATIONS);u=[b.name,d,h,p];t=r.historicalVolatility(b,d,h,p,f);break;case TASdk.ElderForceIndex:a=7;t=r.elderForceIndex(this._createRecordset(),f);f=TASdk.MovingAverage.prototype.exponentialMovingAverage(t.getField(f),2,f+" Signal").getField(f+" Signal");t.addField(f);break;case TASdk.ElderThermometer:a=2;t=r.elderThermometer(this._createRecordset(),f);break;case TASdk.MarketFacilitationIndex:a=
2;t=r.marketFacilitationIndex(this._createRecordset(),f);break;case TASdk.QStick:u=[d,this._getMaTypeString(h)];t=r.qStick(this._createRecordset(),d,h,f);break;case TASdk.GopalakrishnanRangeIndex:u=[d];t=r.gopalakrishnanRangeIndex(this._createRecordset(),d,f);break;case TASdk.IntradayMomentumIndex:a=3;t=r.intradayMomentumIndex(this._createRecordset(),f);break;case TASdk.RAVI:l=this.getParameterValue(e.IndicatorParam.SHORT_CYCLE);m=this.getParameterValue(e.IndicatorParam.LONG_CYCLE);a=m+2;u=[b.name,
l,m];t=r.RAVI(b,l,m,f);break;case TASdk.RandomWalkIndex:a=2*d;u=[d];t=r.randomWalkIndex(this._createRecordset(),d,f);break;case TASdk.TwiggsMoneyFlow:u=[d];t=r.twiggsMoneyFlow(this._createRecordset(),d,f);break;case TASdk.LinearRegressionRSquared:u=[b.name,d];t=q.regression(b,d);break;case TASdk.LinearRegressionForecast:u=[b.name,d];t=q.regression(b,d);break;case TASdk.LinearRegressionSlope:u=[b.name,d];t=q.regression(b,d);break;case TASdk.LinearRegressionIntercept:u=[b.name,d];t=q.regression(b,d);
break;case TASdk.TimeSeriesForecast:u=[b.name,d];t=q.timeSeriesForecast(b,d,f);break;case TASdk.SimpleMovingAverage:u=[b.name,d];t=TASdk.MovingAverage.prototype.simpleMovingAverage(b,d,f);this.enableSimulate&&this.simulateIndicator&&(v=TASdk.MovingAverage.prototype.simulateSimpleMovingAverage(t,this._createRecordset()));break;case TASdk.ExponentialMovingAverage:u=[b.name,d];t=TASdk.MovingAverage.prototype.exponentialMovingAverage(b,d,f);this.enableSimulate&&this.simulateIndicator&&(v=TASdk.MovingAverage.prototype.simulateSimpleMovingAverage(t,
this._createRecordset()));break;case TASdk.TimeSeriesMovingAverage:u=[b.name,d];t=TASdk.MovingAverage.prototype.timeSeriesMovingAverage(b,d,f);this.enableSimulate&&this.simulateIndicator&&(v=TASdk.MovingAverage.prototype.simulateSimpleMovingAverage(t,this._createRecordset()));break;case TASdk.VariableMovingAverage:a=Math.floor(2*d);u=[b.name,d];t=TASdk.MovingAverage.prototype.variableMovingAverage(b,d,f);this.enableSimulate&&this.simulateIndicator&&(v=TASdk.MovingAverage.prototype.simulateSimpleMovingAverage(t,
this._createRecordset(),!0));break;case TASdk.TriangularMovingAverage:a=Math.floor(2*d);u=[b.name,d];t=TASdk.MovingAverage.prototype.triangularMovingAverage(b,d,f);this.enableSimulate&&this.simulateIndicator&&(v=TASdk.MovingAverage.prototype.simulateSimpleMovingAverage(t,this._createRecordset()));break;case TASdk.WeightedMovingAverage:u=[b.name,d];t=TASdk.MovingAverage.prototype.weightedMovingAverage(b,d,f);this.enableSimulate&&this.simulateIndicator&&(v=TASdk.MovingAverage.prototype.simulateSimpleMovingAverage(t,
this._createRecordset()));break;case TASdk.VIDYA:p=this.getParameterValue(e.IndicatorParam.R2_SCALE);a=2;u=[b.name,d,p];t=TASdk.MovingAverage.prototype.VIDYA(b,d,p,f);this.enableSimulate&&this.simulateIndicator&&(v=TASdk.MovingAverage.prototype.simulateSimpleMovingAverage(t,this._createRecordset()));break;case TASdk.WellesWilderSmoothing:a=Math.floor(2*d);u=[b.name,d];t=TASdk.MovingAverage.prototype.wellesWilderSmoothing(b,d,f);this.enableSimulate&&this.simulateIndicator&&(v=TASdk.MovingAverage.prototype.simulateSimpleMovingAverage(t,
this._createRecordset()));break;case TASdk.ChandeMomentumOscillator:u=[b.name,d];t=p.chandeMomentumOscillator(b,d,f);break;case TASdk.MomentumOscillator:a=d+2;u=[b.name,d];t=p.momentum(b,d,f);break;case TASdk.TRIX:a=Math.floor(2*d);u=[b.name,d];t=p.TRIX(b,d,f);break;case TASdk.UltimateOscillator:h=this.getParameterValue(e.IndicatorParam.CYCLE_1);r=this.getParameterValue(e.IndicatorParam.CYCLE_2);b=this.getParameterValue(e.IndicatorParam.CYCLE_3);a=Math.max(h,r,b)+1;u=[h,r,b];t=p.ultimateOscillator(this._createRecordset(),
h,r,b,f);break;case TASdk.VerticalHorizontalFilter:u=[b.name,d];t=p.verticalHorizontalFilter(b,d,f);break;case TASdk.WilliamsPctR:a=Math.floor(2*d);u=[d];t=p.williamsPctR(this._createRecordset(),d,f);break;case TASdk.WilliamsAccumulationDistribution:a=1;t=p.williamsAccumulationDistribution(this._createRecordset(),f);break;case TASdk.VolumeOscillator:h=this.getParameterValue(e.IndicatorParam.SHORT_TERM);r=this.getParameterValue(e.IndicatorParam.LONG_TERM);b=this.getParameterValue(e.IndicatorParam.POINTS_OR_PERCENT);
a=Math.max(h,r)+1;u=[h,r];t=p.volumeOscillator(this._createVolumeField(),h,r,b,f);break;case TASdk.ChaikinVolatility:r=this.getParameterValue(e.IndicatorParam.RATE_OF_CHANGE);a=Math.floor(1.5*d);u=[d,r,this._getMaTypeString(h)];t=p.chaikinVolatility(this._createRecordset(),d,r,h,f);break;case TASdk.StochasticOscillator:r=this.getParameterValue(e.IndicatorParam.PCT_K_SMOOTHING);f=this.getParameterValue(e.IndicatorParam.PCT_K_PERIODS);b=this.getParameterValue(e.IndicatorParam.PCT_D_PERIODS);a=Math.max(f,
b,r)+1;u=[f,r,b,this._getMaTypeString(h)];t=p.stochasticOscillator(this._createRecordset(),f,r,b,h);break;case TASdk.PriceOscillator:m=this.getParameterValue(e.IndicatorParam.LONG_CYCLE);l=this.getParameterValue(e.IndicatorParam.SHORT_CYCLE);a=Math.max(m,l)+1;u=[b.name,m,l,this._getMaTypeString(h)];t=p.priceOscillator(b,m,l,h,f);break;case TASdk.MACD:r=this.getParameterValue(e.IndicatorParam.SIGNAL_PERIODS);m=this.getParameterValue(e.IndicatorParam.LONG_CYCLE);l=this.getParameterValue(e.IndicatorParam.SHORT_CYCLE);
a=Math.trunc(2.25*Math.max(m,l));u=[b.name,r,l,m,this._getMaTypeString(h)];t=p.MACD(b,r,m,l,h,f);f=p.macdHistogram(b,r,m,l,h,f+" Histogram").getField(f+" Histogram");t.addField(f);this.enableSimulate&&this.simulateIndicator&&(v=p.simulateMACD(t));break;case TASdk.MACDHistogram:r=this.getParameterValue(e.IndicatorParam.SIGNAL_PERIODS);m=this.getParameterValue(e.IndicatorParam.LONG_CYCLE);l=this.getParameterValue(e.IndicatorParam.SHORT_CYCLE);a=Math.trunc(2.25*Math.max(m,l));u=[b.name,r,l,m,this._getMaTypeString(h)];
t=p.macdHistogram(b,r,m,l,h,f+" Histogram");break;case TASdk.EaseOfMovement:u=[d,this._getMaTypeString(h)];t=p.easeOfMovement(this._createRecordset(),d,h,f);break;case TASdk.DetrendedPriceOscillator:a=2*d;u=[b.name,d,this._getMaTypeString(h)];t=p.detrendedPriceOscillator(b,d,h,f);break;case TASdk.ParabolicSAR:h=this.getParameterValue(e.IndicatorParam.MIN_AF);r=this.getParameterValue(e.IndicatorParam.MAX_AF);a=2;u=[h,r];t=p.parabolicSAR(this._createHighField(),this._createLowField(),h,r,f);break;case TASdk.DirectionalMovementSystem:u=
[d];t=p.directionalMovementSystem(this._createRecordset(),d);break;case TASdk.TrueRange:a=2;t=p.trueRange(this._createRecordset(),f);break;case TASdk.AverageTrueRange:u=[d];t=p.trueRange(this._createRecordset(),f);p=t.getField(f);t=TASdk.MovingAverage.prototype.simpleMovingAverage(p,d,f);break;case TASdk.Aroon:u=[d];t=p.aroon(this._createRecordset(),d);break;case TASdk.AroonOscillator:u=[d];t=p.aroon(this._createRecordset(),d);break;case TASdk.RainbowOscillator:r=this.getParameterValue(e.IndicatorParam.LEVELS);
a=r+1;u=[b.name,r,this._getMaTypeString(h)];t=p.rainbowOscillator(b,r,h,f);break;case TASdk.FractalChaosOscillator:u=[d];t=p.fractalChaosOscillator(this._createRecordset(),d,f);break;case TASdk.PrimeNumberOscillator:a=1;t=p.primeNumberOscillator(this._createCloseField(),f);break;case TASdk.ElderRay:u=[d,this._getMaTypeString(h)];t=p.elderRay(this._createRecordset(),d,h,f);break;case TASdk.EhlerFisherTransform:a=d+2;u=[d];t=p.ehlerFisherTransform(this._createRecordset(),d,f);break;case TASdk.SchaffTrendCycle:l=
this.getParameterValue(e.IndicatorParam.SHORT_CYCLE);m=this.getParameterValue(e.IndicatorParam.LONG_CYCLE);u=[b.name,d,l,m,this._getMaTypeString(h)];t=p.schaffTrendCycle(b,d,l,m,h,f);break;case TASdk.CenterOfGravity:u=[b.name,d];t=p.centerOfGravity(b,d,f);break;case TASdk.CoppockCurve:a=12;u=[b.name];t=p.coppockCurve(b,f);break;case TASdk.ChandeForecastOscillator:u=[b.name,d];t=p.chandeForecastOscillator(b,d,f);break;case TASdk.KlingerVolumeOscillator:m=this.getParameterValue(e.IndicatorParam.LONG_CYCLE);
l=this.getParameterValue(e.IndicatorParam.SHORT_CYCLE);a=Math.max(d,l)+1;u=[d,l,m,this._getMaTypeString(h)];t=p.klingerVolumeOscillator(this._createRecordset(),d,m,l,h,f);break;case TASdk.PrettyGoodOscillator:u=[d];t=p.prettyGoodOscillator(this._createRecordset(),d,f);break;case e.VolumeIndicator:case e.ColoredVolumeIndicator:break;case TASdk.McGinleysDynamic:u=[b.name,d];t=TASdk.MovingAverage.prototype.mcGinleysDynamic(b,d,f);break;case TASdk.MarketPriceProfile:a=1;f=this.getParameterValue(e.IndicatorParam.PCT_AREA);
p=this.getParameterValue(e.IndicatorParam.SHIFT_BASE);h=this.getParameterValue(e.IndicatorParam.STEP_PRICE);r=this.getParameterValue(e.IndicatorParam.BASE_TYPE);u=[f,h,p,1==r?"Day":"Week"];b=this._createRecordset();b.addField(this._createField(e.DataSeriesSuffix.DATE,"Date"));t=l.marketPriceProfile(b,f,h,p,r);for(f=0;f<t.getField(e.IndicatorField.MARKET_PRICE_PROFILE_MEDIAN).recordCount;f++)if(0<t.getField(e.IndicatorField.MARKET_PRICE_PROFILE_MEDIAN).value(f)){a=f;break}break;case TASdk.TrendSignal:a=
1;h=this.getParameterValue(e.IndicatorParam.MIN_TREND);this.getParameterValue(e.IndicatorParam.MAX_TREND);r=.06;t=p.trendSignal(this._createRecordset(),h,r,f);this.enableSimulate&&this.simulateIndicator&&(v=p.simulateTrendSignal(t));break;case TASdk.BoomVolume:a=1;t=p.boomVolumeHistogram(this._createBuyVolumeField(),this._createSellVolumeField(),f+" Histogram");break;case TASdk.MSTOI:a=1;t=p.MSTOIHistogram(this._createBuyVolumeField(),this._createSellVolumeField(),f+" Histogram");break;default:throw Error("Unsupported indicator: "+
this.taIndicator);}return{parameters:u?u.join(", "):"",recordSet:t,startIndex:a,simulate:v?v:new TASdk.Recordset}};c.prototype._createField=function(a,b){if(!a)return null;if(void 0===b)switch(a){case e.DataSeriesSuffix.OPEN:b=e.IndicatorField.OPEN;break;case e.DataSeriesSuffix.HIGH:b=e.IndicatorField.HIGH;break;case e.DataSeriesSuffix.LOW:b=e.IndicatorField.LOW;break;case e.DataSeriesSuffix.CLOSE:b=e.IndicatorField.CLOSE;break;case e.DataSeriesSuffix.VOLUME:b=e.IndicatorField.VOLUME}return(a=this._usePrimaryDataSeries?
this._chart.primaryDataSeries(a):this._chart.getDataSeries(a))?a.toField(b):null};c.prototype._createOpenField=function(){return this._createField(e.DataSeriesSuffix.OPEN,e.IndicatorField.OPEN)};c.prototype._createHighField=function(){return this._createField(e.DataSeriesSuffix.HIGH,e.IndicatorField.HIGH)};c.prototype._createLowField=function(){return this._createField(e.DataSeriesSuffix.LOW,e.IndicatorField.LOW)};c.prototype._createCloseField=function(){return this._createField(e.DataSeriesSuffix.CLOSE,
e.IndicatorField.CLOSE)};c.prototype._createVolumeField=function(){return this._createField(e.DataSeriesSuffix.VOLUME,e.IndicatorField.VOLUME)};c.prototype._createBuyVolumeField=function(){return this._createField(e.DataSeriesSuffix.BUY_VOLUME,e.IndicatorField.BUY_VOLUME)};c.prototype._createSellVolumeField=function(){return this._createField(e.DataSeriesSuffix.SELL_VOLUME,e.IndicatorField.SELL_VOLUME)};c.prototype._createRecordset=function(){var a=new TASdk.Recordset;a.addField(this._createOpenField());
a.addField(this._createHighField());a.addField(this._createLowField());a.addField(this._createCloseField());return a};c.prototype._updatePlotItem=function(a){return this.taIndicator===e.VolumeIndicator?(this._updateVolumeIndicator(this._plotItems[a]),!0):this.taIndicator===e.ColoredVolumeIndicator?(this._updateColoredVolumeIndicator(this._plotItems[a]),!0):!1};c.prototype._updateVolumeIndicator=function(a){var b=this._getLineTheme(0);a.dataSeries=this._usePrimaryDataSeries?this._chart.primaryDataSeries(e.DataSeriesSuffix.VOLUME):
this._chart.getDataSeries(e.DataSeriesSuffix.VOLUME);a.plot=new e.HistogramPlot({dataSeries:a.dataSeries,theme:b,plotStyle:e.HistogramPlot.Style.LINE});a.color=e.HtmlUtil.isDarkColor(this._chart.theme.plot.line.simple.strokeColor)?"rgb(51, 51, 51)":"white"};c.prototype._updateColoredVolumeIndicator=function(a){var b=null!=this.coloredVolumeTheme?this.coloredVolumeTheme:e.JsUtil.clone(this.chart.theme.plot.bar.candle);if(!this.coloredVolumeTheme){var d=e.HtmlUtil.toRgba(b.upCandle.fill.fillColor),
f=e.HtmlUtil.toRgba(b.downCandle.fill.fillColor);d.a=.4;f.a=.4;b.upCandle.fill.fillColor=e.HtmlUtil.toRgbString(d);b.downCandle.fill.fillColor=e.HtmlUtil.toRgbString(f)}this.coloredVolumeTheme=b;d=this._usePrimaryDataSeries?this._chart.primaryDataSeries(e.DataSeriesSuffix.OPEN):this._chart.getDataSeries(e.DataSeriesSuffix.OPEN);f=this._usePrimaryDataSeries?this._chart.primaryDataSeries(e.DataSeriesSuffix.CLOSE):this._chart.getDataSeries(e.DataSeriesSuffix.CLOSE);a.dataSeries=this._usePrimaryDataSeries?
this._chart.primaryDataSeries(e.DataSeriesSuffix.VOLUME):this._chart.getDataSeries(e.DataSeriesSuffix.VOLUME);a.plot=new e.HistogramPlot({dataSeries:[a.dataSeries,d,f],theme:b,plotStyle:e.HistogramPlot.Style.COLORED_COLUMN});a.color=e.HtmlUtil.isDarkColor(this._chart.theme.plot.line.simple.strokeColor)?"rgba(51, 51, 51, 0.3)":"white"};c.prototype._updateColoredHistogramIndicator=function(a){var b=null!=this.coloredVolumeTheme?this.coloredVolumeTheme:e.JsUtil.clone(this.chart.theme.plot.bar.candle);
if(!this.coloredVolumeTheme){var d=e.HtmlUtil.toRgba(b.upCandle.fill.fillColor),f=e.HtmlUtil.toRgba(b.downCandle.fill.fillColor);d.a=1;f.a=1;b.upCandle.fill.fillColor=e.HtmlUtil.toRgbString(d);b.downCandle.fill.fillColor=e.HtmlUtil.toRgbString(f)}this.coloredVolumeTheme=b;for(var h in b)a.plot.theme[h]=b[h];a.plot.plotStyle=e.HistogramPlot.Style.COLUMN_UPDOWN;a.color=e.HtmlUtil.isDarkColor(this._chart.theme.plot.line.simple.strokeColor)?"rgba(51, 51, 51, 0.3)":"white"};return c}(e.Indicator);e.TAIndicator=
k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
var __assign=this&&this.__assign||function(){__assign=Object.assign||function(e){for(var k,g=1,c=arguments.length;g<c;g++){k=arguments[g];for(var a in k)Object.prototype.hasOwnProperty.call(k,a)&&(e[a]=k[a])}return e};return __assign.apply(this,arguments)};
(function(e){var k=function(g){function c(a){var b=g.call(this,__assign({},a||{},{taIndicator:TASdk.IchimokuCloud}))||this;b._parameters="(params)";b._conversionLinePeriods=9;b._baseLinePeriods=26;b._loggingSpan2Periods=52;b._displacement=26;b._tenkanSenDataseries=null;b._kijunSenDataseries=null;b._chikouSpanDataseries=null;b._senkouSpanADataseries=null;b._senkouSpanBDataseries=null;b._tenkanSenPlotItem=null;b._kijunSenPlotItem=null;b._chikouSpanPlotItem=null;b._senkouSpanAPlotItem=null;b._senkouSpanBPlotItem=
null;b._kumoPlotItem=null;b._lines=[];b._tenkanSenLine={visible:!0,priceLine:!1,theme:{strokeColor:"rgb(4, 150, 255)",width:1,lineStyle:"solid"}};b._kijunSenLine={visible:!0,priceLine:!1,theme:{strokeColor:"rgb(153, 21, 21)",width:1,lineStyle:"solid"}};b._chikouSpanLine={visible:!0,priceLine:!1,theme:{strokeColor:"rgb(69, 153, 21)",width:1,lineStyle:"solid"}};b._senkouSpanALine={visible:!0,priceLine:!1,theme:{strokeColor:"rgb(0, 128, 0)",width:1,lineStyle:"solid"}};b._senkouSpanBLine={visible:!0,
priceLine:!1,theme:{strokeColor:"rgb(255, 0, 0)",width:1,lineStyle:"solid"}};b._kumo={visible:!0,theme:{fillColor:"rgba(0, 127, 255, 0.5)"}};a&&(b._conversionLinePeriods=a.conversionLinePeriods||9,b._baseLinePeriods=a.baseLinePeriods||26,b._loggingSpan2Periods=a.loggingSpan2Periods||52,b._displacement=a.displacement||26,b._tenkanSenLine=a.tenkanSenLine||b._tenkanSenLine,b._kijunSenLine=a.kijunSenLine||b._kijunSenLine,b._chikouSpanLine=a.chikouSpanLine||b._chikouSpanLine,b._senkouSpanALine=a.senkouSpanALine||
b._senkouSpanALine,b._senkouSpanBLine=a.senkouSpanBLine||b._senkouSpanBLine,b._kumo=a.kumo||b._kumo);b._lines.push(b._tenkanSenLine);b._lines.push(b._kijunSenLine);b._lines.push(b._chikouSpanLine);b._lines.push(b._senkouSpanALine);b._lines.push(b._senkouSpanBLine);b._lines.push(b._kumo);return b}__extends(c,g);Object.defineProperty(c.prototype,"lines",{get:function(){return this._lines},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"conversionLinePeriods",{get:function(){return this._conversionLinePeriods},
set:function(a){this._conversionLinePeriods=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"baseLinePeriods",{get:function(){return this._baseLinePeriods},set:function(a){this._baseLinePeriods=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"loggingSpan2Periods",{get:function(){return this._loggingSpan2Periods},set:function(a){this._loggingSpan2Periods=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"displacement",{get:function(){return this._displacement},
set:function(a){this._displacement=a},enumerable:!0,configurable:!0});c.prototype.getName=function(){return"Ichimoku Kinko Hyo"};c.prototype.getShortName=function(){return"Ichimoku Kinko Hyo"};c.prototype.getParametersString=function(){return this._parameters};c.prototype.serialize=function(){var a=g.prototype.serialize.call(this);a.isIchimokuIndicator=!0;return a=$.extend(!0,{conversionLinePeriods:this._conversionLinePeriods,baseLinePeriods:this._baseLinePeriods,loggingSpan2Periods:this._loggingSpan2Periods,
displacement:this._displacement,tenkanSenLine:this._tenkanSenLine,kijunSenLine:this._kijunSenLine,chikouSpanLine:this._chikouSpanLine,senkouSpanALine:this._senkouSpanALine,senkouSpanBLine:this._senkouSpanBLine,kumo:this._kumo},a)};c.prototype._initIndicator=function(){this._options.parameters={};this._isOverlay=!0;this._fieldNames="Tenkan Sen;Kijun Sen;Chikou Span;Senkou Span A;Senkou Span B;Kumo".split(";")};c.prototype.calculate=function(){var a=TASdk.Bands.prototype,b=[this._conversionLinePeriods,
this._baseLinePeriods,this._loggingSpan2Periods,this._displacement];return{parameters:b?b.join(", "):"",recordSet:a.ichimoku(this._createRecordset(),this._conversionLinePeriods,this._baseLinePeriods,this._loggingSpan2Periods),startIndex:1}};c.prototype.fixFirstNotNullIncorrectValue=function(a){if(!a)return a;for(var b=0,d=!0;d&&b<a.length;)null!=a.values[b]&&(a.values[b]=null,d=!1),b++;return a};c.prototype.getDataserieFromRecordSet=function(a,b,d){a=a&&a.getField(b);return this.fixFirstNotNullIncorrectValue(a?
e.DataSeries.fromField(a,d):new e.DataSeries(b))};c.prototype.shiftInToThePast=function(a,b){if(a.values.length<=b)return a;for(var d=0;d<b;d++)a.add(null);d=new e.DataSeries(a.name);a=a.values;a.splice(0,b);d.add(a);return d};c.prototype.shiftInToTheFuture=function(a,b){for(var d=new e.DataSeries(a.name),f=0;f<=a.length+b;f++)f<b?d.add(null):d.add(a.values[f-b]);return d};c.prototype.hidePlotItem=function(a){a.plot.visible=!1;this.showValuesInTitle||(a.titlePlotSpan.hide(),a.titleValueSpan.hide())};
c.prototype.showPlotItem=function(a){a.plot.visible=!0;this.showValuesInTitle&&(a.titlePlotSpan.show(),a.titleValueSpan.show())};c.prototype.update=function(){if(!this.isInitialized){var a=this.getName();this._tenkanSenDataseries=new e.DataSeries(a+" Ichimoku Tenkan Sen");this._kijunSenDataseries=new e.DataSeries(a+" Ichimoku Kijun Sen");this._chikouSpanDataseries=new e.DataSeries(a+" Ichimoku Chikou Span");this._senkouSpanADataseries=new e.DataSeries(a+" Ichimoku Senkou Span A");this._senkouSpanBDataseries=
new e.DataSeries(a+" Ichimoku Senkou Span B");this._panel||(this._panel=this._chart.mainPanel,this._initPanelTitle());a=new e.LinePlot({dataSeries:this._tenkanSenDataseries,theme:this._lines[0].theme});var b=new e.LinePlot({dataSeries:this._kijunSenDataseries,theme:this._lines[1].theme}),d=new e.LinePlot({dataSeries:this._chikouSpanDataseries,theme:this._lines[2].theme}),f=new e.LinePlot({dataSeries:this._senkouSpanADataseries,theme:this._lines[3].theme}),h=new e.LinePlot({dataSeries:this._senkouSpanBDataseries,
theme:this._lines[4].theme}),l=new e.KumoPlot({dataSeries:[this._senkouSpanADataseries,this._senkouSpanBDataseries],theme:this._lines[5].theme});this._tenkanSenPlotItem=this._addPlot(a,this._tenkanSenLine.theme.strokeColor);this._kijunSenPlotItem=this._addPlot(b,this._kijunSenLine.theme.strokeColor);this._chikouSpanPlotItem=this._addPlot(d,this._chikouSpanLine.theme.strokeColor);this._senkouSpanAPlotItem=this._addPlot(f,this._senkouSpanALine.theme.strokeColor);this._senkouSpanBPlotItem=this._addPlot(h,
this._senkouSpanBLine.theme.strokeColor);this._kumoPlotItem=this._addPlot(l,"transparent")}this._tenkanSenDataseries.clear();this._kijunSenDataseries.clear();this._chikouSpanDataseries.clear();this._senkouSpanADataseries.clear();this._senkouSpanBDataseries.clear();this._tenkanSenPlotItem.color=this._tenkanSenLine.theme.strokeColor;this._kijunSenPlotItem.color=this._kijunSenLine.theme.strokeColor;this._chikouSpanPlotItem.color=this._chikouSpanLine.theme.strokeColor;this._senkouSpanAPlotItem.color=
this._senkouSpanALine.theme.strokeColor;this._senkouSpanBPlotItem.color=this._senkouSpanBLine.theme.strokeColor;this._tenkanSenPlotItem.plot.showValueMarkers=this.showValueMarkers;this._kijunSenPlotItem.plot.showValueMarkers=this.showValueMarkers;this._chikouSpanPlotItem.plot.showValueMarkers=this.showValueMarkers;this._senkouSpanAPlotItem.plot.showValueMarkers=this.showValueMarkers;this._senkouSpanBPlotItem.plot.showValueMarkers=this.showValueMarkers;this.visible&&this._tenkanSenLine.visible?this.showPlotItem(this._tenkanSenPlotItem):
this.hidePlotItem(this._tenkanSenPlotItem);this.visible&&this._kijunSenLine.visible?this.showPlotItem(this._kijunSenPlotItem):this.hidePlotItem(this._kijunSenPlotItem);this.visible&&this._chikouSpanLine.visible?this.showPlotItem(this._chikouSpanPlotItem):this.hidePlotItem(this._chikouSpanPlotItem);this.visible&&this._senkouSpanALine.visible?this.showPlotItem(this._senkouSpanAPlotItem):this.hidePlotItem(this._senkouSpanAPlotItem);this.visible&&this._senkouSpanBLine.visible?this.showPlotItem(this._senkouSpanBPlotItem):
this.hidePlotItem(this._senkouSpanBPlotItem);this.visible&&this._kumo.visible?this.showPlotItem(this._kumoPlotItem):this.hidePlotItem(this._kumoPlotItem);a=this.calculate();this._parameters=a.parameters?"("+a.parameters+")":"";this._tenkanSenDataseries.add(this.getDataserieFromRecordSet(a.recordSet,"Ichimoku Tenkan Sen",a.startIndex).values);this._kijunSenDataseries.add(this.getDataserieFromRecordSet(a.recordSet,"Ichimoku Kijun Sen",a.startIndex).values);this._chikouSpanDataseries.add(this.shiftInToThePast(this.getDataserieFromRecordSet(a.recordSet,
"Ichimoku Chikou Span",a.startIndex),this._displacement).values);this._senkouSpanADataseries.add(this.shiftInToTheFuture(this.getDataserieFromRecordSet(a.recordSet,"Ichimoku Senkou Span A",a.startIndex),this._displacement).values);this._senkouSpanBDataseries.add(this.shiftInToTheFuture(this.getDataserieFromRecordSet(a.recordSet,"Ichimoku Senkou Span B",a.startIndex),this._displacement).values);this._updatePanelTitle();this.updateHoverRecord();this._panel.update()};c.prototype.showSettingsDialog=function(){var a=
this;e.UI.ViewLoader.ichimokuIndicatorSettingsDialog(function(b){b.show({chart:a.chart,ichimokuIndicator:a})})};c.prototype.clearDataSeries=function(a){for(var b=0,d=[this._tenkanSenDataseries,this._kijunSenDataseries,this._chikouSpanDataseries,this._senkouSpanADataseries,this._senkouSpanBDataseries];b<d.length;b++){var f=d[b];!f||a&&f!==a&&f.name!==a||f.clear()}};return c}(e.TAIndicator);e.IchimokuIndicator=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this,{taIndicator:TASdk.DBox})||this;b._parameters="(params)";b._darvasBoxLinePeriods=5;b._boxTop=1;b._boxBottom=1;b._topLineDataseries=null;b._bottomLineDataseries=null;b._topLinePlotItem=null;b._bottomLinePlotItem=null;b._lines=[];b._topLine={visible:!0,priceLine:!1,theme:{strokeColor:"white",width:1,lineStyle:"solid"}};b._bottomLine={visible:!0,priceLine:!1,theme:{strokeColor:"white",width:1,lineStyle:"solid"}};b.allowSettingsDialog=!0;
a&&(b._darvasBoxLinePeriods=a.darvasBoxLinePeriods||14,b._topLine=a.topLine||b._topLine,b._bottomLine=a.bottomLine||b._bottomLine);b._lines.push(b._topLine);b._lines.push(b._bottomLine);return b}__extends(c,g);Object.defineProperty(c.prototype,"lines",{get:function(){return this._lines},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"darvasBoxLinePeriods",{get:function(){return this._darvasBoxLinePeriods},set:function(a){this._darvasBoxLinePeriods=a},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"boxTop",{get:function(){return this._boxTop},set:function(a){this._boxTop=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"boxBottom",{get:function(){return this._boxBottom},set:function(a){this._boxBottom=a},enumerable:!0,configurable:!0});c.prototype.getName=function(){return"Darvas Box"};c.prototype.getShortName=function(){return"Darvas Box"};c.prototype.getParametersString=function(){return this._parameters};Object.defineProperty(c.prototype,
"projection",{get:function(){return this._panel&&this._panel.getProjection(this.valueScale)},enumerable:!0,configurable:!0});c.prototype.serialize=function(){var a=g.prototype.serialize.call(this);a.isDarvasBox=!0;return a=$.extend(!0,{LinePeriods:this._darvasBoxLinePeriods,boxTop:this._boxTop,boxBottom:this._boxBottom,topLine:this._topLine,bottomLine:this._bottomLine},a)};c.prototype._initIndicator=function(){this._options.parameters={};this._fieldNames=["Top Line","Bottom Line"]};c.prototype.calculate=
function(){var a=TASdk.Bands.prototype,b=[this._darvasBoxLinePeriods];return{parameters:b?b.join(", "):"",recordSet:a.darvasbox(this._createRecordset(),this._darvasBoxLinePeriods),startIndex:1}};c.prototype.fixFirstNotNullIncorrectValue=function(a){if(!a)return a;for(var b=0,d=!0;d&&b<a.length;)null!=a.values[b]&&(a.values[b]=null,d=!1),b++;return a};c.prototype.getDataserieFromRecordSet=function(a,b,d){a=a&&a.getField(b);return this.fixFirstNotNullIncorrectValue(a?e.DataSeries.fromField(a,d):new e.DataSeries(b))};
c.prototype.hidePlotItem=function(a){a.plot.visible=!1;a.titlePlotSpan.hide();a.titleValueSpan.hide()};c.prototype.showPlotItem=function(a){a.plot.visible=!0;a.titlePlotSpan.show();a.titleValueSpan.show()};c.prototype.update=function(){if(!this.isInitialized){this.showValuesInTitle=!0;for(var a=0,b=this.chart.primaryDataSeries(e.DataSeriesSuffix.HIGH),d=0;d<=this.boxTop;d++){var f=b.valueAtIndex(d);f>a&&(a=f)}this._topLineDataseries=new e.DataSeries(this.getName()+" Top Line");b=this.chart.primaryDataSeries(e.DataSeriesSuffix.LOW);
for(d=0;d<=this.boxBottom;d++)f=b.valueAtIndex(d),f<a&&(a=f);this._bottomLineDataseries=new e.DataSeries(this.getName()+"Bottom Line");this._panel||(this._panel=this._chart.mainPanel,this._initPanelTitle());d=new e.LinePlot({dataSeries:this._topLineDataseries,theme:this._lines[0].theme});f=new e.LinePlot({dataSeries:this._bottomLineDataseries,theme:this._lines[1].theme});this._topLinePlotItem=this._addPlot(d,this._topLine.theme.strokeColor);this._bottomLinePlotItem=this._addPlot(f,this._bottomLine.theme.strokeColor)}this._topLineDataseries.clear();
this._bottomLineDataseries.clear();this._topLinePlotItem.color=this._topLine.theme.strokeColor;this._bottomLinePlotItem.color=this._bottomLine.theme.strokeColor;this.visible&&(this._topLine.visible?this.showPlotItem(this._topLinePlotItem):this.hidePlotItem(this._topLinePlotItem),this._bottomLine.visible?this.showPlotItem(this._bottomLinePlotItem):this.hidePlotItem(this._bottomLinePlotItem));d=this.calculate();this._parameters=d.parameters?"("+d.parameters+")":"";this._topLineDataseries.add(this.getDataserieFromRecordSet(d.recordSet,
"Top Line",d.startIndex).values);this._bottomLineDataseries.add(this.getDataserieFromRecordSet(d.recordSet,"Bottom Line",d.startIndex).values);this._updatePanelTitle();this.updateHoverRecord();this._panel.update()};c.prototype.showSettingsDialog=function(){var a=this;e.UI.ViewLoader.darvasBoxSettingsDialog(function(b){b.show({chart:a.chart,dBox:a})})};c.prototype.clearDataSeries=function(a){for(var b=0,d=[this._topLineDataseries,this._bottomLineDataseries];b<d.length;b++){var f=d[b];!f||a&&f!==a&&
f.name!==a||f.clear()}};return c}(e.TAIndicator);e.DarvasBox=k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.CrossHairType={NONE:"none",MARKERS:"markers",CROSS:"cross",CROSS_BARS:"crossBars"};Object.freeze(e.CrossHairType);var k=function(g){function c(a){var b=g.call(this,a)||this;b._view=new e.CrossHairView(b);b.visible=!0;b.loadState(a);return b}__extends(c,g);Object.defineProperty(c.prototype,"crossHairType",{get:function(){return this._options.crossHairType},set:function(a){var b=this._options.crossHairType;b!==a&&(this._options.crossHairType=a,this._view.updateVisibility(),this.chart.fireValueChanged(e.ChartEvent.CROSS_HAIR_CHANGED,
a,b))},enumerable:!0,configurable:!0});c.prototype._subscribe=function(){var a=this;g.prototype._subscribe&&g.prototype._subscribe.call(this);this.chart.on(e.ChartEvent.THEME_CHANGED+".scxCrossHair",function(){a.applyTheme()},this).on(e.ChartEvent.LOCALE_CHANGED+".scxCrossHair",function(){a.update()},this).on(e.ChartEvent.TIME_INTERVAL_CHANGED+".scxCrossHair",function(){a.update()},this)};c.prototype._unsubscribe=function(){this.chart.off(".scxCrossHair",this);g.prototype._unsubscribe&&g.prototype._unsubscribe.call(this)};
c.prototype.layout=function(){this._view.layout()};c.prototype.applyTheme=function(){this._view.applyTheme()};c.prototype.update=function(){this._view.updateMarkers();this._view.updatePosition(!0)};c.prototype.show=function(){this.visible=!0;this._view.updatePosition(!0);this._view.updateVisibility(!0)};c.prototype.hide=function(){this.visible=!1;this._view.updateVisibility(!1)};c.prototype.saveState=function(){return e.JsUtil.clone(this._options)};c.prototype.loadState=function(a){this._options=
{};this.crossHairType=a&&a.crossHairType||e.CrossHairType.NONE};c.prototype.setPosition=function(a,b){this._view.setPosition(a,b)};c.prototype.handleMouseHoverGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:this._view.updateVisibility(!0);break;case e.GestureState.FINISHED:this._view.updateVisibility(!1);break;case e.GestureState.CONTINUED:this.crossHairType!==e.CrossHairType.NONE&&this.setPosition(b.pointerPosition)}};c.prototype.destroy=function(){this._view.destroy();g.prototype.destroy.call(this)};
return c}(e.ChartComponent);e.CrossHair=k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k={HOR_LINE:"scxCrossHairHorLine",VER_LINE:"scxCrossHairVerLine",NOTE:"scxCrossHairMarker",DATE_MARKER:"scxCrossHairDateMarker",VALUE_MARKER:"scxCrossHairValueMarker",CROSS_HAIR:"scxCrossHair",CROSS_HAIR_CONTAINER:"scxCrossHairContainer"};Object.freeze(k);var g=function(c){function a(b){var d=c.call(this)||this;d._position=null;d._prevPosition={};d._positionAnimation=new e.Animation({callback:d.updatePosition});d._crossHair=b;return d}__extends(a,c);Object.defineProperty(a.prototype,
"chart",{get:function(){return this._crossHair.chart},enumerable:!0,configurable:!0});a.prototype._createContainer=function(){return this.chart.rootDiv.scxAppend("div",k.CROSS_HAIR_CONTAINER)};a._applyMarkerTheme=function(b,d){b.scxTextStyle(d.text).scxFill(d.fill)};a._updateValueMarkerMetrics=function(b){var d=b.$control;d.text()||d.text("1");b.halfHeight=d.height()/2};a._updateDateMarkerMetrics=function(b,d){var f=b.$control;f.text(d).width("auto");d=Math.round(1.2*f.width());b.halfWidth=Math.round(d/
2);f.width(d)};a.prototype._createValueMarker=function(){return{visible:!0,halfHeight:0,$control:this.container.scxAppend("span",[k.NOTE,k.VALUE_MARKER])}};a.prototype._createDateMarker=function(){return{visible:!0,halfWidth:0,$control:this.container.scxAppend("span",[k.NOTE,k.DATE_MARKER])}};a.prototype._createControls=function(){var b=this.container;this._controls={lines:{visible:!0,$horLine:b.scxAppend("div",k.HOR_LINE),$verLine:b.scxAppend("div",k.VER_LINE)},leftMarkers:[],rightMarkers:[],topMarker:this._createDateMarker(),
bottomMarker:this._createDateMarker()};this.applyTheme();this.updateVisibility(!1)};a.prototype._syncValueMarkers=function(){var b=this._controls.leftMarkers,d=this._controls.rightMarkers,f=b.length-this.chart.valueScales.length;if(0<f)b.splice(-f,f),d.splice(-f,f);else if(0>f){for(var h=0;h<-f;h++)b.push(this._createValueMarker()),d.push(this._createValueMarker());this.applyTheme();this.updateVisibility(!1)}};a.prototype.layout=function(){c.prototype.layout.call(this);this._controls||this._createControls();
this._syncValueMarkers();var b=this.chart,d=this._controls,f=b.chartPanelsContainer.panelsContentFrame;d.lines.$horLine.css("left",f.left).width(f.width);d.lines.$verLine.css("top",f.top).height(f.height);f=b.valueScales;for(var h=0;h<f.length;h++){var l=f[h].leftPanel.frame;l&&d.leftMarkers[h].$control.css("left",l.left+1).outerWidth(l.width-2);(l=f[h].rightPanel.frame)&&d.rightMarkers[h].$control.css("left",l.left+1).outerWidth(l.width-2)}b=b.dateScale;(f=b.topPanel.frame)&&d.topMarker.$control.css("top",
f.top+1).outerHeight(f.height-2).css("line-height",f.height-2+"px");(b=b.bottomPanel.frame)&&d.bottomMarker.$control.css("top",b.top+1).outerHeight(b.height-2).css("line-height",b.height-2+"px")};a.prototype.applyTheme=function(){var b=this.chart.theme.crossHair,d=this._controls;d.lines.$horLine.scxBorder("border-top",b.line);d.lines.$verLine.scxBorder("border-left",b.line);for(var f=0,h=d.leftMarkers;f<h.length;f++){var l=h[f];a._applyMarkerTheme(l.$control,b)}f=0;for(h=d.rightMarkers;f<h.length;f++)l=
h[f],a._applyMarkerTheme(l.$control,b);a._applyMarkerTheme(d.topMarker.$control,b);a._applyMarkerTheme(d.bottomMarker.$control,b);this.updateMarkers()};a.prototype.update=function(){};a.prototype.updateVisibility=function(b){var d=this._controls;if(d){var f=this._crossHair.crossHairType,h=this.chart.rootDiv;b=this._crossHair.visible&&b&&f!==e.CrossHairType.NONE;!b||f!==e.CrossHairType.CROSS&&f!==e.CrossHairType.CROSS_BARS?h.removeClass(k.CROSS_HAIR):h.addClass(k.CROSS_HAIR);h=b&&f!==e.CrossHairType.NONE;
for(var l=this.chart.valueScales,m=0;m<l.length&&!(m>=d.leftMarkers.length);m++){var q=h&&l[m].leftPanelVisible,p=h&&l[m].rightPanelVisible;d.leftMarkers[m].visible=q;d.rightMarkers[m].visible=p;e.HtmlUtil.setVisibility(d.leftMarkers[m].$control,q);e.HtmlUtil.setVisibility(d.rightMarkers[m].$control,p)}f=f===e.CrossHairType.CROSS||f===e.CrossHairType.CROSS_BARS;b=d.lines.visible=b&&f;e.HtmlUtil.setVisibility(d.lines.$horLine,b);e.HtmlUtil.setVisibility(d.lines.$verLine,b);f=this.chart.dateScale;b=
d.topMarker.visible=h&&f.topPanelVisible;h=d.bottomMarker.visible=h&&f.bottomPanelVisible;e.HtmlUtil.setVisibility(d.topMarker.$control,b);e.HtmlUtil.setVisibility(d.bottomMarker.$control,h)}};a.prototype.setPosition=function(b,d){this._position=b;d?this._positionAnimation.start():this.updatePosition()};a.prototype.updatePosition=function(b){if(this._positionAnimation){this._positionAnimation.stop();var d=this._position;if(d){var f=this.chart,h=f.findPanelAt(d.y);if(h){var l=this._controls,m=this._prevPosition,
q=this._crossHair.crossHairType;if(m.x!==d.x||!0===b){m.x=d.x;var p=f.dateScale,r=p.projection;q===e.CrossHairType.CROSS_BARS&&(d.x=r.xByRecord(r.recordByX(d.x,!0)));l.lines.visible&&l.lines.$verLine.css("left",d.x);q=l.topMarker;var v=l.bottomMarker;if(q.visible||v.visible)r=r.dateByColumn(r.columnByX(d.x)),p=p.formatDate(r),this._updateDateMarker(q,p),this._updateDateMarker(v,p)}if(m.y!==d.y||!0===b)for(m.y=d.y,l.lines.visible&&l.lines.$horLine.css("top",d.y),b=f.valueScales,d=d.y-h.frame.top-f.chartPanelsContainer.frame.top,
f=0;f<b.length;f++)if(m=l.leftMarkers[f],p=l.rightMarkers[f],m.visible||p.visible)q=h.valueScales[f],v=q.projection.valueByY(d),q=q.formatValue(v),this._updateValueMarker(m,q),this._updateValueMarker(p,q)}}}};a.prototype.updateMarkers=function(){var b=this._controls;if(b){for(var d=0,f=b.leftMarkers;d<f.length;d++){var h=f[d];a._updateValueMarkerMetrics(h)}d=0;for(f=b.rightMarkers;d<f.length;d++)h=f[d],a._updateValueMarkerMetrics(h);h=this.chart.dateScale.formatDate(new Date(0));a._updateDateMarkerMetrics(b.topMarker,
h);a._updateDateMarkerMetrics(b.bottomMarker,h)}};a.prototype._updateValueMarker=function(b,d){b.visible&&b.$control.text(d).css("top",this._position.y-b.halfHeight)};a.prototype._updateDateMarker=function(b,d){if(b.visible){var f=this.container.width();f=this._position.x>f-b.halfWidth?f-2*b.halfWidth:this._position.x-b.halfWidth;b.$control.text(d).css("left",Math.max(f,0))}};return a}(e.HtmlComponent);e.CrossHairView=g})(StockChartX||(StockChartX={}));(function(e){})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
__awaiter=this&&this.__awaiter||function(e,k,g,c){return new (g||(g=Promise))(function(a,b){function d(l){try{h(c.next(l))}catch(m){b(m)}}function f(l){try{h(c["throw"](l))}catch(m){b(m)}}function h(l){l.done?a(l.value):(new g(function(m){m(l.value)})).then(d,f)}h((c=c.apply(e,k||[])).next())})};
__generator=this&&this.__generator||function(e,k){function g(l){return function(m){return c([l,m])}}function c(l){if(b)throw new TypeError("Generator is already executing.");for(;a;)try{if(b=1,d&&(f=l[0]&2?d["return"]:l[0]?d["throw"]||((f=d["return"])&&f.call(d),0):d.next)&&!(f=f.call(d,l[1])).done)return f;if(d=0,f)l=[l[0]&2,f.value];switch(l[0]){case 0:case 1:f=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++;d=l[1];l=[0];continue;case 7:l=a.ops.pop();a.trys.pop();continue;
default:if(!(f=a.trys,f=0<f.length&&f[f.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!f||l[1]>f[0]&&l[1]<f[3]))a.label=l[1];else if(6===l[0]&&a.label<f[1])a.label=f[1],f=l;else if(f&&a.label<f[2])a.label=f[2],a.ops.push(l);else{f[2]&&a.ops.pop();a.trys.pop();continue}}l=k.call(e,a)}catch(m){l=[6,m],d=0}finally{b=f=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},b,d,f,h;return h={next:g(0),
"throw":g(1),"return":g(2)},"function"===typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h};
(function(e){var k=function(g){function c(a){var b=g.call(this,a&&a.chart)||this;b.autoSave=!0;b.autoLoad=!0;a&&(null!=a.autoSave&&(b.autoSave=a.autoSave),null!=a.autoLoad&&(b.autoLoad=a.autoLoad));b._subscribe();return b}__extends(c,g);c.prototype._subscribe=function(){$(window).on("beforeunload.scxLocalChartStateHandler",this,this._onBeforeUnloadWindow)};c.prototype._unsubscribe=function(){$(window).off(".scxLocalChartStateHandler",this._onBeforeUnloadWindow)};c.prototype._onBeforeUnloadWindow=
function(a){a=a.data;a.autoSave&&a.save().catch(function(b){return e.UI.Notification.error(b.message)})};c.prototype.save=function(){return __awaiter(this,void 0,void 0,function(){var a,b,d,f;return __generator(this,function(h){switch(h.label){case 0:a=this.chart;if(!a)return[2];b=this._generateKey();d=JSON.stringify(a.saveState());f=new e.LocalDataStore;return[4,f.save(b,d)];case 1:return h.sent(),[2]}})})};c.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){var a,b,d,f,h;
return __generator(this,function(l){switch(l.label){case 0:a=this.chart;if(!a)return[2,!1];b=this._generateKey();d=new e.LocalDataStore;return[4,d.load(b)];case 1:f=l.sent();if(!f)return[2,!1];try{h=JSON.parse(f)}catch(m){throw Error("Chart state is corrupted.");}try{a.loadState(h)}catch(m){throw Error("Load chart state failed: "+m);}return[2,!0]}})})};c.prototype.clear=function(){return __awaiter(this,void 0,void 0,function(){var a,b,d;return __generator(this,function(f){switch(f.label){case 0:a=
this.chart;if(!a)return[2];b=this._generateKey();d=new e.LocalDataStore;return[4,d.clear(b)];case 1:return f.sent(),[2]}})})};c.prototype._generateKey=function(){return"chart|"+window.location.pathname+"|"+this._getUrlParameter("uid")};c.prototype._getUrlParameter=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(window.location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))};return c}(e.ChartHandler);e.LocalChartStateHandler=
k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k={FullscreenChanged:"scxFullscreenChanged",FullWindowChanged:"scxFullWindowChanged"};Object.freeze(k);e.WindowMode={NORMAL:"normal",FULL_SCREEN:"full-screen",FULL_WINDOW:"full-window"};Object.freeze(e.WindowMode);var g=function(c){function a(b){b=c.call(this,b)||this;b._mode=e.WindowMode.NORMAL;b._subscribe();return b}__extends(a,c);Object.defineProperty(a.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"prevMode",
{get:function(){return this._prevMode},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isInFullWindowMode",{get:function(){var b=this._mode;return b===e.WindowMode.FULL_WINDOW||b===e.WindowMode.FULL_SCREEN},enumerable:!0,configurable:!0});a.prototype._subscribe=function(){var b=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange",""].join(".scxWindowModeHandler, ");$(document).on(b,this,this._onFullScreenChanged);$(window).on("resize.scxWindowModeHandler",
this,this._onWindowResize)};a.prototype._unsubscribe=function(){$(document).off(".scxWindowModeHandler",this._onFullScreenChanged);$(window).off(".scxWindowModeHandler",this._onWindowResize)};a.prototype._onWindowResize=function(b){b=b.data;b.isInFullWindowMode&&b.adjustFullWindowSize()};a.prototype._onFullScreenChanged=function(b){b.data._handleFullscreenChange(b)};a.prototype.setMode=function(b){if(this._mode!==b){this._prevMode=this._mode;this._mode=b;try{switch(b){case e.WindowMode.NORMAL:this._exitFullscreen();
this._exitFullWindow();break;case e.WindowMode.FULL_SCREEN:this._enterFullWindow();this._enterFullscreen();break;case e.WindowMode.FULL_WINDOW:this._exitFullscreen();this._enterFullWindow();break;default:throw Error("Unknown window mode: "+b);}this.chart.fireValueChanged(e.ChartEvent.WINDOW_MODE_CHANGED,b,this._prevMode)}catch(d){e.UI.Notification.error(d)}}};a.prototype._enterFullscreen=function(){if(!e.HtmlUtil.isFullscreenEnabled())throw Error("Fullscreen mode is not enabled.");this._isSelfRaisedEvent=
!0;e.HtmlUtil.enterFullscreen(this.chart.container[0]);$(document).trigger(k.FullscreenChanged,this.chart)};a.prototype._exitFullscreen=function(){this._isSelfRaisedEvent=!0;e.HtmlUtil.exitFullscreen();$(document).trigger(k.FullscreenChanged,this.chart);$("body").trigger(eventClickByPlatform)};a.prototype._handleFullscreenChange=function(b){if(this._isSelfRaisedEvent)this._isSelfRaisedEvent=!1,b=$("body"),this.mode===e.WindowMode.FULL_SCREEN?(b.addClass("scxFullScreen"),this.adjustFullWindowSize()):
b.removeClass("scxFullScreen"),$(window).trigger(k.FullscreenChanged,this.chart);else if(this.mode===e.WindowMode.FULL_SCREEN){var d=!1,f=$(b.target);if(f&&$(f).is(this.chart.container))d=!0;else if(f=e.Environment.browser,f===e.Browser.firefox||f===e.Browser.ie)f=f===e.Browser.firefox?b.target.mozFullScreenElement:b.target.msFullscreenElement,d=!f;d&&this.setMode(this._prevMode||e.WindowMode.NORMAL)}};a.prototype._enterFullWindow=function(){var b=this.chart;this._preFullWindowSize||(this._preFullWindowSize=
b.size);b.container.addClass("scxFullWindow");this.adjustFullWindowSize();$(window).trigger(k.FullWindowChanged,b)};a.prototype._exitFullWindow=function(){var b=this.chart;b.container.removeClass("scxFullWindow");b.size=this._preFullWindowSize;this._preFullWindowSize=null;$(window).trigger(k.FullWindowChanged,b);b.setNeedsUpdate()};a.prototype.adjustFullWindowSize=function(){var b=this.chart,d=b.container,f=b.scrollEnabled&&null!=b.scrollbar?b.scrollbar.outerHeight:0;d.outerWidth(window.innerWidth-
3).outerHeight(window.innerHeight-3);b.size={width:d.innerWidth()-1,height:d.innerHeight()-b.rootDiv.position().top-1-f};b.setNeedsUpdate()};return a}(e.ChartHandler);e.WindowModeHandler=g})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){a=g.call(this,a)||this;a._subscribe();return a}__extends(c,g);c.prototype._subscribe=function(){$(window).on("keydown.scxKeyboardHandler",this,this._handleKeyDown)};c.prototype._unsubscribe=function(){$(window).off(".scxKeyboardHandler",this._handleKeyDown)};c.prototype._handleKeyDown=function(a){var b=a.data;b.chart.keyboardEventsEnabled&&(a.target!==document.activeElement||$(a.target).hasClass("modal-open")||$(a.target).hasClass("form-control")||b._handleKey(a))};
c.prototype._handleKey=function(a){var b=a.ctrlKey||a.metaKey,d=this.chart;switch(a.keyCode){case 107:d.zoomEnabled&&(d.zoomOnPixels(.05*d.size.width),d.setNeedsUpdate(!0));break;case 109:d.zoomEnabled&&(d.zoomOnPixels(-.05*d.size.width),d.setNeedsUpdate(!0));break;case 37:d.scrollEnabled&&(d.scrollOnPixels(.05*d.size.width),d.setNeedsUpdate(!0));break;case 39:d.scrollEnabled&&(d.scrollOnPixels(-.05*d.size.width),d.setNeedsUpdate(!0));break;case 46:d=(b=d.selectedObject)&&b.chartPanel;if(!d)return;
b.tooltip.hide();d.removeDrawings(b);break;case 67:if(!b)return;d._copyDrawing();break;case 86:if(!b)return;d._pasteDrawing();break;default:return}a.preventDefault()};return c}(e.ChartHandler);e.KeyboardHandler=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this,a.chart)||this;b._spread=new e.Spread;b.ask=a.ask;b.bid=a.bid;b.theme=a.theme;return b}__extends(c,g);Object.defineProperty(c.prototype,"chartPanel",{get:function(){return this.chart.mainPanel},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",{get:function(){return this._spread.visible},set:function(a){this._spread.visible=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ask",{get:function(){return this._spread.ask},
set:function(a){this._spread.ask=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"bid",{get:function(){return this._spread.bid},set:function(a){this._spread.bid=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"theme",{get:function(){return this._spread.theme},set:function(a){this._spread.theme=a},enumerable:!0,configurable:!0});c.prototype.layout=function(){var a=this.chartPanel,b=this._spread;this.visible&&!a.containsObject(b)?a.addObjects(b):!this.visible&&
a.containsObject(b)&&a.removeObjects(b)};return c}(e.ChartHandler);e.SpreadHandler=k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this,a.chart)||this;b._theme=a.theme||b.chart.theme.dateScale.breakLine.stroke;b._time=a.time||{hours:18,minutes:0};b._breakLines=new e.BreakLines({breakLinesHandler:b});return b}__extends(c,g);Object.defineProperty(c.prototype,"time",{get:function(){return this._time},set:function(a){a.hours=24<a.hours||0>a.hours?0:a.hours;a.minutes=60<a.minutes||0>a.hours?0:a.minutes;this._time=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"theme",{get:function(){return this._theme},set:function(a){this._theme=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"chartPanel",{get:function(){return this.chart.mainPanel},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",{get:function(){return this._breakLines.visible},set:function(a){this._breakLines.visible=a},enumerable:!0,configurable:!0});c.prototype.layout=function(){var a=this.chartPanel,b=this._breakLines;this.visible&&!a.containsObject(b)?
a.addObjects(b):!this.visible&&a.containsObject(b)&&a.removeObjects(b)};return c}(e.ChartHandler);e.BreakLinesHandler=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.ZoomInMode={DATE_RANGE:"dateRange",RECT:"rect"};Object.freeze(e.ZoomInMode);var k={ZOOM_RECTANGLE:"scxZoomRectangle",ZOOM_IN:"scxZoomIn"};Object.freeze(k);var g=function(c){function a(){var b=null!==c&&c.apply(this,arguments)||this;b._positionAnimation=new e.Animation({callback:b.draw});b.zoomMode=e.ZoomInMode.DATE_RANGE;b._panelTop=0;b._panelHeight=0;return b}__extends(a,c);Object.defineProperty(a.prototype,"theme",{get:function(){return this._theme||this.chart.theme.zoomIn},set:function(b){this._theme=
b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"container",{get:function(){return this.panel.container},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"chart",{get:function(){return this.panel.chart},enumerable:!0,configurable:!0});a.prototype._initGestures=function(){return new e.GestureArray([new e.ClickGesture({handler:this._handleMouseClickGesture,hitTest:this.hitTest}),new e.MouseHoverGesture({handler:this._handleMouseMoveGesture,hitTest:this.hitTest})],
this)};a.prototype._handleMouseClickGesture=function(b,d){if(this.chart.state===e.ChartState.ZOOM_IN){this._panelTop=this.panel.frame.top;this._panelHeight=this.panel.frame.height;this._addPoint({x:d.pointerPosition.x,y:d.pointerPosition.y-this._panelTop});if(1===this._points.length)this._createControls();else if(2===this._points.length){this.finishDraw();return}this.updateVisibility(!0);this.setPosition()}};a.prototype._handleMouseMoveGesture=function(b,d){null!=this._startPoint&&this.movePosition({x:d.pointerPosition.x,
y:d.pointerPosition.y-this._panelTop})};a.prototype.hitTest=function(b){return this.panel.contentFrame.containsPoint(b)};a.prototype._createControls=function(){this.panel&&(this._controls={rectangle:this.container.scxAppend("div",k.ZOOM_RECTANGLE)},this.applyTheme(),this.updateVisibility(!1))};a.prototype._addPoint=function(b){null==this._points&&(this._points=[]);this._points.push(b)};a.prototype.finishDraw=function(){var b=this.chart,d=b.dateScale.projection,f=this._points;b.state=e.ChartState.NORMAL;
this.updateVisibility(!1);var h=d.recordByX(Math.min(f[0].x,f[1].x));d=d.recordByX(Math.max(f[0].x,f[1].x));if(d>h){if(0>h&&(h=0,d<=h))return;b.recordRange(h,d);b.setNeedsUpdate();this.zoomMode===e.ZoomInMode.RECT?this._setScalesValues(f[0].y,f[1].y):b.setNeedsAutoScale()}this._points=null;this.container.find("."+k.ZOOM_RECTANGLE).remove();b.fireValueChanged(e.ChartEvent.ZOOM_IN_FINISHED)};a.prototype.cancelDraw=function(){this._points=null;this.panel&&(this.updateVisibility(!1),this.container.find("."+
k.ZOOM_RECTANGLE).remove())};a.prototype.applyTheme=function(){var b=this.theme;this._controls.rectangle.scxBorder("border",b.border).scxFill(b.fill)};a.prototype.updateVisibility=function(b){var d=this._controls;this._controls&&(b?this.container.addClass(k.ZOOM_IN):this.container.removeClass(k.ZOOM_IN),e.HtmlUtil.setVisibility(d.rectangle,b))};a.prototype.setPosition=function(b){this._startPoint=this._points[0];b?this._positionAnimation.start():this.draw()};a.prototype.movePosition=function(b,d){this._movePoint=
b;d?this._positionAnimation.start():this.draw()};a.prototype.draw=function(){if(this._positionAnimation){this._positionAnimation.stop();var b=this._startPoint;if(b){var d=null==this._movePoint?b:this._movePoint;d.x>this.panel.contentFrame.width&&(d.x=this.panel.contentFrame.width);if(this.zoomMode===e.ZoomInMode.DATE_RANGE){var f=0;var h=Math.abs(d.x-b.x);var l=this._panelHeight;var m=b.x>d.x?d.x:b.x}else h=Math.abs(d.x-b.x),l=Math.abs(d.y-b.y),b.x<=d.x?(m=b.x,f=b.y<=d.y?b.y:d.y):(m=d.x,f=b.y<=d.y?
d.y-l:d.y);b=this._controls.rectangle;b.scxFrame({left:m,top:f,width:h,height:l});b.css("position","absolute")}}};a.prototype._setScalesValues=function(b,d){for(var f=0,h=this.chart.chartPanels;f<h.length;f++)for(var l=0,m=h[f].valueScales;l<m.length;l++){var q=m[l],p=q.projection.valueByY(b),r=q.projection.valueByY(d);q.minVisibleValue=Math.min(p,r);q.maxVisibleValue=Math.max(p,r)}};a.prototype.destroy=function(){this._controls.rectangle.remove();this._controls=null};return a}(e.Control);e.ZoomInView=
g})(StockChartX||(StockChartX={}));
(function(e){e.XPointBehavior={X:"x",RECORD:"record",DATE:"date"};Object.freeze(e.XPointBehavior);e.YPointBehavior={Y:"y",VALUE:"value"};Object.freeze(e.YPointBehavior);var k=function(){function g(c){c=c||{};null!=c.x&&(this.x=c.x);null!=c.y&&(this.y=c.y);null!=c.date&&(this.date="string"===typeof c.date?new Date(c.date):c.date);null!=c.value&&(this.value=c.value);null!=c.record&&(this.record=c.record)}g.convert=function(c,a,b){var d={};switch(a.x){case e.XPointBehavior.X:d.x=c.x;break;case e.XPointBehavior.RECORD:d.record=
null!=c.x?b.recordByX(c.x,!1):null;break;case e.XPointBehavior.DATE:d.date=null!=c.x?b.dateByX(c.x):null;break;default:throw Error("Unknown X point behavior: "+a.x);}switch(a.y){case e.YPointBehavior.Y:d.y=c.y;break;case e.YPointBehavior.VALUE:d.value=null!=c.y?b.valueByY(c.y):null;break;default:throw Error("Unknown Y point behavior: "+a.y);}return new g(d)};g.prototype.clear=function(){delete this.x;delete this.y;delete this.date;delete this.value;delete this.record};g.prototype.getX=function(c){return null!=
this.x?this.x:null!=this.date?c.xByDate(this.date):null!=this.record?c.xByRecord(this.record,!1):null};g.prototype.getDate=function(c){return null!=this.x?c.dateByX(this.x):null!=this.date?this.date:null!=this.record?c.dateByX(c.xByRecord(this.record,!1)):null};g.prototype.getRecord=function(c){return null!=this.x?c.recordByX(this.x,!1):null!=this.date?c.recordByX(c.xByDate(this.date,!1),!1):null!=this.record?this.record:null};g.prototype.getY=function(c){return null!=this.y?this.y:null!=this.value?
c.yByValue(this.value):null};g.prototype.getValue=function(c){return null!=this.value?this.value:null!=this.y?c.valueByY(this.y):null};g.prototype.toPoint=function(c){return{x:this.getX(c),y:this.getY(c)}};g.prototype.moveTo=function(c,a,b){return this.moveToX(c,b).moveToY(a,b)};g.prototype.moveToPoint=function(c,a){return this.moveTo(c.x,c.y,a)};g.prototype.moveToX=function(c,a){null!=this.x?this.x=c:null!=this.date?this.date=null!=c?a.dateByX(c):null:null!=this.record&&(this.record=null!=c?a.recordByX(c,
!1):null);return this};g.prototype.moveToY=function(c,a){null!=this.y?this.y=c:null!=this.value&&(this.value=null!=c?a.valueByY(c):null);return this};g.prototype.translate=function(c,a,b){var d=this.getX(b),f=this.getY(b);return this.moveTo(null!=d?d+c:null,null!=f?f+a:null,b)};return g}();e.ChartPoint=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this)||this;b._parent=a.parent;b._setup(b._parent);a.size&&(b.size=a.size);return b}__extends(c,g);Object.defineProperty(c.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"size",{get:function(){return{width:this._canvas.width(),height:this._canvas.height()}},set:function(a){var b=this._canvas;b.width()!==a.width&&b.attr("width",a.width);b.height()!==a.height&&b.attr("height",a.height)},enumerable:!0,configurable:!0});c.prototype.destroy=function(){this._parent&&(this._parent.remove(),this._parent=null);this._context=this._canvas=null};c.prototype._setup=function(a){this._canvas=a.scxAppendCanvas();this._context=this._canvas.get(0).getContext("2d")};return c}(e.Component);
e.Layer=k})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){var b=g.call(this,a)||this;b.width=null;b.theme=null;a&&(b.theme=a.theme,b.width=a.width);return b}__extends(c,g);Object.defineProperty(c.prototype,"actualTheme",{get:function(){return this.theme||this.chart.theme.selectionMarker},enumerable:!0,configurable:!0});c.prototype.draw=function(a,b){var d=this.actualTheme;a.scxApplyFillTheme(d.fill).scxApplyStrokeTheme(d.line);if(Array.isArray(b))for(d=0;d<b.length;d++)this._drawMarker(a,b[d]);else this._drawMarker(a,
b)};c.prototype._drawMarker=function(a,b){a.beginPath();a.arc(b.x,b.y,this.width,0,2*Math.PI);a.fill();a.stroke()};return c}(e.ChartComponent);e.SelectionMarker=k})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k;(function(a){a.PANEL_CHANGED="drawingPanelChanged";a.VALUE_SCALE_CHANGED="drawingValueScaleChanged";a.VISIBLE_CHANGED="drawingVisibleChanged";a.POINTS_CHANGED="drawingPointsChanged";a.LOCKED_CHANGED="drawingLockedChanged";a.RESIZABLE_CHANGED="drawingResizableChanged";a.SELECTABLE_CHANGED="drawingSelectableChanged";a.SELECTED_CHANGED="drawingSelectedChanged";a.THEME_CHANGED="drawingThemeChanged";a.DRAG_STARTED="drawingDragStarted";a.DRAG_FINISHED="chartUserDrawingDragFinished";a.DOUBLE_CLICK=
"chartDrawingDoubleClick";a.CONTEXT_MENU="chartDrawingContextMenu";a.CONTEXT_MENU_SELECTED="chartDrawingContextMenuSelected"})(k=e.DrawingEvent||(e.DrawingEvent={}));e.MagnetPoint={BAR:"bar",HIGH:"high",LOW:"low",OPEN:"open",CLOSE:"close"};e.MagnetMode={NONE:"none",ALWAYS:"always",NEAR:"near"};e.DrawingDragPoint={NONE:null,ALL:-1,MOVE_POINT1:1,MOVE_POINT2:2};e.DrawingCursorClass={CREATE:"scxDrawingCreate",MOVE:"scxDrawingMove",RESIZE:"scxDrawingResize",RESIZE_EW:"scxDrawingResizeEW",RESIZE_NS:"scxDrawingResizeNS",
RESIZE_NESW:"scxDrawingResizeNESW",RESIZE_NWSE:"scxDrawingResizeNWSE"};var g=function(){function a(){}Object.defineProperty(a,"registeredDrawings",{get:function(){return this._drawings.registeredItems},enumerable:!0,configurable:!0});a.register=function(b){this._drawings.register(b.className,b)};a.deserialize=function(b){if(!b)return null;b="string"===typeof b?JSON.parse(b):b;var d=this._drawings.createInstance(b.className);d.loadState(b);return d};a._drawings=new e.ClassRegistrar;return a}(),c=function(a){function b(d){var f=
a.call(this,d)||this;f._drawingState=0;f._selected=!1;f._dragPoint=e.DrawingDragPoint.NONE;f.loadState(d);f._initGestures();f._contextMenu=f.className==e.TrendLineOrderDrawing.className?new e.UI.DrawingContextMenuTrendlineOrder({drawing:f,onShow:function(){f.select()},onItemSelected:function(h,l){h=h.data("id");this.drawing.fire(k.CONTEXT_MENU_SELECTED,h)}}):new e.UI.DrawingContextMenu({drawing:f,onShow:function(){f.select()},onItemSelected:function(h,l){h=h.data("id");switch(h){case e.UI.DrawingContextMenu.MenuItem.SETTINGS:f._showSettingsDialog();
break;case e.UI.DrawingContextMenu.MenuItem.CLONE:f.chart._copyDrawing();f.chart._pasteDrawing();break;case e.UI.DrawingContextMenu.MenuItem.DELETE:f.canRemove&&f.remove();break;default:throw Error("Unknown menu item "+h);}}});return f}__extends(b,a);Object.defineProperty(b,"subClassName",{get:function(){return"abstract"},enumerable:!0,configurable:!0});Object.defineProperty(b,"className",{get:function(){return""},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaults",{get:function(){return this.constructor.defaults},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"className",{get:function(){return this.constructor.className},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"chartPoints",{get:function(){var d=this._options.points;return this._lastCreatePoint?d.concat(this._lastCreatePoint):d},set:function(d){this.setChartPoints(d)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"locked",{get:function(){return this._options.locked},set:function(d){this._setOption("locked",
d,k.LOCKED_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"resizable",{get:function(){return this._options.resizable},set:function(d){this._setOption("resizable",d,k.RESIZABLE_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"selectable",{get:function(){return this._options.selectable},set:function(d){this._setOption("selectable",d,k.SELECTABLE_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"removable",{get:function(){var d=
this._options.removable;return null!=d?d:!0},set:function(d){this._setOption("removable",d)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"canRemove",{get:function(){return this.selectable&&this.removable},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"theme",{get:function(){return this._options.theme},set:function(d){this._options.theme=d;this.fire(k.THEME_CHANGED,d)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"actualTheme",{get:function(){var d=
this._options.theme;return d?d:this.defaultTheme},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"defaultTheme",{get:function(){var d=this.chart;if(!d)return null;d=d.theme.drawing;return d[this.className]||d[this.constructor.subClassName]},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"createPointBehavior",{get:function(){return this._options.createPointBehavior},set:function(d){this._options.createPointBehavior=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"magnetMode",{get:function(){return this._options.magnetMode},set:function(d){this._options.magnetMode=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"magnetPoint",{get:function(){return this._options.magnetPoint},set:function(d){this._options.magnetPoint=d},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"selected",{get:function(){return this._selected},set:function(d){d=!!d;var f=this._selected;if(f!==d){this._selected=d;var h=this.chart;h&&(d?h.selectedObject=
this:this===h.selectedObject&&(h.selectedObject=null));this._onSelectedChanged();this.fire(k.SELECTED_CHANGED,d,f)}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"canHandleEvents",{get:function(){return this.visible&&this.chart.showDrawings},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"canSelect",{get:function(){return this.selectable},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"canMove",{get:function(){return this.selectable&&!this.locked},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"canResize",{get:function(){return this.selectable&&this.resizable&&!this.locked},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"pointsNeeded",{get:function(){return 1},enumerable:!0,configurable:!0});b.prototype._onSelectedChanged=function(){};b.prototype._onChartPanelChanged=function(d){this.fire(k.PANEL_CHANGED,this.chartPanel,d)};b.prototype._onValueScaleChanged=function(d){this.fire(k.VALUE_SCALE_CHANGED,this.valueScale,
d)};b.prototype._onVisibleChanged=function(d){this.fire(k.VISIBLE_CHANGED,this.visible,d)};b.prototype._optionValue=function(d){var f=this._options[d];return null!=f?f:this._defaults[d]};b.prototype._initGestures=function(){this._gestures=new e.GestureArray([new e.ClickGesture({handler:this._handleClickGesture,hitTest:this._clickGestureHitTest}),new e.DoubleClickGesture({handler:this._handleDoubleClickGesture,hitTest:this.hitTest}),new e.ContextMenuGesture({handler:this._handleContextMenuGesture,
hitTest:this._clickGestureHitTest}),new e.PanGesture({handler:this._handlePanGestureInternal,hitTest:this._panGestureHitTest,button:e.MouseButton.LEFT}),new e.MouseHoverGesture({handler:this._handleMouseHoverGestureInternal,enterEventEnabled:!0,hoverEventEnabled:!0,leaveEventEnabled:!0,hitTest:this.hitTest})],this)};b.prototype._handleMouseHoverGestureInternal=function(d,f){var h=this.tooltip;if(!this.chart.showDrawingTooltips||1===this._drawingState)h.hide();else if(!this._handleMouseHoverGesture(d,
f))switch(d.state){case e.GestureState.STARTED:case e.GestureState.CONTINUED:this.showTooltip(f.pointerPosition);break;case e.GestureState.FINISHED:this.hideTooltip()}};b.prototype._handleMouseHoverGesture=function(d,f){return!1};b.prototype._clickGestureHitTest=function(d){return this.visible&&this.canSelect&&this.hitTest(d)};b.prototype._panGestureHitTest=function(d){return this.visible&&this.canMove&&this.hitTest(d)};b.prototype._handlePanGestureInternal=function(d,f){this._drawingState=d.state!==
e.GestureState.FINISHED?1:0;this._contextMenu&&d.state===e.GestureState.CONTINUED&&this._contextMenu.hide();this.tooltip.hide();d.state===e.GestureState.CONTINUED&&this.magnetMode!==e.MagnetMode.NONE&&(f.pointerPosition=this._magnetizePoint(f.pointerPosition));if(!this.canResize||!this._handlePanGesture(d,f))switch(d.state){case e.GestureState.STARTED:f=this.chart.selectedObject;this._setDragPoint(e.DrawingDragPoint.ALL);this.changeCursor(e.DrawingCursorClass.MOVE);if(f!==this){this.setNeedsUpdateChart();
return}break;case e.GestureState.FINISHED:this._setDragPoint(e.DrawingDragPoint.NONE);break;case e.GestureState.CONTINUED:if(this._dragPoint===e.DrawingDragPoint.ALL)if(this.magnetMode!==e.MagnetMode.NONE&&1===this.chartPoints.length)f=this._magnetizePoint(f.pointerPosition),this.chartPoints[0].moveToPoint(f,this.projection);else{f=this.projection;for(var h=d.moveOffset,l=0,m=this.chartPoints;l<m.length;l++)m[l].translate(h.x,h.y,f)}}d.state===e.GestureState.FINISHED&&this.changeCursor();this.setNeedsUpdatePanel()};
b.prototype._magnetizePoint=function(d){if(this.magnetMode===e.MagnetMode.NONE)return d;var f=this.projection,h=f.recordByX(d.x);if(0>h||h>=this.chart.recordCount)return d;var l=this.chart.primaryBar(h);if(!l)return d;h={x:f.xByRecord(h),y:0};switch(this.magnetPoint){case e.MagnetPoint.OPEN:h.y=f.yByValue(l.open);break;case e.MagnetPoint.HIGH:h.y=f.yByValue(l.high);break;case e.MagnetPoint.LOW:h.y=f.yByValue(l.low);break;case e.MagnetPoint.CLOSE:h.y=f.yByValue(l.close);break;case e.MagnetPoint.BAR:switch(this.magnetMode){case e.MagnetMode.NEAR:h.y=
f.yByValue(l.high);if(this._canMagnetizeToPoint(d,h))return h;h.y=f.yByValue(l.low);if(this._canMagnetizeToPoint(d,h))return h;h.y=f.yByValue(l.open);if(this._canMagnetizeToPoint(d,h))return h;h.y=f.yByValue(l.close);break;case e.MagnetMode.ALWAYS:var m=f.yByValue(l.high),q=f.yByValue(l.low),p=f.yByValue(l.open);f=f.yByValue(l.close);d=[{y:m,distance:Math.abs(m-d.y)},{y:q,distance:Math.abs(q-d.y)},{y:p,distance:Math.abs(p-d.y)},{y:f,distance:Math.abs(f-d.y)}];d=d.reduce(function(r,v){return v.distance<
r.distance?v:r},d[0]);h.y=d.y;return h}}return this._canMagnetizeToPoint(d,h)?h:d};b.prototype._canMagnetizeToPoint=function(d,f){switch(this.magnetMode){case e.MagnetMode.NONE:return!1;case e.MagnetMode.ALWAYS:return!0;case e.MagnetMode.NEAR:var h=e.Geometry.DEVIATION,l=void 0;e.Geometry.DEVIATION=e.Geometry.MAGNET_DEVIATION;try{l=e.Geometry.isPointNearPoint(d,f)}finally{e.Geometry.DEVIATION=h}return l;default:throw Error("Unknown magnet mode: "+this.magnetMode);}};b.prototype._handleClickGesture=
function(){!this.selected&&this.canSelect&&(this.select(),this.setNeedsUpdateChart())};b.prototype._handleDoubleClickGesture=function(){this.fire(k.DOUBLE_CLICK,this);this.selectable&&this._showSettingsDialog()};b.prototype._handleContextMenuGesture=function(d,f){this.fire(k.CONTEXT_MENU,this);this.selectable&&(this.chart.localize(this._contextMenu.container),"undefined"!=typeof this._contextMenu.initMenu&&this._contextMenu.initMenu(),this._contextMenu.show(f.evt))};b.prototype._handleUserDrawingPoint=
function(d){return!1};b.prototype._handleUserDrawingClickGesture=function(d,f){this.chartPanel||f.chartPanel.addDrawings(this);d=this._normalizeUserDrawingPoint(f.pointerPosition);this._lastCreatePoint=null;this._handleUserDrawingPoint(d)||this.appendChartPoint(d);this.chartPoints.length>=this.pointsNeeded&&this._finishUserDrawing();this.setNeedsUpdatePanel()};b.prototype._handleUserDrawingMoveGesture=function(d,f){0<this.chartPoints.length&&(this._lastCreatePoint=this._normalizeUserDrawingPoint(f.pointerPosition),
this.setNeedsUpdatePanel())};b.prototype._normalizeUserDrawingPoint=function(d){return e.ChartPoint.convert(d,this.createPointBehavior,this.projection)};b.prototype._showSettingsDialog=function(){var d=this;e.UI.ViewLoader.drawingSettingsDialog(function(f){f.show({chart:d.chart,drawing:d})})};b.prototype.setChartPoints=function(d){if(d instanceof e.ChartPoint)var f=[d];else if(Array.isArray(d)){f=[];for(var h=0;h<d.length;h++)f.push(new e.ChartPoint(d[h]))}else f=[new e.ChartPoint(d)];this._setOption("points",
f,k.POINTS_CHANGED)};b.prototype.appendChartPoint=function(d){var f=this._options.points;f.push(new e.ChartPoint(d));return f};b.prototype.cartesianPoint=function(d){return(d=this.chartPoints[d])&&d.toPoint(this.projection)};b.prototype.cartesianPoints=function(){var d=this.projection;return this.chartPoints.map(function(f){return f.toPoint(d)})};b.prototype.select=function(){!this.selected&&this.canSelect&&this.chart.selectObject(this)};b.prototype.translate=function(d,f){for(var h=this.projection,
l=0,m=this.chartPoints;l<m.length;l++)m[l].translate(d,f,h)};b.prototype.bounds=function(){return null};b.prototype.startUserDrawing=function(){this._createClickGesture=new e.ClickGesture({hitTest:function(){return!0},handler:this._handleUserDrawingClickGesture,context:this});this._createMoveGesture=new e.MouseHoverGesture({enterEventEnabled:!1,leaveEventEnabled:!1,hitTest:function(){return!0},handler:this._handleUserDrawingMoveGesture,context:this});this.chartPoints=[];this.selected=!0;this.remove()};
b.prototype._finishUserDrawing=function(){this._lastCreatePoint=this._createMoveGesture=this._createClickGesture=null;this.tooltip.applyTheme();this.chart._finishUserDrawing()};b.prototype.hitTest=function(d){return!1};b.prototype.handleEvent=function(d){return this._createClickGesture?this._createClickGesture.handleEvent(d)||this._createMoveGesture.handleEvent(d):this._gestures.handleEvent(d)};b.prototype._handlePanGesture=function(d,f){return!1};b.prototype._setDragPoint=function(d){this._dragPoint!==
d&&(this._dragPoint=d,this._dragPoint===e.DrawingDragPoint.NONE?this.fire(k.DRAG_FINISHED):(this.fire(k.DRAG_STARTED),this.select()))};b.prototype._getSelectionMarkerWidth=function(d){return(d&&d.line&&d.line.width||1)+2};b.prototype._drawSelectionMarkers=function(d){if(d){var f=this.chart.selectionMarker;f.width=this._getSelectionMarkerWidth(this.actualTheme);if(Array.isArray(d))for(var h=0;h<d.length;h++)f.draw(this.context,d[h]);else f.draw(this.context,d)}};b.prototype.saveState=function(){var d=
a.prototype.saveState.call(this);d.className=this.className;return d};b.prototype.loadState=function(d){d=d||{};a.prototype.loadState.call(this,d);var f=d;d=d.options||{};var h=this.suppressEvents(!0);this.createPointBehavior||(this.createPointBehavior=f.createPointBehavior||this._defaults.createPointBehavior||b.defaults.createPointBehavior);this.chartPoints=f.point||f.points||d&&d.points;null==d.visible&&(this.visible=null!=f.visible?f.visible:!0);null==d.selectable&&(this.selectable=null!=f.selectable?
f.selectable:!0);null==d.locked&&(this.locked=null!=f.locked?f.locked:!1);null==d.resizable&&(this.resizable=null!=f.resizable?f.resizable:!0);null==d.theme&&(this.theme=f.theme);d.magnetMode||(this.magnetMode=f.magnetMode||e.MagnetMode.NONE);d.magnetPoint||(this.magnetPoint=f.magnetPoint||e.MagnetPoint.BAR);null==this.zIndex&&(this.zIndex=f.zIndex||this._defaults.zIndex||b.defaults.zIndex);this.suppressEvents(h)};b.prototype.drawValueMarkers=function(){};b.prototype.drawDateMarkers=function(){};
b.prototype.clone=function(){var d=b.deserialize(this.saveState());d.chartPanel=this.chartPanel;return d};b.prototype.remove=function(){var d=this.chartPanel;if(!d)return!1;d.forceRemoveDrawings(this);this.setNeedsUpdatePanel();this.chartPanel=null;return!0};b.prototype.setNeedsUpdateChart=function(){var d=this.chart;d&&d.setNeedsUpdate()};b.prototype.setNeedsUpdatePanel=function(){var d=this.chartPanel;d&&d.setNeedsUpdate()};b.defaults={createPointBehavior:{x:e.XPointBehavior.DATE,y:e.YPointBehavior.VALUE},
zIndex:200};return b}(e.ChartPanelObject);e.Drawing=c;e.JsUtil.applyMixins(c,[g])})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k;(k=e.DrawingEvent||(e.DrawingEvent={})).DOT_RADIUS_CHANGED="drawingDotRadiusChanged";var g=function(c){function a(b){return c.call(this,b)||this}__extends(a,c);Object.defineProperty(a,"className",{get:function(){return"dot"},enumerable:!0,configurable:!0});Object.defineProperty(a,"subClassName",{get:function(){return"abstractMarker"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"radius",{get:function(){return this._options.radius||this._defaults.radius||a.defaults.radius},
set:function(b){if(e.JsUtil.isNegativeNumber(b))throw new TypeError("Radius must be a positive number.");this._setOption("radius",b,k.DOT_RADIUS_CHANGED)},enumerable:!0,configurable:!0});a.prototype.bounds=function(){var b=this.cartesianPoint(0);if(!b)return null;var d=this.radius;return{left:b.x-d,top:b.y-d,width:2*d,height:2*d}};a.prototype.hitTest=function(b){if(!this.canHandleEvents)return!1;var d=this.cartesianPoint(0);return d?e.Geometry.isPointInsideOrNearCircle(b,d,this.radius):!1};a.prototype.draw=
function(){if(this.visible){var b=this.cartesianPoint(0);if(b){var d=this.context,f=this.actualTheme;d.beginPath();d.arc(b.x,b.y,this.radius,0,2*Math.PI);d.scxFillStroke(f.fill,f.stroke);this.selected&&this._drawSelectionMarkers(b)}}};a.defaults={radius:5};return a}(e.Drawing);e.DotDrawing=g;e.Drawing.register(g)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){a=g.call(this,a)||this;a._radius=12;return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"note"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"label",{get:function(){return this._options.label||this._defaults.label||""},set:function(a){0!==a.length&&(this._options.label=a[0])},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoint(0);if(!a)return null;var b=this._radius;
return{left:a.x-b,top:a.y-b-18,width:2*b,height:2*b+5}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoint(0);return b?e.Geometry.isPointInsideOrNearCircle(a,{x:b.x,y:b.y-20},this._radius)||e.Geometry.isPointNearPoint(a,b):!1};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoint(0);if(a){var b=e.DummyCanvasContext.textWidth(this.label,this.actualTheme.text);this._radius=12+b/3;var d=this.context,f=this.actualTheme,h=a.x,l=18+b,m=a.y-l,q=6+
b/9;b=12+b;d.beginPath();d.moveTo(h-this._radius/2,m);d.lineTo(h+this._radius/2,m);d.arc(h,m,this._radius,0,2*Math.PI);d.moveTo(h+this._radius/2+q,m+2);d.bezierCurveTo(h+this._radius/2+q,m,h+10,m+b,h,m+l);d.bezierCurveTo(h,m+l,h-10,m+b,h-this._radius/2-q,m);d.scxFillStroke(f.fill,f.stroke);d.beginPath();d.moveTo(h-(this._radius-1.5),m);d.lineTo(h+(this._radius-1.5),m);d.arc(h,m,this._radius-3,0,2*Math.PI);d.scxFillStroke(f.centerPointFill,f.stroke);d.scxApplyTextTheme(f.text);d.textAlign="center";
d.textBaseline="middle";d.fillText(this.label,h,m);this.selected&&this._drawSelectionMarkers(a)}}};c.defaults={label:"N"};return c}(e.Drawing);e.NoteDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k;(k=e.DrawingEvent||(e.DrawingEvent={})).SIZE_CHANGED="drawingSizeChanged";var g=function(c){function a(b){return c.call(this,b)||this}__extends(a,c);Object.defineProperty(a,"subClassName",{get:function(){return"abstractMarker"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._options.size||this._defaults.size||a.defaults.size},set:function(b){this._setOption("size",b,k.SIZE_CHANGED)},enumerable:!0,configurable:!0});a.prototype.hitTest=
function(b){if(!this.canHandleEvents)return!1;var d=this.bounds();return d&&e.Geometry.isPointInsideOrNearRect(b,d)};a.defaults={size:{width:14,height:14}};return a}(e.Drawing);e.GeometricMarkerDrawingBase=g})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"square"},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoint(0),b=this.size;return a?{left:Math.round(a.x-b.width/2),top:Math.round(a.y-b.height/2),width:b.width,height:b.height}:null};c.prototype.draw=function(){if(this.visible){var a=this.bounds();if(a){var b=this.context,d=this.actualTheme;b.beginPath();
b.rect(a.left,a.top,a.width,a.height);b.scxFillStroke(d.fill,d.stroke);this.selected&&this._drawSelectionMarkers(this.cartesianPoint(0))}}};c.defaults={size:{width:10,height:10}};return c}(e.GeometricMarkerDrawingBase);e.SquareDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"diamond"},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoint(0);if(!a)return null;var b=this.size;return{left:Math.round(a.x-b.width/2),top:Math.round(a.y-b.height/2),width:b.width,height:b.height}};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoint(0);if(a){var b=this.context,d=
this.actualTheme,f=this.size,h=Math.round(f.width/2);f=Math.round(f.height/2);b.beginPath();b.moveTo(a.x-h,a.y);b.lineTo(a.x,a.y-f);b.lineTo(a.x+h,a.y);b.lineTo(a.x,a.y+f);b.closePath();b.scxFillStroke(d.fill,d.stroke);this.selected&&this._drawSelectionMarkers(a)}}};c.defaults={size:{width:10,height:10}};return c}(e.GeometricMarkerDrawingBase);e.DiamondDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k;(function(c){c.ARROW_HEAD_RATIO_CHANGED="drawingArrowHeadRatioChanged";c.ARROW_TAIL_RATIO_CHANGED="drawingArrowTailRatioChanged"})(k=e.DrawingEvent||(e.DrawingEvent={}));var g=function(c){function a(b){b=c.call(this,b)||this;b._angle=0;return b}__extends(a,c);Object.defineProperty(a.prototype,"headRatio",{get:function(){return this._options.headRatio||this._defaults.headRatio||a.defaults.headRatio},set:function(b){if(!e.JsUtil.isPositiveNumber(b)||1<=b)throw Error("Value must be in range (0..1).");
this._setOption("headRatio",b,k.ARROW_HEAD_RATIO_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"tailRatio",{get:function(){return this._options.tailRatio||this._defaults.tailRatio||a.defaults.tailRatio},set:function(b){if(!e.JsUtil.isPositiveNumber(b)||1<=b)throw Error("Value must be in range (0..1).");this._setOption("tailRatio",b,k.ARROW_TAIL_RATIO_CHANGED)},enumerable:!0,configurable:!0});a.prototype.draw=function(){if(this.visible){var b=this.cartesianPoint(0);if(b){var d=
this.context,f=this.actualTheme,h=this.size,l=h.width/2,m=h.width*this.tailRatio/2,q=h.height*this.headRatio;d.save();d.translate(b.x,b.y);d.rotate(this._angle*Math.PI/180);d.beginPath();d.moveTo(0,0);d.lineTo(-l,-q);d.lineTo(-m,-q);d.lineTo(-m,-h.height);d.lineTo(m,-h.height);d.lineTo(m,-q);d.lineTo(l,-q);d.closePath();d.scxFillStroke(f.fill,f.stroke);this.selected&&this._drawSelectionMarkers({x:0,y:0});d.restore()}}};a.defaults={size:null,headRatio:.5,tailRatio:.5};return a}(e.GeometricMarkerDrawingBase);
e.ArrowDrawingBase=g})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){a=g.call(this,a)||this;a._angle=180;return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"arrowUp"},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoint(0);if(!a)return null;var b=this.size;return{left:Math.round(a.x-b.width/2),top:a.y,width:b.width,height:b.height}};return c}(e.ArrowDrawingBase);e.ArrowUpDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"arrowDown"},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoint(0);if(!a)return null;var b=this.size;return{left:Math.round(a.x-b.width/2),top:Math.round(a.y-b.height),width:b.width,height:b.height}};return c}(e.ArrowDrawingBase);e.ArrowDownDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX=
{}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){a=g.call(this,a)||this;a._angle=90;return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"arrowLeft"},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoint(0);if(!a)return null;var b=this.size;return{left:a.x,top:Math.round(a.y-b.height/2),width:b.width,height:b.height}};return c}(e.ArrowDrawingBase);e.ArrowLeftDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){a=g.call(this,a)||this;a._angle=-90;return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"arrowRight"},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoint(0);if(!a)return null;var b=this.size;return{left:a.x-b.width,top:Math.round(a.y-b.height/2),width:b.width,height:b.height}};return c}(e.ArrowDrawingBase);e.ArrowRightDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"arrow"},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();return a.length<this.pointsNeeded?null:{left:Math.min(a[0].x,a[1].x),top:Math.min(a[0].y,a[1].y),width:Math.abs(a[0].x-a[1].x),height:Math.abs(a[0].y-a[1].y)}};Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,
configurable:!0});c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoints();return 1<b.length&&e.Geometry.isPointNearPolyline(a,b)};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if(e.Geometry.isPointNearPoint(this.cartesianPoint(0),b.pointerPosition))this._setDragPoint(0);else if(e.Geometry.isPointNearPoint(this.cartesianPoint(1),b.pointerPosition))this._setDragPoint(1);else break;this.changeCursor(e.DrawingCursorClass.RESIZE);
return!0;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();if(2===a.length){var b=a[0].x,d=a[0].y,f=a[1].x,h=a[1].y,l=Math.acos(((f-b)*(b-b)+(h-d)*(h-d))/(Math.sqrt((f-b)*(f-b)+(h-d)*(h-d))*Math.sqrt((b-b)*(b-b)+(h-d)*(h-d)))),m=this.context,q=this.actualTheme,p=e.Geometry.length({x:b,y:d},{x:f,y:h}),r=50*this.tailRatio/2,
v=p*this.headRatio;m.save();m.translate(b,d);f<=b&&h<=d&&(h===d?m.rotate(-Math.PI/2):m.rotate(-l));f>=b&&h<=d&&(h===d?m.rotate(Math.PI/2):m.rotate(l));f>=b&&h>=d&&(f===b?m.rotate(2*Math.PI):m.rotate(Math.PI-l));f<=b&&h>=d&&m.rotate(Math.PI+l);m.beginPath();m.lineTo(0,0);m.lineTo(0,-p);m.lineTo(-25,-v);m.lineTo(-r,-v);m.lineTo(-r,0);m.lineTo(r,0);m.lineTo(r,-v);m.lineTo(25,-v);m.lineTo(0,-p);m.closePath();m.scxFillStroke(q.fill,q.stroke);m.restore();this.selected&&this._drawSelectionMarkers(a)}}};
return c}(e.ArrowDrawingBase);e.Arrow=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"lineSegment"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();return a.length<this.pointsNeeded?null:{left:Math.min(a[0].x,a[1].x),top:Math.min(a[0].y,a[1].y),width:Math.abs(a[0].x-a[1].x),
height:Math.abs(a[0].y-a[1].y)}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoints();return 1<b.length&&e.Geometry.isPointNearPolyline(a,b)};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if(e.Geometry.isPointNearPoint(this.cartesianPoint(0),b.pointerPosition))this._setDragPoint(0);else if(e.Geometry.isPointNearPoint(this.cartesianPoint(1),b.pointerPosition))this._setDragPoint(1);else break;this.changeCursor(e.DrawingCursorClass.RESIZE);
return!0;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();1<a.length&&this.context.scxStrokePolyline(a,this.actualTheme.line);this.selected&&this._drawSelectionMarkers(a)}};return c}(e.Drawing);e.LineSegmentDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"rectangle"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();return a.length<this.pointsNeeded?null:{left:Math.min(a[0].x,a[1].x),top:Math.min(a[0].y,a[1].y),width:Math.abs(a[0].x-a[1].x),
height:Math.abs(a[0].y-a[1].y)}};c.prototype._markerPoints=function(a){a||(a=this.bounds());if(!a)return(a=this.cartesianPoint(0))&&[a];var b=Math.round(a.left+a.width/2),d=Math.round(a.top+a.height/2),f=a.left+a.width,h=a.top+a.height;return[{x:a.left,y:a.top},{x:b,y:a.top},{x:f,y:a.top},{x:f,y:d},{x:f,y:h},{x:b,y:h},{x:a.left,y:h},{x:a.left,y:d}]};c.prototype._normalizePoints=function(){var a=this.bounds();if(a){var b=this.projection,d=this.chartPoints;d[0].moveTo(a.left,a.top,b);d[1].moveTo(a.left+
a.width,a.top+a.height,b)}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoints();return 1<b.length&&e.Geometry.isPointNearRectPoints(a,b[0],b[1])};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:this._normalizePoints();if((a=this._markerPoints())&&1<a.length)for(var d=0;d<a.length;d++)if(e.Geometry.isPointNearPoint(b.pointerPosition,a[d]))return this._setDragPoint(d),this._updateCursor(),!0;break;case e.GestureState.CONTINUED:if(!(0>
this._dragPoint)){a=this.projection;d=this.chartPoints;b=b.pointerPosition;switch(this._dragPoint){case 0:d[0].moveTo(b.x,b.y,a);break;case 1:d[0].moveToY(b.y,a);break;case 2:d[0].moveToY(b.y,a);d[1].moveToX(b.x,a);break;case 3:d[1].moveToX(b.x,a);break;case 4:d[1].moveTo(b.x,b.y,a);break;case 5:d[1].moveToY(b.y,a);break;case 6:d[0].moveToX(b.x,a);d[1].moveToY(b.y,a);break;case 7:d[0].moveToX(b.x,a)}return!0}}return!1};c.prototype._updateCursor=function(){switch(this._dragPoint){case 0:case 4:var a=
e.DrawingCursorClass.RESIZE_NWSE;break;case 1:case 5:a=e.DrawingCursorClass.RESIZE_NS;break;case 2:case 6:a=e.DrawingCursorClass.RESIZE_NESW;break;case 3:case 7:a=e.DrawingCursorClass.RESIZE_EW}a&&this.changeCursor(a)};c.prototype.draw=function(){if(this.visible){var a=this.bounds(),b=this.context,d=this.actualTheme;a&&(b.beginPath(),b.rect(a.left,a.top,a.width,a.height),b.scxFillStroke(d.fill,d.line));this.selected&&(a=this._markerPoints(a),this._drawSelectionMarkers(a))}};return c}(e.Drawing);e.RectangleDrawing=
k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"triangle"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 3},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();if(a.length<this.pointsNeeded)return null;var b=Math.min(a[0].x,a[1].x,a[2].x),d=Math.min(a[0].y,a[1].y,a[2].y);return{left:b,top:d,
width:Math.max(a[0].x,a[1].x,a[2].x)-b,height:Math.max(a[0].y,a[1].y,a[2].y)-d}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoints();return 1<b.length&&e.Geometry.isPointNearPolygon(a,b)};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:a=this.cartesianPoints();for(var d=0;d<a.length;d++)if(e.Geometry.isPointNearPoint(b.pointerPosition,a[d]))return this._setDragPoint(d),this.changeCursor(e.DrawingCursorClass.RESIZE),
!0;break;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints(),b=this.context,d=this.actualTheme;if(1<a.length){b.beginPath();b.moveTo(a[0].x,a[0].y);for(var f=1;f<a.length;f++)b.lineTo(a[f].x,a[f].y);b.closePath();b.scxFillStroke(d.fill,d.line)}this.selected&&this._drawSelectionMarkers(a)}};return c}(e.Drawing);e.TriangleDrawing=
k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"circle"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();if(a.length<this.pointsNeeded)return null;var b=e.Geometry.length(a[0],a[1]);return{left:a[0].x-b,top:a[0].y-b,width:2*b,height:2*
b}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoints();return 1<b.length&&e.Geometry.isPointNearCircle(a,b[0],b[1])};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if((a=this._markerPoints())&&1<a.length)for(var d=0;d<a.length;d++)if(e.Geometry.isPointNearPoint(b.pointerPosition,a[d]))return this._setDragPoint(d),this._updateCursor(),!0;break;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[1].moveToPoint(b.pointerPosition,
this.projection),!0}return!1};c.prototype._updateCursor=function(){switch(this._dragPoint){case 0:case 2:var a=e.DrawingCursorClass.RESIZE_EW;break;case 1:case 3:a=e.DrawingCursorClass.RESIZE_NS}a&&this.changeCursor(a)};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints(),b=this.context,d=this.actualTheme;if(1<a.length){var f=e.Geometry.length(a[0],a[1]),h=this._markerPoints(a);b.beginPath();b.arc(a[0].x,a[0].y,f,0,2*Math.PI);b.scxFillStroke(d.fill,d.line);this.selected&&this._drawSelectionMarkers(h)}}};
c.prototype._markerPoints=function(a){a=a||this.cartesianPoints();if(0===a.length)return null;var b=a[0];if(1===a.length)return[{x:b.x,y:b.y}];a=e.Geometry.length(a[0],a[1]);return[{x:b.x-a,y:b.y},{x:b.x,y:b.y-a},{x:b.x+a,y:b.y},{x:b.x,y:b.y+a}]};return c}(e.Drawing);e.CircleDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"ellipse"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype._markerPoints=function(a){a=a||this.cartesianPoints();if(0===a.length)return null;var b=a[0];if(1===a.length)return[{x:b.x,y:b.y}];var d=e.Geometry.xProjectionLength(a[0],a[1]);
a=e.Geometry.yProjectionLength(a[0],a[1]);return[{x:b.x-d,y:b.y},{x:b.x,y:b.y-a},{x:b.x+d,y:b.y},{x:b.x,y:b.y+a}]};c.prototype.bounds=function(){var a=this.cartesianPoints();if(a.length<this.pointsNeeded)return null;var b=e.Geometry.xProjectionLength(a[0],a[1]),d=e.Geometry.yProjectionLength(a[0],a[1]);return{left:a[0].x-b,top:a[0].y-d,width:2*b,height:2*d}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoints();return 1<b.length&&e.Geometry.isPointNearEllipse(a,
b[0],b[1])};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if((a=this._markerPoints())&&1<a.length)for(var d=0;d<a.length;d++)if(e.Geometry.isPointNearPoint(b.pointerPosition,a[d]))return this._setDragPoint(d),this._updateCursor(),!0;break;case e.GestureState.CONTINUED:if(0<=this._dragPoint){switch(this._dragPoint){case 0:case 2:this.chartPoints[1].moveToX(b.pointerPosition.x,this.projection);break;case 1:case 3:this.chartPoints[1].moveToY(b.pointerPosition.y,
this.projection)}return!0}}return!1};c.prototype._updateCursor=function(){switch(this._dragPoint){case 0:case 2:var a=e.DrawingCursorClass.RESIZE_EW;break;case 1:case 3:a=e.DrawingCursorClass.RESIZE_NS}a&&this.changeCursor(a)};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints(),b=this.context,d=this.actualTheme;if(1<a.length){var f=e.Geometry.xProjectionLength(a[0],a[1]),h=e.Geometry.yProjectionLength(a[0],a[1]),l=this._markerPoints(a);b.beginPath();b.save();b.translate(a[0].x,
a[0].y);f!==h&&b.scale(1,h/f);b.arc(0,0,f,0,2*Math.PI);b.restore();b.closePath();b.scxFillStroke(d.fill,d.line);this.selected&&this._drawSelectionMarkers(l)}}};return c}(e.Drawing);e.EllipseDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"horizontalLine"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"showValueMarker",{get:function(){var a=this._options.showValueMarker;return null!=a?a:c.defaults.showValueMarker},set:function(a){this._options.showValueMarker=!!a},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoint(0);
if(!a)return null;var b=this.chartPanel.contentFrame;return{left:b.left,top:a.y,width:b.width,height:1}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoint(0);return a&&e.Geometry.isValueNearValue(a.y,b.y)};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoint(0);if(a){var b=this.context,d=this.chartPanel.contentFrame;b.beginPath();b.moveTo(d.left,a.y);b.lineTo(d.right,a.y);b.scxStroke(this.actualTheme.line);b=Math.round(d.left+d.width/2);
this.selected&&this._drawSelectionMarkers({x:b,y:a.y})}}};c.prototype.drawValueMarkers=function(){if(this.showValueMarker){var a=this.chartPoints[0];if(a){var b=this.chart.valueMarker,d=this.actualTheme.line.strokeColor,f=this.panelValueScale;a=a.getValue(f.projection);b.theme.fill.fillColor=d;b.theme.text.fillColor=e.HtmlUtil.isDarkColor(d)?"white":"black";b.draw(a,f)}}};c.defaults={showValueMarker:!0};return c}(e.Drawing);e.HorizontalLineDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX=
{}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"verticalLine"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"showDateMarker",{get:function(){var a=this._options.showDateMarker;return null!=a?a:c.defaults.showDateMarker},set:function(a){this._options.showDateMarker=!!a},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoint(0);if(!a)return null;
var b=this.chartPanel.contentFrame;return{left:a.x,top:b.top,width:1,height:b.height}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoint(0);return a&&e.Geometry.isValueNearValue(a.x,b.x)};c.prototype._handlePanGesture=function(a,b){this.showDateMarker&&this.chart.dateScale.setNeedsUpdate();return!1};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoint(0);if(a){var b=this.context,d=this.chartPanel.contentFrame;b.beginPath();b.moveTo(a.x,0);
b.lineTo(a.x,d.bottom-d.top);b.scxStroke(this.actualTheme.line);this.selected&&this._drawSelectionMarkers({x:a.x,y:Math.round(d.height/2)})}}};c.prototype.drawDateMarkers=function(){if(this.showDateMarker){var a=this.chartPoints[0];if(a){var b=this.chart.dateMarker;a=a.getDate(this.projection);var d=this.actualTheme.line.strokeColor,f=this.chart.dateScale;b.theme.fill.fillColor=d;b.theme.text.fillColor=e.HtmlUtil.isDarkColor(d)?"white":"black";b.theme.stroke.strokeColor=e.HtmlUtil.isDarkColor(d)?
e.HtmlUtil.lighten(d,.5):e.HtmlUtil.lighten(d,-.5);b.draw(a,f)}}};c.defaults={showDateMarker:!0};return c}(e.Drawing);e.VerticalLineDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){var a=null!==g&&g.apply(this,arguments)||this;a._pointsNeeded=Number.MAX_VALUE;return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"polygon"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return this._pointsNeeded},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();if(2>a.length)return null;var b=Math.max.apply(Math,a.map(function(h){return h.x})),
d=Math.min.apply(Math,a.map(function(h){return h.x})),f=Math.max.apply(Math,a.map(function(h){return h.y}));a=Math.min.apply(Math,a.map(function(h){return h.y}));return{left:d,top:f,width:Math.abs(b-d),height:Math.abs(f-a)}};c.prototype.hitTest=function(a){return this.canHandleEvents?e.Geometry.isPointNearPolygon(a,this.cartesianPoints()):!1};c.prototype._handleUserDrawingPoint=function(a){var b=this.chartPoints.length;if(1<b){b=this.cartesianPoint(b-1);var d=(new e.ChartPoint(a)).toPoint(this.projection);
if(e.Geometry.isPointNearPoint(d,b))return this._finishUserDrawing(),!0}this.appendChartPoint(a);return!0};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:a=this.cartesianPoints();for(var d=0;d<a.length;d++)if(e.Geometry.isPointNearPoint(b.pointerPosition,a[d]))return this._setDragPoint(d),this.changeCursor(e.DrawingCursorClass.RESIZE),!0;break;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,
this.projection),!0}return!1};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints(),b=this.context,d=this.actualTheme;if(1<a.length){b.beginPath();b.moveTo(a[0].x,a[0].y);for(var f=1;f<a.length;f++)b.lineTo(a[f].x,a[f].y);b.closePath();b.scxFillStroke(d.fill,d.line)}this.selected&&this._drawSelectionMarkers(a)}};return c}(e.Drawing);e.PolygonDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"polyline"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return Number.MAX_VALUE},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();if(2>a.length)return null;var b=Math.max.apply(Math,a.map(function(h){return h.x})),d=Math.min.apply(Math,a.map(function(h){return h.x})),
f=Math.max.apply(Math,a.map(function(h){return h.y}));a=Math.min.apply(Math,a.map(function(h){return h.y}));return{left:d,top:f,width:Math.abs(b-d),height:Math.abs(f-a)}};c.prototype.hitTest=function(a){return this.canHandleEvents?e.Geometry.isPointNearPolyline(a,this.cartesianPoints()):!1};c.prototype._handleUserDrawingPoint=function(a){var b=this.chartPoints.length;if(1<b){b=this.cartesianPoint(b-1);var d=(new e.ChartPoint(a)).toPoint(this.projection);if(e.Geometry.isPointNearPoint(d,b))return this._finishUserDrawing(),
!0}this.appendChartPoint(a);return!0};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:a=this.cartesianPoints();for(var d=0;d<a.length;d++)if(e.Geometry.isPointNearPoint(b.pointerPosition,a[d]))return this._setDragPoint(d),this.changeCursor(e.DrawingCursorClass.RESIZE),!0;break;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype.draw=function(){if(this.visible){var a=
this.cartesianPoints(),b=this.context,d=this.actualTheme;if(1<a.length){b.beginPath();b.moveTo(a[0].x,a[0].y);for(var f=1;f<a.length;f++)b.lineTo(a[f].x,a[f].y);b.scxStroke(d.line)}this.selected&&this._drawSelectionMarkers(a)}};return c}(e.Drawing);e.PolylineDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){var a=null!==g&&g.apply(this,arguments)||this;a._drawingPoints=0;return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"freeHand"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return Number.MAX_VALUE},enumerable:!0,configurable:!0});c.prototype._handleUserDrawingPoint=function(a){this._drawingPoints++;this.appendChartPoint(a);2<=this._drawingPoints&&this._finishUserDrawing();
return!0};c.prototype._handleUserDrawingMoveGesture=function(a,b){a=this.chartPoints.length;if(0<a){b=b.pointerPosition;var d=this._normalizeUserDrawingPoint(b);a=this.chartPoints[a-1];if(Math.round(d.value)!==Math.round(a.value)||b.x!==a.x)this.appendChartPoint(d),this.chartPanel.setNeedsUpdate()}};c.prototype.bounds=function(){var a=this.cartesianPoints();if(2>a.length)return null;var b=a.reduce(function(h,l){return Math.max(h,l.x)},-Infinity),d=a.reduce(function(h,l){return Math.min(h,l.x)},Infinity),
f=a.reduce(function(h,l){return Math.max(h,l.y)},-Infinity);a=a.reduce(function(h,l){return Math.min(h,l.y)},Infinity);return{left:d,top:a,width:Math.abs(b-d),height:Math.abs(f-a)}};c.prototype.hitTest=function(a){return this.canHandleEvents?e.Geometry.isPointNearPolyline(a,this.cartesianPoints()):!1};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints(),b=this.context,d=this.actualTheme;b.beginPath();b.moveTo(a[0].x,a[0].y);for(var f=1;f<a.length;f++)b.lineTo(a[f].x,a[f].y);b.scxStroke(d.line);
this.selected&&this._drawSelectionMarkers([a[0],a[a.length-1]])}};return c}(e.Drawing);e.FreeHandDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){var a=null!==g&&g.apply(this,arguments)||this;a._drawingPoints=[];return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"cyclicLines"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){if(this.cartesianPoints().length<this.pointsNeeded)return null;var a=this._drawingPoints,b=a[1];a=a[a.length-1];return{left:Math.min(b[0].x,
a[0].x),top:0,width:Math.abs(b[0].x-a[0].x),height:this.chartPanel.contentFrame.height}};c.prototype.hitTest=function(a){if(!this.canHandleEvents||2>this.chartPoints.length)return!1;for(var b=0,d=this._drawingPoints;b<d.length;b++){var f=d[b];if(e.Geometry.isPointNearLine(a,f[0],f[1]))return!0}return!1};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if(e.Geometry.isPointNearPoint(this.cartesianPoint(0),b.pointerPosition))this._setDragPoint(0);else if(e.Geometry.isPointNearPoint(this.cartesianPoint(1),
b.pointerPosition))this._setDragPoint(1);else break;this.changeCursor(e.DrawingCursorClass.RESIZE);return!0;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();if(0!==a.length){var b=this.context,d=this.chartPanel.contentFrame;this._drawingPoints=[a];if(1<a.length){var f=this._calculateXPointsForLines();d=d.height;for(var h=
0;h<f.length;h++){var l=f[h],m={x:l,y:0};l={x:l,y:d};b.beginPath();b.moveTo(m.x,m.y);b.lineTo(l.x,l.y);b.scxStroke(this.actualTheme.line);this._drawingPoints.push([m,l])}}1<a.length&&b.scxStrokePolyline(a,this.actualTheme.line);this.selected&&this._drawSelectionMarkers(a)}}};c.prototype._calculateXPointsForLines=function(){var a=this.chartPanel.contentFrame.width,b=this.cartesianPoints(),d=b[0].x;b=b[1].x;var f=[d,b];d===b?b=this._isDirectionRight?b+1:b-1:this._isDirectionRight=b>d;for(var h=b-d,
l=b;;)if(l+=h,d<b&&l<a||d>b&&0<l)f.push(l);else break;return f};return c}(e.Drawing);e.CyclicLinesDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.ConditionOrderType={BUY:0,SELL:1,STOPLOSS:2,TAKEPROFIT:3,MARKET_ORDER:4,PORTFOLIO:5};var k=function(g){function c(){var a=null!==g&&g.apply(this,arguments)||this;a._tlType=-1;a._id="";a._title=""}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"trendLineOrder"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"showValueMarker",{get:function(){var a=this._options.showValueMarker;return null!=a?a:c.defaults.showValueMarker},set:function(a){this._options.showValueMarker=
!!a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"tlType",{get:function(){return this._tlType},set:function(a){this._tlType=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"id",{get:function(){return this._id},set:function(a){this._id=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"title",{get:function(){return this._title},set:function(a){this._title=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"lineColor",{get:function(){return this.theme.line.strokeColor},
set:function(a){this.theme.line.strokeColor=a},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoint(0);if(!a)return null;var b=this.chartPanel.contentFrame;return{left:b.left,top:a.y,width:b.width,height:1}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoint(0);return a&&e.Geometry.isValueNearValue(a.y,b.y)};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoint(0);if(a){var b=this.context,d=this.chartPanel.contentFrame,
f=this.defaultTheme.text;b.beginPath();b.scxApplyTextTheme(f);b.textBaseline="bottom";b.textAlign="left";b.fillText(this._title,d.left,a.y);b.moveTo(d.left,a.y);b.lineTo(d.right,a.y);b.scxStroke(this.actualTheme.line);b=Math.round(d.left+d.width/2);this.selected&&this._drawSelectionMarkers({x:b,y:a.y})}}};c.prototype.drawValueMarkers=function(){if(this.showValueMarker){var a=this.chartPoints[0];if(a){var b=this.chart.valueMarker,d=this.actualTheme.line.strokeColor,f=this.panelValueScale;a=a.getValue(f.projection);
b.theme.fill.fillColor=d;b.theme.text.fillColor=e.HtmlUtil.isDarkColor(d)?"white":"black";b.draw(a,f)}}};c.defaults={showValueMarker:!0};return c}(e.Drawing);e.TrendLineOrderDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k;(k=e.DrawingEvent||(e.DrawingEvent={})).TEXT_CHANGED="drawingTextChanged";var g=function(c){function a(b){b=c.call(this,b)||this;b._lines=[];return b}__extends(a,c);Object.defineProperty(a,"className",{get:function(){return"text"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"text",{get:function(){return this._options.text||""},set:function(b){this._setOption("text",b||"",k.TEXT_CHANGED);this._updateLines()},enumerable:!0,configurable:!0});a.prototype._updateLines=
function(){this._lines=this.text.split("\n")};a.prototype.bounds=function(){var b=this.cartesianPoint(0);if(!b)return null;var d=this._lines.reduce(function(f,h){return f.length>=h.length?f:h});d=e.DummyCanvasContext.measureText(d,this.actualTheme.text);return{left:b.x,top:b.y,width:d.width,height:d.height*this._lines.length}};a.prototype._finishUserDrawing=function(){var b=this;e.Drawing.prototype._finishUserDrawing.call(this);e.UI.ViewLoader.drawingSettingsDialog(function(d){d.show({chart:b.chart,
drawing:b,cancel:function(){b.chartPanel.removeDrawings(b)},always:function(){b.chartPanel&&b.chartPanel.setNeedsUpdate()}})})};a.prototype.hitTest=function(b){if(!this.canHandleEvents)return!1;var d=this.bounds();return d&&e.Geometry.isPointInsideOrNearRect(b,d)};a.prototype.loadState=function(b){c.prototype.loadState.call(this,b);this._updateLines()};a.prototype.draw=function(){if(this.visible){var b=this._lines;if(0!==b.length){var d=this.cartesianPoint(0);if(d){var f=this.context,h=this.actualTheme.text;
f.scxApplyTextTheme(h);f.textBaseline="middle";f.textAlign="left";for(var l=this.bounds(),m=e.DummyCanvasContext.measureText(b[0],h).height,q=Math.round(m/2),p=d.y,r=0;r<b.length;r++)f.fillText(b[r],d.x,p),p+=q,"underline"===h.decoration&&(f.strokeStyle=h.fillColor,f.beginPath(),f.moveTo(d.x,p),f.lineTo(d.x+l.width,p),f.stroke()),p+=q;this.selected&&(p=(d.y+(d.y+l.height-m))/2,this._drawSelectionMarkers([{x:d.x-5,y:p},{x:d.x+l.width+5,y:p}]))}}}};return a}(e.Drawing);e.TextDrawing=g;e.Drawing.register(g)})(StockChartX||
(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k;(k=e.DrawingEvent||(e.DrawingEvent={})).URL_CHANGED="drawingUrlChanged";var g=function(c){function a(b){var d=c.call(this,b)||this;d._image=new Image;d._image.onload=function(){var f=d.chartPanel;f&&f.setNeedsUpdate()};d.url=b&&b.url;return d}__extends(a,c);Object.defineProperty(a,"className",{get:function(){return"image"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"url",{get:function(){return this._options.url||""},set:function(b){this._setOption("url",b,
k.URL_CHANGED);this._reloadImage()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._options.size},set:function(b){this._setOption("size",b,k.SIZE_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"actualSize",{get:function(){var b=this.size;return b?b:(b=this._image)?{width:b.width,height:b.height}:null},enumerable:!0,configurable:!0});a.prototype._reloadImage=function(){this._image&&(this._image.src=this.url)};a.prototype.bounds=
function(){var b=this.cartesianPoint(0);if(!b)return null;var d=this.actualSize;return d?{left:b.x,top:b.y,width:d.width||10,height:d.height||10}:null};a.prototype._markerPoints=function(b){b||(b=this.cartesianPoint(0));var d=b.x,f=b.y;if(0>=this._image.width)return{x:Math.round(d+5),y:Math.round(f+5)};var h=this.actualSize,l=d+h.width;h=f+h.height;var m=Math.round((d+l)/2),q=Math.round((f+h)/2);return[b,{x:m,y:f},{x:l,y:f},{x:l,y:q},{x:l,y:h},{x:m,y:h},{x:d,y:h},{x:d,y:q}]};a.prototype._finishUserDrawing=
function(){var b=this;c.prototype._finishUserDrawing.call(this);e.UI.ViewLoader.drawingSettingsDialog(function(d){d.show({chart:b.chart,drawing:b,cancel:function(){b.chartPanel.removeDrawings(b)},always:function(){b.chartPanel&&b.chartPanel.setNeedsUpdate()}})})};a.prototype.hitTest=function(b){if(!this.canHandleEvents)return!1;var d=this.bounds();return d&&e.Geometry.isPointInsideOrNearRect(b,d)};a.prototype.loadState=function(b){c.prototype.loadState.call(this,b);this._reloadImage()};a.prototype._handlePanGesture=
function(b,d){switch(b.state){case e.GestureState.STARTED:var f=this._markerPoints();if(f&&1<f.length)for(var h=0;h<f.length;h++)if(e.Geometry.isPointNearPoint(d.pointerPosition,f[h]))return this._setDragPoint(h),this._updateCursor(),!0;break;case e.GestureState.CONTINUED:if(!(0>this._dragPoint)){f=this.projection;h=this.chartPoints[0];var l=d.pointerPosition;d=this.actualSize;b=b.moveOffset;var m=h.toPoint(f);switch(this._dragPoint){case 0:if(d){l=d.width;var q=d.height,p=d.width/d.height;d.width-=
b.x;d.height=d.width/p;h.moveTo(m.x+(l-d.width),m.y+(q-d.height),f)}break;case 1:h.moveToY(l.y,f);d&&(d.height-=h.getY(f)-m.y);break;case 2:d&&(q=d.height,p=d.width/d.height,d.height-=b.y,d.width=d.height*p,h.moveToY(m.y+(q-d.height),f));break;case 3:d&&(d.width+=b.x);break;case 4:d&&(p=d.width/d.height,d.width+=b.x,d.height=d.width/p);break;case 5:d&&(d.height+=b.y);break;case 6:d&&(l=d.width,p=d.width/d.height,d.width-=b.x,d.height=d.width/p,h.moveToX(m.x+(l-d.width),f));break;case 7:h.moveToX(l.x,
f);d&&(d.width-=h.getX(f)-m.x);break;default:return!0}this.size=d;return!0}}return!1};a.prototype._updateCursor=function(){switch(this._dragPoint){case 0:case 4:var b=e.DrawingCursorClass.RESIZE_NWSE;break;case 1:case 5:b=e.DrawingCursorClass.RESIZE_NS;break;case 2:case 6:b=e.DrawingCursorClass.RESIZE_NESW;break;case 3:case 7:b=e.DrawingCursorClass.RESIZE_EW}b&&this.changeCursor(b)};a.prototype.draw=function(){if(this.visible){var b=this.cartesianPoint(0);if(b){var d=this.context,f=b.x,h=b.y;if(0<
this._image.width){var l=this.size;l?(0>l.width&&(f+=l.width),0>l.height&&(h+=l.height),d.drawImage(this._image,f,h,Math.abs(l.width),Math.abs(l.height))):d.drawImage(this._image,f,h)}else d.beginPath(),d.rect(f,h,10,10),d.moveTo(f,h),d.lineTo(f+10,h+10),d.moveTo(f,h+10),d.lineTo(f+10,h),d.scxStroke({strokeColor:"red",width:1});this.selected&&this._drawSelectionMarkers(this._markerPoints(b))}}};return a}(e.Drawing);e.ImageDrawing=g;e.Drawing.register(g)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(a){a=g.call(this,a)||this;a._lines=[];return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"balloon"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"text",{get:function(){return this._options.text||""},set:function(a){this._setOption("text",a||"",e.DrawingEvent.TEXT_CHANGED);this._updateLines()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"cornerRadius",{get:function(){return this._options.cornerRadius||
this._defaults.corderRadius||c.defaults.corderRadius},set:function(a){if(a&&!e.JsUtil.isPositiveNumber(a))throw Error("Corder radius must be a positive number.");this._options.cornerRadius=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"anchorSize",{get:function(){return this._options.anchorSize||this._defaults.anchorSize||c.defaults.anchorSize},set:function(a){this._options.anchorSize=a},enumerable:!0,configurable:!0});c.prototype.bounds=function(){if(!this._leftTopPoint||!this.cartesianPoint(0))return null;
var a=this._leftTopPoint.x,b=this._leftTopPoint.y;return{left:a,top:b,width:Math.abs(this._rightBottomPoint.x-a),height:Math.abs(this._rightBottomPoint.y-b)}};c.prototype._finishUserDrawing=function(){var a=this;g.prototype._finishUserDrawing.call(this);e.UI.ViewLoader.drawingSettingsDialog(function(b){b.show({chart:a.chart,drawing:a,cancel:function(){a.chartPanel.removeDrawings(a)},always:function(){a.chartPanel&&a.chartPanel.setNeedsUpdate()}})})};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;
var b=this.bounds();return b&&e.Geometry.isPointInsideOrNearRect(a,b)};c.prototype.loadState=function(a){g.prototype.loadState.call(this,a);this._updateLines()};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoint(0);if(a){var b=this._lines,d=b.reduce(function(w,x){return w.length>=x.length?w:x}),f=this.context,h=this.actualTheme,l=h.text;d=e.DummyCanvasContext.measureText(d,h.text);var m=Math.ceil(d.width/2),q=this.cornerRadius,p=m+q,r=Math.ceil(this.anchorSize.width/2),v=this.anchorSize.height,
u=a.y-v;v=u-d.height*b.length-v;f.beginPath();f.moveTo(a.x,a.y);f.lineTo(a.x-r,u);f.lineTo(a.x-m,u);var t=a.x-p;f.quadraticCurveTo(t,u,t,u-q);f.lineTo(t,v+q);f.quadraticCurveTo(t,v,a.x-m,v);f.lineTo(a.x+m,v);p=a.x+p;f.quadraticCurveTo(p,v,p,v+q);f.lineTo(p,u-q);f.quadraticCurveTo(p,u,a.x+m,u);f.lineTo(a.x+r,u);f.closePath();f.scxFillStroke(h.fill,h.line);this._leftTopPoint={x:t,y:v};this._rightBottomPoint={x:p,y:a.y};f.scxApplyTextTheme(h.text);f.textBaseline="middle";f.textAlign="left";h=Math.round(v+
2*d.height/3+1);for(q=0;q<b.length;q++)f.fillText(b[q],a.x-m,h),"underline"===l.decoration&&(f.strokeStyle=l.fillColor,f.beginPath(),f.moveTo(a.x-m,h+5*d.height/9-1),f.lineTo(a.x+m,h+5*d.height/9-1),f.stroke()),h+=d.height;this.selected&&this._drawSelectionMarkers(a)}}};c.prototype._updateLines=function(){this._lines=this.text.split("\n")};c.defaults={corderRadius:5,anchorSize:{width:10,height:10}};return c}(e.Drawing);e.BalloonDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.MeasureArrowDrawingMode={START:"start",END:"end",BOTH:"both"};var k=function(g){function c(){var a=null!==g&&g.apply(this,arguments)||this;a._isXDirectionInverted=!1;a._isYDirectionInverted=!1;a._xDirection=1;a._yDirection=1;return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"measure"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"cornerRadius",{get:function(){var a=this._options.cornerRadius;return null!=a?a:c.defaults.cornerRadius},set:function(a){if(a&&!e.JsUtil.isPositiveNumber(a))throw Error("Corder radius must be a positive number.");this._options.cornerRadius=a},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();return a.length<this.pointsNeeded?null:{left:Math.min(a[0].x,a[1].x),top:Math.min(a[0].y,a[1].y),width:Math.abs(a[0].x-a[1].x),height:Math.abs(a[0].y-a[1].y)}};c.prototype._markerPoints=
function(a){a||(a=this.bounds());if(!a)return(a=this.cartesianPoint(0))&&[a];var b=Math.round(a.left+a.width/2),d=Math.round(a.top+a.height/2),f=a.left+a.width,h=a.top+a.height;return[{x:a.left,y:a.top},{x:b,y:a.top},{x:f,y:a.top},{x:f,y:d},{x:f,y:h},{x:b,y:h},{x:a.left,y:h},{x:a.left,y:d}]};c.prototype._normalizePoints=function(){var a=this.bounds();if(a){var b=this.projection,d=this.chartPoints;d[0].moveTo(a.left,a.top,b);d[1].moveTo(a.left+a.width,a.top+a.height,b)}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;
var b=this.cartesianPoints();return 1<b.length&&e.Geometry.isPointNearRectPoints(a,b[0],b[1])};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if((a=this._markerPoints())&&1<a.length)for(var d=0;d<a.length;d++)if(e.Geometry.isPointNearPoint(b.pointerPosition,a[d]))return this._isXDirectionInverted=-1===this._xDirection,this._isYDirectionInverted=1===this._yDirection,this._normalizePoints(),this._setDragPoint(d),this._updateCursor(),!0;break;case e.GestureState.CONTINUED:if(0<=
this._dragPoint){a=this.projection;d=this.chartPoints;b=b.pointerPosition;switch(this._dragPoint){case 0:d[0].moveTo(b.x,b.y,a);break;case 1:d[0].moveToY(b.y,a);break;case 2:d[0].moveToY(b.y,a);d[1].moveToX(b.x,a);break;case 3:d[1].moveToX(b.x,a);break;case 4:d[1].moveTo(b.x,b.y,a);break;case 5:d[1].moveToY(b.y,a);break;case 6:d[0].moveToX(b.x,a);d[1].moveToY(b.y,a);break;case 7:d[0].moveToX(b.x,a)}return!0}}return!1};c.prototype._updateCursor=function(){switch(this._dragPoint){case 0:case 4:var a=
e.DrawingCursorClass.RESIZE_NWSE;break;case 1:case 5:a=e.DrawingCursorClass.RESIZE_NS;break;case 2:case 6:a=e.DrawingCursorClass.RESIZE_NESW;break;case 3:case 7:a=e.DrawingCursorClass.RESIZE_EW}a&&this.changeCursor(a)};c.prototype._duration=function(){var a=this.bounds();if(!a)return"";var b=moment(this.projection.dateByX(a.left));a=moment(this.projection.dateByX(a.left+a.width));var d="years",f=a.diff(b,d);0===f&&(d="months",f=a.diff(b,d));0===f&&(d="weeks",f=a.diff(b,d));0===f&&(d="days",f=a.diff(b,
d));0===f&&(d="hours",f=a.diff(b,d));0===f&&(d="minutes",f=a.diff(b,d));0===f&&(d="seconds",f=a.diff(b,d));f*=this._xDirection;return moment.duration(f,d).humanize(!0).replace("in","")};c.prototype.draw=function(){if(this.visible){var a=this.bounds();if(a){var b=Math.round(a.left+a.width/2),d=Math.round(a.top+a.height/2),f=this.context,h={x:a.left,y:d},l={x:a.left+a.width,y:d},m={x:b,y:a.top};d={x:b,y:a.top+a.height};b=this.actualTheme;f.beginPath();f.rect(a.left,a.top,a.width,a.height);f.scxFillStroke(b.fill,
b.border);var q=this.chartPoints[0],p=this.chartPoints[1],r=this._isYDirectionInverted?q.y>p.y:q.y<p.y;this._xDirection=(this._isXDirectionInverted?q.x<p.x:q.x>p.x)?-1:1;this._yDirection=r?-1:1;r=1===this._yDirection?e.MeasureArrowDrawingMode.START:e.MeasureArrowDrawingMode.END;this._drawArrowHeadLine(h,l,1===this._xDirection?e.MeasureArrowDrawingMode.END:e.MeasureArrowDrawingMode.START);this._drawArrowHeadLine(m,d,r);l=this.projection;h=q.getValue(l);l=p.getValue(l);m=this.chart.barsBetweenPoints(q,
p);q=this.panelValueScale.formatValue((h-l)*this._yDirection);p=e.DummyCanvasContext.measureText(q,b.balloon.text);h=(m*this._xDirection).toFixed()+" bars, "+this._duration();l=e.DummyCanvasContext.measureText(h,b.balloon.text);m=Math.max(p.width,l.width)+2;d=d.x-m/2;r=a.top+a.height+4;var v=r+p.height,u=v+p.height;this._drawRoundRect(d,r,m,p.height+l.height+2);f.scxApplyTextTheme(b.balloon.text);f.textBaseline="alphabetic";f.textAlign="left";f.fillText(q,d+3,v);f.fillText(h,d+3,u);this.selected&&
this._drawSelectionMarkers(this._markerPoints(a))}}};c.prototype._drawArrowHeadLine=function(a,b,d){var f=this.context,h=this.actualTheme;f.beginPath();f.moveTo(a.x,a.y);f.lineTo(b.x,b.y);f.scxStroke(h.line);f=b.x-a.x;h=b.y-a.y;var l=(b.x>a.x?-90:90)*Math.PI/180;switch(d){case e.MeasureArrowDrawingMode.BOTH:d=Math.atan(h/f)+l;d===Math.PI&&(d=0);f=Math.atan(h/f)-l;0===f&&(f=Math.PI);this._drawArrow(a,d);this._drawArrow(b,f);break;case e.MeasureArrowDrawingMode.START:d=Math.atan(h/f)+l;d===Math.PI&&
(d=0);this._drawArrow(a,d);break;case e.MeasureArrowDrawingMode.END:f=Math.atan(h/f)-l,0===f&&(f=Math.PI),this._drawArrow(b,f)}};c.prototype._drawArrow=function(a,b){var d=this.context,f=this.actualTheme;d.save();d.beginPath();d.translate(a.x,a.y);d.rotate(b);d.moveTo(0,0);d.lineTo(5,5);d.moveTo(0,0);d.lineTo(-5,5);d.closePath();d.scxStroke(f.line);d.restore()};c.prototype._drawRoundRect=function(a,b,d,f,h){null==h&&(h=this.cornerRadius);var l=this.context;d=a+(d+h);f=b+(f+h);l.beginPath();l.moveTo(a+
h,b);l.lineTo(d-h,b);l.quadraticCurveTo(d,b,d,b+h);l.lineTo(d,f-h);l.quadraticCurveTo(d,f,d-h,f);l.lineTo(a+h,f);l.quadraticCurveTo(a,f,a,f-h);l.lineTo(a,b+h);l.quadraticCurveTo(a,b,a+h,b);l.closePath();a=this.actualTheme.balloon;l.scxFillStroke(a.fill,a.border)};c.defaults={cornerRadius:5};return c}(e.Drawing);e.MeasureDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"measureTool"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();return a.length<this.pointsNeeded?null:{left:Math.min(a[0].x,a[1].x),top:Math.min(a[0].y,a[1].y),width:Math.abs(a[0].x-a[1].x),
height:Math.abs(a[0].y-a[1].y)}};c.prototype._createInfoControls=function(){if(!this._infoControls){var a=this.chartPanel.container.scxAppend("div","scxMeasureTool");this._infoControls={rootDiv:a,firstPoint:a.scxAppend("div"),lastPoint:a.scxAppend("div"),range:a.scxAppend("div"),bars:a.scxAppend("div")}}};c.prototype._finishUserDrawing=function(){g.prototype._finishUserDrawing.call(this);this.remove()};c.prototype.remove=function(){this._infoControls&&(this._infoControls.rootDiv.remove(),this._infoControls=
null);return g.prototype.remove.call(this)};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();0!==a.length&&(1<a.length&&this.context.scxStrokePolyline(a,this.actualTheme.line),this.selected&&this._drawSelectionMarkers(a),this._drawValues(a),this._drawInfo())}};c.prototype._drawValues=function(a){var b=this.context,d=this.projection,f=this.actualTheme,h=this._getSelectionMarkerWidth(f)+5,l=this.chartPoints,m=l[0].getValue(d);m=this.chartPanel.formatValue(m);b.textBaseline=
"bottom";b.scxApplyTextTheme(f.text);b.fillText(m,a[0].x,a[0].y-h);1<l.length&&(d=l[1].getValue(d),d=this.chartPanel.formatValue(d),b.fillText(d,a[1].x,a[1].y-h))};c.prototype._drawInfo=function(){this._createInfoControls();var a=this.actualTheme,b=this.projection,d=this._infoControls,f=this.chartPoints,h=this.chartPanel,l=h.chart.dateScale,m=f[0].getDate(b),q=f[0].getValue(b);d.firstPoint.text(l.formatDate(m)+" "+h.formatValue(q));1<f.length&&(m=f[1].getDate(b),b=f[1].getValue(b),d.lastPoint.text(l.formatDate(m)+
" "+h.formatValue(b)),l=this.chart.instrument,q=b-q,l&&l.tickSize?d.range.text("Range (Pips) "+h.formatValue(q/l.tickSize)):d.range.text("Range "+h.formatValue(q)),f=this.chart.barsBetweenPoints(f[0],f[1]),d.bars.text("Bars "+f));d.rootDiv.scxPosition(this.chartPanel.contentFrame.left,0).scxTextStyle(a.text).scxFill(a.fill)};return c}(e.Drawing);e.MeasureToolDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){e.FibonacciLevelTextHorPosition={LEFT:"left",CENTER:"center",RIGHT:"right"};e.FibonacciLevelTextVerPosition={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"};e.FibonacciLevelLineExtension={NONE:"none",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",BOTH:"both"};var k={createPointBehavior:null,levels:[{value:.382},{value:.5},{value:.618},{value:1}],showTrendLine:!0,showLevelLines:!0,showLevelBackgrounds:!0,showLevelValues:!0,showLevelPrices:!0,showLevelPercents:!0,levelTextHorPosition:e.FibonacciLevelTextHorPosition.RIGHT,
levelTextVerPosition:e.FibonacciLevelTextVerPosition.BOTTOM},g;(function(a){a.LEVELS_CHANGED="drawingLevelsChanged";a.SHOW_TREND_LINE_CHANGED="drawingShowTrendLineChanged";a.SHOW_LEVEL_LINES_CHANGED="drawingShowLevelLinesChanged";a.SHOW_LEVEL_BACKGROUNDS_CHANGED="drawingShowLevelBackgroundsChanged";a.SHOW_LEVEL_VALUES_CHANGED="drawingShowLevelValuesChanged";a.SHOW_LEVEL_PRICES_CHANGED="drawingShowLevelPricesChanged";a.SHOW_LEVEL_PERCENTS_CHANGED="drawingShowLevelPercentsChanged";a.LEVEL_TEXT_HOR_POSITION_CHANGED=
"drawingLevelTextHorPositionChanged";a.LEVEL_TEXT_VER_POSITION_CHANGED="drawingLevelTextVerPositionChanged";a.LEVEL_LINES_EXTENSION_CHANGED="drawingLevelLinesExtensionChanged";a.REVERSE_CHANGED="drawingReverseChanged"})(g=e.DrawingEvent||(e.DrawingEvent={}));var c=function(a){function b(d){d=a.call(this,d)||this;d._textOffset=2;return d}__extends(b,a);Object.defineProperty(b,"subClassName",{get:function(){return"fibonacci"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"levels",
{get:function(){return this._optionValue("levels")||b.defaults.levels},set:function(d){if(null!=d&&!Array.isArray(d))throw new TypeError("Levels must be an array of numbers.");for(var f=0,h=d.length;f<h-1;f++)for(var l=f+1;l<h;l++)if(d[f].value>d[l].value){var m=d[f];d[f]=d[l];d[l]=m}this._options.levels=d;this.fire(g.LEVELS_CHANGED,d)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showTrendLine",{get:function(){var d=this._optionValue("showTrendLine");return null!=d?d:b.defaults.showTrendLine},
set:function(d){this._setOption("showTrendLine",d,g.SHOW_TREND_LINE_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showLevelLines",{get:function(){var d=this._optionValue("showLevelLines");return null!=d?d:b.defaults.showLevelLines},set:function(d){this._setOption("showLevelLines",d,g.SHOW_LEVEL_LINES_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showLevelBackgrounds",{get:function(){var d=this._optionValue("showLevelBackgrounds");return null!=
d?d:b.defaults.showLevelBackgrounds},set:function(d){this._setOption("showLevelBackgrounds",d,g.SHOW_LEVEL_BACKGROUNDS_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showLevelValues",{get:function(){var d=this._optionValue("showLevelValues");return null!=d?d:b.defaults.showLevelValues},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showLevels",{set:function(d){this._setOption("showLevelValues",d,g.SHOW_LEVEL_VALUES_CHANGED)},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"showLevelPrices",{get:function(){var d=this._optionValue("showLevelPrices");return null!=d?d:b.defaults.showLevelPrices},set:function(d){this._setOption("showLevelPrices",d,g.SHOW_LEVEL_PRICES_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showLevelPercents",{get:function(){var d=this._optionValue("showLevelPercents");return null!=d?d:b.defaults.showLevelPercents},set:function(d){this._setOption("showLevelPercents",d,g.SHOW_LEVEL_PERCENTS_CHANGED)},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"levelTextHorPosition",{get:function(){var d=this._optionValue("levelTextHorPosition");return null!=d?d:b.defaults.levelTextHorPosition},set:function(d){this._setOption("levelTextHorPosition",d,g.LEVEL_TEXT_HOR_POSITION_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"levelTextVerPosition",{get:function(){var d=this._optionValue("levelTextVerPosition");return null!=d?d:b.defaults.levelTextVerPosition},set:function(d){this._setOption("levelTextVerPosition",
d,g.LEVEL_TEXT_VER_POSITION_CHANGED)},enumerable:!0,configurable:!0});b.prototype._showSettingsDialog=function(){var d=this;e.UI.ViewLoader.fibonacciDrawingSettingsDialog(function(f){f.show({chart:d.chart,drawing:d})})};b.prototype._applyTextPosition=function(){var d=this.context;switch(this.levelTextVerPosition){case e.FibonacciLevelTextVerPosition.MIDDLE:var f="middle";break;case e.FibonacciLevelTextVerPosition.TOP:f="bottom";break;case e.FibonacciLevelTextVerPosition.BOTTOM:f="top";break;default:throw Error("Unsupported level text vertical position: "+
this.levelTextVerPosition);}switch(this.levelTextHorPosition){case e.FibonacciLevelTextHorPosition.CENTER:var h="center";break;case e.FibonacciLevelTextHorPosition.LEFT:h="right";break;case e.FibonacciLevelTextHorPosition.RIGHT:h="left";break;default:throw Error("Unsupported level text horizontal position: "+this.levelTextHorPosition);}d.textBaseline=f;d.textAlign=h};b.prototype._isLevelVisible=function(d){return null!=d.visible?d.visible:!0};b.prototype._adjustXWithTextOffset=function(d){switch(this.levelTextHorPosition){case e.FibonacciLevelTextHorPosition.LEFT:return d-
this._textOffset;case e.FibonacciLevelTextHorPosition.RIGHT:return d+this._textOffset;default:return d}};b.prototype._adjustYWithTextOffset=function(d){switch(this.levelTextVerPosition){case e.FibonacciLevelTextVerPosition.TOP:return d-this._textOffset;case e.FibonacciLevelTextVerPosition.BOTTOM:return d+this._textOffset;default:return d}};b.defaults=k;return b}(e.Drawing);e.FibonacciDrawingBase=c})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"fibonacciArcs"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();if(a.length<this.pointsNeeded)return null;var b=e.Geometry.length(a[0],a[1]);return{left:a[0].x-b,top:a[0].y-b,width:2*b,height:2*
b}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoints();if(b.length<this.pointsNeeded)return!1;if(this.showTrendLine&&e.Geometry.isPointNearPolyline(a,b))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var d=e.Geometry.length(b[0],b[1]),f=0,h=this.levels;f<h.length;f++){var l=h[f];if(this._isLevelVisible(l)&&e.Geometry.isPointNearCircle(a,b[0],Math.round(d*l.value)))return!0}return this.selected&&e.Geometry.isPointNearPoint(a,b)};c.prototype._handlePanGesture=
function(a,b){switch(a.state){case e.GestureState.STARTED:if((a=this.cartesianPoint(1))&&e.Geometry.isPointNearPoint(b.pointerPosition,a))return this._setDragPoint(1),this.changeCursor(e.DrawingCursorClass.RESIZE),!0;break;case e.GestureState.CONTINUED:if(1===this._dragPoint)return this.chartPoints[1].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();if(0!==a.length){var b=this.context,d=this.actualTheme;if(1<a.length){var f=
e.Geometry.length(a[0],a[1]),h=a[0].x,l=a[0].y,m=void 0;this._applyTextPosition();for(var q=0,p=this.levels;q<p.length;q++){var r=p[q];if(this._isLevelVisible(r)){var v=r.theme?r.theme:d,u=Math.round(f*r.value);if(this.showLevelBackgrounds){var t=v.fill||d.fill;b.beginPath();b.arc(h,l,u,0,2*Math.PI,!0);m?(b.arc(h,l,m,0,2*Math.PI,!0),b.scxApplyFillTheme(t),b.fill("evenodd")):b.scxFill(t)}this.showLevelLines&&(b.beginPath(),b.arc(h,l,u,0,2*Math.PI),b.scxStroke(v.line||d.line));this.showLevelValues&&
(m=this.showLevelPercents?Number(100*r.value).toFixed(2)+"%":Number(r.value).toFixed(3),b.scxApplyTextTheme(v.text||d.text),b.fillText(m,h,l+u));m=u}}this.showTrendLine&&b.scxStrokePolyline(a,d.trendLine)}this.selected&&this._drawSelectionMarkers(a)}}};return c}(e.FibonacciDrawingBase);e.FibonacciArcsDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"fibonacciEllipses"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();if(a.length<this.pointsNeeded)return null;var b=e.Geometry.xProjectionLength(a[0],a[1]),d=e.Geometry.yProjectionLength(a[0],
a[1]);return{left:a[0].x-b,top:a[0].y-d,width:2*b,height:2*d}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoints();if(b.length<this.pointsNeeded)return!1;if(this.showTrendLine&&e.Geometry.isPointNearPolyline(a,b))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var d=e.Geometry.xProjectionLength(b[0],b[1]),f=e.Geometry.yProjectionLength(b[0],b[1]),h=0,l=this.levels;h<l.length;h++){var m=l[h];if(this._isLevelVisible(m)&&e.Geometry.isPointNearEllipseWithRadiuses(a,
b[0],Math.round(d*m.value),Math.round(f*m.value)))return!0}return this.selected&&e.Geometry.isPointNearPoint(a,b)};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if((a=this.cartesianPoint(1))&&e.Geometry.isPointNearPoint(b.pointerPosition,a))return this._setDragPoint(1),this.changeCursor(e.DrawingCursorClass.RESIZE),!0;break;case e.GestureState.CONTINUED:if(1===this._dragPoint)return this.chartPoints[1].moveToPoint(b.pointerPosition,this.projection),!0}return!1};
c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();if(0!==a.length){var b=this.context,d=this.actualTheme;if(1<a.length){var f=a[0].x,h=a[0].y,l=e.Geometry.xProjectionLength(a[0],a[1]),m=e.Geometry.yProjectionLength(a[0],a[1]),q=void 0;this._applyTextPosition();for(var p=0,r=this.levels;p<r.length;p++){var v=r[p];if(this._isLevelVisible(v)){var u=v.theme?v.theme:d,t=Math.round(l*v.value),w=Math.round(m*v.value);if(this.showLevelBackgrounds){var x=u.fill||d.fill;b.save();b.beginPath();
b.translate(f,h);t!==w&&b.scale(1,w/t);b.arc(0,0,t,0,2*Math.PI,!1);q?(b.arc(0,0,q,0,2*Math.PI,!1),b.scxApplyFillTheme(x),b.fill("evenodd")):b.scxFill(x);b.restore();q=t}this.showLevelLines&&(b.beginPath(),b.save(),b.translate(f,h),t!==w&&b.scale(1,w/t),b.arc(0,0,t,0,2*Math.PI),b.restore(),b.scxStroke(u.line||d.line));this.showLevelValues&&(v=this.showLevelPercents?Number(100*v.value).toFixed(2)+"%":Number(v.value).toFixed(3),b.scxApplyTextTheme(u.text||d.text),b.fillText(v,f,h+w))}}this.showTrendLine&&
b.scxStrokePolyline(a,d.trendLine)}this.selected&&this._drawSelectionMarkers(a)}}};return c}(e.FibonacciDrawingBase);e.FibonacciEllipsesDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k={levels:[{value:0},{value:.2361},{value:.382},{value:.5},{value:.618},{value:.764},{value:1}],reverse:!1,levelTextVerPosition:e.FibonacciLevelTextVerPosition.MIDDLE,levelLinesExtension:e.FibonacciLevelLineExtension.NONE},g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a,"className",{get:function(){return"fibonacciRetracements"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"reverse",{get:function(){var b=
this._optionValue("reverse");return null!=b?b:a.defaults.reverse},set:function(b){this._setOption("reverse",b,e.DrawingEvent.REVERSE_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"levelLinesExtension",{get:function(){var b=this._optionValue("levelLinesExtension");return null!=b?b:a.defaults.levelLinesExtension},set:function(b){this._setOption("levelLinesExtension",b,e.DrawingEvent.LEVEL_LINES_EXTENSION_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});a.prototype.bounds=function(){var b=this.cartesianPoints();if(b.length<this.pointsNeeded)return null;var d=e.Geometry.length(b[0],b[1]);return{left:b[0].x-d,top:b[0].y-d,width:2*d,height:2*d}};a.prototype.hitTest=function(b){if(!this.canHandleEvents)return!1;var d=this.cartesianPoints();if(d.length<this.pointsNeeded)return!1;if(this.showTrendLine&&e.Geometry.isPointNearPolyline(b,d))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var f=
this._linesXRange(d),h=0,l=this.levels;h<l.length;h++){var m=l[h];if(this._isLevelVisible(m)&&(m=this.reverse?Math.round((d[0].y-d[1].y)*m.value+d[1].y):Math.round((d[1].y-d[0].y)*m.value+d[0].y),e.Geometry.isPointNearLine(b,{x:f.min,y:m},{x:f.max,y:m})))return!0}return this.selected&&e.Geometry.isPointNearPoint(b,d)};a.prototype._handlePanGesture=function(b,d){switch(b.state){case e.GestureState.STARTED:b=this.cartesianPoints();if(1<b.length)for(var f=0;f<b.length;f++)if(e.Geometry.isPointNearPoint(d.pointerPosition,
b[f]))return this._setDragPoint(f),this.changeCursor(e.DrawingCursorClass.RESIZE),!0;break;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(d.pointerPosition,this.projection),!0}return!1};a.prototype.draw=function(){if(this.visible){var b=this.cartesianPoints();if(0!==b.length){var d=this.context,f=this.actualTheme;if(1<b.length){var h=this._linesXRange(b),l=void 0,m=void 0;if(this.showLevelValues){switch(this.levelTextHorPosition){case e.FibonacciLevelTextHorPosition.CENTER:m=
(h.min+h.max)/2;break;case e.FibonacciLevelTextHorPosition.LEFT:m=h.min;break;case e.FibonacciLevelTextHorPosition.RIGHT:m=h.max;break;default:throw Error("Unknown text horizontal position: "+this.levelTextHorPosition);}m=this._adjustXWithTextOffset(m);this._applyTextPosition()}for(var q=0,p=this.levels;q<p.length;q++){var r=p[q];if(this._isLevelVisible(r)){var v=r.theme?r.theme:f,u=this.reverse?Math.round((b[0].y-b[1].y)*r.value+b[1].y):Math.round((b[1].y-b[0].y)*r.value+b[0].y);this.showLevelBackgrounds&&
(l&&(d.beginPath(),d.moveTo(h.min,l),d.lineTo(h.max,l),d.lineTo(h.max,u),d.lineTo(h.min,u),d.closePath(),d.scxFill(v.fill||f.fill)),l=u);this.showLevelLines&&(d.beginPath(),d.moveTo(h.min,u),d.lineTo(h.max,u),d.scxStroke(v.line||f.line));if(this.showLevelValues){r=this.showLevelPercents?Number(100*r.value).toFixed(2)+"%":Number(r.value).toFixed(3);if(this.showLevelPrices){var t=Number(this.projection.valueByY(u)).toFixed(3);r+=" ("+t+")"}d.scxApplyTextTheme(v.text||f.text);v=this.levelLinesExtension;
t=e.FibonacciLevelLineExtension;switch(this.levelTextHorPosition){case e.FibonacciLevelTextHorPosition.RIGHT:if(v===t.RIGHT||v===t.BOTH)d.textAlign=e.FibonacciLevelTextHorPosition.RIGHT;break;case e.FibonacciLevelTextHorPosition.LEFT:if(v===t.LEFT||v===t.BOTH)d.textAlign=e.FibonacciLevelTextHorPosition.LEFT}d.fillText(r,m,this._adjustYWithTextOffset(u))}}}}1<b.length&&this.showTrendLine&&d.scxStrokePolyline(b,f.trendLine);this.selected&&this._drawSelectionMarkers(b)}}};a.prototype._linesXRange=function(b){var d=
this.chartPanel.contentFrame,f=Math.min(b[0].x,b[1].x);b=Math.max(b[0].x,b[1].x);switch(this.levelLinesExtension){case e.FibonacciLevelLineExtension.NONE:break;case e.FibonacciLevelLineExtension.LEFT:f=d.left;break;case e.FibonacciLevelLineExtension.RIGHT:b=d.right;break;case e.FibonacciLevelLineExtension.BOTH:f=d.left;b=d.right;break;default:throw Error("Unknown level lines extension: "+this.levelLinesExtension);}return{min:f,max:b}};a.prototype._adjustXWithTextOffset=function(b){var d=e.FibonacciLevelLineExtension,
f=this.levelLinesExtension;switch(this.levelTextHorPosition){case e.FibonacciLevelTextHorPosition.LEFT:b=f===d.LEFT||f===d.BOTH?b+this._textOffset:b-this._textOffset;break;case e.FibonacciLevelTextHorPosition.RIGHT:b=f===d.RIGHT||f===d.BOTH?b-this._textOffset:b+this._textOffset}return b};a.defaults=k;return a}(e.FibonacciDrawingBase);e.FibonacciRetracementsDrawing=g;e.Drawing.register(g)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"fibonacciFan"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();return a.length<this.pointsNeeded?null:{left:a[0].x,top:a[0].y,width:a[1].x-a[0].x,height:a[1].y-a[0].y}};c.prototype.hitTest=
function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoints();if(b.length<this.pointsNeeded)return!1;var d=b[0].x,f=b[0].y,h=b[1].x,l=b[1].y,m=this.chartPanel.contentFrame.right;if(this.showTrendLine&&e.Geometry.isPointNearPolyline(a,b))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var q=0,p=this.levels;q<p.length;q++){var r=p[q];if(this._isLevelVisible(r)&&e.Geometry.isPointNearLine(a,{x:d,y:f},{x:m,y:Math.round(f+(m-d)*(Math.round((f-l)*r.value+l)-f)/(h-d))}))return!0}return this.selected&&
e.Geometry.isPointNearPoint(a,b[1])};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:a=this.cartesianPoints();if(1<a.length)for(var d=0;d<a.length;d++)if(e.Geometry.isPointNearPoint(b.pointerPosition,a[d]))return this._setDragPoint(d),this.changeCursor(e.DrawingCursorClass.RESIZE),!0;break;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype.draw=
function(){if(this.visible){var a=this.cartesianPoints();if(0!==a.length){var b=this.context,d=this.actualTheme;if(1<a.length){var f=a[0].x,h=a[0].y,l=a[1].x,m=a[1].y,q=this.chartPanel.contentFrame,p=f>l;q=p?q.left:q.right;var r=[];switch(this.levelTextVerPosition){case e.FibonacciLevelTextVerPosition.MIDDLE:b.textBaseline="middle";break;case e.FibonacciLevelTextVerPosition.TOP:b.textBaseline="bottom";break;case e.FibonacciLevelTextVerPosition.BOTTOM:b.textBaseline="top";break;default:throw Error("Unsupported level text vertical position: "+
this.levelTextVerPosition);}b.textAlign=p?"left":"right";for(var v=0,u=this.levels;v<u.length;v++){var t=u[v];if(this._isLevelVisible(t)){var w=t.theme?t.theme:d,x=Math.round(h+(q-f)*(Math.round((h-m)*t.value+m)-h)/(l-f));this.showLevelBackgrounds&&(2===r.length?(b.beginPath(),b.moveTo(r[0].x,r[0].y),b.lineTo(r[1].x,r[1].y),b.lineTo(f,h),b.lineTo(q,x),b.closePath(),b.scxFill(w.fill||d.fill),r[0]={x:q,y:x},r[1]={x:f,y:h}):(r.push({x:q,y:x}),r.push({x:f,y:h})));this.showLevelLines&&(b.beginPath(),b.moveTo(f,
h),b.lineTo(q,x),b.scxStroke(w.line||d.line));if(this.showLevelValues){t=this.showLevelPercents?Number(100*t.value).toFixed(2)+"%":Number(t.value).toFixed(3);var y=p?q+3:q-3;if(this.showLevelPrices){var z=Number(this.projection.valueByY(x)).toFixed(3);t+=" ("+z+")"}b.scxApplyTextTheme(w.text||d.text);b.fillText(t,y,x)}}}}1<a.length&&this.showTrendLine&&b.scxStrokePolyline(a,d.trendLine);this.selected&&this._drawSelectionMarkers(a)}}};c.defaults={levels:[{value:.382},{value:.5},{value:.618}],levelTextVerPosition:e.FibonacciLevelTextVerPosition.MIDDLE};
return c}(e.FibonacciDrawingBase);e.FibonacciFanDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k={levels:[{value:0},{value:1},{value:2},{value:3},{value:8},{value:8},{value:21},{value:34},{value:55},{value:89}],levelLinesExtension:e.FibonacciLevelLineExtension.BOTH},g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a,"className",{get:function(){return"fibonacciTimeZones"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"levelLinesExtension",{get:function(){var b=this._optionValue("levelLinesExtension");
return null!=b?b:a.defaults.levelLinesExtension},set:function(b){this._setOption("levelLinesExtension",b,e.DrawingEvent.LEVEL_LINES_EXTENSION_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});a.prototype.bounds=function(){var b=this.cartesianPoints();if(b.length<this.pointsNeeded)return null;var d=e.Geometry.length(b[0],b[1]);return{left:b[0].x-d,top:b[0].y-d,width:2*d,height:2*d}};a.prototype.hitTest=
function(b){if(!this.canHandleEvents)return!1;var d=this.cartesianPoints();if(2>d.length)return!1;if(this.showTrendLine&&e.Geometry.isPointNearPolyline(b,d))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var f=this._linesYRange(d),h=0,l=this.levels;h<l.length;h++){var m=l[h];if(this._isLevelVisible(m)&&(m=Math.round((d[1].x-d[0].x)*m.value+d[0].x),e.Geometry.isPointNearLine(b,{x:m,y:f.max},{x:m,y:f.min})))return!0}return this.selected&&e.Geometry.isPointNearPoint(b,d)};a.prototype._handlePanGesture=
function(b,d){switch(b.state){case e.GestureState.STARTED:b=this.cartesianPoints();if(1<b.length)for(var f=0;f<b.length;f++)if(e.Geometry.isPointNearPoint(d.pointerPosition,b[f]))return this._setDragPoint(f),this.changeCursor(e.DrawingCursorClass.RESIZE),!0;break;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(d.pointerPosition,this.projection),!0}return!1};a.prototype.draw=function(){if(this.visible){var b=this.cartesianPoints();if(0!==b.length){var d=
this.context,f=this.actualTheme;if(1<b.length){var h=this._linesYRange(b),l=void 0,m=void 0;if(this.showLevelValues)switch(this._applyTextPosition(),this.levelTextVerPosition){case e.FibonacciLevelTextVerPosition.MIDDLE:m=(h.min+h.max)/2;break;case e.FibonacciLevelTextVerPosition.TOP:m=h.min;d.textBaseline="top";break;case e.FibonacciLevelTextVerPosition.BOTTOM:m=h.max,d.textBaseline="bottom"}for(var q=0,p=this.levels;q<p.length;q++){var r=p[q];if(this._isLevelVisible(r)){var v=r.theme?r.theme:f,
u=Math.round((b[1].x-b[0].x)*r.value+b[0].x);this.showLevelBackgrounds&&(l&&(d.beginPath(),d.moveTo(l,h.min),d.lineTo(l,h.max),d.lineTo(u,h.max),d.lineTo(u,h.min),d.closePath(),d.scxFill(v.fill||f.fill)),l=u);this.showLevelLines&&(d.beginPath(),d.moveTo(u,h.min),d.lineTo(u,h.max),d.scxStroke(v.line||f.line));this.showLevelValues&&(r=Number(r.value).toFixed(0),d.scxApplyTextTheme(v.text||f.text),d.fillText(r,this._adjustXWithTextOffset(u),m))}}}1<b.length&&this.showTrendLine&&d.scxStrokePolyline(b,
f.trendLine);this.selected&&this._drawSelectionMarkers(b)}}};a.prototype._linesYRange=function(b){var d=this.chartPanel.contentFrame,f=Math.max(b[0].y,b[1].y);b=Math.min(b[0].y,b[1].y);switch(this.levelLinesExtension){case e.FibonacciLevelLineExtension.NONE:break;case e.FibonacciLevelLineExtension.TOP:b=0;break;case e.FibonacciLevelLineExtension.BOTTOM:f=d.height;break;case e.FibonacciLevelLineExtension.BOTH:b=0;f=d.height;break;default:throw Error("Unknown level lines extension: "+this.levelLinesExtension);
}return{min:b,max:f}};a.defaults=k;return a}(e.FibonacciDrawingBase);e.FibonacciTimeZonesDrawing=g;e.Drawing.register(g)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k={levels:[{value:0},{value:.2361},{value:.382},{value:.5},{value:.618},{value:.764},{value:1},{value:1.618},{value:2.618},{value:3.618},{value:4.236}],reverse:!1,levelTextVerPosition:e.FibonacciLevelTextVerPosition.MIDDLE,levelLinesExtension:e.FibonacciLevelLineExtension.NONE},g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a,"className",{get:function(){return"fibonacciExtensions"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"reverse",{get:function(){var b=this._optionValue("reverse");return null!=b?b:a.defaults.reverse},set:function(b){this._setOption("reverse",b,e.DrawingEvent.REVERSE_CHANGED)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"levelLinesExtension",{get:function(){var b=this._optionValue("levelLinesExtension");return null!=b?b:a.defaults.levelLinesExtension},set:function(b){this._setOption("levelLinesExtension",b,e.DrawingEvent.LEVEL_LINES_EXTENSION_CHANGED)},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"pointsNeeded",{get:function(){return 3},enumerable:!0,configurable:!0});a.prototype.bounds=function(){var b=this.cartesianPoints();if(b.length<this.pointsNeeded)return null;var d=e.Geometry.length(b[0],b[1]);return{left:b[1].x-d,top:b[1].y-d,width:2*d,height:2*d}};a.prototype.hitTest=function(b){if(!this.canHandleEvents)return!1;var d=this.cartesianPoints();if(d.length<this.pointsNeeded)return!1;if(this.showTrendLine&&e.Geometry.isPointNearPolyline(b,d))return!0;
if(this.showLevelLines||this.showLevelBackgrounds)for(var f=this._linesXRange(d),h=0,l=this.levels;h<l.length;h++){var m=l[h];if(this._isLevelVisible(m)&&(m=this.reverse?Math.round((d[0].y-d[1].y)*m.value+d[2].y):Math.round((d[1].y-d[0].y)*m.value+d[2].y),e.Geometry.isPointNearLine(b,{x:f.min,y:m},{x:f.max,y:m})))return!0}return this.selected&&e.Geometry.isPointNearPoint(b,d)};a.prototype._handlePanGesture=function(b,d){switch(b.state){case e.GestureState.STARTED:b=this.cartesianPoints();if(1<b.length)for(var f=
0;f<b.length;f++)if(e.Geometry.isPointNearPoint(d.pointerPosition,b[f]))return this._setDragPoint(f),this.changeCursor(e.DrawingCursorClass.RESIZE),!0;break;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(d.pointerPosition,this.projection),!0}return!1};a.prototype.draw=function(){if(this.visible){var b=this.cartesianPoints();if(0!==b.length){var d=this.context,f=this.actualTheme;if(2<b.length){var h=this._linesXRange(b),l=void 0,m=void 0;if(this.showLevelValues){switch(this.levelTextHorPosition){case e.FibonacciLevelTextHorPosition.CENTER:l=
(h.min+h.max)/2;break;case e.FibonacciLevelTextHorPosition.LEFT:l=h.min;break;case e.FibonacciLevelTextHorPosition.RIGHT:l=h.max;break;default:throw Error("Unknown text horizontal position: "+this.levelTextHorPosition);}l=this._adjustXWithTextOffset(l);this._applyTextPosition()}for(var q=0,p=this.levels;q<p.length;q++){var r=p[q];if(this._isLevelVisible(r)){var v=r.theme?r.theme:f,u=this.reverse?Math.round((b[0].y-b[1].y)*r.value+b[2].y):Math.round((b[1].y-b[0].y)*r.value+b[2].y);this.showLevelBackgrounds&&
(m&&(d.beginPath(),d.moveTo(h.min,m),d.lineTo(h.max,m),d.lineTo(h.max,u),d.lineTo(h.min,u),d.closePath(),d.scxFill(v.fill||f.fill)),m=u);this.showLevelLines&&(d.beginPath(),d.moveTo(h.min,u),d.lineTo(h.max,u),d.scxStroke(v.line||f.line));if(this.showLevelValues){r=this.showLevelPercents?Number(100*r.value).toFixed(2)+"%":Number(r.value).toFixed(3);if(this.showLevelPrices){var t=Number(this.projection.valueByY(u)).toFixed(3);r+=" ("+t+")"}t=this.levelLinesExtension;var w=e.FibonacciLevelLineExtension;
switch(this.levelTextHorPosition){case e.FibonacciLevelTextHorPosition.RIGHT:if(t===w.RIGHT||t===w.BOTH)d.textAlign=e.FibonacciLevelTextHorPosition.RIGHT;break;case e.FibonacciLevelTextHorPosition.LEFT:if(t===w.LEFT||t===w.BOTH)d.textAlign=e.FibonacciLevelTextHorPosition.LEFT}d.scxApplyTextTheme(v.text||f.text);d.fillText(r,l,this._adjustYWithTextOffset(u))}}}}1<b.length&&this.showTrendLine&&d.scxStrokePolyline(b,f.trendLine);this.selected&&this._drawSelectionMarkers(b)}}};a.prototype._linesXRange=
function(b){var d=this.chartPanel.contentFrame,f=Math.min(b[1].x,b[2].x);b=Math.max(b[1].x,b[2].x);switch(this.levelLinesExtension){case e.FibonacciLevelLineExtension.NONE:break;case e.FibonacciLevelLineExtension.LEFT:f=d.left;break;case e.FibonacciLevelLineExtension.RIGHT:b=d.right;break;case e.FibonacciLevelLineExtension.BOTH:f=d.left;b=d.right;break;default:throw Error("Unknown level lines extension: "+this.levelLinesExtension);}return{min:f,max:b}};a.prototype._adjustXWithTextOffset=function(b){var d=
e.FibonacciLevelLineExtension,f=this.levelLinesExtension;switch(this.levelTextHorPosition){case e.FibonacciLevelTextHorPosition.LEFT:b=f===d.LEFT||f===d.BOTH?b+this._textOffset:b-this._textOffset;break;case e.FibonacciLevelTextHorPosition.RIGHT:b=f===d.RIGHT||f===d.BOTH?b-this._textOffset:b+this._textOffset}return b};a.defaults=k;return a}(e.FibonacciDrawingBase);e.FibonacciExtensionsDrawing=g;e.Drawing.register(g)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"andrewsPitchfork"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 3},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();return a.length<this.pointsNeeded?null:{left:a[0].x,top:a[0].y,width:a[1].x-a[0].x,height:a[1].y-a[0].y}};c.prototype.hitTest=
function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoints();if(3>b.length)return!1;var d=b[0],f=b[1];b=b[2];var h=d.x,l=d.y,m=f.x,q=f.y,p=b.x,r=b.y,v=(p-m)/2+m,u=(r-q)/2+q,t=m-(h-v),w=q-(l-u),x=p-(h-v),y=r-(l-u),z=Math.sqrt(h*v+l*u);h={x:h+(v-h)*z,y:l+(u-l)*z};l=Math.sqrt(m*t+q*w);m={x:m+(t-m)*l,y:q+(w-q)*l};q=Math.sqrt(p*x+r*y);p={x:p+(x-p)*q,y:r+(y-r)*q};return e.Geometry.isPointNearLine(a,f,b)||e.Geometry.isPointNearLine(a,d,h)||e.Geometry.isPointNearLine(a,f,m)||e.Geometry.isPointNearLine(a,
b,p)};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:a=this.cartesianPoints();if(1<a.length)for(var d=0;d<a.length;d++)if(e.Geometry.isPointNearPoint(b.pointerPosition,a[d]))return this._setDragPoint(d),this.changeCursor(e.DrawingCursorClass.RESIZE),!0;break;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype.draw=function(){if(this.visible){var a=
this.cartesianPoints();if(0!==a.length){var b=this.context,d=this.actualTheme;if(2<a.length){var f=a[0].x,h=a[0].y,l=a[1].x,m=a[1].y,q=a[2].x,p=a[2].y,r=(q-l)/2+l,v=(p-m)/2+m,u=l-(f-r),t=m-(h-v),w=q-(f-r),x=p-(h-v),y=Math.sqrt(f*r+h*v);r=f+(r-f)*y;v=h+(v-h)*y;y=Math.sqrt(l*u+m*t);u=l+(u-l)*y;t=m+(t-m)*y;y=Math.sqrt(q*w+p*x);w=q+(w-q)*y;x=p+(x-p)*y;b.beginPath();b.moveTo(f,h);b.lineTo(r,v);b.moveTo(l,m);b.lineTo(u,t);b.moveTo(q,p);b.lineTo(w,x);b.moveTo(l,m);b.lineTo(q,p);b.scxStroke(d.line)}else 1<
a.length&&b.scxStrokePolyline(a,d.line);this.selected&&this._drawSelectionMarkers(a)}}};return c}(e.Drawing);e.AndrewsPitchforkDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"trendChannel"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();return a.length<this.pointsNeeded?null:{left:a[0].x,top:a[0].y,width:a[1].x-a[0].x,height:a[1].y-a[0].y}};c.prototype._finishUserDrawing=
function(){g.prototype._finishUserDrawing.call(this);var a=this.cartesianPoints();a=e.ChartPoint.convert({x:a[0].x,y:a[0].y-20},this.createPointBehavior,this.projection);this.appendChartPoint(a)};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoints();if(b.length<this.pointsNeeded)return!1;var d=b[0].x,f=b[0].y,h=b[1].x,l=b[1].y,m=b[2].x;b=b[2].y;var q=m+(h-d),p=l+(b-f),r=d-(m-d),v=f-(b-f),u=r+(h-d),t=l-(b-f),w=Math.sqrt(d*h+f*l),x=Math.sqrt(m*q+b*p);q=Math.round(m+
(q-m)*x);p=Math.round(b+(p-b)*x);x=Math.sqrt(r*u+v*t);u=Math.round(r+(u-r)*x);t=Math.round(v+(t-v)*x);return e.Geometry.isPointNearLine(a,{x:d,y:f},{x:Math.round(d+(h-d)*w),y:Math.round(f+(l-f)*w)})||e.Geometry.isPointNearLine(a,{x:m,y:b},{x:q,y:p})||e.Geometry.isPointNearLine(a,{x:r,y:v},{x:u,y:t})};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:a=this.cartesianPoints();if(1<a.length)for(var d=0;d<a.length;d++)if(e.Geometry.isPointNearPoint(b.pointerPosition,
a[d]))return this._setDragPoint(d),this.changeCursor(e.DrawingCursorClass.RESIZE),!0;break;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),0===this._dragPoint&&this.chartPoints[2].translate(a.moveOffset.x,a.moveOffset.y,this.projection),!0}return!1};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();if(0!==a.length){var b=this.context,d=this.actualTheme;if(2<a.length){var f=a[0].x,h=
a[0].y,l=a[1].x,m=a[1].y,q=a[2].x,p=a[2].y,r=q+(l-f),v=m+(p-h),u=f-(q-f),t=h-(p-h),w=u+(l-f),x=m-(p-h),y=Math.sqrt(f*l+h*m);l=Math.round(f+(l-f)*y);m=Math.round(h+(m-h)*y);y=Math.sqrt(q*r+p*v);r=Math.round(q+(r-q)*y);v=Math.round(p+(v-p)*y);y=Math.sqrt(u*w+t*x);w=Math.round(u+(w-u)*y);x=Math.round(t+(x-t)*y);b.beginPath();b.moveTo(f,h);b.lineTo(l,m);b.moveTo(q,p);b.lineTo(r,v);b.moveTo(u,t);b.lineTo(w,x);b.scxStroke(d.line)}else 1<a.length&&b.scxStrokePolyline(a,d.line);this.selected&&this._drawSelectionMarkers(a)}}};
return c}(e.Drawing);e.TrendChannelDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"errorChannel"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this._drawingPoints;return!a||6>a.length?null:{left:Math.min(a[0].x,a[1].x),top:Math.max(a[0].y,a[1].y),width:Math.abs(a[1].x-a[0].x),height:Math.abs(a[1].y-
a[0].y)}};c.prototype.hitTest=function(a){if(!this.canHandleEvents||this.chartPoints.length<this.pointsNeeded)return!1;var b=this._drawingPoints;return b?e.Geometry.isPointNearLine(a,b[0],b[1])||e.Geometry.isPointNearLine(a,b[2],b[3])||e.Geometry.isPointNearLine(a,b[4],b[5]):!1};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if(e.Geometry.isPointNearPoint(this.cartesianPoint(0),b.pointerPosition))this._setDragPoint(0);else if(e.Geometry.isPointNearPoint(this.cartesianPoint(1),
b.pointerPosition))this._setDragPoint(1);else break;this.changeCursor(e.DrawingCursorClass.RESIZE);return!0;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype._finishUserDrawing=function(){g.prototype._finishUserDrawing.call(this);var a=this.cartesianPoints();2>a.length||(a[0].x>a[1].x&&(this.chartPoints[0].moveToPoint(a[1],this.projection),this.chartPoints[1].moveToPoint(a[0],this.projection)),
this._drawingPoints=this._calculateDrawingPoints(a))};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();if(0!==a.length){var b=this.context,d=this.actualTheme;if(1<a.length&&a[0].x>a[1].x){var f=a[1];a[1]=a[0];a[0]=f}1<a.length&&(b.beginPath(),a=this._drawingPoints=this._calculateDrawingPoints(a),this._moveMainLineYPoint(a[2].y,a[3].y),b.moveTo(a[0].x,a[0].y),b.lineTo(a[1].x,a[1].y),b.moveTo(a[2].x,a[2].y),b.lineTo(a[3].x,a[3].y),b.moveTo(a[4].x,a[4].y),b.lineTo(a[5].x,a[5].y),
b.scxStroke(d.line),a=this._getMainLinePoints());this.selected&&this._drawSelectionMarkers(a)}}};c.prototype._calculateDrawingPoints=function(a){var b=a[0];a=a[1];var d=this.projection,f=this.chart.primaryBarDataSeries(),h=d.recordByX(b.x),l=d.recordByX(a.x),m=Math.min(h,l),q=Math.max(h,l),p=f.high;h=0;for(l=m;l<=q;l++)p.valueAtIndex(l)>h&&(h=p.valueAtIndex(l));p=f.low;var r=h;for(l=m;l<=q;l++)p.valueAtIndex(l)<r&&(r=p.valueAtIndex(l));h=.5*(h-r);q=q-m+1;p=[];for(l=0;l<q;l++)p.push(f.low.valueAtIndex(m+
l));m=e.DrawingCalculationUtil.calculateLinearRegression(p);f=m.firstValue;r=f+m.slope*(q-1);m=d.yByValue(f+h);l=d.yByValue(r+h);q=d.yByValue(f);p=d.yByValue(r);f=d.yByValue(f-h);d=d.yByValue(r-h);return[{x:b.x,y:m},{x:a.x,y:l},{x:b.x,y:q},{x:a.x,y:p},{x:b.x,y:f},{x:a.x,y:d}]};c.prototype._getMainLinePoints=function(){return[this._drawingPoints[2],this._drawingPoints[3]]};c.prototype._moveMainLineYPoint=function(a,b){this.chartPoints[0].moveToY(a,this.projection);this.chartPoints[1].moveToY(b,this.projection)};
return c}(e.Drawing);e.ErrorChannelDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"quadrantLines"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();return a.length<this.pointsNeeded?null:{left:Math.min(a[0].x,a[1].x),top:Math.min(a[0].y,a[1].y),width:Math.abs(a[0].x-a[1].x),
height:Math.abs(a[0].y-a[1].y)}};c.prototype.hitTest=function(a){if(!this.canHandleEvents||2>this.chartPoints.length)return!1;for(var b=this._drawingPoints,d=0;5>d;d++)if(e.Geometry.isPointNearLine(a,b[d][0],b[d][1]))return!0;return!1};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if(e.Geometry.isPointNearPoint(this.cartesianPoint(0),b.pointerPosition))this._setDragPoint(0);else if(e.Geometry.isPointNearPoint(this.cartesianPoint(1),b.pointerPosition))this._setDragPoint(1);
else break;this.changeCursor(e.DrawingCursorClass.RESIZE);return!0;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype._finishUserDrawing=function(){g.prototype._finishUserDrawing.call(this);var a=this.cartesianPoints();a[0].x>a[1].x&&(this.chartPoints[0].moveToPoint(a[1],this.projection),this.chartPoints[1].moveToPoint(a[0],this.projection));this._drawingPoints=this._calculateDrawingPoints(a)};
c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();if(0!==a.length){var b=this.context,d=this.actualTheme;if(1<a.length){b.beginPath();a=this._drawingPoints=this._calculateDrawingPoints(a);this._moveMainLineYPoint(a[2][0].y,a[2][1].y);for(var f=0;5>f;f++)b.moveTo(a[f][0].x,a[f][0].y),b.lineTo(a[f][1].x,a[f][1].y),b.scxStroke(d.line)}this.selected&&this._drawSelectionMarkers(this.cartesianPoints())}}};c.prototype._calculateDrawingPoints=function(a){var b=a[0];a=a[1];var d=this.projection,
f=d.recordByX(b.x),h=d.recordByX(a.x),l=Math.min(f,h),m=Math.max(f,h);f=0;var q=this.chart.primaryDataSeries(e.DataSeriesSuffix.HIGH);for(h=l;h<=m;h++){var p=q.valueAtIndex(h);p>f&&(f=p)}q=f;p=this.chart.primaryDataSeries(e.DataSeriesSuffix.LOW);for(h=l;h<=m;h++)l=p.valueAtIndex(h),l<q&&(q=l);l=f+(f-q)/4;m=[];for(h=0;5>h;h++)l-=(f-q)/4,p=d.yByValue(l),m.push([{x:b.x,y:p},{x:a.x,y:p}]);return m};c.prototype._moveMainLineYPoint=function(a,b){this.chartPoints[0].moveToY(a,this.projection);this.chartPoints[1].moveToY(b,
this.projection)};return c}(e.Drawing);e.QuadrantLinesDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"raffRegression"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this._drawingPoints;return!a||6>a.length?null:{left:Math.min(a[0].x,a[1].x),top:Math.max(a[0].y,a[1].y),width:Math.abs(a[1].x-a[0].x),height:c._calculateBoundsHeight(a)}};
c.prototype.hitTest=function(a){if(!this.canHandleEvents||this.chartPoints.length<this.pointsNeeded)return!1;var b=this._drawingPoints;return e.Geometry.isPointNearLine(a,b[0],b[1])||e.Geometry.isPointNearLine(a,b[2],b[3])||e.Geometry.isPointNearLine(a,b[4],b[5])};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if(e.Geometry.isPointNearPoint(this.cartesianPoint(0),b.pointerPosition))this._setDragPoint(0);else if(e.Geometry.isPointNearPoint(this.cartesianPoint(1),
b.pointerPosition))this._setDragPoint(1);else break;this.changeCursor(e.DrawingCursorClass.RESIZE);return!0;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype._finishUserDrawing=function(){g.prototype._finishUserDrawing.call(this);var a=this.cartesianPoints();a[0].x>a[1].x&&(this.chartPoints[0].moveToPoint(a[1],this.projection),this.chartPoints[1].moveToPoint(a[0],this.projection));this._drawingPoints=
this._calculateDrawingPoints(a)};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();if(!(1>a.length)){if(1<a.length&&a[0].x>a[1].x){var b=a[1];a[1]=a[0];a[0]=b}b=this.context;var d=this.actualTheme;1<a.length&&(b.beginPath(),a=this._drawingPoints=this._calculateDrawingPoints(a),this._moveMainLineYPoint(a[2].y,a[3].y),b.moveTo(a[0].x,a[0].y),b.lineTo(a[1].x,a[1].y),b.moveTo(a[2].x,a[2].y),b.lineTo(a[3].x,a[3].y),b.moveTo(a[4].x,a[4].y),b.lineTo(a[5].x,a[5].y),a=this._getMainLinePoints(),
b.scxStroke(d.line));this.selected&&this._drawSelectionMarkers(a)}}};c.prototype._calculateDrawingPoints=function(a){var b=a[0];a=a[1];var d=this.projection,f=d.recordByX(b.x),h=d.recordByX(a.x),l=this.chart.primaryBarDataSeries(),m=Math.min(f,h),q=Math.min(Math.max(f,h),l.date.length-1);h=q-m+1;f=[];for(var p=0;p<h;p++)f.push(l.close.valueAtIndex(m+p));f=e.DrawingCalculationUtil.calculateLinearRegression(f);var r=f.slope;f=f.firstValue;h=f+r*(h-1);var v=0,u=0;p=m;for(m=0;p<=q;p++,m++){var t=f+r*
m,w=l.high.valueAtIndex(p)-t;t-=l.low.valueAtIndex(p);0<w&&w>v&&(v=w);0<t&&t>u&&(u=t)}m=Math.max(v,u);l=d.yByValue(f+m);q=d.yByValue(h+m);p=d.yByValue(f);r=d.yByValue(h);f=d.yByValue(f-m);d=d.yByValue(h-m);return[{x:b.x,y:l},{x:a.x,y:q},{x:b.x,y:p},{x:a.x,y:r},{x:b.x,y:f},{x:a.x,y:d}]};c.prototype._getMainLinePoints=function(){return[this._drawingPoints[2],this._drawingPoints[3]]};c.prototype._moveMainLineYPoint=function(a,b){this.chartPoints[0].moveToY(a,this.projection);this.chartPoints[1].moveToY(b,
this.projection)};c._calculateBoundsHeight=function(a){return Math.abs(Math.max(a[0].y,a[1].y)-Math.min(a[4].y,a[5].y))};return c}(e.Drawing);e.RaffRegressionDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){return null!==g&&g.apply(this,arguments)||this}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"tironeLevels"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();return a.length<this.pointsNeeded?null:{left:a[0].x,top:a[0].y,width:a[1].x-a[0].x,height:a[1].y-a[0].y}};c.prototype.hitTest=
function(a){if(!this.canHandleEvents||this.chartPoints.length<this.pointsNeeded)return!1;var b=this._drawingPoints;return e.Geometry.isPointNearLine(a,b[0],b[1])||e.Geometry.isPointNearLine(a,b[2],b[3])||e.Geometry.isPointNearLine(a,b[4],b[5])};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if(e.Geometry.isPointNearPoint(this.cartesianPoint(0),b.pointerPosition))this._setDragPoint(0);else if(e.Geometry.isPointNearPoint(this.cartesianPoint(1),b.pointerPosition))this._setDragPoint(1);
else break;this.changeCursor(e.DrawingCursorClass.RESIZE);return!0;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype._finishUserDrawing=function(){g.prototype._finishUserDrawing.call(this);var a=this.cartesianPoints();a[0].x>a[1].x&&(this.chartPoints[0].moveToPoint(a[1],this.projection),this.chartPoints[1].moveToPoint(a[0],this.projection));this._drawingPoints=this._calculateDrawingPoints(a)};
c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();if(0!==a.length){var b=this.context,d=this.actualTheme;1<a.length&&(b.beginPath(),a=this._drawingPoints=this._calculateDrawingPoints(a),this._moveMainLineYPoint(a[2].y,a[3].y),b.moveTo(a[0].x,a[0].y),b.lineTo(a[1].x,a[1].y),b.moveTo(a[2].x,a[2].y),b.lineTo(a[3].x,a[3].y),b.moveTo(a[4].x,a[4].y),b.lineTo(a[5].x,a[5].y),b.scxStroke(d.line),a=this._getMainLinePoints());this.selected&&this._drawSelectionMarkers(a)}}};c.prototype._calculateDrawingPoints=
function(a){var b=a[0];a=a[1];var d=this.projection,f=d.recordByX(b.x),h=d.recordByX(a.x),l=Math.min(f,h);h=Math.max(f,h);var m=this.chart.primaryDataSeries(e.DataSeriesSuffix.HIGH);f=0;for(var q=l;q<=h;q++){var p=m.valueAtIndex(q);p>f&&(f=p)}p=this.chart.primaryDataSeries(e.DataSeriesSuffix.LOW);m=f;for(q=l;q<=h;q++)l=p.valueAtIndex(q),l<m&&(m=l);l=d.yByValue(f-(f-m)/3);h=d.yByValue(m+(f-m)/2);d=d.yByValue(m+(f-m)/3);return[{x:b.x,y:l},{x:a.x,y:l},{x:b.x,y:h},{x:a.x,y:h},{x:b.x,y:d},{x:a.x,y:d}]};
c.prototype._getMainLinePoints=function(){return[this._drawingPoints[2],this._drawingPoints[3]]};c.prototype._moveMainLineYPoint=function(a,b){this.chartPoints[0].moveToY(a,this.projection);this.chartPoints[1].moveToY(b,this.projection)};return c}(e.Drawing);e.TironeLevelsDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){var a=null!==g&&g.apply(this,arguments)||this;a._extend=!0;return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"speedLines"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extend",{get:function(){return this._extend},set:function(a){this._extend=a},enumerable:!0,configurable:!0});c.prototype.bounds=
function(){var a=this._markersPoints;return!a||2>a.length?null:{left:Math.min(a[0].x,a[1].x),top:Math.max(a[0].y,a[1].y),width:Math.abs(a[1].x-a[0].x),height:Math.abs(a[1].y-a[0].y)}};c.prototype.hitTest=function(a){if(!this.canHandleEvents||this.chartPoints.length<this.pointsNeeded)return!1;var b=this._drawingPoints;return e.Geometry.isPointNearLine(a,b[0],b[1])||e.Geometry.isPointNearLine(a,b[2],b[3])||e.Geometry.isPointNearLine(a,b[4],b[5])};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if(e.Geometry.isPointNearPoint(this._markersPoints[0],
b.pointerPosition))this._setDragPoint(0);else if(e.Geometry.isPointNearPoint(this._markersPoints[1],b.pointerPosition))this._setDragPoint(1);else break;this.changeCursor(e.DrawingCursorClass.RESIZE);return!0;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();if(0!==a.length){var b=this.context,d=this.actualTheme;1<a.length&&
(b.beginPath(),a=this._drawingPoints=this._calculateDrawingPoints(a),b.moveTo(a[0].x,a[0].y),b.lineTo(a[1].x,a[1].y),b.moveTo(a[2].x,a[2].y),b.lineTo(a[3].x,a[3].y),b.moveTo(a[4].x,a[4].y),b.lineTo(a[5].x,a[5].y),b.scxStroke(d.line),a=this._markersPoints);this.selected&&this._drawSelectionMarkers(a)}}};c.prototype._calculateDrawingPoints=function(a){var b=a[0].x,d=a[0].y,f=a[1].x,h=a[1].y,l=this.chart.primaryBarDataSeries(),m=l.high,q=l.low;l=m.valueAtIndex(this.projection.recordByX(b));b=q.valueAtIndex(this.projection.recordByX(b));
m=m.valueAtIndex(this.projection.recordByX(f));f=q.valueAtIndex(this.projection.recordByX(f));(q=m>b)&&f<l&&(q=d>h?!0:!1);q?(d=this.projection.yByValue(b),h=this.projection.yByValue(m),q=b+.333*(m-b),l=this.projection.yByValue(b+.667*(m-b))):(d=this.projection.yByValue(l),h=this.projection.yByValue(f),q=l-.333*(l-f),l=this.projection.yByValue(l-.667*(l-f)));m=this.projection.yByValue(q);b=this.projection.xByRecord(this.projection.recordByX(a[0].x));f=this.projection.xByRecord(this.projection.recordByX(a[1].x));
this._markersPoints=[{x:b,y:d},{x:f,y:h}];this.extend&&(a=Math.sqrt(b*f+d*h),f=Math.round(b+(f-b)*a),h=Math.round(d-(d-h)*a),l=Math.round(d-(d-l)*a),m=Math.round(d-(d-m)*a));return[{x:b,y:d},{x:f,y:h},{x:b,y:d},{x:f,y:l},{x:b,y:d},{x:f,y:m}]};return c}(e.Drawing);e.SpeedLinesDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k;(function(c){c.ANGLES_CHANGED="drawingAnglesChanged";c.SHOW_ANGLE_LINE_CHANGED="drawingShowAngleLineChanged"})(k=e.DrawingEvent||(e.DrawingEvent={}));var g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a,"className",{get:function(){return"gannFan"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"angles",{get:function(){return this._optionValue("angles")||a.defaults.angles},set:function(b){if(null!=
b&&!Array.isArray(b))throw new TypeError("Angles must be an array of numbers.");this._options.angles=b;this.fire(k.ANGLES_CHANGED,b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});a.prototype.bounds=function(){var b=this.cartesianPoints();return 2>b.length?null:{left:Math.min(b[0].x,b[1].x),top:Math.max(b[0].y,b[1].y),width:Math.abs(b[1].x-b[0].x),height:Math.abs(b[1].y-b[0].y)}};a.prototype.hitTest=function(b){if(!this.canHandleEvents||
this.cartesianPoints().length<this.pointsNeeded)return!1;for(var d=0,f=this._drawingPoints;d<f.length;d++){var h=f[d];if(e.Geometry.isPointNearLine(b,h[0],h[1]))return!0}return!1};a.prototype._handlePanGesture=function(b,d){switch(b.state){case e.GestureState.STARTED:if(e.Geometry.isPointNearPoint(this.cartesianPoint(0),d.pointerPosition))this._setDragPoint(0);else if(e.Geometry.isPointNearPoint(this.cartesianPoint(1),d.pointerPosition))this._setDragPoint(1);else break;this.changeCursor(e.DrawingCursorClass.RESIZE);
return!0;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(d.pointerPosition,this.projection),!0}return!1};a.prototype.draw=function(){if(this.visible){var b=this.cartesianPoints();if(0!==b.length){var d=this.context,f=this.actualTheme;if(1<b.length){d.beginPath();this._drawingPoints=this._calculateDrawingPoints(b);for(var h=0,l=this._drawingPoints;h<l.length;h++){var m=l[h];d.moveTo(m[0].x,m[0].y);d.lineTo(m[1].x,m[1].y);d.scxStroke(f.line)}}this.selected&&
this._drawSelectionMarkers(b)}}};a.prototype._calculateDrawingPoints=function(b){var d=b[0].x,f=b[0].y,h=b[1].x;var l=this.chartPanel.contentFrame;for(var m=d>h?l.left:l.right,q=[],p=0,r=this.angles;p<r.length;p++)l=f-Math.round(f-b[1].y)*r[p].value,q.push([{x:d,y:f},{x:h,y:l}]);for(b=0;b<q.length;b++)p=q[b],f=p[0].y,l=p[1].y,d=p[0].x,h=p[1].x,p[1].x=m,p[1].y=Math.round(f+(m-d)*(l-f)/(h-d));return q};a.defaults={angles:[{value:.125},{value:.25},{value:.3333},{value:.5},{value:1},{value:2},{value:3},
{value:4},{value:8}]};return a}(e.Drawing);e.GannFanDrawing=g;e.Drawing.register(g)})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return e(k,g)};return function(k,g){function c(){this.constructor=k}e(k,g);k.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
(function(e){var k=function(g){function c(){var a=null!==g&&g.apply(this,arguments)||this;a._tanMax=0x3a052cf8639b6a;a._tanMin=-0x3a052cf8639b6a;a._textOffset=4;a._angleCorrection=!1;return a}__extends(c,g);Object.defineProperty(c,"className",{get:function(){return"trendAngle"},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"radius",{get:function(){return this._options.radius||
c.defaults.radius},set:function(a){this._setOption("radius",a)},enumerable:!0,configurable:!0});c.prototype.bounds=function(){var a=this.cartesianPoints();return a.length<this.pointsNeeded?null:{left:Math.min(a[0].x,a[1].x),top:Math.min(a[0].y,a[1].y),width:Math.abs(a[0].x-a[1].x),height:Math.abs(a[0].y-a[1].y)}};c.prototype.hitTest=function(a){if(!this.canHandleEvents)return!1;var b=this.cartesianPoints();if(null==this._dragPoint&&null!=this._arctan){this._angleCorrection=!0;var d=Math.tan(this._arctan)*
(b[0].x-b[1].x)+b[0].y;if(b[0].x!==b[1].x||b[0].y!==d)b[1].y=d}return 1<b.length&&e.Geometry.isPointNearPolyline(a,b)};c.prototype._handlePanGesture=function(a,b){switch(a.state){case e.GestureState.STARTED:if(e.Geometry.isPointNearPoint(this.cartesianPoint(0),b.pointerPosition)&&null==this._arctan)this._setDragPoint(0);else if(e.Geometry.isPointNearPoint(this.cartesianPoint(1),b.pointerPosition))this._setDragPoint(1);else{if(null!=this._arctan){a=this.cartesianPoints();b=Math.tan(this._arctan);var d=
b*(a[0].x-a[1].x)+a[0].y;(a[0].x!==a[1].x||a[0].y!==d)&&b<this._tanMax&&b>this._tanMin&&(this.chartPoints[1].value=this.projection.valueByY(d))}break}this.changeCursor(e.DrawingCursorClass.RESIZE);return!0;case e.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(b.pointerPosition,this.projection),!0}return!1};c.prototype.draw=function(){if(this.visible){var a=this.cartesianPoints();if(null==this._dragPoint&&this._arctan&&this._angleCorrection){var b=
Math.tan(this._arctan),d=b*(a[0].x-a[1].x)+a[0].y;(a[0].x!==a[1].x||a[0].y!==d)&&b<this._tanMax&&b>this._tanMin&&(a[1].y=d)}1<a.length&&(this.context.scxStrokePolyline(a,this.actualTheme.line),this._calculateAngle(a));this.selected&&this._drawSelectionMarkers(a)}};c.prototype._calculateAngle=function(a){var b=Math.atan((a[1].y-a[0].y)/(a[0].x-a[1].x));var d=isNaN(b)?90:Math.round(180/Math.PI*b);this._arctan=b;b=-d*Math.PI/180;var f=!1;0>=d&&a[1].x<=a[0].x&&(d=180+d,b+=Math.PI);0<d&&a[1].x<=a[0].x&&
a[1].y>a[0].y&&(d-=180,b+=Math.PI,f=!0);0>d&&a[1].x>a[0].x&&(f=!0);this._drawTrendAngle(d.toFixed(0),b,f,a)};c.prototype._drawTrendAngle=function(a,b,d,f){var h=this.context;h.beginPath();h.moveTo(f[0].x,f[0].y);h.lineTo(f[0].x+this.radius,f[0].y);h.scxStroke(this.actualTheme.horizontalLine);h.beginPath();h.arc(f[0].x,f[0].y,this.radius,b,0,d);h.scxStroke(this.actualTheme.arc);h.scxApplyTextTheme(this.actualTheme.text);h.fillText(a.toString()+"\u00b0",f[0].x+this._textOffset+this.radius,f[0].y+this._textOffset)};
c.defaults={radius:30};return c}(e.Drawing);e.TrendAngleDrawing=k;e.Drawing.register(k)})(StockChartX||(StockChartX={}));
(function(e){var k=jQuery,g=function(){function c(){}c.localize=function(a,b){i18next.use(i18nextXHRBackend);i18next.init({debug:!1,lng:a.locale,fallbackLng:"en",backend:{loadPath:this.localesPath+"/{{lng}}.json"}},function(){jqueryI18next.init(i18next,k,{handleName:"localize"});k(".scxComponentsContainer").localize();b&&k(b).localize()})};c.localesPath="locales";return c}();e.Localization=g})(StockChartX||(StockChartX={}));
