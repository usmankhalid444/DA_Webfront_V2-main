var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(f,k,h){f instanceof String&&(f=String(f));for(var g=f.length,d=0;d<g;d++){var a=f[d];if(k.call(h,a,d,f))return{i:d,v:a}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,k,h){if(f==Array.prototype||f==Object.prototype)return f;f[k]=h.value;return f};$jscomp.getGlobal=function(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var k=0;k<f.length;++k){var h=f[k];if(h&&h.Math==Math)return h}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(f,k){var h=$jscomp.propertyToPolyfillSymbol[k];if(null==h)return f[k];h=f[h];return void 0!==h?h:f[k]};
$jscomp.polyfill=function(f,k,h,g){k&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(f,k,h,g):$jscomp.polyfillUnisolated(f,k,h,g))};$jscomp.polyfillUnisolated=function(f,k,h,g){h=$jscomp.global;f=f.split(".");for(g=0;g<f.length-1;g++){var d=f[g];if(!(d in h))return;h=h[d]}f=f[f.length-1];g=h[f];k=k(g);k!=g&&null!=k&&$jscomp.defineProperty(h,f,{configurable:!0,writable:!0,value:k})};
$jscomp.polyfillIsolated=function(f,k,h,g){var d=f.split(".");f=1===d.length;g=d[0];g=!f&&g in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var a=0;a<d.length-1;a++){var b=d[a];if(!(b in g))return;g=g[b]}d=d[d.length-1];h=$jscomp.IS_SYMBOL_NATIVE&&"es6"===h?g[d]:null;k=k(h);null!=k&&(f?$jscomp.defineProperty($jscomp.polyfills,d,{configurable:!0,writable:!0,value:k}):k!==h&&(void 0===$jscomp.propertyToPolyfillSymbol[d]&&(h=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[d]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(d):$jscomp.POLYFILL_PREFIX+h+"$"+d),$jscomp.defineProperty(g,$jscomp.propertyToPolyfillSymbol[d],{configurable:!0,writable:!0,value:k})))};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(k,h){return $jscomp.findInternal(this,k,h).v}},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var f={a:!0},k={};try{return k.__proto__=f,k.a}catch(h){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(f,k){f.__proto__=k;if(f.__proto__!==k)throw new TypeError(f+" is not extensible");return f}:null;$jscomp.polyfill("Object.setPrototypeOf",function(f){return f||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.polyfill("Array.prototype.fill",function(f){return f?f:function(k,h,g){var d=this.length||0;0>h&&(h=Math.max(0,d+h));if(null==g||g>d)g=d;g=Number(g);0>g&&(g=Math.max(0,d+g));for(h=Number(h||0);h<g;h++)this[h]=k;return this}},"es6","es3");$jscomp.typedArrayFill=function(f){return f?f:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");var StockChartX;
(function(f){(function(k){jQuery.fn.scx=function(){var h=this;return{chartContextMenu:function(g){return new k.ChartContextMenu(h,g)},chartNavigation:function(g){return new k.ChartNavigation({target:h,chart:g})},colorPicker:function(g){return new k.ColorPicker(h,g)},indicatorContextMenu:function(g){return new k.IndicatorContextMenu(h,g)},instrumentSearch:function(g){return new k.InstrumentSearch(h,g)},numericField:function(g){return h.scxNumericField(g)},timeFramePicker:function(g){return new k.TimeFramePicker(h,
g)},toolbar:function(g){return new k.Toolbar({parent:h,chart:g})},scrollbar:function(g){return new k.Scrollbar({parent:h,chart:g})},toolbarDropDownButton:function(g){return new k.ToolbarDropDownButton(h,g)},waitingBar:function(){return new k.WaitingBar(h)}}}})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){function h(n){return r(n).data("scxNumericField")}function g(n,q,t){function v(){n.is("[disabled]")||(d(n,a(n)+z,!0),x=setTimeout(v,200))}var x,z;r(window).on("mouseup",function(){clearTimeout(x);z=0});q.on("mousedown",function(){z=1;v()});t.on("mousedown",function(){z=-1;v()})}function d(n,q,t){void 0===t&&(t=!1);var v=h(n).settings;if("-"===q)q=v.canBeNegative?q:"";else{!v.canBeNegative&&0>q&&(q=0);t&&(null!=v.minValue&&q<v.minValue&&(q=v.minValue),null!=v.maxValue&&q>
v.maxValue&&(q=v.maxValue));if("function"===typeof v.onChange&&v.value!==q)v.onChange(q,n);v.value=q;t=v.priceDecimals;v="(\\d)(?=(\\d{3})+"+(0<t?"\\.":"$")+")";q=q.toFixed(Math.max(0,~~t)).replace(new RegExp(v,"g"),"$1,")}n.val(q);return q}function a(n,q){var t=h(n).settings;n=n.val();for(var v=t.canBeNegative,x=0<t.priceDecimals,z=n.length-1;0<=z;z--)e(n[z],v,x)||(n=c(n,z));if("-"===n||0===n.replace(/-/ig,"").length)return null;if(""===n||"."===n)n="0";n=0<t.priceDecimals?b(n,q):b(n);return parseFloat(n)}
function b(n,q){void 0===q&&(q="");-1<n.indexOf("-")&&(n="-"+n.replace(/-/g,""));if(q.length){for(var t=n,v=[],x=-1;-1!==(x=t.indexOf(".",x+1));)v.push(x);1<v.length&&(t=q.indexOf("."),v=q.length-t,q=n.substr(0,t)===q.substr(0,t)?t:n.length-v,n=c(n,q))}return n.replace(/,/g,"")}function e(n,q,t){void 0===q&&(q=!1);void 0===t&&(t=!1);switch(n){case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case ",":return!0;case ".":return t;case "-":return q;default:return!1}}
function c(n,q,t){void 0===t&&(t="");var v=0===t.length?q+1:q+t.length;return n.substr(0,q)+t+n.substr(v)}function l(n){if(null===n)return 0;"string"===typeof n&&(n=parseInt(n,10));return Math.ceil(n.toString().length/3)-1}function m(n){var q=r('<div class="'+w.FIELD_WRAPPER+'">'),t=r('<div class="'+w.ARROW_WRAPPER+" "+w.ARROW_UP+'"><span class="'+w.ARROW+'"></span></div>'),v=r('<div class="'+w.ARROW_WRAPPER+" "+w.ARROW_DOWN+'"><span class="'+w.ARROW+'"></span></div>'),x=n.outerHeight(!0);q.height(x);
t.height(x-2);v.height(x-2);n.css("padding-right",40);q.append(n).append(t).append(v);t.css("padding-top",Math.floor(x/2-11));v.css("padding-top",Math.floor(x/2-11));u(t);u(v);return{wrapper:q,field:n,arrowUp:t,arrowDown:v}}function p(n,q,t){var v=n.children().length-1;0<=t&&t<=v?n.children().eq(t).before(q):n.append(q);return n}function u(n){return n.attr("unselectable","on").css("user-select","none").on("selectstart",function(){return!1})}var r=jQuery,w={FIELD:"scxNumericField",FIELD_WRAPPER:"scxNumericField-wrapper",
INVALID_VALUE:"scxNumericField-invalidValue",ARROW_WRAPPER:"scxNumericField-arrowWrapper",ARROW_UP:"scxNumericField-arrowUp",ARROW_DOWN:"scxNumericField-arrowDown",ARROW:"scxNumericFieldArrow"},D={init:function(n){return this.each(function(){var q=r(this),t="",v=0;q.attr("type","text").addClass(w.FIELD);q.data("scxNumericField",{target:q,settings:r.extend(!0,{canBeNegative:!1,priceDecimals:0,showArrows:!1,maxValue:null,minValue:null,value:0,onChange:null},n)});if(n.showArrows){var x=q.parent(),z=
q.index(),E=m(q);p(x,E.wrapper,z);q=E.field;g(q,E.arrowUp,E.arrowDown)}q.on("input",function(){var y=r(this),A=y[0].selectionStart,B=a(y,t),C="."===y.val();0===n.priceDecimals&&""===y.val()?t=null!=n.minValue&&0<n.minValue?n.minValue:0:(0<n.priceDecimals&&C&&(A=2),C=l(B),C!==v&&(A+=C-v),0===n.priceDecimals&&!n.canBeNegative&&-1<y.val().indexOf("-")&&--A,isNaN(B)&&(B=null),t=null===B?d(y,"-"):d(y,B),y[0].setSelectionRange(A,A),v=C)});q.on("blur",function(){var y=r(this);0===n.priceDecimals&&""===y.val()?
d(y,t):d(y,a(y),!0)});t=d(q,n.value);v=l(n.value)})},show:function(){return this.each(function(){h(this).settings.showArrows?r(this).parent().show():r(this).show()})},hide:function(){return this.each(function(){h(this).settings.showArrows?r(this).parent().hide():r(this).hide()})},disable:function(){return this.each(function(){r(this).attr("disabled","disabled")})},enable:function(){return this.each(function(){r(this).removeAttr("disabled")})},isDisabled:function(){var n=r(this).attr("disabled");return"undefined"!==
typeof n&&!1!==n},isEnabled:function(){var n=r(this).attr("disabled");return!("undefined"!==typeof n&&!1!==n)},highlightInvalid:function(){return this.each(function(){r(this).addClass(w.INVALID_VALUE)})},unhighlightInvalid:function(){return this.each(function(){r(this).removeClass(w.INVALID_VALUE)})},setValue:function(n){return this.each(function(){d(r(this),n)})},getValue:function(){return a(r(this))},setBounds:function(n,q){return this.each(function(){if(null!=n||null!=q){var t=h(this).settings;
null!=n&&(t.minValue=n);null!=q&&(t.maxValue=q);r(this).trigger("input");d(r(this),a(r(this)),!0)}})},onChange:function(n){return this.each(function(){h(this).settings.onChange=n})}};r.fn.scxNumericField=function(n){if(D[n])return D[n].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof n||!n)return D.init.apply(this,arguments);r.error("Method "+n+" doesn't exist for jQuery.numericField")}})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){var h=jQuery,g=function(){function d(a,b){var e=this._getInitParams();this._picker=a.spectrum(h.extend(e,b))}d.prototype.getColor=function(){return this._picker.spectrum("get").toRgbString()};d.prototype.setColor=function(a){this._picker.spectrum("set",a)};d.prototype.spectrum=function(a,b){this._picker.spectrum(a,b)};d.prototype._getInitParams=function(){return f.Environment.isPhone?{color:"#000",showInput:!1,showInitial:!0,allowEmpty:!1,showAlpha:!1,disabled:!1,maxSelectionSize:1,
showPalette:!0,showSelectionPalette:!1,showPaletteOnly:!0,palette:this._getPalette()}:{color:"#000",showInput:!1,showInitial:!0,allowEmpty:!1,showAlpha:!1,disabled:!1,maxSelectionSize:1,showPalette:!0,showSelectionPalette:!0,showPaletteOnly:!0,togglePaletteOnly:!0,palette:this._getPalette(),cancelText:"Cancel",chooseText:"Choose",togglePaletteMoreText:"More",togglePaletteLessText:"Less"}};d.prototype._getPalette=function(){return f.Environment.isPhone?["#000 #444 #666 #999 #ccc #eee #f3f3f3 #fff".split(" "),
"#f00 #f90 #ff0 #0f0 #0ff #00f #90f #f0f".split(" "),"#ea9999 #f9cb9c #ffe599 #b6d7a8 #a2c4c9 #9fc5e8 #b4a7d6 #d5a6bd".split(" "),"#80c00000 #80b45f06 #80bf9000 #8038761d #80134f5c #800b5394 #80351c75 #80741b47".split(" ")]:["#000 #444 #666 #999 #ccc #eee #f3f3f3 #fff".split(" "),"#f00 #f90 #ff0 #0f0 #0ff #00f #90f #f0f".split(" "),"#f4cccc #fce5cd #fff2cc #d9ead3 #d0e0e3 #cfe2f3 #d9d2e9 #ead1dc".split(" "),"#ea9999 #f9cb9c #ffe599 #b6d7a8 #a2c4c9 #9fc5e8 #b4a7d6 #d5a6bd".split(" "),"#e06666 #f6b26b #ffd966 #93c47d #76a5af #6fa8dc #8e7cc3 #c27ba0".split(" "),
"#c00 #e69138 #f1c232 #6aa84f #45818e #3d85c6 #674ea7 #a64d79".split(" "),"#900 #b45f06 #bf9000 #38761d #134f5c #0b5394 #351c75 #741b47".split(" "),"#600 #783f04 #7f6000 #274e13 #0c343d #073763 #20124d #4c1130".split(" ")]};return d}();k.ColorPicker=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){var h=jQuery,g=function(){function d(a,b){var e=this;this._eventSuffix=".scxContentMenu_"+ ++d.Id;this._isShown=!1;this._config=a;if(b&&(b.on("contextmenu",function(c){h("body").trigger("scxContextMenuOpen");e.show(c);return!1}),a.showOnClick))b.on(eventClickByPlatform,function(c){h("body").trigger("scxContextMenuOpen");e.show(c);return!1});this._subscribeEvents()}Object.defineProperty(d.prototype,"container",{get:function(){return this._config.menuContainer},enumerable:!0,
configurable:!0});d.prototype._subscribeEvents=function(){var a=this;h(document).on(["click","touchstart",""].join(this._eventSuffix+" "),function(b){2!==b.button&&a._isShown&&a.hide()});h(window).on(["scroll","resize",""].join(this._eventSuffix+" "),function(){a._isShown&&a.hide()});h("body").on("scxContextMenuOpen"+this._eventSuffix,function(){a._isShown&&a.hide()})};d.prototype._unsubscribeEvents=function(){h(document).off(this._eventSuffix);h(window).off(this._eventSuffix);h("body").off(this._eventSuffix)};
d.prototype.hide=function(){this._isShown=!1;this._config.menuContainer.hide()};d.prototype.show=function(a){var b=this;this._config.onShow&&(h("body").trigger(eventClickByPlatform),this._config.onShow());this._config.menuContainer&&(this._config.menuContainer.data("target",h(a.target)).show().css(this._calculateMenuPosition(this._getLeftLocation(a),this._getTopLocation(a))).off(eventClickByPlatform).on(eventClickByPlatform,function(e){e.preventDefault();if(!h(e.target).parent().attr("data-id"))return!1;
b.hide();if(!b._config.onItemSelected)return!1;e=h(e.target).blur().parent();if(e.hasClass("disabled"))return!1;if(e.hasClass("scxMenuItemCheckable")){var c=e.hasClass("scxMenuItemChecked");c?e.removeClass("scxMenuItemChecked"):e.addClass("scxMenuItemChecked");b._config.onItemSelected(e,!c)}else b._config.onItemSelected(e);return!1}).find(".scxMenuItemWithSubMenu").each(function(){d._getSubMenuTopLocation(h(this))}),this._isShown=!0)};d.prototype._getLeftLocation=function(a){a=a.pageX||a.originalEvent&&
a.originalEvent.pageX;var b=h(window).width(),e=this._config.menuContainer.width();return a+e>b&&e<a?a-e:a};d.prototype._getTopLocation=function(a){a=a.pageY||a.originalEvent&&a.originalEvent.pageY;var b=h(window).height(),e=this._config.menuContainer.height();return a+e>b&&e<a?a-e:a};d.prototype._calculateMenuPosition=function(a,b){var e=this._config.menuContainer;e.css({width:"auto",height:"auto"});var c=h(window).height(),l=e.outerHeight(!0);l>c&&(e.height(c-20),l=c);2>c/l&&(b=c/2-l/2);return{postiion:"fixed",
top:b,left:a-h(window).scrollLeft()}};d._getSubMenuTopLocation=function(a){var b=a.parent().offset().top,e=a.offset().top;a.find(".scxSubMenu").css({top:e-b-5+"px"})};d.prototype.destroy=function(){this._unsubscribeEvents()};d.Id=0;return d}();k.ContextMenu=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
var __extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h={FORMAT:"format",BUY_CONDITION:"buyCondition",SELL_CONDITION:"sellCondition",TAKEPROFIT_CONDITION:"takeprofitCondition",STOPLOSS_CONDITION:"stoplossCondition",CLEAR_ALL_CONDITION:"clearAllCondition",VISIBLE_ONECLICK:"visibleOneclick",DELETE_ALL_DRAWINGS:"deleteAllDrawing",DELETE_ALL_INDICATORS:"deleteAllIndicators",ADD_INDICATOR:"addIndicator",THEMES_SETTING:"themesSetting",VISIBLE_TOOLBAR:"visibleToolbar"};Object.freeze(h);var g=function(d){function a(b,e){var c=d.call(this,
e,b)||this;c._menuItems={};c._chartContextMenuConfig=e;k.HtmlLoader.getView("ChartContextMenu.html",function(l){a._container||(a._container=k.HtmlContainer.instance.register("ChartContextMenu",l));c._initMenu(c._chartContextMenuConfig)});return c}__extends(a,d);a.prototype._initMenu=function(b){var e=this;this._defineMenuItems();b.menuContainer=a._container;b.onShow=function(){switch(b.chart.priceStyleKind){case f.BarPriceStyle.className:case f.HLBarPriceStyle.className:case f.HLCBarPriceStyle.className:case f.ColoredHLBarPriceStyle.className:case f.ColoredHLCBarPriceStyle.className:case f.ColoredBarPriceStyle.className:case f.KagiPriceStyle.className:case f.LineBreakPriceStyle.className:case f.PointAndFigurePriceStyle.className:case f.RenkoPriceStyle.className:e._menuItems.priceStyleFormat.removeClass("disabled");
break;default:e._menuItems.priceStyleFormat.addClass("disabled")}}};a.prototype._defineMenuItems=function(){this._menuItems.priceStyleFormat=a._container.find("[data-id=format]")};a.prototype.destroy=function(){this._chartContextMenuConfig.chart=null;d.prototype.destroy.call(this)};a._container=null;a.MenuItem=h;return a}(k.ContextMenu);k.ChartContextMenu=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){var h=jQuery,g=function(){function d(a){this._config=a;this._activeIndex=0;this._tabs=a.tabsContainer.children().removeClass("active");this._panels=a.panelsContainer.children().removeClass("active");this._config.activeIndex&&f.JsUtil.isNumber(this._config.activeIndex)&&(this._activeIndex=this._config.activeIndex);this._tabs.eq(this._activeIndex).addClass("active");this._panels.eq(this._activeIndex).addClass("active");this._tabs.css("width",100/this._tabs.length+"%");this._tabs.on(eventClickByPlatform,
this,this._onItemClicked)}d.prototype.activate=function(a,b){a!==this._activeIndex&&(this._tabs.eq(this._activeIndex).removeClass("active"),this._panels.eq(this._activeIndex).removeClass("active"),this._tabs.eq(a).addClass("active"),this._panels.eq(a).addClass("active"),this._activeIndex=a);if(b&&f.JsUtil.isFunction(this._config.onChange))this._config.onChange(a)};d.prototype.activeIndex=function(){return this._activeIndex};d.prototype.destroy=function(){this._tabs.off(eventClickByPlatform,this._onItemClicked)};
d.prototype._onItemClicked=function(a){a.data.activate(h(a.target).index(),!0)};return d}();k.Tabs=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){var h=jQuery,g=function(){function d(a){var b=this;this._isShown=!1;this._dialog=a;this._dialog.attr("tabindex",-1);this._dialog.modal({backdrop:!0,keyboard:!0,show:!1});this._dialog.on("hidden.bs.modal",function(){b._isShown&&b.hide()});this._initDialogContentObj();this._dialogContent.dialog.draggable({handle:".modal-header",containment:"window"});h(window).on("resize",this,this._onWindowResize);this._dialog.on("hide.bs.modal",function(){b._dialogContent.body.trigger("click")});
this._dialogContent.header.on("mousedown",function(){b._dialogContent.body.trigger("click")})}d.prototype.show=function(a){k.HtmlContainer.instance.resetSelf(a.chart);a.chart.localize(this._dialog);this._isShown=!0;this._dialog.attr("style","");this._dialog.modal("show");this.resize();this._centralize()};d.prototype.hide=function(){this._isShown&&(this._isShown=!1,this._dialog.modal("hide"),h(document.activeElement).blur())};d.prototype.resetToDefault=function(){};d.prototype.resize=function(){this._adjustHeight()};
d.prototype.destroy=function(){h(window).off("resize",this._onWindowResize)};d.prototype._initDialogContentObj=function(){var a=this._dialog.find("> .modal-dialog"),b=a.find("> .modal-content");this._dialogContent={dialog:a,root:b,header:b.find("> .modal-header"),body:b.find("> .modal-body"),footer:b.find("> .modal-footer")}};d.prototype._onWindowResize=function(a){a=a.data;a._isShown&&a.resize()};d.prototype._adjustHeight=function(){this._dialogContent.body.css("height","auto");this._dialogContent.dialog.css("height",
"auto");var a=.9*window.innerHeight,b=this._dialogContent.dialog.outerHeight(!0);if(a<b){b-=this._dialogContent.dialog.height();var e=this._dialogContent.body.outerHeight(!0)-this._dialogContent.body.height(),c=this._dialogContent.header.outerHeight(!0),l=this._dialogContent.footer.outerHeight(!0);this._dialogContent.body.height(a-c-l-e-b)}};d.prototype._centralize=function(){var a=(window.innerWidth-this._dialogContent.dialog.width())/2;this._dialogContent.dialog.css("margin","0");this._dialogContent.dialog.css("left",
a);this._dialogContent.dialog.css("top",20)};return d}();k.Dialog=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h={CLONE:"clone",DELETE:"delete",SETTINGS:"settings"};Object.freeze(h);var g=function(d){function a(b,e){e=d.call(this,b,e)||this;k.HtmlLoader.getView("DrawingContextMenu.html",function(c){a._container||(a._container=k.HtmlContainer.instance.register("DrawingContextMenu",c));b.menuContainer=a._container});return e}__extends(a,d);a._container=null;a.MenuItem=h;return a}(k.ContextMenu);k.DrawingContextMenu=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h={MODIFY:"modifyConditionOrder",DELETE:"deleteConditionOrder",MODIFY_MARKET:"modifyMarketOrder",DELETE_MARKET:"deleteMarketOrder",CLOSE_POSITION:"closeMarketOrder"};Object.freeze(h);var g=function(d){function a(b,e){e=d.call(this,b,e)||this;k.HtmlLoader.getView("DrawingContextMenuTrendlineOrder.html",function(c){a._container||(a._container=k.HtmlContainer.instance.register("DrawingContextMenuTrendlineOrder",c));b.menuContainer=a._container});return e}__extends(a,d);
a._container=null;a.MenuItem=h;return a}(k.ContextMenu);g.prototype.initMenu=function(){this.container.find("li").each(function(d){return function(a,b){a=parseInt(b.getAttribute("ctx-type"));d.tlType==f.ConditionOrderType.MARKET_ORDER?parseInt(a)!=d.tlType?b.style.display="none":b.style.display="":d.tlType==f.ConditionOrderType.PORTFOLIO?parseInt(a)!=d.tlType?b.style.display="none":b.style.display="":0!=parseInt(a)?b.style.display="none":b.style.display=""}}(this._config.drawing))};k.DrawingContextMenuTrendlineOrder=
g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h=function(a){function b(e){e=a.call(this,e)||this;e._isApplyClicked=!1;e._initFields();e._init();return e}__extends(b,a);b.prototype.show=function(e){this._config=e;this._isApplyClicked=!1;this._switchView();this._tabs.activate(0);this._setValues(this._config.drawing);a.prototype.show.call(this,e)};b.prototype.hide=function(){!this._isApplyClicked&&this._config.cancel&&this._config.cancel();this._config.always&&this._config.always();this._config=null;a.prototype.hide.call(this)};
b.prototype._init=function(){var e=this;this._tabs=new k.Tabs({tabsContainer:this._tabItemsContainer,panelsContainer:this._tabPanelsContainer,onChange:function(c){e.resize()}});this._input_lineWidth.scxNumericField(b._numericFieldConfig);this._input_horizontalLineWidth.scxNumericField(b._numericFieldConfig);this._input_arcWidth.scxNumericField(b._numericFieldConfig);this._chk_lineEnabled=new Switchery(document.querySelector("#scxDrawingDialog_chk_lineColor"),b._switcherySettings);this._chk_lineEnabled.setPosition(!0);
this._chk_fillEnabled=new Switchery(document.querySelector("#scxDrawingDialog_chk_fillColor"),b._switcherySettings);this._chk_fillEnabled.setPosition(!0);this._chk_fill2Enabled=new Switchery(document.querySelector("#scxDrawingDialog_chk_fillColor2"),b._switcherySettings);this._chk_fill2Enabled.setPosition(!0);this._input_labelFont.selectpicker({container:"body"}).change(function(c){e._input_labelFont.next().css({"font-family":c.target.value})});this._input_labelSize.selectpicker({container:"body"});
this._input_lineStyle.selectpicker({container:"body"});this._input_horizontalLineStyle.selectpicker({container:"body"});this._input_arcStyle.selectpicker({container:"body"});this._input_textFont.selectpicker({container:"body"}).change(function(c){e._input_textFont.next().css({"font-family":c.target.value})});this._input_textSize.selectpicker({container:"body"});this._textStylesChooser=new g(this._inputs_textStyles);this._initImagePreview(this._input_imageUrl,this._input_imagePreview);this._input_tooltipBorderWidth.scxNumericField(b._numericFieldConfig);
this._input_tooltipBorderStyle.selectpicker({container:"body"});this._input_magnetTo.selectpicker({container:"body"});this._input_magnetMode.selectpicker({container:"body"});this._chk_tooltipBorderEnabled=new Switchery(document.querySelector("#scxDrawingDialog_chk_tooltipBorderColor"),b._switcherySettings);this._chk_tooltipBorderEnabled.setPosition(!0);this._chk_tooltipFillEnabled=new Switchery(document.querySelector("#scxDrawingDialog_chk_tooltipFillColor"),b._switcherySettings);this._chk_tooltipFillEnabled.setPosition(!0);
this._tooltipKindChooser=new d({onChange:function(){e.resize()},buttons:this._inputs_tooltipKind,panelText:this._panelToolipText,panelTextStyle:this._panelToolipTextStyle,panelImage:this._panelTooltipImage});this._input_tooltipTextFont.selectpicker({container:"body"}).change(function(c){e._input_tooltipTextFont.next().css({"font-family":c.target.value})});this._input_tooltipTextSize.selectpicker({container:"body"});this._tooltipTextStylesChooser=new g(this._inputs_tooltipTextStyles);this._initImagePreview(this._input_tooltipImageUrl,
this._input_tooltipImagePreview);this._dialog.find(".scxSpectrum").scx().colorPicker({containerClassName:"scxSpectrumDrawingDialog",localStorageKey:"scxThemeDialog_spectrum",showAlpha:!0});$("body").bind("scxSwitcherChanged",function(c,l){c=$(l.target);l=l.checked;c.is(e._chk_lineEnabledHTMLObj)?e._setLineState(l):c.is(e._chk_fillEnabledHTMLObj)?e._setFillState(l):c.is(e._chk_textBackgroundEnabledHTMLObj)?e._setTextBackgroundState(l):c.is(e._chk_textBorderEnabledHTMLObj)?e._setTextBorderState(l):
c.is(e._chk_tooltipBorderEnabledHTMLObj)?e._setTooltipBorderState(l):c.is(e._chk_tooltipFillEnabledHTMLObj)&&e._setTooltipFillState(l)});this._dialog.find("#scxDrawingDialog_btn_resetToDefaults").on(eventClickByPlatform,function(){e.resetToDefaults()});this._dialog.find("#scxDrawingDialog_btn_save").on(eventClickByPlatform,function(){e._save()});this._dialog.find("#scxDrawingDialog_btn_apply").on(eventClickByPlatform,function(){e._apply()})};b.prototype._initImagePreview=function(e,c){var l=null;
e.on("keyup",function(){var m=e.val();c.parent().addClass("scxLoading");c.hide();l&&clearTimeout(l);l=setTimeout(function(){c.attr("src",m)},1E3)});c.load(function(m){$(m.currentTarget).show();$(m.currentTarget).parent().removeClass("scxHasBg");$(m.currentTarget).parent().removeClass("scxLoading")});c.error(function(m){$(m.currentTarget).parent().addClass("scxHasBg");$(m.currentTarget).parent().removeClass("scxLoading");$(m.currentTarget).hide()})};b.prototype._resetImagePreview=function(e){e.attr("src",
"").hide().parent().addClass("scxHasBg").removeClass("scxLoading")};b.prototype.resetToDefaults=function(){var e=f.JsUtil.clone(this._config.drawing);if(0===this._tabs.activeIndex())switch(e.theme=e.defaultTheme,e.className){case f.NoteDrawing.className:$.extend(!0,e,f.NoteDrawing.defaults);break;case f.ImageDrawing.className:e.url="";break;case f.TextDrawing.className:case f.BalloonDrawing.className:e.text=""}1===this._tabs.activeIndex()&&(e.tooltip=f.JsUtil.clone(e.tooltip),e.tooltip.theme=e.tooltip.defaultTheme,
e.tooltip.contentKind=k.TooltipContentKind.TEXT,e.tooltip.text="");this._setValues(e,!0)};b.prototype._setLineState=function(e){e?(this._input_lineColor.spectrum("enable"),this._label_lineEnabled.removeClass("disabled"),this._input_lineStyle.removeAttr("disabled").selectpicker("refresh"),this._input_lineWidth.scxNumericField("enable"),this._chk_lineEnabled.isChecked()||this._chk_lineEnabled.setPosition(!0)):(this._input_lineColor.spectrum("disable"),this._label_lineEnabled.addClass("disabled"),this._input_lineStyle.attr("disabled",
"disabled").selectpicker("refresh"),this._input_lineWidth.scxNumericField("disable"),this._chk_lineEnabled.isChecked()&&this._chk_lineEnabled.setPosition(!0))};b.prototype._setFillState=function(e){e?(this._input_fillColor.spectrum("enable"),this._label_fillEnabled.removeClass("disabled"),this._chk_fillEnabled.isChecked()||this._chk_fillEnabled.setPosition(!0)):(this._input_fillColor.spectrum("disable"),this._label_fillEnabled.addClass("disabled"),this._chk_fillEnabled.isChecked()&&this._chk_fillEnabled.setPosition(!0))};
b.prototype._setFill2State=function(e){e?(this._input_fillColor2.spectrum("enable"),this._label_fill2Enabled.removeClass("disabled"),this._chk_fill2Enabled.isChecked()||this._chk_fill2Enabled.setPosition(!0)):(this._input_fillColor2.spectrum("disable"),this._label_fill2Enabled.addClass("disabled"),this._chk_fill2Enabled.isChecked()&&this._chk_fill2Enabled.setPosition(!0))};b.prototype._setTextBackgroundState=function(e){e?(this._input_textBackColor.spectrum("enable"),this._label_textBackgroundEnabled.removeClass("disabled")):
(this._input_textBackColor.spectrum("disable"),this._label_textBackgroundEnabled.addClass("disabled"))};b.prototype._setTextBorderState=function(e){e?(this._input_textBorderColor.spectrum("enable"),this._label_textBorderEnabled.removeClass("disabled")):(this._input_textBorderColor.spectrum("disable"),this._label_textBorderEnabled.addClass("disabled"))};b.prototype._setTooltipBorderState=function(e){e?(this._label_tooltipBorderEnabled.removeClass("disabled"),this._input_tooltipBorderColor.spectrum("enable"),
this._input_tooltipBorderStyle.removeAttr("disabled").selectpicker("refresh"),this._input_tooltipBorderWidth.scxNumericField("enable"),this._chk_tooltipBorderEnabled.isChecked()||this._chk_tooltipBorderEnabled.setPosition(!0)):(this._label_tooltipBorderEnabled.addClass("disabled"),this._input_tooltipBorderColor.spectrum("disable"),this._input_tooltipBorderStyle.attr("disabled","disabled").selectpicker("refresh"),this._input_tooltipBorderWidth.scxNumericField("disable"),this._chk_tooltipBorderEnabled.isChecked()&&
this._chk_tooltipBorderEnabled.setPosition(!0))};b.prototype._setTooltipFillState=function(e){e?(this._label_tooltipFillEnabled.removeClass("disabled"),this._input_tooltipFillColor.spectrum("enable"),this._chk_tooltipFillEnabled.isChecked()||this._chk_tooltipFillEnabled.setPosition(!0)):(this._label_tooltipFillEnabled.addClass("disabled"),this._input_tooltipFillColor.spectrum("disable"),this._chk_tooltipFillEnabled.isChecked()&&this._chk_tooltipFillEnabled.setPosition(!0))};b.prototype._switchView=
function(){this._dialog.find(".scxSpectrum").spectrum("enable");this._panelFigure.hide();this._panelImage.hide();this._panelText.hide();this._panelFigureLine.hide();this._panelFigureLineEnabled.hide();this._panelFigureFill.hide();this._panelFigureFillEnabled.hide();this._panelFigureFill2.hide();this._panelFigureFill2Enabled.hide();this._panelFigureLabel.hide();this._panelFigureArc.hide();this._panelFigureHorizontalLine.hide();this._title.text(this._getDrawingTitle());this._tooltipKindChooser.setKind(this._config.drawing.tooltip.contentKind);
switch(this._config.drawing.className){case f.DotDrawing.className:case f.SquareDrawing.className:case f.DiamondDrawing.className:case f.ArrowUpDrawing.className:case f.ArrowDownDrawing.className:case f.ArrowLeftDrawing.className:case f.ArrowRightDrawing.className:case f.Arrow.className:this._panelFigureFill.show();this._panelFigure.show();break;case f.NoteDrawing.className:this._panelFigureFill.show();this._panelFigureFillEnabled.show();this._panelFigureFill2.show();this._panelFigureFill2Enabled.show();
this._panelFigureLabel.show();this._panelFigure.show();break;case f.LineSegmentDrawing.className:case f.HorizontalLineDrawing.className:case f.VerticalLineDrawing.className:case f.TrendChannelDrawing.className:case f.ErrorChannelDrawing.className:case f.TironeLevelsDrawing.className:case f.QuadrantLinesDrawing.className:case f.RaffRegressionDrawing.className:case f.SpeedLinesDrawing.className:case f.GannFanDrawing.className:case f.PolylineDrawing.className:case f.AndrewsPitchforkDrawing.className:case f.CyclicLinesDrawing.className:this._panelFigureLine.show();
this._panelFigure.show();break;case f.RectangleDrawing.className:case f.TriangleDrawing.className:case f.CircleDrawing.className:case f.EllipseDrawing.className:case f.PolygonDrawing.className:this._panelFigureLine.show();this._panelFigureLineEnabled.show();this._panelFigureFill.show();this._panelFigureFillEnabled.show();this._panelFigure.show();break;case f.TextDrawing.className:this._panelText.show();this._input_text.show();this._inputs_textStyles.show();break;case f.ImageDrawing.className:this._panelImage.show();
break;case f.BalloonDrawing.className:this._panelFigureLine.show();this._panelFigureLineEnabled.show();this._panelFigureFill.show();this._panelFigureFillEnabled.show();this._panelFigure.show();this._input_text.show();this._inputs_textStyles.show();this._panelText.show();break;case f.MeasureDrawing.className:this._panelFigureLine.show();this._panelFigureLineEnabled.show();this._panelFigureFill.show();this._panelFigureFillEnabled.show();this._panelFigure.show();this._panelText.show();this._input_text.hide();
this._inputs_textStyles.hide();break;case f.FreeHandDrawing.className:this._panelFigure.show();this._panelFigureLine.show();break;case f.TrendAngleDrawing.className:this._panelFigure.show(),this._panelFigureLine.show(),this._panelFigureArc.show(),this._panelFigureHorizontalLine.show()}};b.prototype._getDrawingTitle=function(){switch(this._config.drawing.className){case f.LineSegmentDrawing.className:return"Line Segment Settings";case f.DotDrawing.className:return"Dot Marker Settings";case f.SquareDrawing.className:return"Square Marker Settings";
case f.DiamondDrawing.className:return"Diamond Marker Settings";case f.ArrowUpDrawing.className:return"Arrow Up Marker Settings";case f.MeasureDrawing.className:return"Measure Settings";case f.ArrowDownDrawing.className:return"Arrow Down Marker Settings";case f.ArrowLeftDrawing.className:return"Arrow Left Marker Settings";case f.ArrowRightDrawing.className:return"Arrow Right Marker Settings";case f.NoteDrawing.className:return"Note Marker Settings";case f.Arrow.className:return"Arrow Drawing Settings";
case f.HorizontalLineDrawing.className:return"Horizontal Line Settings";case f.VerticalLineDrawing.className:return"Vertical Line Settings";case f.PolylineDrawing.className:return"Polyline Settings";case f.RectangleDrawing.className:return"Rectangle Settings";case f.PolygonDrawing.className:return"Polygon Settings";case f.TriangleDrawing.className:return"Triangle Settings";case f.CircleDrawing.className:return"Circle Settings";case f.EllipseDrawing.className:return"Ellipse Settings";case f.TextDrawing.className:return"Text Settings";
case f.BalloonDrawing.className:return"Balloon Settings";case f.ImageDrawing.className:return"Image Settings";case f.TrendChannelDrawing.className:return"Trend Channel Settings";case f.ErrorChannelDrawing.className:return"Error Channel Settings";case f.TironeLevelsDrawing.className:return"Tirone Levels Settings";case f.QuadrantLinesDrawing.className:return"Quadrant Lines Settings";case f.RaffRegressionDrawing.className:return"Raff Regression Settings";case f.SpeedLinesDrawing.className:return"Speed Lines Settings";
case f.GannFanDrawing.className:return"Gann Fan Settings";case f.FreeHandDrawing.className:return"Free Hand Settings";case f.AndrewsPitchforkDrawing.className:return"Andrews Pitchfork Settings";case f.CyclicLinesDrawing.className:return"Cyclic Lines Settings";case f.TrendAngleDrawing.className:return"Trend Angle Settings";default:throw Error("Unknown drawing: "+this._config.drawing.className);}};b.prototype._setValues=function(e,c){c=!!c;c&&(!c||2!==this._tabs.activeIndex())||e.magnetMode||(e.magnetPoint=
f.MagnetPoint.BAR,e.magnetMode=f.MagnetMode.NONE);this._input_magnetMode.selectpicker("val",e.magnetMode);this._input_magnetTo.selectpicker("val",e.magnetPoint);if(!c||c&&1===this._tabs.activeIndex()){var l=e.tooltip,m=l.theme||l.actualTheme;this._setLineState(m.border.enabled);this._setTooltipBorderState(m.border.enabled);this._input_tooltipBorderColor.spectrum("set",m.border.color);this._input_tooltipBorderStyle.selectpicker("val",m.border.lineStyle||f.LineStyle.SOLID).selectpicker("refresh");this._input_tooltipBorderWidth.scxNumericField("setValue",
m.border.width);this._setTooltipFillState(m.fill.enabled);this._input_tooltipFillColor.spectrum("set",m.fill.color);l.contentKind===k.TooltipContentKind.IMAGE?(this._input_tooltipText.val(""),this._input_tooltipImageUrl.val(l.text),this._input_tooltipImagePreview.attr("src",l.text),l.text||this._resetImagePreview(this._input_tooltipImagePreview)):(this._input_tooltipText.val(l.text),this._input_tooltipImageUrl.val(""),this._resetImagePreview(this._input_tooltipImagePreview));this._input_tooltipTextColor.spectrum("set",
m.text.fillColor);this._input_tooltipTextFont.selectpicker("val",m.text.fontFamily).selectpicker("refresh");this._input_tooltipTextSize.selectpicker("val",m.text.fontSize).selectpicker("refresh");this._tooltipTextStylesChooser.setStyle("b","bold"===m.text.fontWeight);this._tooltipTextStylesChooser.setStyle("i","italic"===m.text.fontStyle);this._tooltipTextStylesChooser.setStyle("u","underline"===m.text.decoration)}if(!c||c&&0===this._tabs.activeIndex())switch(c=e.theme||e.actualTheme,e.className){case f.DotDrawing.className:case f.SquareDrawing.className:case f.DiamondDrawing.className:case f.ArrowUpDrawing.className:case f.ArrowDownDrawing.className:case f.ArrowLeftDrawing.className:case f.ArrowRightDrawing.className:case f.Arrow.className:this._setFillState(!0);
this._input_fillColor.spectrum("set",c.fill.fillColor);break;case f.NoteDrawing.className:this._setFillState(void 0!==c.fill.fillEnabled?c.fill.fillEnabled:!0);this._input_fillColor.spectrum("set",c.fill.fillColor);this._setFill2State(void 0!==c.centerPointFill.fillEnabled?c.centerPointFill.fillEnabled:!0);this._input_fillColor2.spectrum("set",c.centerPointFill.fillColor);this._input_labelText.val(e.label);this._input_labelColor.spectrum("set",c.text.fillColor);this._input_labelFont.selectpicker("val",
c.text.fontFamily).selectpicker("refresh");this._input_labelSize.selectpicker("val",c.text.fontSize).selectpicker("refresh");break;case f.LineSegmentDrawing.className:case f.HorizontalLineDrawing.className:case f.VerticalLineDrawing.className:case f.TrendChannelDrawing.className:case f.ErrorChannelDrawing.className:case f.TironeLevelsDrawing.className:case f.QuadrantLinesDrawing.className:case f.RaffRegressionDrawing.className:case f.SpeedLinesDrawing.className:case f.GannFanDrawing.className:case f.PolylineDrawing.className:case f.AndrewsPitchforkDrawing.className:case f.CyclicLinesDrawing.className:this._setLineState(!0);
this._input_lineColor.spectrum("set",c.line.strokeColor);this._input_lineStyle.selectpicker("val",c.line.lineStyle||f.LineStyle.SOLID).selectpicker("refresh");this._input_lineWidth.scxNumericField("setValue",c.line.width);break;case f.RectangleDrawing.className:case f.TriangleDrawing.className:case f.CircleDrawing.className:case f.EllipseDrawing.className:case f.PolygonDrawing.className:this._setLineState(void 0!==c.line.strokeEnabled?c.line.strokeEnabled:!0);this._input_lineColor.spectrum("set",
c.line.strokeColor);this._input_lineStyle.selectpicker("val",c.line.lineStyle||f.LineStyle.SOLID).selectpicker("refresh");this._input_lineWidth.scxNumericField("setValue",c.line.width);this._setFillState(void 0!==c.fill.fillEnabled?c.fill.fillEnabled:!0);this._input_fillColor.spectrum("set",c.fill.fillColor);break;case f.TextDrawing.className:this._input_text.val(e.text);this._input_textColor.spectrum("set",c.text.fillColor);this._input_textFont.selectpicker("val",c.text.fontFamily).selectpicker("refresh");
this._input_textSize.selectpicker("val",c.text.fontSize).selectpicker("refresh");this._textStylesChooser.setStyle("b","bold"===c.text.fontWeight);this._textStylesChooser.setStyle("i","italic"===c.text.fontStyle);this._textStylesChooser.setStyle("u","underline"===c.text.decoration);break;case f.ImageDrawing.className:e=e.url;this._input_imageUrl.val(e);this._input_imagePreview.attr("src",e);e||this._resetImagePreview(this._input_imagePreview);break;case f.BalloonDrawing.className:this._setLineState(void 0!==
c.line.strokeEnabled?c.line.strokeEnabled:!0);this._input_lineColor.spectrum("set",c.line.strokeColor);this._input_lineStyle.selectpicker("val",c.line.lineStyle||f.LineStyle.SOLID).selectpicker("refresh");this._input_lineWidth.scxNumericField("setValue",c.line.width);this._setFillState(void 0!==c.fill.fillEnabled?c.fill.fillEnabled:!0);this._input_fillColor.spectrum("set",c.fill.fillColor);this._input_text.val(e.text);this._input_textColor.spectrum("set",c.text.fillColor);this._input_textFont.selectpicker("val",
c.text.fontFamily).selectpicker("refresh");this._input_textSize.selectpicker("val",c.text.fontSize).selectpicker("refresh");this._textStylesChooser.setStyle("b","bold"===c.text.fontWeight);this._textStylesChooser.setStyle("i","italic"===c.text.fontStyle);this._textStylesChooser.setStyle("u","underline"===c.text.decoration);break;case f.MeasureDrawing.className:this._setLineState(void 0!==c.line.strokeEnabled?c.line.strokeEnabled:!0);this._input_lineColor.spectrum("set",c.line.strokeColor);this._input_lineStyle.selectpicker("val",
c.line.lineStyle||f.LineStyle.SOLID).selectpicker("refresh");this._input_lineWidth.scxNumericField("setValue",c.line.width);this._setFillState(void 0!==c.fill.fillEnabled?c.fill.fillEnabled:!0);this._input_fillColor.spectrum("set",c.fill.fillColor);this._input_text.val(e.text);this._input_textColor.spectrum("set",c.balloon.text.fillColor);this._input_textFont.selectpicker("val",c.balloon.text.fontFamily).selectpicker("refresh");this._input_textSize.selectpicker("val",c.balloon.text.fontSize).selectpicker("refresh");
break;case f.FreeHandDrawing.className:this._setLineState(!0);this._input_lineColor.spectrum("set",c.line.strokeColor);this._input_lineStyle.selectpicker("val",c.line.lineStyle||f.LineStyle.SOLID).selectpicker("refresh");this._input_lineWidth.scxNumericField("setValue",c.line.width);break;case f.TrendAngleDrawing.className:this._setLineState(!0),this._input_lineColor.spectrum("set",c.line.strokeColor),this._input_lineStyle.selectpicker("val",c.line.lineStyle||f.LineStyle.SOLID).selectpicker("refresh"),
this._input_lineWidth.scxNumericField("setValue",c.line.width),this._input_horizontalLineColor.spectrum("set",c.horizontalLine.strokeColor),this._input_horizontalLineStyle.selectpicker("val",c.horizontalLine.lineStyle||f.LineStyle.DOT).selectpicker("refresh"),this._input_horizontalLineWidth.scxNumericField("setValue",c.horizontalLine.width),this._input_arcColor.spectrum("set",c.arc.strokeColor),this._input_arcStyle.selectpicker("val",c.arc.lineStyle||f.LineStyle.DOT).selectpicker("refresh"),this._input_arcWidth.scxNumericField("setValue",
c.arc.width)}};b.prototype._save=function(){this._apply();this._validateInputValue()&&this.hide()};b.prototype._apply=function(){var e=this._config.drawing,c=$.extend(!0,{},e.actualTheme),l=e.tooltip,m=$.extend(!0,{},l.actualTheme);e.magnetMode?(e.magnetPoint=this._input_magnetTo.val(),e.magnetMode=this._input_magnetMode.val()):(e.magnetPoint=f.MagnetPoint.BAR,e.magnetMode=f.MagnetMode.NONE);m.border.enabled=this._chk_tooltipBorderEnabled.isChecked();m.border.color=this._input_tooltipBorderColor.spectrum("get").toRgbString();
m.border.lineStyle=this._input_tooltipBorderStyle.selectpicker("val");m.border.width=this._input_tooltipBorderWidth.scxNumericField("getValue");m.fill.enabled=this._chk_tooltipFillEnabled.isChecked();m.fill.color=this._input_tooltipFillColor.spectrum("get").toRgbString();l.contentKind=this._tooltipKindChooser.getKind();switch(l.contentKind){case k.TooltipContentKind.IMAGE:l.text=f.JsUtil.filterText(this._input_tooltipImageUrl.val());break;case k.TooltipContentKind.TEXT:l.text=this._input_tooltipText.val().trim();
break;case k.TooltipContentKind.HTML:l.text=this._input_tooltipText.val().trim()}m.text.fillColor=this._input_tooltipTextColor.spectrum("get").toRgbString();m.text.fontFamily=this._input_tooltipTextFont.selectpicker("val");m.text.fontSize=this._input_tooltipTextSize.selectpicker("val");m.text.fontWeight=this._tooltipTextStylesChooser.getStyle("b")?"bold":"normal";m.text.fontStyle=this._tooltipTextStylesChooser.getStyle("i")?"italic":"normal";m.text.decoration=this._tooltipTextStylesChooser.getStyle("u")?
"underline":"";switch(e.className){case f.DotDrawing.className:case f.SquareDrawing.className:case f.DiamondDrawing.className:case f.ArrowUpDrawing.className:case f.ArrowDownDrawing.className:case f.ArrowLeftDrawing.className:case f.ArrowRightDrawing.className:case f.Arrow.className:m.fill.color=this._input_tooltipFillColor.spectrum("get").toRgbString();c.fill.fillColor=this._input_fillColor.spectrum("get").toRgbString();break;case f.NoteDrawing.className:c.fill.fillColor=this._input_fillColor.spectrum("get").toRgbString();
c.fill.fillEnabled=this._chk_fillEnabled.isChecked();c.centerPointFill.fillColor=this._input_fillColor2.spectrum("get").toRgbString();c.centerPointFill.fillEnabled=this._chk_fill2Enabled.isChecked();e.label=this._input_labelText.val();c.text.fillColor=this._input_labelColor.spectrum("get").toRgbString();c.text.fontFamily=this._input_labelFont.selectpicker("val");c.text.fontSize=this._input_labelSize.selectpicker("val");break;case f.LineSegmentDrawing.className:case f.HorizontalLineDrawing.className:case f.VerticalLineDrawing.className:case f.TrendChannelDrawing.className:case f.ErrorChannelDrawing.className:case f.TironeLevelsDrawing.className:case f.QuadrantLinesDrawing.className:case f.RaffRegressionDrawing.className:case f.SpeedLinesDrawing.className:case f.GannFanDrawing.className:case f.PolylineDrawing.className:case f.AndrewsPitchforkDrawing.className:case f.CyclicLinesDrawing.className:c.line.strokeColor=
this._input_lineColor.spectrum("get").toRgbString();c.line.width=this._input_lineWidth.scxNumericField("getValue");c.line.lineStyle=this._input_lineStyle.selectpicker("val");break;case f.RectangleDrawing.className:case f.TriangleDrawing.className:case f.CircleDrawing.className:case f.EllipseDrawing.className:case f.PolygonDrawing.className:c.line.strokeEnabled=this._chk_lineEnabled.isChecked();c.line.strokeColor=this._input_lineColor.spectrum("get").toRgbString();c.line.width=this._input_lineWidth.scxNumericField("getValue");
c.line.lineStyle=this._input_lineStyle.selectpicker("val");c.fill.fillEnabled=this._chk_fillEnabled.isChecked();c.fill.fillColor=this._input_fillColor.spectrum("get").toRgbString();break;case f.ImageDrawing.className:if(!this._validateInputValue()){e=i18next.t("notification.drawingSettingDialog.msg.urlIsNotSpecified");f.UI.Notification.warning(e);return}e.url=f.JsUtil.filterText(this._input_imageUrl.val());break;case f.TextDrawing.className:if(!this._validateInputValue()){e=i18next.t("notification.drawingSettingDialog.msg.textIsNotSpecified");
f.UI.Notification.warning(e);return}l=f.JsUtil.filterText(this._input_text.val());e.text=l.length?l:e.text;c.text.fillColor=this._input_textColor.spectrum("get").toRgbString();c.text.fontFamily=this._input_textFont.selectpicker("val");c.text.fontSize=parseInt(this._input_textSize.selectpicker("val"),10);c.text.fontWeight=this._textStylesChooser.getStyle("b")?"bold":"normal";c.text.fontStyle=this._textStylesChooser.getStyle("i")?"italic":"normal";c.text.decoration=this._textStylesChooser.getStyle("u")?
"underline":"";break;case f.BalloonDrawing.className:if(!this._validateInputValue()){e=i18next.t("notification.drawingSettingDialog.msg.textIsNotSpecified");f.UI.Notification.warning(e);return}l=f.JsUtil.filterText(this._input_text.val());e.text=l.length?l:e.text;c.text.fillColor=this._input_textColor.spectrum("get").toRgbString();c.text.fontFamily=this._input_textFont.selectpicker("val");c.text.fontSize=parseInt(this._input_textSize.selectpicker("val"),10);c.text.fontWeight=this._textStylesChooser.getStyle("b")?
"bold":"normal";c.text.fontStyle=this._textStylesChooser.getStyle("i")?"italic":"normal";c.text.decoration=this._textStylesChooser.getStyle("u")?"underline":"";c.line.strokeEnabled=this._chk_lineEnabled.isChecked();c.line.strokeColor=this._input_lineColor.spectrum("get").toRgbString();c.line.width=this._input_lineWidth.scxNumericField("getValue");c.line.lineStyle=this._input_lineStyle.selectpicker("val");c.fill.fillEnabled=this._chk_fillEnabled.isChecked();c.fill.fillColor=this._input_fillColor.spectrum("get").toRgbString();
break;case f.MeasureDrawing.className:c.line.strokeEnabled=this._chk_lineEnabled.isChecked();c.line.strokeColor=this._input_lineColor.spectrum("get").toRgbString();c.line.width=this._input_lineWidth.scxNumericField("getValue");c.line.lineStyle=this._input_lineStyle.selectpicker("val");c.border.strokeEnabled=this._chk_lineEnabled.isChecked();c.border.strokeColor=this._input_lineColor.spectrum("get").toRgbString();c.border.width=this._input_lineWidth.scxNumericField("getValue");c.border.lineStyle=this._input_lineStyle.selectpicker("val");
c.fill.fillEnabled=this._chk_fillEnabled.isChecked();c.fill.fillColor=this._input_fillColor.spectrum("get").toRgbString();c.balloon.fill.fillEnabled=this._chk_fillEnabled.isChecked();c.balloon.fill.fillColor=this._input_fillColor.spectrum("get").toRgbString();c.balloon.text.fillColor=this._input_textColor.spectrum("get").toRgbString();c.balloon.text.fontFamily=this._input_textFont.selectpicker("val");c.balloon.text.fontSize=parseInt(this._input_textSize.selectpicker("val"),10);break;case f.FreeHandDrawing.className:c.line.strokeColor=
this._input_lineColor.spectrum("get").toRgbString();c.line.width=this._input_lineWidth.scxNumericField("getValue");c.line.lineStyle=this._input_lineStyle.selectpicker("val");break;case f.TrendAngleDrawing.className:c.line.strokeColor=this._input_lineColor.spectrum("get").toRgbString(),c.line.width=this._input_lineWidth.scxNumericField("getValue"),c.line.lineStyle=this._input_lineStyle.selectpicker("val"),c.horizontalLine.strokeColor=this._input_horizontalLineColor.spectrum("get").toRgbString(),c.horizontalLine.width=
this._input_horizontalLineWidth.scxNumericField("getValue"),c.horizontalLine.lineStyle=this._input_horizontalLineStyle.selectpicker("val"),c.arc.strokeColor=this._input_arcColor.spectrum("get").toRgbString(),c.arc.width=this._input_arcWidth.scxNumericField("getValue"),c.arc.lineStyle=this._input_arcStyle.selectpicker("val")}this._config.drawing.theme=c;this._config.drawing.tooltip.theme=m;this._config.drawing.chartPanel.update();this._isApplyClicked=!0};b.prototype._validateInputValue=function(){switch(this._config.drawing.className){case f.ImageDrawing.className:if(!f.JsUtil.filterText(this._input_imageUrl.val()).length)return!1;
break;case f.TextDrawing.className:case f.BalloonDrawing.className:if(!f.JsUtil.filterText(this._input_text.val()))return!1}return!0};b.prototype._initFields=function(){this._title=this._dialog.find("#scxDrawingDialog_title");this._tabItemsContainer=this._dialog.find(".scxTabs");this._tabPanelsContainer=this._dialog.find(".scxTabsContent");this._panelFigure=this._dialog.find("#scxDrawingDialog_panel_figure");this._panelFigureLine=this._dialog.find("#scxDrawingDialog_panel_figure_linePanel");this._panelFigureHorizontalLine=
this._dialog.find("#scxDrawingDialog_panel_figure_horizontalLinePanel");this._panelFigureArc=this._dialog.find("#scxDrawingDialog_panel_figure_arcPanel");this._panelFigureLineEnabled=this._dialog.find("#scxDrawingDialog_panel_figure_lineEnabled");this._panelFigureFill=this._dialog.find("#scxDrawingDialog_panel_figure_fillColorPanel");this._panelFigureFillEnabled=this._dialog.find("#scxDrawingDialog_panel_figure_fillColorPanel_fillEnabled");this._panelFigureFill2=this._dialog.find("#scxDrawingDialog_panel_figure_fillColorPanel2");
this._panelFigureFill2Enabled=this._dialog.find("#scxDrawingDialog_panel_figure_fillColorPanel2_fillEnabled");this._panelFigureLabel=this._dialog.find("#scxDrawingDialog_panel_figure_label");this._panelText=this._dialog.find("#scxDrawingDialog_panel_text");this._panelImage=this._dialog.find("#scxDrawingDialog_panel_image");this._panelToolipText=this._dialog.find("#scxDrawingDialog_panel_tooltipText");this._panelToolipTextStyle=this._dialog.find("#scxDrawingDialog_panel_tooltipText_style");this._panelTooltipImage=
this._dialog.find("#scxDrawingDialog_panel_tooltipImage");this._input_lineColor=this._dialog.find("#scxDrawingDialog_input_lineColor");this._input_lineWidth=this._dialog.find("#scxDrawingDialog_input_lineWidth");this._input_lineStyle=this._dialog.find("#scxDrawingDialog_input_lineStyle");this._input_fillColor=this._dialog.find("#scxDrawingDialog_input_fillColor");this._input_fillColor2=this._dialog.find("#scxDrawingDialog_input_fillColor2");this._input_labelText=this._dialog.find("#scxDrawingDialog_input_labelText");
this._input_labelColor=this._dialog.find("#scxDrawingDialog_input_labelColor");this._input_labelFont=this._dialog.find("#scxDrawingDialog_input_labelFont");this._input_labelSize=this._dialog.find("#scxDrawingDialog_input_labelSize");this._input_horizontalLineColor=this._dialog.find("#scxDrawingDialog_input_horizontalLineColor");this._input_horizontalLineWidth=this._dialog.find("#scxDrawingDialog_input_horizontalLineWidth");this._input_horizontalLineStyle=this._dialog.find("#scxDrawingDialog_input_horizontalLineStyle");
this._input_arcColor=this._dialog.find("#scxDrawingDialog_input_arcColor");this._input_arcWidth=this._dialog.find("#scxDrawingDialog_input_arcWidth");this._input_arcStyle=this._dialog.find("#scxDrawingDialog_input_arcStyle");this._input_text=this._dialog.find("#scxDrawingDialog_input_text");this._input_textColor=this._dialog.find("#scxDrawingDialog_input_textColor");this._input_textFont=this._dialog.find("#scxDrawingDialog_input_textFont");this._input_textSize=this._dialog.find("#scxDrawingDialog_input_textSize");
this._input_textColor=this._dialog.find("#scxDrawingDialog_input_textColor");this._inputs_textStyles=this._dialog.find(".scxDrawingDialog_textStyles");this._textStylesChooser=null;this._input_textBackColor=this._dialog.find("#scxDrawingDialog_input_textBackgroundColor");this._input_textBorderColor=this._dialog.find("#scxDrawingDialog_input_textBorderColor");this._input_imageUrl=this._dialog.find("#scxDrawingDialog_input_imageURL");this._input_imagePreview=this._dialog.find("#scxDrawingDialog_imagePreview");
this._input_tooltipBorderColor=this._dialog.find("#scxDrawingDialog_input_tooltipBorderColor");this._input_tooltipBorderWidth=this._dialog.find("#scxDrawingDialog_input_tooltipBorderWidth");this._input_tooltipBorderStyle=this._dialog.find("#scxDrawingDialog_input_tooltipBorderStyle");this._input_tooltipFillColor=this._dialog.find("#scxDrawingDialog_input_tooltipFillColor");this._inputs_tooltipKind=this._dialog.find(".scxDrawingDialog_tooltipKind").children();this._input_tooltipText=this._dialog.find("#scxDrawingDialog_input_tooltipText");
this._input_tooltipTextColor=this._dialog.find("#scxDrawingDialog_input_tooltipTextColor");this._input_tooltipTextFont=this._dialog.find("#scxDrawingDialog_input_tooltipTextFont");this._input_tooltipTextSize=this._dialog.find("#scxDrawingDialog_input_tooltipTextSize");this._inputs_tooltipTextStyles=this._dialog.find(".scxDrawingDialog_tooltipTextStyles");this._input_tooltipImageUrl=this._dialog.find("#scxDrawingDialog_input_tooltipImageURL");this._input_tooltipImagePreview=this._dialog.find("#scxDrawingDialog_tooltipImagePreview");
this._chk_lineEnabledHTMLObj=this._dialog.find("#scxDrawingDialog_chk_lineColor");this._chk_fillEnabledHTMLObj=this._dialog.find("#scxDrawingDialog_chk_fillColor");this._chk_fill2EnabledHTMLObj=this._dialog.find("#scxDrawingDialog_chk_fillColor2");this._chk_textBackgroundEnabledHTMLObj=this._dialog.find("#scxDrawingDialog_chk_textBackgroundColor");this._chk_textBorderEnabledHTMLObj=this._dialog.find("#scxDrawingDialog_chk_textBorderColor");this._chk_textBackgroundEnabled=this._dialog.find("#scxDrawingDialog_chk_textBackgroundColor");
this._chk_textBorderEnabled=this._dialog.find("#scxDrawingDialog_chk_textBorderColor");this._chk_tooltipBorderEnabledHTMLObj=this._dialog.find("#scxDrawingDialog_chk_tooltipBorderColor");this._chk_tooltipFillEnabledHTMLObj=this._dialog.find("#scxDrawingDialog_chk_tooltipFillColor");this._label_lineEnabled=this._dialog.find("#scxDrawingDialog_label_lineColor");this._label_fillEnabled=this._dialog.find("#scxDrawingDialog_label_fillColor");this._label_fill2Enabled=this._dialog.find("#scxDrawingDialog_label_fillColor2");
this._label_textBackgroundEnabled=this._dialog.find("#scxDrawingDialog_label_textBackgroundColor");this._label_textBorderEnabled=this._dialog.find("#scxDrawingDialog_label_textBorderColor");this._label_tooltipBorderEnabled=this._dialog.find("#scxDrawingDialog_label_tooltipBorder");this._label_tooltipFillEnabled=this._dialog.find("#scxDrawingDialog_label_tooltipFill");this._label_magnetToLabel=this._dialog.find("#scxDrawingDialog_label_magnetToLabel");this._input_magnetTo=this._dialog.find("#scxDrawingDialog_input_magnetTo");
this._input_magnetMode=this._dialog.find("#scxDrawingDialog_input_magnetMode")};b._numericFieldConfig={showArrows:!1,maxValue:10,minValue:1,value:1};b._switcherySettings={color:"#64bd63",secondaryColor:"#ddd",className:"scx_switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s"};return b}(k.Dialog);k.DrawingSettingsDialog=h;var g=function(){function a(b){this._selector=b;this._init()}a.prototype.getStyle=function(b){switch(b.toLowerCase()){case "b":return this._checkboxes.eq(0).prop("checked");case "i":return this._checkboxes.eq(1).prop("checked");
case "u":return this._checkboxes.eq(2).prop("checked");default:return!1}};a.prototype.setStyle=function(b,e){switch(b.toLowerCase()){case "b":e?this._labels.eq(0).addClass("active"):this._labels.eq(0).removeClass("active");this._checkboxes.eq(0).prop("checked",e);break;case "i":e?this._labels.eq(1).addClass("active"):this._labels.eq(1).removeClass("active");this._checkboxes.eq(1).prop("checked",e);break;case "u":e?this._labels.eq(2).addClass("active"):this._labels.eq(2).removeClass("active"),this._checkboxes.eq(2).prop("checked",
e)}};a.prototype._init=function(){this._labels=this._selector.find(">label");this._checkboxes=this._selector.find("input[type=checkbox]");this._labels.click(function(b){var e=$(b.currentTarget).find("input[type=checkbox]");e.prop("checked",!e.prop("checked"));e.prop("checked")?$(b.currentTarget).addClass("active"):$(b.currentTarget).removeClass("active")}).each(function(b){$(b.currentTarget).find("input[type=checkbox]").prop("checked")?$(b.currentTarget).addClass("active"):$(b.currentTarget).removeClass("active")})};
return a}(),d=function(){function a(b){this.DATA_KIND="data-kind";this._config=b;this.setKind(k.TooltipContentKind.TEXT);this._config.buttons.on(eventClickByPlatform,this,this._onButtonClicked)}a.prototype.destroy=function(){this._config.buttons.off(eventClickByPlatform,this._onButtonClicked)};a.prototype.getKind=function(){return this._kind};a.prototype.setKind=function(b,e){if(b===this._kind)return!1;switch(b){case k.TooltipContentKind.TEXT:this._config.panelImage.hide();this._config.panelTextStyle.show();
this._config.panelText.show();break;case k.TooltipContentKind.HTML:this._config.panelImage.hide();this._config.panelTextStyle.hide();this._config.panelText.show();break;case k.TooltipContentKind.IMAGE:this._config.panelText.hide();this._config.panelImage.show();break;default:return!1}this._highlightButton(b);this._kind=b;if(e)this._config.onChange(b);return!0};a.prototype._highlightButton=function(b){this._config.buttons.removeClass("active");this._config.buttons.filter("["+this.DATA_KIND+'="'+b+
'"]').addClass("active")};a.prototype._onButtonClicked=function(b){b.data.setKind($(b.target).data().kind,!0)};return a}()})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h=function(g){function d(a){a=g.call(this,a)||this;a._isApplyClicked=!1;a._levels=[];a._initFields();a._init();return a}__extends(d,g);d.prototype.show=function(a){this._config=a;this._setDrawingConfig(this._config.drawing);this._tabs.activate(0);this._isApplyClicked=!1;this._setDialogFields();g.prototype.show.call(this,a)};d.prototype.hide=function(){this._config=null;this._clearDialogFields();g.prototype.hide.call(this)};d.prototype._init=function(){var a=this;this._tabs=
new k.Tabs({tabsContainer:this._tabItemsContainer,panelsContainer:this._tabPanelsContainer,onChange:function(b){a.resize()}});this._input_magnetTo.selectpicker({container:"body"});this._input_magnetMode.selectpicker({container:"body"});$("body").bind("scxSwitcherChanged",function(b,e){b=$(e.target);var c=!!e.checked;b.is(a._chk_lineEnabledHTMLObj)&&(e=$(e.target).index(".scxFibonacciDrawingDialog_chk_lineEnable"),a._setLineState(c,e));b.is(a._chk_trendLineEnabledHTMLObj)&&a._setTrendLineState(c);
b.is(a._chk_levelsValueEnabledHTMLObj)&&(a._showLevelValues=c,a._setLevelsState(c));b.is(a._chk_levelsPriceEnabledHTMLObj)&&(a._setLabelState(a._label_levelPrices,c),a._showLevelPrices=c);b.is(a._chk_levelsPercentEnabledHTMLObj)&&(a._setLabelState(a._label_levelPercents,c),a._showLevelPercents=c);b.is(a._chk_linesReverseEnabledHTMLObj)&&(a._setLabelState(a._label_reverse,c),a._reverse=c);b.is(a._chk_extendLinesLeftEnabledHTMLObj)&&(a._setLabelState(a._label_extendLinesLeft,c),a._setLevelLinesExtension(c,
f.FibonacciLevelLineExtension.RIGHT,f.FibonacciLevelLineExtension.LEFT));b.is(a._chk_extendLinesRightEnabledHTMLObj)&&(a._setLabelState(a._label_extendLinesRight,c),a._setLevelLinesExtension(c,f.FibonacciLevelLineExtension.LEFT,f.FibonacciLevelLineExtension.RIGHT));b.is(a._chk_extendLinesTopEnabledHTMLObj)&&(a._setLabelState(a._label_extendLinesTop,c),a._setLevelLinesExtension(c,f.FibonacciLevelLineExtension.BOTTOM,f.FibonacciLevelLineExtension.TOP));b.is(a._chk_extendLinesBottomEnabledHTMLObj)&&
(a._setLabelState(a._label_extendLinesBottom,c),a._setLevelLinesExtension(c,f.FibonacciLevelLineExtension.TOP,f.FibonacciLevelLineExtension.BOTTOM));b.is(a._chk_backgroundEnabledHTMLObj)&&(a._setLabelState(a._label_background,c),a._showLevelBackgrounds=c)});this._dialog.find("#scxFibonacciDrawingDialog_btn_resetToDefaults").on(eventClickByPlatform,function(){a.resetToDefaults()});this._dialog.find("#scxFibonacciDrawingDialog_btn_save").on(eventClickByPlatform,function(){a._save()});this._dialog.find("#scxFibonacciDrawingDialog_btn_apply").on(eventClickByPlatform,
function(){a._apply()});this._dialog.find(".scxFibonacciDrawingDialog_panel_addLinePanel").on(eventClickByPlatform,function(){a._addNewLinePanel()})};d.prototype._initFields=function(){this._title=this._dialog.find("#scxFibonacciDrawingDialog_title");this._tabItemsContainer=this._dialog.find(".scxTabs");this._tabPanelsContainer=this._dialog.find(".scxTabsContent");this._panelFigure=this._dialog.find(".scxFibonacciDrawingDialog_panel_figure");this._panelFigureLine=this._dialog.find(".scxFibonacciDrawingDialog_panel_figure_linePanel");
this._panelFigureTrendLinePanel=this._dialog.find(".scxFibonacciDrawingDialog_panel_figure_trendLinePanel");this._panelFigureTrendLine=null;this._panelFigureLevelParametersPanel=this._dialog.find(".scxFibonacciDrawingDialog_panel_figure_levelParametersPanel");this._panelFigureLevelParameters=null;this._panelFigureRetracementsOptionsPanel=this._dialog.find(".scxFibonacciDrawingDialog_panel_figure_retracementsOptionsPanel");this._panelFigureRetracementsOptions=null;this._panelFigureLabelsParametersPanel=
this._dialog.find(".scxFibonacciDrawingDialog_panel_figure_labelsParametersPanel");this._panelFigureLabelsParameters=null;this._panelFigureBackgroundPanel=this._dialog.find(".scxFibonacciDrawingDialog_panel_figure_backgroundPanel");this._label_background=this._label_levelPercents=this._label_levelPrices=this._label_levels=this._label_reverse=this._label_extendLinesBottom=this._label_extendLinesTop=this._label_extendLinesRight=this._label_extendLinesLeft=this._label_trendLine=this._levelsReverseEnabled=
this._labelsHorEnabled=this._levelsExtendVerEnabled=this._levelsExtendHorEnabled=this._levelsPercentEnabled=this._levelsPriceEnabled=this._chk_backgroundEnabledHTMLObj=this._chk_extendLinesBottomEnabledHTMLObj=this._chk_extendLinesTopEnabledHTMLObj=this._chk_extendLinesRightEnabledHTMLObj=this._chk_extendLinesLeftEnabledHTMLObj=this._chk_linesReverseEnabledHTMLObj=this._chk_levelsPercentEnabledHTMLObj=this._chk_levelsPriceEnabledHTMLObj=this._chk_levelsValueEnabledHTMLObj=this._chk_trendLineEnabled=
this._chk_trendLineEnabledHTMLObj=this._chk_lineEnabledHTMLObj=this._input_labelsTextPosition=this._input_labelsPosition=this._input_trendLineStyle=this._input_trendLineWidth=this._input_trendLineColor=this._input_lineStyle=this._input_lineWidth=this._input_lineColor=this._input_lineLevel=this._panelFigureBackground=null;this._label_magnetToLabel=this._dialog.find("#scxFibonacciDrawingDialog_label_magnetToLabel");this._input_magnetTo=this._dialog.find(".scxFibonacciDrawingDialog_input_magnetTo");
this._input_magnetMode=this._dialog.find(".scxFibonacciDrawingDialog_input_magnetMode")};d.prototype._setDialogFields=function(){this._generateTrendLine();this._addLinePanel();this._generateRetracementsOptions();this._generateLevelParameters();this._generateLabelsParameters();this._generateBackgroundParameters();this._defineDomObjects();this._setTrendLineParameters();this._setRetracementsOptions();this._setLevelParameters();this._setLabelsParameters();this._setBackgroundParameters();this._setValues();
this._switchView()};d.prototype._setDrawingConfig=function(a){this._showTrendLine=a.showTrendLine;this._showLevelValues=a.showLevelValues;this._showLevelPrices=a.showLevelPrices;this._showLevelPercents=a.showLevelPercents;this._showLevelBackgrounds=a.showLevelBackgrounds;this._levelLinesExtension=a.levelLinesExtension;this._reverse=a.reverse;this._levelTextHorPosition=a.levelTextHorPosition;this._levelTextVerPosition=a.levelTextVerPosition;this._levels=$.extend(!0,[],a.levels)};d.prototype._setLabelState=
function(a,b){b?a.removeClass("disabled"):a.addClass("disabled")};d.prototype._setLevelLinesExtension=function(a,b,e){this._levelLinesExtension=a?this._levelLinesExtension===b?f.FibonacciLevelLineExtension.BOTH:e:this._levelLinesExtension===f.FibonacciLevelLineExtension.BOTH?b:f.FibonacciLevelLineExtension.NONE};d.prototype._setLineState=function(a,b){var e=this._panelFigureLine.find(".scxFibonacciDrawingDialog_input_lineColor").eq(b),c=this._panelFigureLine.find(".scxFibonacciDrawingDialog_input_lineLevel").eq(b),
l=this._panelFigureLine.find(".scxFibonacciDrawingDialog_input_lineWidth").eq(b),m=this._panelFigureLine.find(".scxFibonacciDrawingDialog_input_lineStyle:even").eq(b);a?(e.spectrum("enable"),m.removeAttr("disabled"),m.selectpicker("refresh"),l.scxNumericField("enable"),c.scxNumericField("enable"),this._levels[b].visible=!0):(e.spectrum("disable"),m.attr("disabled","disabled"),m.selectpicker("refresh"),l.scxNumericField("disable"),c.scxNumericField("disable"),this._levels[b].visible=!1)};d.prototype._setTrendLineState=
function(a){a?(this._label_trendLine.removeClass("disabled"),this._input_trendLineColor.spectrum("enable"),this._input_trendLineWidth.scxNumericField("enable"),this._input_trendLineStyle.removeAttr("disabled"),this._input_trendLineStyle.selectpicker("refresh"),this._showTrendLine=!0):(this._label_trendLine.addClass("disabled"),this._input_trendLineColor.spectrum("disable"),this._input_trendLineWidth.scxNumericField("disable"),this._input_trendLineStyle.attr("disabled","disabled"),this._input_trendLineStyle.selectpicker("refresh"),
this._showTrendLine=!1)};d.prototype._setLevelsState=function(a){a?(this._label_levels.removeClass("disabled"),this._chk_levelsPriceEnabled.isChecked()&&this._label_levelPrices.removeClass("disabled"),this._chk_levelsPercentEnabled.isChecked()&&this._label_levelPercents.removeClass("disabled"),this._chk_levelsPriceEnabled.enable(),this._chk_levelsPercentEnabled.enable()):(this._label_levels.addClass("disabled"),this._label_levelPrices.addClass("disabled"),this._label_levelPercents.addClass("disabled"),
this._chk_levelsPriceEnabled.disable(),this._chk_levelsPercentEnabled.disable());d._switcherySettings.disabled=!1};d.prototype._switchView=function(){this._panelFigureLine.show();this._title.text(this._getDrawingTitle());this._panelFigure.show();switch(this._config.drawing.className){case f.FibonacciArcsDrawing.className:this._panelFigureRetracementsOptionsPanel.hide();this._levelsPriceEnabled.hide();this._labelsHorEnabled.show();this._panelFigureTrendLinePanel.show();break;case f.FibonacciEllipsesDrawing.className:this._panelFigureRetracementsOptionsPanel.hide();
this._labelsHorEnabled.show();this._levelsPriceEnabled.hide();this._panelFigureTrendLinePanel.show();break;case f.FibonacciTimeZonesDrawing.className:this._levelsExtendHorEnabled.hide();this._levelsExtendVerEnabled.show();this._levelsReverseEnabled.hide();this._panelFigureRetracementsOptionsPanel.show();this._levelsPriceEnabled.hide();this._levelsPercentEnabled.hide();this._panelFigureTrendLinePanel.show();break;case f.FibonacciRetracementsDrawing.className:this._levelsExtendHorEnabled.show();this._levelsExtendVerEnabled.hide();
this._levelsReverseEnabled.show();this._panelFigureRetracementsOptionsPanel.show();this._panelFigureTrendLinePanel.show();break;case f.FibonacciFanDrawing.className:this._panelFigureRetracementsOptionsPanel.hide();this._panelFigureTrendLinePanel.hide();this._labelsHorEnabled.hide();break;case f.FibonacciExtensionsDrawing.className:this._levelsExtendHorEnabled.show(),this._levelsExtendVerEnabled.hide(),this._levelsReverseEnabled.show(),this._panelFigureRetracementsOptionsPanel.show(),this._panelFigureTrendLinePanel.show()}};
d.prototype._getDrawingTitle=function(){var a="";switch(this._config.drawing.className){case f.FibonacciArcsDrawing.className:a+="Fibonacci Arcs";break;case f.FibonacciEllipsesDrawing.className:a+="Fibonacci Ellipses";break;case f.FibonacciTimeZonesDrawing.className:a+="Fibonacci Time Zones";break;case f.FibonacciRetracementsDrawing.className:a+="Fibonacci Retracements";break;case f.FibonacciFanDrawing.className:a+="Fibonacci Fan";break;case f.FibonacciExtensionsDrawing.className:a+="Fibonacci Extensions";
break;default:throw Error("Unknown drawing: "+this._config.drawing.className);}return a+" Settings"};d.prototype._setValues=function(){for(var a=0;a<this._levels.length;a++){var b=this._levels[a];this._input_lineLevel[a].value=this._config.drawing.className===f.FibonacciTimeZonesDrawing.className?b.value:100*b.value;var e=this._dialog.find(".scxFibonacciDrawingDialog_input_lineColor").eq(a),c=this._dialog.find(".scxFibonacciDrawingDialog_input_lineWidth").eq(a),l=this._dialog.find(".scxFibonacciDrawingDialog_input_lineStyle:even").eq(a);
b=b.theme&&b.theme.line||this._config.drawing.actualTheme.line;e.spectrum("set",b.strokeColor);c.scxNumericField("setValue",b.width);l.selectpicker("val",b.lineStyle||f.LineStyle.SOLID).selectpicker("refresh")}this._config.drawing.className!==f.FibonacciFanDrawing.className&&(this._input_trendLineColor.spectrum("set",this._config.drawing.actualTheme.trendLine.strokeColor),this._input_trendLineWidth.scxNumericField("setValue",this._config.drawing.actualTheme.trendLine.width),this._input_trendLineStyle.selectpicker("val",
this._config.drawing.actualTheme.trendLine.lineStyle||f.LineStyle.SOLID).selectpicker("refresh"));this._input_magnetMode.selectpicker("val",this._config.drawing.magnetMode);this._input_magnetTo.selectpicker("val",this._config.drawing.magnetPoint)};d.prototype._getValues=function(){for(var a=0;a<this._levels.length;a++){var b=this._levels[a];var e=this._config.drawing.className!==f.FibonacciTimeZonesDrawing.className;b.value=parseFloat(this._input_lineLevel[a].value,10);e&&(b.value/=100);e=this._dialog.find(".scxFibonacciDrawingDialog_input_lineColor").eq(a);
var c=this._dialog.find(".scxFibonacciDrawingDialog_input_lineWidth").eq(a),l=this._dialog.find(".scxFibonacciDrawingDialog_input_lineStyle:even").eq(a);b.theme||(b.theme={});b.theme.line||(b.theme.line={});b.theme.fill||(b.theme.fill={});b.theme.text||(b.theme.text=this._config.drawing.actualTheme.text?$.extend(!0,{},this._config.drawing.actualTheme.text):{});b.theme.line.strokeColor=e.spectrum("get").toRgbString();b.theme.line.width=c.scxNumericField("getValue");b.theme.line.lineStyle=l.val();e=
e.spectrum("get").toRgb();b.theme.text.fillColor=tinycolor(e).toRgbString();e.a=.3;b.theme.fill.fillColor=tinycolor(e).toRgbString()}a=this._config.drawing.theme=$.extend(!0,{},this._config.drawing.actualTheme);this._config.drawing.className!==f.FibonacciFanDrawing.className&&(a.trendLine.strokeColor=this._input_trendLineColor.spectrum("get").toRgbString(),a.trendLine.width=this._input_trendLineWidth.scxNumericField("getValue"),a.trendLine.lineStyle=this._input_trendLineStyle.val());this._levelTextHorPosition=
this._input_labelsPosition.val();this._levelTextVerPosition=this._input_labelsTextPosition.val()};d.prototype.resetToDefaults=function(){var a=this._config.drawing.defaultTheme;switch(this._config.drawing.className){case f.FibonacciArcsDrawing.className:var b=f.FibonacciArcsDrawing.defaults;break;case f.FibonacciEllipsesDrawing.className:b=f.FibonacciEllipsesDrawing.defaults;break;case f.FibonacciRetracementsDrawing.className:b=f.FibonacciRetracementsDrawing.defaults;break;case f.FibonacciFanDrawing.className:b=
f.FibonacciFanDrawing.defaults;break;case f.FibonacciExtensionsDrawing.className:b=f.FibonacciExtensionsDrawing.defaults;break;case f.FibonacciTimeZonesDrawing.className:b=f.FibonacciTimeZonesDrawing.defaults}b=$.extend(!1,f.FibonacciDrawingBase.defaults,b);this._clearDialogFields();this._setDrawingConfig(b);this._setDialogFields();this._config.drawing.className!==f.FibonacciFanDrawing.className&&(this._input_trendLineColor.spectrum("set",a.trendLine.strokeColor),this._input_trendLineWidth.scxNumericField("setValue",
a.trendLine.width),this._input_trendLineStyle.selectpicker("val",a.trendLine.lineStyle).selectpicker("refresh"))};d.prototype._apply=function(){this._getValues();var a=this._config.drawing;a.magnetMode?(a.magnetPoint=this._input_magnetTo.val(),a.magnetMode=this._input_magnetMode.val()):(a.magnetPoint=f.MagnetPoint.BAR,a.magnetMode=f.MagnetMode.NONE);a.showTrendLine=this._showTrendLine;a.showLevels=this._showLevelValues;a.showLevelPrices=this._showLevelPrices;a.showLevelPercents=this._showLevelPercents;
a.showLevelBackgrounds=this._showLevelBackgrounds;void 0!==a.levelLinesExtension&&(a.levelLinesExtension=this._levelLinesExtension);void 0!==a.reverse&&(a.reverse=this._reverse);a.levelTextHorPosition=this._levelTextHorPosition;a.levelTextVerPosition=this._levelTextVerPosition;a.levels=this._levels;a.chartPanel.update();this._isApplyClicked=!0};d.prototype._save=function(){this._apply();this.hide()};d.prototype._addNewLinePanel=function(){var a=this._config.drawing.actualTheme;this._getValues();this._levels.push({value:0,
visible:!0,theme:$.extend(!0,{},{line:a.line})});this._clearLinePanel();this._addLinePanel();this._setValues();this.resize()};d.prototype._addLinePanel=function(){var a=this;this._levels.forEach(function(){a._generateLinePanel()});this._defineDomLevelObjects();this._setLinePanelsProperties()};d.prototype._deleteLinePanel=function(a){this._getValues();a=$(a.currentTarget).index(".scxFibonacciDrawingDialog_panel_deleteLinePanel");this._levels.splice(a,1);this._panelFigureLine.eq(a).remove();this._clearLinePanel();
this._addLinePanel();this._setValues();this.resize()};d.prototype._clearDialogFields=function(){this._clearLinePanel();this._clearDialogParameters()};d.prototype._clearLinePanel=function(){this._panelFigureLine.remove();$("body").find(".scxFibonacciDrawingDialog_input_lineColorscxSpectrumDrawingDialog").remove()};d.prototype._clearDialogParameters=function(){this._panelFigureRetracementsOptions.remove();this._panelFigureTrendLine.remove();this._panelFigureLevelParameters.remove();this._panelFigureLabelsParameters.remove();
this._panelFigureBackground.remove()};d.prototype._setBackgroundParameters=function(){var a=this._dialog.find(".scxFibonacciDrawingDialog_chk_background");(new Switchery(a[0],d._switcherySettings)).setPosition(this._showLevelBackgrounds);this._setLabelState(this._label_background,this._showLevelBackgrounds)};d.prototype._setLabelsParameters=function(){this._input_labelsPosition.selectpicker({container:"body"});this._input_labelsPosition.selectpicker("val",this._levelTextHorPosition).selectpicker("refresh");
this._input_labelsTextPosition.selectpicker({container:"body"});this._input_labelsTextPosition.selectpicker("val",this._levelTextVerPosition).selectpicker("refresh")};d.prototype._setRetracementsOptions=function(){var a=this._dialog.find(".scxFibonacciDrawingDialog_chk_extendLinesLeft");a=new Switchery(a[0],d._switcherySettings);var b=this._dialog.find(".scxFibonacciDrawingDialog_chk_extendLinesRight");b=new Switchery(b[0],d._switcherySettings);var e=this._dialog.find(".scxFibonacciDrawingDialog_chk_extendLinesTop");
e=new Switchery(e[0],d._switcherySettings);var c=this._dialog.find(".scxFibonacciDrawingDialog_chk_extendLinesBottom");c=new Switchery(c[0],d._switcherySettings);var l=this._dialog.find(".scxFibonacciDrawingDialog_chk_linesReverse");(new Switchery(l[0],d._switcherySettings)).setPosition(this._reverse);this._setLabelState(this._label_reverse,this._reverse);switch(this._levelLinesExtension){case f.FibonacciLevelLineExtension.NONE:a.setPosition(!1);b.setPosition(!1);e.setPosition(!1);c.setPosition(!1);
this._setLabelState(this._label_extendLinesLeft,!1);this._setLabelState(this._label_extendLinesRight,!1);this._setLabelState(this._label_extendLinesTop,!1);this._setLabelState(this._label_extendLinesBottom,!1);break;case f.FibonacciLevelLineExtension.LEFT:a.setPosition(!0);this._setLabelState(this._label_extendLinesLeft,!0);break;case f.FibonacciLevelLineExtension.RIGHT:b.setPosition(!0);this._setLabelState(this._label_extendLinesRight,!0);break;case f.FibonacciLevelLineExtension.TOP:e.setPosition(!0);
this._setLabelState(this._label_extendLinesTop,!0);break;case f.FibonacciLevelLineExtension.BOTTOM:c.setPosition(!0);this._setLabelState(this._label_extendLinesBottom,!0);break;case f.FibonacciLevelLineExtension.BOTH:a.setPosition(!0),b.setPosition(!0),e.setPosition(!0),c.setPosition(!0),this._setLabelState(this._label_extendLinesLeft,!0),this._setLabelState(this._label_extendLinesRight,!0),this._setLabelState(this._label_extendLinesTop,!0),this._setLabelState(this._label_extendLinesBottom,!0)}};
d.prototype._setLevelParameters=function(){var a=this._dialog.find(".scxFibonacciDrawingDialog_chk_levelsValue");a=new Switchery(a[0],d._switcherySettings);var b=this._dialog.find(".scxFibonacciDrawingDialog_chk_levelsPrice");this._chk_levelsPriceEnabled=new Switchery(b[0],d._switcherySettings);b=this._dialog.find(".scxFibonacciDrawingDialog_chk_levelsPercent");this._chk_levelsPercentEnabled=new Switchery(b[0],d._switcherySettings);this._chk_levelsPriceEnabled.setPosition(this._showLevelPrices);this._chk_levelsPercentEnabled.setPosition(this._showLevelPercents);
a.setPosition(this._showLevelValues);this._showLevelValues||this._setLevelsState(this._showLevelValues)};d.prototype._setTrendLineParameters=function(){this._input_trendLineWidth.scxNumericField(d._numericFieldConfig);var a=Array.prototype.slice.call(this._panelFigureTrendLinePanel.find(".js-switch"));0!==a.length&&(this._chk_trendLineEnabled=new Switchery(a[0],d._switcherySettings),this._chk_trendLineEnabled.setPosition(this._showTrendLine),this._setTrendLineState(this._showTrendLine))};d.prototype._setLinePanelsProperties=
function(){this._config.drawing.className===f.FibonacciTimeZonesDrawing.className?this._input_lineLevel.scxNumericField(d._numericTimeZoneFieldConfig):this._input_lineLevel.scxNumericField(d._numericDoubleFieldConfig);this._input_lineWidth.scxNumericField(d._numericFieldConfig);this._input_lineStyle.selectpicker({container:"body"});this._dialog.find(".scxSpectrum").scx().colorPicker({containerClassName:"scxSpectrumDrawingDialog",localStorageKey:"scxThemeDialog_spectrum",showAlpha:!0});for(var a=Array.prototype.slice.call(this._panelFigureLine.find(".js-switch")),
b=0;b<a.length;b++){var e=new Switchery(a[b],d._switcherySettings);"undefined"===typeof this._levels[b].visible&&(this._levels[b].visible=!0);e.setPosition(this._levels[b].visible);this._setLineState(this._levels[b].visible,b)}};d.prototype._generateLinePanel=function(){$('<tr class="scxFibonacciDrawingDialog_panel_figure_linePanel"><td><span class="scxFibonacciDrawingDialog_panel_figure_lineEnabled"><input class="scxFibonacciDrawingDialog_chk_lineEnable js-switch" type="checkbox"/></span><input class="scxFibonacciDrawingDialog_input_lineLevel form-control" type="text"><input class="scxFibonacciDrawingDialog_input_lineColor scxSpectrum" type="text"><input class="scxFibonacciDrawingDialog_input_lineWidth form-control" type="text"><select class="scxFibonacciDrawingDialog_input_lineStyle scxLineStyleSelector scxDropdown"><option value="solid">&nbsp;</option><option value="dash">&nbsp;</option><option value="dot">&nbsp;</option><option value="dash-dot">&nbsp;</option></select><a href="#" aria-hidden="true" class="close scxFibonacciDrawingDialog_panel_deleteLinePanel">&#215;</a></td></tr>').appendTo(this._panelFigure.find("table"))};
d.prototype._generateTrendLine=function(){$('<tr class="scxFibonacciDrawingDialog_panel_figure_trendLine"><td><span class="scxFibonacciDrawingDialog_panel_figure_trendEnabled"><input class="scxFibonacciDrawingDialog_chk_trendLine js-switch" type="checkbox"/></span><label class="scxFibonacciDrawingDialog_label_trendLine">Trend Line</label><input class="scxFibonacciDrawingDialog_input_lineColor scxSpectrum" type="text"><input class="scxFibonacciDrawingDialog_input_lineWidth form-control" type="text"><select class="scxFibonacciDrawingDialog_input_lineStyle scxLineStyleSelector scxDropdown"><option value="solid">&nbsp;</option><option value="dash">&nbsp;</option><option value="dot">&nbsp;</option><option value="dash-dot">&nbsp;</option></select></td></tr>').appendTo(this._panelFigureTrendLinePanel.find("table"))};
d.prototype._generateRetracementsOptions=function(){$('<tr class="scxFibonacciDrawingDialog_panel_figure_retracementsOptions"><td><div class="scxFibonacciDrawingDialog_extendHor"><span class="scxFibonacciDrawingDialog_panel_figure_lineEnabled"><input class="scxFibonacciDrawingDialog_chk_extendLinesLeft js-switch" type="checkbox"/></span><label class="scxFibonacciDrawingDialog_label_extendLinesLeft">Extend Left</label><span class="scxFibonacciDrawingDialog_panel_figure_lineEnabled"><input class="scxFibonacciDrawingDialog_chk_extendLinesRight js-switch" type="checkbox"/></span><label class="scxFibonacciDrawingDialog_label_extendLinesRight">Extend Right</label></div><div class="scxFibonacciDrawingDialog_extendVer"><span class="scxFibonacciDrawingDialog_panel_figure_lineEnabled"><input class="scxFibonacciDrawingDialog_chk_extendLinesTop js-switch" type="checkbox"/></span><label class="scxFibonacciDrawingDialog_label_extendLinesTop">Extend Top</label><span class="scxFibonacciDrawingDialog_panel_figure_lineEnabled"><input class="scxFibonacciDrawingDialog_chk_extendLinesBottom js-switch" type="checkbox"/></span><label class="scxFibonacciDrawingDialog_label_extendLinesBottom">Extend Bottom</label></div><div class="scxFibonacciDrawingDialog_reverse"><span class="scxFibonacciDrawingDialog_panel_figure_lineEnabled"><input class="scxFibonacciDrawingDialog_chk_linesReverse js-switch" type="checkbox"/></span><label class="scxFibonacciDrawingDialog_label_linesReverse">Reverse</label></div></td></tr>').appendTo(this._panelFigureRetracementsOptionsPanel.find("table"))};
d.prototype._generateLevelParameters=function(){$('<tr class="scxFibonacciDrawingDialog_panel_figure_levelParameters"><td><span class="scxFibonacciDrawingDialog_panel_figure_lineEnabled"><input class="scxFibonacciDrawingDialog_chk_levelsValue js-switch" type="checkbox"/></span><label class="scxFibonacciDrawingDialog_label_levels">Levels</label><div class="scxFibonacciDrawingDialog_levelsPrice"><span class="scxFibonacciDrawingDialog_panel_figure_lineEnabled"><input class="scxFibonacciDrawingDialog_chk_levelsPrice js-switch" type="checkbox"/></span><label class="scxFibonacciDrawingDialog_label_prices">Prices</label> </div><div class="scxFibonacciDrawingDialog_levelsPercent"><span class="scxFibonacciDrawingDialog_panel_figure_lineEnabled"><input class="scxFibonacciDrawingDialog_chk_levelsPercent js-switch" type="checkbox"/></span><label class="scxFibonacciDrawingDialog_label_percents">Percents</label></div></td></tr>').appendTo(this._panelFigureLevelParametersPanel.find("table"))};
d.prototype._generateLabelsParameters=function(){$('<tr class="scxFibonacciDrawingDialog_panel_figure_labels"><td><label class="scxFibonacciDrawingDialog_label">Labels</label><div class="scxFibonacciDrawingDialog_labelsPosition"><select class="scxFibonacciDrawingDialog_input_labelsPosition scxDropdown"><option value="left">Left</option><option value="center">Center</option><option value="right">Right</option></select></div><select class="scxFibonacciDrawingDialog_input_labelsTextPosition scxDropdown"><option value="top">Top</option><option value="middle">Middle</option><option value="bottom">Bottom</option></select></td></tr>').appendTo(this._panelFigureLabelsParametersPanel.find("table"))};
d.prototype._generateBackgroundParameters=function(){$('<tr class="scxFibonacciDrawingDialog_panel_figure_background"><td><span class="scxFibonacciDrawingDialog_panel_figure_lineEnabled"><input class="scxFibonacciDrawingDialog_chk_background js-switch" type="checkbox"/></span><label class="scxFibonacciDrawingDialog_label_background">Background</label></td></tr>').appendTo(this._panelFigureBackgroundPanel.find("table"))};d.prototype._defineDomObjects=function(){this._panelFigureTrendLine=this._dialog.find(".scxFibonacciDrawingDialog_panel_figure_trendLine");
this._panelFigureLevelParameters=this._dialog.find(".scxFibonacciDrawingDialog_panel_figure_levelParameters");this._panelFigureRetracementsOptions=this._dialog.find(".scxFibonacciDrawingDialog_panel_figure_retracementsOptions");this._panelFigureLabelsParameters=this._dialog.find(".scxFibonacciDrawingDialog_panel_figure_labels");this._panelFigureBackground=this._dialog.find(".scxFibonacciDrawingDialog_panel_figure_background");this._input_trendLineColor=this._panelFigureTrendLinePanel.find(".scxFibonacciDrawingDialog_input_lineColor");
this._input_trendLineWidth=this._panelFigureTrendLinePanel.find(".scxFibonacciDrawingDialog_input_lineWidth");this._input_trendLineStyle=this._panelFigureTrendLinePanel.find(".scxFibonacciDrawingDialog_input_lineStyle");this._input_labelsPosition=this._panelFigureLabelsParametersPanel.find(".scxFibonacciDrawingDialog_input_labelsPosition");this._input_labelsTextPosition=this._panelFigureLabelsParametersPanel.find(".scxFibonacciDrawingDialog_input_labelsTextPosition");this._chk_trendLineEnabledHTMLObj=
this._dialog.find(".scxFibonacciDrawingDialog_chk_trendLine");this._chk_levelsValueEnabledHTMLObj=this._dialog.find(".scxFibonacciDrawingDialog_chk_levelsValue");this._chk_levelsPriceEnabledHTMLObj=this._dialog.find(".scxFibonacciDrawingDialog_chk_levelsPrice");this._chk_levelsPercentEnabledHTMLObj=this._dialog.find(".scxFibonacciDrawingDialog_chk_levelsPercent");this._chk_linesReverseEnabledHTMLObj=this._dialog.find(".scxFibonacciDrawingDialog_chk_linesReverse");this._chk_extendLinesLeftEnabledHTMLObj=
this._dialog.find(".scxFibonacciDrawingDialog_chk_extendLinesLeft");this._chk_extendLinesRightEnabledHTMLObj=this._dialog.find(".scxFibonacciDrawingDialog_chk_extendLinesRight");this._chk_extendLinesTopEnabledHTMLObj=this._dialog.find(".scxFibonacciDrawingDialog_chk_extendLinesTop");this._chk_extendLinesBottomEnabledHTMLObj=this._dialog.find(".scxFibonacciDrawingDialog_chk_extendLinesBottom");this._chk_backgroundEnabledHTMLObj=this._dialog.find(".scxFibonacciDrawingDialog_chk_background");this._levelsPriceEnabled=
this._dialog.find(".scxFibonacciDrawingDialog_levelsPrice");this._levelsPercentEnabled=this._dialog.find(".scxFibonacciDrawingDialog_levelsPercent");this._levelsExtendHorEnabled=this._dialog.find(".scxFibonacciDrawingDialog_extendHor");this._levelsExtendVerEnabled=this._dialog.find(".scxFibonacciDrawingDialog_extendVer");this._labelsHorEnabled=this._dialog.find(".scxFibonacciDrawingDialog_labelsPosition");this._levelsReverseEnabled=this._dialog.find(".scxFibonacciDrawingDialog_reverse");this._label_trendLine=
this._dialog.find(".scxFibonacciDrawingDialog_label_trendLine");this._label_extendLinesLeft=this._dialog.find(".scxFibonacciDrawingDialog_label_extendLinesLeft");this._label_extendLinesRight=this._dialog.find(".scxFibonacciDrawingDialog_label_extendLinesRight");this._label_extendLinesTop=this._dialog.find(".scxFibonacciDrawingDialog_label_extendLinesTop");this._label_extendLinesBottom=this._dialog.find(".scxFibonacciDrawingDialog_label_extendLinesBottom");this._label_reverse=this._dialog.find(".scxFibonacciDrawingDialog_label_linesReverse");
this._label_levels=this._dialog.find(".scxFibonacciDrawingDialog_label_levels");this._label_levelPercents=this._dialog.find(".scxFibonacciDrawingDialog_label_percents");this._label_levelPrices=this._dialog.find(".scxFibonacciDrawingDialog_label_prices");this._label_background=this._dialog.find(".scxFibonacciDrawingDialog_label_background")};d.prototype._defineDomLevelObjects=function(){var a=this;this._panelFigureLine=this._dialog.find(".scxFibonacciDrawingDialog_panel_figure_linePanel");this._input_lineLevel=
this._dialog.find(".scxFibonacciDrawingDialog_input_lineLevel");this._input_lineColor=this._dialog.find(".scxFibonacciDrawingDialog_input_lineColor");this._input_lineWidth=this._dialog.find(".scxFibonacciDrawingDialog_input_lineWidth");this._input_lineStyle=this._dialog.find(".scxFibonacciDrawingDialog_input_lineStyle");this._chk_lineEnabledHTMLObj=this._dialog.find(".scxFibonacciDrawingDialog_chk_lineEnable");this._dialog.find(".scxFibonacciDrawingDialog_panel_deleteLinePanel").on(eventClickByPlatform,
function(b){a._deleteLinePanel(b)})};d._numericFieldConfig={showArrows:!1,maxValue:10,minValue:1,value:1};d._numericDoubleFieldConfig={showArrows:!1,priceDecimals:2,maxValue:500,minValue:0,value:1};d._numericTimeZoneFieldConfig={showArrows:!1,maxValue:1E4,minValue:0,value:1};d._switcherySettings={color:"#64bd63",secondaryColor:"#ddd",className:"scx_switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s"};return d}(k.Dialog);k.FibonacciDrawingSettingsDialog=h})(f.UI||(f.UI={}))})(StockChartX||(StockChartX=
{}));
(function(f){(function(k){var h=jQuery,g=function(){function d(){this._componentsContainer=h('<div class="scxComponentsContainer"></div>').appendTo(h("body"));this._elements=[];h(window).on("scxFullscreenChanged",this,this._onBrowserFullScreenChange)}Object.defineProperty(d.prototype,"componentsContainer",{get:function(){return this._componentsContainer},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0});Object.defineProperty(d,
"instance",{get:function(){null==d._instance&&(d._instance=new d);return d._instance},enumerable:!0,configurable:!0});d.prototype.register=function(a,b,e){void 0===e&&(e=!0);var c=null;b&&(c=e?h(b).appendTo(this.componentsContainer):h(b),this._elements.push({name:a,element:c}));return c};d.prototype.resetSelf=function(a){a&&(a.windowMode===f.WindowMode.FULL_SCREEN?this.reset(a.container):this.reset())};d.prototype.reset=function(a){a=a||h("body");h.contains(a.get(0),this._componentsContainer.get(0))&&
this._componentsContainer.detach();this._componentsContainer.appendTo(a)};d.prototype._onBrowserFullScreenChange=function(a,b){b&&(a=a.data,b.windowMode===f.WindowMode.FULL_SCREEN?a.reset(b.container):a.reset())};d._instance=null;return d}();k.HtmlContainer=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){var h=jQuery,g=function(){function a(b){this._html="";this._subscribers=[];"undefined"!==typeof b&&this._subscribers.push(b)}a.prototype._isHtmlLoaded=function(){return 0<this._html.length};a.prototype._getHtml=function(){return this._html};a.prototype.pushHtml=function(b){this._html=b;for(b=this._subscribers.length-1;0<=b;b--)this._subscribers[b](this._getHtml()),this._subscribers.splice(b,1)};a.prototype.subscribe=function(b){this._isHtmlLoaded()?b(this._getHtml()):this._subscribers.push(b)};
return a}(),d=function(){function a(){}a.getView=function(b,e){var c=a._getDataItem(b);null==c?(a._dataItems.add(b,new g(e)),a._receiveFileContent(b)):c.subscribe(e)};a._getDataItem=function(b){return a._dataItems.get(b)};a._receiveFileContent=function(b){h.get(f.ViewsPath+b,function(e){a._onFileContentReceived(b,e)}).fail(function(){alert("Load "+b+" failed")})};a._onFileContentReceived=function(b,e){b=a._getDataItem(b);null!=b&&b.pushHtml(e)};a._dataItems=new f.Dictionary;return a}();k.HtmlLoader=
d})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h=function(g){function d(a){a=g.call(this,a)||this;a._isApplyClicked=!1;a._lineEnabled=[];a._initFields();a._init();return a}__extends(d,g);d.prototype.show=function(a){this._config=a;this._isApplyClicked=!1;this._setValues();g.prototype.show.call(this,a)};d.prototype.hide=function(){this._config=null;g.prototype.hide.call(this)};d.prototype._init=function(){var a=this;$("body").bind("scxSwitcherChanged",function(e,c){e=$(c.target);c=c.checked;e.is(a._chk_tenkanLineEnabledHTMLObj)?
a._setLineState(c,0):e.is(a._chk_kijunLineEnabledHTMLObj)?a._setLineState(c,1):e.is(a._chk_chikouLineEnabledHTMLObj)?a._setLineState(c,2):e.is(a._chk_senkouALineEnabledHTMLObj)?a._setLineState(c,3):e.is(a._chk_senkouBLineEnabledHTMLObj)?a._setLineState(c,4):e.is(a._chk_kumoEnabledHTMLObj)&&a._setLineState(c,5)});this._input_conversion.scxNumericField(d._numericFieldConfig);this._input_base.scxNumericField(d._numericFieldConfig);this._input_lagging.scxNumericField(d._numericFieldConfig);this._input_lineWidth.scxNumericField(d._numericFieldWidthConfig);
this._input_lineStyle.selectpicker({container:"body"});this._dialog.find(".scxSpectrum").scx().colorPicker({containerClassName:"scxSpectrumDrawingDialog",localStorageKey:"scxThemeDialog_spectrum",showAlpha:!0});var b=new Switchery(document.querySelector(".scxIchimokuIndicatorDialog_chk_tenkanLine"),d._switcherySettings);this._lineEnabled.push(b);b=new Switchery(document.querySelector(".scxIchimokuIndicatorDialog_chk_kijunLine"),d._switcherySettings);this._lineEnabled.push(b);b=new Switchery(document.querySelector(".scxIchimokuIndicatorDialog_chk_chikouLine"),
d._switcherySettings);this._lineEnabled.push(b);b=new Switchery(document.querySelector(".scxIchimokuIndicatorDialog_chk_senkouALine"),d._switcherySettings);this._lineEnabled.push(b);b=new Switchery(document.querySelector(".scxIchimokuIndicatorDialog_chk_senkouBLine"),d._switcherySettings);this._lineEnabled.push(b);b=new Switchery(document.querySelector(".scxIchimokuIndicatorDialog_chk_kumo"),d._switcherySettings);this._lineEnabled.push(b);this._dialog.find("#scxIchimokuIndicatorDialog_btn_save").on(eventClickByPlatform,
function(){a._save()});this._dialog.find("#scxIchimokuIndicatorDialog_btn_apply").on(eventClickByPlatform,function(){a._apply()})};d.prototype._setLineState=function(a,b){var e=this._panelFigureLinesStylePanel.find(".scxIchimokuIndicatorDialog_label").eq(b),c=this._panelFigureLinesStylePanel.find(".scxIchimokuIndicatorDialog_input_lineColor").eq(b),l=this._panelFigureLinesStylePanel.find(".scxIchimokuIndicatorDialog_input_lineWidth").eq(b),m=this._panelFigureLinesStylePanel.find(".scxIchimokuIndicatorDialog_input_lineStyle:even").eq(b);
a?(e.removeClass("disabled"),c.spectrum("enable"),m.removeAttr("disabled"),m.selectpicker("refresh"),l.scxNumericField("enable"),this._config.ichimokuIndicator.lines[b].visible=!0):(e.addClass("disabled"),c.spectrum("disable"),m.attr("disabled","disabled"),m.selectpicker("refresh"),l.scxNumericField("disable"),this._config.ichimokuIndicator.lines[b].visible=!1)};d.prototype._setValues=function(){for(var a=this._config.ichimokuIndicator.lines.length,b=0;b<a;b++){var e=this._dialog.find(".scxIchimokuIndicatorDialog_input_lineColor").eq(b),
c=this._dialog.find(".scxIchimokuIndicatorDialog_input_lineWidth").eq(b),l=this._dialog.find(".scxIchimokuIndicatorDialog_input_lineStyle:even").eq(b),m=this._config.ichimokuIndicator.lines[b].theme;e.spectrum("set",m.strokeColor);c.scxNumericField("setValue",m.width);l.selectpicker("val",m.lineStyle||f.LineStyle.SOLID).selectpicker("refresh");this._config.ichimokuIndicator.lines[b].visible!==this._lineEnabled[b].isChecked()&&this._lineEnabled[b].setPosition(!0);this._setLineState(this._config.ichimokuIndicator.lines[b].visible,
b)}this._dialog.find(".scxIchimokuIndicatorDialog_input_lineColor").eq(a-1).spectrum("set",this._config.ichimokuIndicator.lines[a-1].theme.fillColor);this._input_conversion.scxNumericField("setValue",this._config.ichimokuIndicator.conversionLinePeriods);this._input_base.scxNumericField("setValue",this._config.ichimokuIndicator.baseLinePeriods);this._input_lagging.scxNumericField("setValue",this._config.ichimokuIndicator.loggingSpan2Periods)};d.prototype._getValues=function(){for(var a=this._config.ichimokuIndicator.lines.length,
b=0;b<a-1;b++){var e=this._dialog.find(".scxIchimokuIndicatorDialog_input_lineColor").eq(b),c=this._dialog.find(".scxIchimokuIndicatorDialog_input_lineWidth").eq(b),l=this._dialog.find(".scxIchimokuIndicatorDialog_input_lineStyle:even").eq(b),m=this._config.ichimokuIndicator.lines[b].theme;m.strokeColor=e.spectrum("get").toRgbString();m.width=c.scxNumericField("getValue");m.lineStyle=l.val()}b=this._dialog.find(".scxIchimokuIndicatorDialog_input_lineColor").eq(a-1).spectrum("get").toRgb();this._config.ichimokuIndicator.lines[a-
1].theme.fillColor=tinycolor(b).toRgbString();this._config.ichimokuIndicator.conversionLinePeriods=this._input_conversion.scxNumericField("getValue");this._config.ichimokuIndicator.baseLinePeriods=this._input_base.scxNumericField("getValue");this._config.ichimokuIndicator.loggingSpan2Periods=this._input_lagging.scxNumericField("getValue")};d.prototype._save=function(){this._apply();this.hide()};d.prototype._apply=function(){this._getValues();this._config.ichimokuIndicator.update();this._isApplyClicked=
!0};d.prototype._initFields=function(){this._panelFigureLinesStylePanel=this._dialog.find(".scxIchimokuIndicatorDialog_panel_figure_linesStylePanel");this._input_conversion=this._dialog.find(".scxIchimokuIndicatorDialog_input_conversionLinePeriods");this._input_base=this._dialog.find(".scxIchimokuIndicatorDialog_input_baseLinePeriods");this._input_lagging=this._dialog.find(".scxIchimokuIndicatorDialog_input_laggingSpanPeriods");this._input_lineColor=this._dialog.find(".scxIchimokuIndicatorDialog_input_lineColor");
this._input_lineWidth=this._dialog.find(".scxIchimokuIndicatorDialog_input_lineWidth");this._input_lineStyle=this._dialog.find(".scxIchimokuIndicatorDialog_input_lineStyle");this._chk_tenkanLineEnabledHTMLObj=this._dialog.find(".scxIchimokuIndicatorDialog_chk_tenkanLine");this._chk_kijunLineEnabledHTMLObj=this._dialog.find(".scxIchimokuIndicatorDialog_chk_kijunLine");this._chk_chikouLineEnabledHTMLObj=this._dialog.find(".scxIchimokuIndicatorDialog_chk_chikouLine");this._chk_senkouALineEnabledHTMLObj=
this._dialog.find(".scxIchimokuIndicatorDialog_chk_senkouALine");this._chk_senkouBLineEnabledHTMLObj=this._dialog.find(".scxIchimokuIndicatorDialog_chk_senkouBLine");this._chk_kumoEnabledHTMLObj=this._dialog.find(".scxIchimokuIndicatorDialog_chk_kumo")};d._numericFieldConfig={showArrows:!0,maxValue:2E3,minValue:1,value:1};d._numericFieldWidthConfig={showArrows:!1,maxValue:100,minValue:1,value:1};d._switcherySettings={color:"#64bd63",secondaryColor:"#ddd",className:"scx_switchery",disabled:!1,disabledOpacity:.5,
speed:"0.4s"};return d}(k.Dialog);k.IchimokuIndicatorSettingsDialog=h})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h=function(g){function d(a){a=g.call(this,a)||this;a._isApplyClicked=!1;a._initFields();a._init();return a}__extends(d,g);d.prototype.show=function(a){this._config=a;this._isApplyClicked=!1;this._setValues();g.prototype.show.call(this,a)};d.prototype.hide=function(){this._config=null;g.prototype.hide.call(this)};d.prototype._init=function(){var a=this;$("body").bind("scxSwitcherChanged",function(b,e){b=$(e.target);e=e.checked;b.is(a._chk_topLineEnabledHTMLObj)&&a._setLineState(e,
0);b.is(a._chk_bottomLineEnabledHTMLObj)&&a._setLineState(e,1)});this._input_darvasBox.scxNumericField(d._numericFieldConfig);this._input_lineWidth.scxNumericField(d._numericFieldWidthConfig);this._input_lineStyle.selectpicker({container:"body"});this._dialog.find(".scxSpectrum").scx().colorPicker({containerClassName:"scxSpectrumDrawingDialog",localStorageKey:"scxThemeDialog_spectrum",showAlpha:!0});this._dialog.find("#scxDarvasBoxDialog_btn_save").on(eventClickByPlatform,function(){a._save()});this._dialog.find("#scxDarvasBoxDialog_btn_apply").on(eventClickByPlatform,
function(){a._apply()})};d.prototype._setLineState=function(a,b){var e=this._panelFigureLinesStylePanel.find(".scxDarvasBoxDialog_label").eq(b),c=this._panelFigureLinesStylePanel.find(".scxDarvasBoxDialog_input_lineColor").eq(b),l=this._panelFigureLinesStylePanel.find(".scxDarvasBoxDialog_input_lineWidth").eq(b),m=this._panelFigureLinesStylePanel.find(".scxDarvasBoxDialog_input_lineStyle:even").eq(b);a?(e.removeClass("disabled"),c.spectrum("enable"),m.removeAttr("disabled"),m.selectpicker("refresh"),
l.scxNumericField("enable"),this._config.dBox.lines[b].visible=!0):(e.addClass("disabled"),c.spectrum("disable"),m.attr("disabled","disabled"),m.selectpicker("refresh"),l.scxNumericField("disable"),this._config.dBox.lines[b].visible=!1)};d.prototype._setValues=function(){for(var a=this._config.dBox.lines.length,b=0;b<a;b++){var e=this._dialog.find(".scxDarvasBoxDialog_input_lineColor").eq(b),c=this._dialog.find(".scxDarvasBoxDialog_input_lineWidth").eq(b),l=this._dialog.find(".scxDarvasBoxDialog_input_lineStyle:even").eq(b),
m=this._config.dBox.lines[b].theme;e.spectrum("set",m.strokeColor);c.scxNumericField("setValue",m.width);l.selectpicker("val",m.lineStyle||f.LineStyle.SOLID).selectpicker("refresh");this._setLineState(this._config.dBox.lines[b].visible,b)}this._dialog.find(".scxDarvasBoxDialog_input_lineColor").eq(a).spectrum("set",this._config.dBox.lines[a-1].theme.fillColor);this._input_darvasBox.scxNumericField("setValue",this._config.dBox.darvasBoxLinePeriods)};d.prototype._getValues=function(){for(var a=this._config.dBox.lines.length,
b=0;b<a;b++){var e=this._dialog.find(".scxDarvasBoxDialog_input_lineColor").eq(b),c=this._dialog.find(".scxDarvasBoxDialog_input_lineWidth").eq(b),l=this._dialog.find(".scxDarvasBoxDialog_input_lineStyle:even").eq(b),m=this._config.dBox.lines[b].theme;m.strokeColor=e.spectrum("get").toRgbString();m.width=c.scxNumericField("getValue");m.lineStyle=l.val()}b=this._dialog.find(".scxDarvasBoxDialog_input_lineColor").eq(a-1).spectrum("get").toRgb();this._config.dBox.lines[a-1].theme.fillColor=tinycolor(b).toRgbString();
this._config.dBox.darvasBoxLinePeriods=this._input_darvasBox.scxNumericField("getValue")};d.prototype._save=function(){this._apply();this.hide()};d.prototype._apply=function(){this._getValues();this._config.dBox.update();this._isApplyClicked=!0};d.prototype._initFields=function(){this._panelFigureLinesStylePanel=this._dialog.find(".scxDarvasBoxDialog_panel_figure_linesStylePanel");this._input_darvasBox=this._dialog.find(".scxDarvasBoxDialog_input_darvasBoxLinePeriods");this._input_lineColor=this._dialog.find(".scxDarvasBoxDialog_input_lineColor");
this._input_lineWidth=this._dialog.find(".scxDarvasBoxDialog_input_lineWidth");this._input_lineStyle=this._dialog.find(".scxDarvasBoxDialog_input_lineStyle");this._chk_topLineEnabledHTMLObj=this._dialog.find(".scxDarvasBoxDialog_chk_topLine");this._chk_bottomLineEnabledHTMLObj=this._dialog.find(".scxDarvasBoxDialog_chk_bottomLine")};d._numericFieldConfig={showArrows:!0,maxValue:2E3,minValue:1,value:1};d._numericFieldWidthConfig={showArrows:!1,maxValue:100,minValue:1,value:1};return d}(k.Dialog);k.DarvasBoxSettingsDialog=
h})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h=function(g){function d(a){a=g.call(this,a)||this;a._waitingBarConfig={text:"",dotsCount:5};a._title=a._dialog.find(".scxIndicatorInfoDialog__title");a._helpContainer=a._dialog.find(".scxIndicatorInfoDialog__help-content");a._waitingBar=a._dialogContent.body.scx().waitingBar();return a}__extends(d,g);d.prototype.show=function(a){var b=this;this._config=a;this._clear();this._showWaitingBar();g.prototype.show.call(this,a);this._setTitle("...");if("object"===typeof a.indicator&&
a.indicator instanceof f.TAIndicator){var e=a.indicator.taIndicator,c=e===f.VolumeIndicator?"Volume":TASdk.indicatorToString(e);this._setTitle(c);k.HtmlLoader.getView("IndicatorsHelp.html",function(l){b._config.chart.localize(b._dialog);l=$(l).find("#scxIndicatorTooltip_id"+e).clone().show();l.find("> h1").remove();l=l.length?l:d._generateHelpDoesntExistContent();b._insertContent(l)})}else c=a.indicator.getName()||"Indicator Help",a=d._getIndicatorOwnAbout(a.indicator)||d._generateHelpDoesntExistContent(),
this._setTitle(c),this._insertContent(a)};d.prototype._setTitle=function(a){this._title.text(a)};d.prototype._insertContent=function(a){this._hideWaitingBar();this._helpContainer.append(a);this.resize()};d.prototype._clear=function(){this._helpContainer.empty()};d._getIndicatorOwnAbout=function(a){return(a=a.getInfoAbout())?$(a):null};d._generateHelpDoesntExistContent=function(){return $('<p class="scxIndicatorInfoDialog__noInfo">Sorry. There is no help for this indicator yet</p>')};d.prototype._showWaitingBar=
function(){this._waitingBar.show(this._waitingBarConfig)};d.prototype._hideWaitingBar=function(){this._waitingBar.hide()};return d}(k.Dialog);k.IndicatorInfoDialog=h})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h={ABOUT:"about",SETTINGS:"settings",SHOW_PARAMS:"showParams",SHOW_MARKERS:"showMarkers",SHOW_VALUES:"showTitleValues",VISIBLE:"visible",DELETE:"delete",SIMULATE_INDICATOR:"simulateIndicator"};Object.freeze(h);var g=function(d){function a(b,e){var c=d.call(this,e,b)||this;c._menuItems={};k.HtmlLoader.getView("IndicatorContextMenu.html",function(l){a._container||(a._container=k.HtmlContainer.instance.register("IndicatorContextMenu",l));c._initMenu(e)});return c}__extends(a,
d);a.prototype._initMenu=function(b){var e=this;this._defineMenuItems();b.menuContainer=a._container;b.onShow=function(){var c=b.indicator,l=e._menuItems;c.allowSettingsDialog?l.settings.removeClass("disabled"):l.settings.addClass("disabled");c.showParamsInTitle?l.showParams.addClass("scxMenuItemChecked"):l.showParams.removeClass("scxMenuItemChecked");c.showValueMarkers?l.showValueMarkers.addClass("scxMenuItemChecked"):l.showValueMarkers.removeClass("scxMenuItemChecked");c.showValuesInTitle?l.showTitleValues.addClass("scxMenuItemChecked"):
l.showTitleValues.removeClass("scxMenuItemChecked");c.visible?l.visible.addClass("scxMenuItemChecked"):l.visible.removeClass("scxMenuItemChecked");1==c.enableSimulate?(l.simulate.removeClass("disabled"),c.simulateIndicator?l.simulate.addClass("scxMenuItemChecked"):l.simulate.removeClass("scxMenuItemChecked")):l.simulate.addClass("disabled")}};a.prototype._defineMenuItems=function(){this._menuItems.settings=a._container.find("[data-id=settings]");this._menuItems.showParams=a._container.find("[data-id=showParams]");
this._menuItems.showValueMarkers=a._container.find("[data-id=showMarkers]");this._menuItems.showTitleValues=a._container.find("[data-id=showTitleValues]");this._menuItems.visible=a._container.find("[data-id=visible]");this._menuItems.simulate=a._container.find("[data-id=simulateIndicator]")};a._container=null;a.MenuItem=h;return a}(k.ContextMenu);k.IndicatorContextMenu=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h={value:1},g={canBeNegative:!0,priceDecimals:2,value:1},d={canBeNegative:!0,priceDecimals:3,value:1},a=function(b){function e(c){c=b.call(this,c)||this;c._indicator=TASdk.Unknown;c._initFields();c._init();return c}__extends(e,b);e.prototype.show=function(c){this._config=c;this._indicator=c.indicator;var l=this._indicator.getName()?this._indicator.getName():Array.isArray(this._indicator.fieldNames)&&this._indicator.fieldNames.length&&"Volume"===this._indicator.fieldNames[0]?
"Volume":"Indicator";this._dialog.find("#scxIndicatorDialog_title").text(l+" Settings");this._config.chart.localize(this._dialog);this._setViewAndValues();b.prototype.show.call(this,c)};e.prototype.hide=function(){this._dialog.find(".scxSpectrum").spectrum("hide");this._config=null;b.prototype.hide.call(this)};e.prototype._init=function(){var c=this,l={containerClassName:"scxSpectrumIndicatorPropertiesDialog",localStorageKey:"scxIndicatorDialog_spectrum",showAlpha:!0};this._input_line1_color=this._dialog.find("#scxIndicatorDialog_input_line1_color").scx().colorPicker(l);
this._input_line2_color=this._dialog.find("#scxIndicatorDialog_input_line2_color").scx().colorPicker(l);this._input_line3_color=this._dialog.find("#scxIndicatorDialog_input_line3_color").scx().colorPicker(l);this._input_histogram_line1_color=this._dialog.find("#scxIndicatorDialog_input_histogram_line1_color").scx().colorPicker(l);this._input_histogram_line2_color=this._dialog.find("#scxIndicatorDialog_input_histogram_line2_color").scx().colorPicker(l);this._dialog.find(".scxComboBox").selectpicker({container:"body"});
this._dialog.find("#scxIndicatorDialog_btn_save").off(eventClickByPlatform).click(function(){0===c._dialog.find(".scxInvalidValue").length&&c._save()});this._dialog.find("#scxIndicatorDialog_btn_apply").off(eventClickByPlatform).click(function(){0===c._dialog.find(".scxInvalidValue").length&&c._apply()})};e._getMAType=function(c){c=parseInt(c,10);switch(c){case TASdk.Const.simpleMovingAverage:case TASdk.Const.exponentialMovingAverage:case TASdk.Const.timeSeriesMovingAverage:case TASdk.Const.triangularMovingAverage:case TASdk.Const.variableMovingAverage:case TASdk.Const.VIDYA:case TASdk.Const.wellesWilderSmoothing:case TASdk.Const.weightedMovingAverage:return c;
default:return TASdk.Const.simpleMovingAverage}};e._getPointsOrPercent=function(c){c=parseInt(c,10);return c===f.IndicatorParamValue.POINT?c:f.IndicatorParamValue.PERCENT};e._getDayOrWeek=function(c){c=parseInt(c);return c===f.IndicatorParamValue.DAY?c:f.IndicatorParamValue.WEEK};e.prototype._getSource=function(c){return this._indicator.chart.findDataSeries(c)?c:f.DataSeriesSuffix.CLOSE};e._getLineStyle=function(c){switch(c){case f.LineStyle.SOLID:case f.LineStyle.DASH:case f.LineStyle.DOT:case f.LineStyle.DASH_DOT:return c;
default:return f.LineStyle.SOLID}};e.prototype.numericValue=function(c){return c.scxNumericField("getValue")};e.prototype.setNumericValue=function(c,l){c.scxNumericField("setValue",l)};e.prototype.updateNumericFromIndicator=function(c,l){this.setNumericValue(c,this._indicator.getParameterValue(l))};e.prototype.updateIndicatorFromNumeric=function(c,l){this._indicator.setParameterValue(c,this.numericValue(l))};e.prototype.updateIndicatorLineStyle=function(c,l){this._indicator.setParameterValue(c,e._getLineStyle(l.val()))};
e.prototype._hideFields=function(){this._dialogContent.body.find("[id^='scxIndicatorDialog_container_']").hide();this._label_line1.text("Line")};e.prototype._restoreFields=function(){this._input_line1_width.show();this._input_line1_style.selectpicker("show");this._input_line3_width.show();this._input_line3_style.selectpicker("show")};e.prototype._resetErrors=function(){this._dialog.find(".scxInvalidValue").each(function(c,l){$(l).removeClass("scxInvalidValue")})};e.prototype._setFieldValueBounds=
function(){var c=parseInt(((this._indicator?this._indicator.chart.recordCount:0)/2).toString(),10);this._input_periods.scxNumericField("setBounds",1,1E4);this._input_r2scale.scxNumericField("setBounds",.01,1);this._input_standardDeviations.scxNumericField("setBounds",0,5);this._input_shift.scxNumericField("setBounds",0,20);this._input_minTick.scxNumericField("setBounds",0,1);this._input_limitMove.scxNumericField("setBounds",0,1E3);this._input_kPeriods.scxNumericField("setBounds",2,c);this._input_kSmoothing.scxNumericField("setBounds",
2,c);this._input_kDoubleSmoothing.scxNumericField("setBounds",2,c);this._input_dPeriods.scxNumericField("setBounds",2,c);this._input_barHistory.scxNumericField("setBounds",2,c);this._input_cycle1.scxNumericField("setBounds",2,1E4);this._input_cycle2.scxNumericField("setBounds",2,1E4);this._input_cycle3.scxNumericField("setBounds",2,1E4);this._input_shortTerm.scxNumericField("setBounds",2,c);this._input_longTerm.scxNumericField("setBounds",2,c);this._input_roc.scxNumericField("setBounds",0,100);this._input_signalPeriods.scxNumericField("setBounds",
2,c);this._input_shortCycle.scxNumericField("setBounds",2,1E4);this._input_longCycle.scxNumericField("setBounds",2,1E4);this._input_minAF.scxNumericField("setBounds",0,1);this._input_maxAF.scxNumericField("setBounds",0,1);this._input_minTREND.scxNumericField("setBounds",0,1);this._input_maxTREND.scxNumericField("setBounds",0,1);this._input_levels.scxNumericField("setBounds",0,100);this._input_line1_width.scxNumericField("setBounds",1,20);this._input_line2_width.scxNumericField("setBounds",1,20);this._input_line3_width.scxNumericField("setBounds",
1,20);this._indicator.taIndicator===TASdk.HighLowBands&&this._input_periods.scxNumericField("setBounds",6,1E4);this._input_area.scxNumericField("setBounds",2,100);this._input_stepPrice.scxNumericField("setBounds",.01,1E4);this._input_shiftBase.scxNumericField("setBounds",0,20)};e.prototype._setFieldsRestrictions=function(){var c=this;this._input_shortTerm.scxNumericField("onChange",null);this._input_longTerm.scxNumericField("onChange",null);this._input_cycle1.scxNumericField("onChange",null);this._input_cycle2.scxNumericField("onChange",
null);this._input_shortCycle.scxNumericField("onChange",null);this._input_longCycle.scxNumericField("onChange",null);this._input_minAF.scxNumericField("onChange",null);this._input_maxAF.scxNumericField("onChange",null);this._input_minTREND.scxNumericField("onChange",null);this._input_maxTREND.scxNumericField("onChange",null);switch(this._indicator.taIndicator){case TASdk.VolumeOscillator:this._input_shortTerm.scxNumericField("onChange",function(l){l>=c.numericValue(c._input_longTerm)?(c._input_shortTerm.addClass("scxInvalidValue"),
c._input_longTerm.addClass("scxInvalidValue")):(c._input_shortTerm.removeClass("scxInvalidValue"),c._input_longTerm.removeClass("scxInvalidValue"))});this._input_longTerm.scxNumericField("onChange",function(l){l<=c.numericValue(c._input_shortTerm)?(c._input_shortTerm.addClass("scxInvalidValue"),c._input_longTerm.addClass("scxInvalidValue")):(c._input_shortTerm.removeClass("scxInvalidValue"),c._input_longTerm.removeClass("scxInvalidValue"))});break;case TASdk.PriceOscillator:this._input_cycle1.scxNumericField("onChange",
function(l){l>=c.numericValue(c._input_cycle2)?(c._input_cycle1.addClass("scxInvalidValue"),c._input_cycle2.addClass("scxInvalidValue")):(c._input_cycle1.removeClass("scxInvalidValue"),c._input_cycle2.removeClass("scxInvalidValue"))});this._input_cycle2.scxNumericField("onChange",function(l){l<=c.numericValue(c._input_cycle1)?(c._input_cycle1.addClass("scxInvalidValue"),c._input_cycle2.addClass("scxInvalidValue")):(c._input_cycle1.removeClass("scxInvalidValue"),c._input_cycle2.removeClass("scxInvalidValue"))});
break;case TASdk.ParabolicSAR:this._input_minAF.scxNumericField("onChange",function(l){l>c.numericValue(c._input_maxAF)?(c._input_minAF.addClass("scxInvalidValue"),c._input_maxAF.addClass("scxInvalidValue")):(c._input_minAF.removeClass("scxInvalidValue"),c._input_maxAF.removeClass("scxInvalidValue"))});this._input_maxAF.scxNumericField("onChange",function(l){l<c.numericValue(c._input_minAF)?(c._input_maxAF.addClass("scxInvalidValue"),c._input_minAF.addClass("scxInvalidValue")):(c._input_maxAF.removeClass("scxInvalidValue"),
c._input_minAF.removeClass("scxInvalidValue"))});break;case TASdk.MACD:case TASdk.MACDHistogram:case TASdk.SchaffTrendCycle:this._input_shortCycle.scxNumericField("onChange",function(l){l>=c.numericValue(c._input_longCycle)?(c._input_shortCycle.addClass("scxInvalidValue"),c._input_longCycle.addClass("scxInvalidValue")):(c._input_shortCycle.removeClass("scxInvalidValue"),c._input_longCycle.removeClass("scxInvalidValue"))});this._input_longCycle.scxNumericField("onChange",function(l){l<=c.numericValue(c._input_shortCycle)?
(c._input_shortCycle.addClass("scxInvalidValue"),c._input_longCycle.addClass("scxInvalidValue")):(c._input_shortCycle.removeClass("scxInvalidValue"),c._input_longCycle.removeClass("scxInvalidValue"))});break;case TASdk.TrendSignal:this._input_minTREND.scxNumericField("onChange",function(l){l>c.numericValue(c._input_maxTREND)?(c._input_minTREND.addClass("scxInvalidValue"),c._input_maxTREND.addClass("scxInvalidValue")):(c._input_minTREND.removeClass("scxInvalidValue"),c._input_maxTREND.removeClass("scxInvalidValue"))}),
this._input_maxTREND.scxNumericField("onChange",function(l){l<c.numericValue(c._input_minTREND)?(c._input_maxTREND.addClass("scxInvalidValue"),c._input_minTREND.addClass("scxInvalidValue")):(c._input_maxTREND.removeClass("scxInvalidValue"),c._input_minTREND.removeClass("scxInvalidValue"))})}};e.prototype._setViewAndValues=function(){var c=f.IndicatorParam,l=this._indicator;this._restoreFields();this._hideFields();this._resetErrors();this._setFieldValueBounds();this._setFieldsRestrictions();this._input_line1_color.setColor(l._plotItems[0].plot.actualTheme.strokeColor||
l._plotItems[0].plot.actualTheme.downCandle&&l._plotItems[0].plot.actualTheme.downCandle.fill.fillColor||l.chart.theme.plot.line.simple.strokeColor);this.updateNumericFromIndicator(this._input_line1_width,c.LINE_WIDTH);this._input_line1_style.val(l.getParameterValue(c.LINE_STYLE));this._dialog.find("#scxIndicatorDialog_container_line1").show();1<l.fieldNames.length&&(this._input_line2_color.setColor(l._plotItems[1].plot.actualTheme.strokeColor||l._plotItems[1].plot.actualTheme.upCandle.fill.fillColor),
this.updateNumericFromIndicator(this._input_line2_width,c.LINE2_WIDTH),this._input_line2_style.val(l.getParameterValue(c.LINE2_STYLE)),this._dialog.find("#scxIndicatorDialog_container_line2").show());2<l.fieldNames.length&&(this._input_line3_color.setColor(l._plotItems[2].plot.actualTheme.strokeColor||l._plotItems[2].plot.actualTheme.fill.fillColor),this.updateNumericFromIndicator(this._input_line3_width,c.LINE3_WIDTH),this._input_line3_style.val(l.getParameterValue(c.LINE3_STYLE)),this._dialog.find("#scxIndicatorDialog_container_line3").show(),
this._label_line1.text("Top"),this._label_line2.text("Median"),this._label_line3.text("Bottom"));l.hasParameter(c.SOURCE)&&(this._input_source.val(l.getParameterValue(c.SOURCE)),this._dialog.find("#scxIndicatorDialog_container_source").show());l.hasParameter(c.PERIODS)&&(this.updateNumericFromIndicator(this._input_periods,c.PERIODS),this._dialog.find("#scxIndicatorDialog_container_periods").show());l.hasParameter(c.MA_TYPE)&&(this._input_maType.val(l.getParameterValue(c.MA_TYPE)),this._dialog.find("#scxIndicatorDialog_container_maType").show());
l.hasParameter(c.STANDARD_DEVIATIONS)&&(this.updateNumericFromIndicator(this._input_standardDeviations,c.STANDARD_DEVIATIONS),this._dialog.find("#scxIndicatorDialog_container_standardDeviations").show());l.hasParameter(c.SHORT_CYCLE)&&(this.updateNumericFromIndicator(this._input_shortCycle,c.SHORT_CYCLE),this._dialog.find("#scxIndicatorDialog_container_shortCycle").show());l.hasParameter(c.LONG_CYCLE)&&(this.updateNumericFromIndicator(this._input_longCycle,c.LONG_CYCLE),this._dialog.find("#scxIndicatorDialog_container_longCycle").show());
l.hasParameter(c.SIGNAL_PERIODS)&&(this.updateNumericFromIndicator(this._input_signalPeriods,c.SIGNAL_PERIODS),this._dialog.find("#scxIndicatorDialog_container_signalPeriods").show());l.hasParameter(c.CYCLE_1)&&(this.updateNumericFromIndicator(this._input_cycle1,c.CYCLE_1),this._container_cycle1.show());l.hasParameter(c.CYCLE_2)&&(this.updateNumericFromIndicator(this._input_cycle2,c.CYCLE_2),this._container_cycle2.show());l.hasParameter(c.SHIFT)&&(this.updateNumericFromIndicator(this._input_shift,
c.SHIFT),this._dialog.find("#scxIndicatorDialog_container_shift").show());l.hasParameter(c.STEP_PRICE)&&(this.updateNumericFromIndicator(this._input_stepPrice,c.STEP_PRICE),this._dialog.find("#scxIndicatorDialog_container_stepPrice").show());l.hasParameter(c.SHIFT_BASE)&&(this.updateNumericFromIndicator(this._input_shiftBase,c.SHIFT_BASE),this._dialog.find("#scxIndicatorDialog_container_shiftBase").show());switch(l.taIndicator){case TASdk.MACD:this._label_line1.text("Signal");this._label_line2.text("Histogram");
this._input_line3_width.hide();this._input_line3_style.selectpicker("hide");break;case TASdk.MarketPriceProfile:this.updateNumericFromIndicator(this._input_area,c.PCT_AREA),this._input_baseType.val(l.getParameterValue(c.BASE_TYPE)),this._container_area.show(),this._dialog.find("#scxIndicatorDialog_container_baseType").show();case TASdk.BollingerBands:case TASdk.MovingAverageEnvelope:break;case TASdk.VIDYA:this.updateNumericFromIndicator(this._input_r2scale,c.R2_SCALE);this._dialog.find("#scxIndicatorDialog_container_r2scale").show();
break;case TASdk.HighLowBands:this._label_line1.text("High");this._label_line2.text("Median");this._label_line3.text("Low");break;case TASdk.FractalChaosBands:this._label_line1.text("High");this._label_line2.text("Low");break;case TASdk.PrimeNumberBands:this._label_line1.text("Top");this._label_line2.text("Bottom");break;case TASdk.TradeVolumeIndex:this.updateNumericFromIndicator(this._input_minTick,c.MIN_TICK);this._dialog.find("#scxIndicatorDialog_container_minTick").show();break;case TASdk.SwingIndex:case TASdk.AccumulativeSwingIndex:this.updateNumericFromIndicator(this._input_limitMove,
c.LIMIT_MOVE);this._dialog.find("#scxIndicatorDialog_container_limitMove").show();break;case TASdk.ComparativeRelativeStrength:this._input_source2.val(l.getParameterValue(c.SOURCE2));this._dialog.find("#scxIndicatorDialog_container_source2").show();break;case TASdk.StochasticMomentumIndex:this.updateNumericFromIndicator(this._input_kPeriods,c.PCT_K_PERIODS);this.updateNumericFromIndicator(this._input_kSmoothing,c.PCT_K_SMOOTHING);this.updateNumericFromIndicator(this._input_kDoubleSmoothing,c.PCT_K_DOUBLE_SMOOTHING);
this.updateNumericFromIndicator(this._input_dPeriods,c.PCT_D_PERIODS);this._input_pctDMovingAverageType.val(l.getParameterValue(c.PCT_D_MA_TYPE));this._container_kPeriods.show();this._container_kSmoothing.show();this._dialog.find("#scxIndicatorDialog_container_kDoubleSmoothing").show();this._container_dPeriods.show();this._dialog.find("#scxIndicatorDialog_container_pctDMovingAverageType").show();this._label_line1.text("%D");this._label_line2.text("%K");break;case TASdk.UltimateOscillator:this.updateNumericFromIndicator(this._input_cycle3,
c.CYCLE_3);this._dialog.find("#scxIndicatorDialog_container_cycle3").show();break;case TASdk.VolumeOscillator:this.updateNumericFromIndicator(this._input_shortTerm,c.SHORT_TERM);this.updateNumericFromIndicator(this._input_longTerm,c.LONG_TERM);this._input_pointsOrPercent.val(l.getParameterValue(c.CYCLE_3));this._dialog.find("#scxIndicatorDialog_container_shortTerm").show();this._dialog.find("#scxIndicatorDialog_container_longTerm").show();this._dialog.find("#scxIndicatorDialog_container_pointsOrPercent").show();
break;case TASdk.ChaikinVolatility:this.updateNumericFromIndicator(this._input_roc,c.RATE_OF_CHANGE);this._dialog.find("#scxIndicatorDialog_container_rateOfChange").show();break;case TASdk.StochasticOscillator:this.updateNumericFromIndicator(this._input_kPeriods,c.PCT_K_PERIODS);this.updateNumericFromIndicator(this._input_kSmoothing,c.PCT_K_SMOOTHING);this.updateNumericFromIndicator(this._input_dPeriods,c.PCT_D_PERIODS);this._container_kPeriods.show();this._container_kSmoothing.show();this._container_dPeriods.show();
this._label_line1.text("%D");this._label_line2.text("%K");break;case TASdk.MACDHistogram:this._label_line1.text("Color");this._input_line1_width.hide();this._input_line1_style.selectpicker("hide");break;case TASdk.ParabolicSAR:this.updateNumericFromIndicator(this._input_minAF,c.MIN_AF);this.updateNumericFromIndicator(this._input_maxAF,c.MAX_AF);this._dialog.find("#scxIndicatorDialog_container_minAF").show();this._dialog.find("#scxIndicatorDialog_container_maxAF").show();break;case TASdk.RainbowOscillator:this.updateNumericFromIndicator(this._input_levels,
c.LEVELS);this._dialog.find("#scxIndicatorDialog_container_levels").show();break;case TASdk.ElderRay:this._label_line1.text("Bull Power");this._label_line2.text("Bear Power");break;case TASdk.ElderForceIndex:this._label_line2.text("Signal");break;case TASdk.EhlerFisherTransform:this._label_line1.text("Indicator");this._label_line2.text("Signal");break;case f.ColoredVolumeIndicator:this._dialog.find("#scxIndicatorDialog_container_line1").hide();this._dialog.find("#scxIndicatorDialog_container_histogram_colors").show();
l=null!=l.coloredVolumeTheme?l.coloredVolumeTheme:l.chart.theme.plot.bar.candle;this._input_histogram_line1_color.setColor(l.upCandle.fill.fillColor);this._input_histogram_line2_color.setColor(l.downCandle.fill.fillColor);break;case TASdk.TrendSignal:this._dialog.find("#scxIndicatorDialog_container_line1").hide(),this._dialog.find("#scxIndicatorDialog_container_histogram_colors").show(),l=null!=l.coloredVolumeTheme?l.coloredVolumeTheme:l.chart.theme.plot.bar.candle,this._input_histogram_line1_color.setColor(l.upCandle.fill.fillColor),
this._input_histogram_line2_color.setColor(l.downCandle.fill.fillColor),this.updateNumericFromIndicator(this._input_minTREND,c.MIN_TREND),this.updateNumericFromIndicator(this._input_maxTREND,c.MAX_TREND)}[this._input_source,this._input_source2,this._input_pointsOrPercent,this._input_maType,this._input_pctDMovingAverageType,this._input_line1_style,this._input_line2_style,this._input_line3_style,this._input_baseType].forEach(function(m){m.selectpicker("refresh")})};e.prototype._updateIndicatorFromUI=
function(){var c=f.IndicatorParam,l=this._indicator;l.setParameterValue(c.LINE_COLOR,this._input_line1_color.getColor());this.updateIndicatorFromNumeric(c.LINE_WIDTH,this._input_line1_width);this.updateIndicatorLineStyle(c.LINE_STYLE,this._input_line1_style);1<l.fieldNames.length&&(l.setParameterValue(c.LINE2_COLOR,this._input_line2_color.getColor()),this.updateIndicatorFromNumeric(c.LINE2_WIDTH,this._input_line2_width),this.updateIndicatorLineStyle(c.LINE2_STYLE,this._input_line2_style));2<l.fieldNames.length&&
(l.setParameterValue(c.LINE3_COLOR,this._input_line3_color.getColor()),this.updateIndicatorFromNumeric(c.LINE3_WIDTH,this._input_line3_width),this.updateIndicatorLineStyle(c.LINE3_STYLE,this._input_line3_style));l.hasParameter(c.PERIODS)&&this.updateIndicatorFromNumeric(c.PERIODS,this._input_periods);l.hasParameter(c.SOURCE)&&l.setParameterValue(c.SOURCE,this._getSource(this._input_source.val()));l.hasParameter(c.MA_TYPE)&&l.setParameterValue(c.MA_TYPE,e._getMAType(this._input_maType.val()));l.hasParameter(c.SHORT_CYCLE)&&
this.updateIndicatorFromNumeric(c.SHORT_CYCLE,this._input_shortCycle);l.hasParameter(c.LONG_CYCLE)&&this.updateIndicatorFromNumeric(c.LONG_CYCLE,this._input_longCycle);l.hasParameter(c.STANDARD_DEVIATIONS)&&this.updateIndicatorFromNumeric(c.STANDARD_DEVIATIONS,this._input_standardDeviations);l.hasParameter(c.CYCLE_1)&&this.updateIndicatorFromNumeric(c.CYCLE_1,this._input_cycle1);l.hasParameter(c.CYCLE_2)&&this.updateIndicatorFromNumeric(c.CYCLE_2,this._input_cycle2);l.hasParameter(c.SHIFT)&&this.updateIndicatorFromNumeric(c.SHIFT,
this._input_shift);l.hasParameter(c.STEP_PRICE)&&this.updateIndicatorFromNumeric(c.STEP_PRICE,this._input_stepPrice);l.hasParameter(c.SHIFT_BASE)&&this.updateIndicatorFromNumeric(c.SHIFT_BASE,this._input_shiftBase);switch(l.taIndicator){case TASdk.HistoricalVolatility:this.updateIndicatorFromNumeric(c.BAR_HISTORY,this._input_barHistory);break;case TASdk.VIDYA:this.updateIndicatorFromNumeric(c.R2_SCALE,this._input_r2scale);break;case TASdk.TradeVolumeIndex:this.updateIndicatorFromNumeric(c.MIN_TICK,
this._input_minTick);break;case TASdk.SwingIndex:case TASdk.AccumulativeSwingIndex:this.updateIndicatorFromNumeric(c.LIMIT_MOVE,this._input_limitMove);break;case TASdk.ComparativeRelativeStrength:l.setParameterValue(c.SOURCE2,this._getSource(this._input_source2.val()));break;case TASdk.StochasticMomentumIndex:this.updateIndicatorFromNumeric(c.PCT_K_PERIODS,this._input_kPeriods);this.updateIndicatorFromNumeric(c.PCT_K_SMOOTHING,this._input_kSmoothing);this.updateIndicatorFromNumeric(c.PCT_K_DOUBLE_SMOOTHING,
this._input_kDoubleSmoothing);this.updateIndicatorFromNumeric(c.PCT_D_PERIODS,this._input_dPeriods);l.setParameterValue(c.PCT_D_MA_TYPE,e._getMAType(this._input_pctDMovingAverageType.val()));break;case TASdk.UltimateOscillator:this.updateIndicatorFromNumeric(c.CYCLE_3,this._input_cycle3);break;case TASdk.VolumeOscillator:this.updateIndicatorFromNumeric(c.SHORT_TERM,this._input_shortTerm);this.updateIndicatorFromNumeric(c.LONG_TERM,this._input_longTerm);l.setParameterValue(c.POINTS_OR_PERCENT,e._getPointsOrPercent(this._input_pointsOrPercent.val()));
break;case TASdk.ChaikinVolatility:this.updateIndicatorFromNumeric(c.RATE_OF_CHANGE,this._input_roc);break;case TASdk.StochasticOscillator:this.updateIndicatorFromNumeric(c.PCT_K_PERIODS,this._input_kPeriods);this.updateIndicatorFromNumeric(c.PCT_K_SMOOTHING,this._input_kSmoothing);this.updateIndicatorFromNumeric(c.PCT_D_PERIODS,this._input_dPeriods);break;case TASdk.ParabolicSAR:this.updateIndicatorFromNumeric(c.MIN_AF,this._input_minAF);this.updateIndicatorFromNumeric(c.MAX_AF,this._input_maxAF);
break;case TASdk.RainbowOscillator:this.updateIndicatorFromNumeric(c.LEVELS,this._input_levels);break;case TASdk.MACD:case TASdk.MACDHistogram:this.updateIndicatorFromNumeric(c.SIGNAL_PERIODS,this._input_signalPeriods);break;case f.ColoredVolumeIndicator:null==l.coloredVolumeTheme&&(l.coloredVolumeTheme=f.JsUtil.clone(l.chart.theme.plot.histogram.coloredColumn));l.coloredVolumeTheme.upCandle.fill.fillColor=this._input_histogram_line1_color.getColor();l.coloredVolumeTheme.downCandle.fill.fillColor=
this._input_histogram_line2_color.getColor();break;case TASdk.MarketPriceProfile:this.updateIndicatorFromNumeric(c.PCT_AREA,this._input_area);this.updateIndicatorFromNumeric(c.STEP_PRICE,this._input_stepPrice);this.updateIndicatorFromNumeric(c.SHIFT_BASE,this._input_shiftBase);l.setParameterValue(c.BASE_TYPE,e._getDayOrWeek(this._input_baseType.val()));break;case TASdk.TrendSignal:null==l.coloredVolumeTheme&&(l.coloredVolumeTheme=f.JsUtil.clone(l.chart.theme.plot.histogram.coloredColumn)),l.coloredVolumeTheme.upCandle.fill.fillColor=
this._input_histogram_line1_color.getColor(),l.coloredVolumeTheme.downCandle.fill.fillColor=this._input_histogram_line2_color.getColor(),this.updateIndicatorFromNumeric(c.MIN_TREND,this._input_minTREND),this.updateIndicatorFromNumeric(c.MAX_TREND,this._input_maxTREND)}};e.prototype._save=function(){this._restoreFields();this._apply();this.hide()};e.prototype._apply=function(){this._updateIndicatorFromUI();this._config.done()&&this._config.done()};e.prototype._initFields=function(){var c=this._dialog;
this._input_source=c.find("#scxIndicatorDialog_input_source");this._container_cycle1=c.find("#scxIndicatorDialog_container_cycle1");this._container_cycle2=c.find("#scxIndicatorDialog_container_cycle2");this._container_kPeriods=c.find("#scxIndicatorDialog_container_kPeriods");this._container_kSmoothing=c.find("#scxIndicatorDialog_container_kSmoothing");this._container_dPeriods=c.find("#scxIndicatorDialog_container_dPeriods");this._container_area=c.find("#scxIndicatorDialog_container_area");this._input_pointsOrPercent=
c.find("#scxIndicatorDialog_input_pointsOrPercent");this._input_source2=c.find("#scxIndicatorDialog_input_source2");this._input_maType=c.find("#scxIndicatorDialog_input_maType");this._input_pctDMovingAverageType=c.find("#scxIndicatorDialog_input_pctDMovingAverageType");this._input_periods=c.find("#scxIndicatorDialog_input_periods").scxNumericField(h);this._input_r2scale=c.find("#scxIndicatorDialog_input_r2scale").scxNumericField(g);this._input_standardDeviations=c.find("#scxIndicatorDialog_input_standardDeviations").scxNumericField(g);
this._input_shift=c.find("#scxIndicatorDialog_input_shift").scxNumericField(g);this._input_minTick=c.find("#scxIndicatorDialog_input_minTick").scxNumericField(g);this._input_limitMove=c.find("#scxIndicatorDialog_input_limitMove").scxNumericField(g);this._input_kPeriods=c.find("#scxIndicatorDialog_input_kPeriods").scxNumericField(h);this._input_kSmoothing=c.find("#scxIndicatorDialog_input_kSmoothing").scxNumericField(h);this._input_kDoubleSmoothing=c.find("#scxIndicatorDialog_input_kDoubleSmoothing").scxNumericField(h);
this._input_dPeriods=c.find("#scxIndicatorDialog_input_dPeriods").scxNumericField(h);this._input_barHistory=c.find("#scxIndicatorDialog_input_barHistory").scxNumericField(h);this._input_cycle1=c.find("#scxIndicatorDialog_input_cycle1").scxNumericField(g);this._input_cycle2=c.find("#scxIndicatorDialog_input_cycle2").scxNumericField(g);this._input_cycle3=c.find("#scxIndicatorDialog_input_cycle3").scxNumericField(g);this._input_shortTerm=c.find("#scxIndicatorDialog_input_shortTerm").scxNumericField(h);
this._input_longTerm=c.find("#scxIndicatorDialog_input_longTerm").scxNumericField(h);this._input_roc=c.find("#scxIndicatorDialog_input_rateOfChange").scxNumericField(g);this._input_signalPeriods=c.find("#scxIndicatorDialog_input_signalPeriods").scxNumericField(h);this._input_shortCycle=c.find("#scxIndicatorDialog_input_shortCycle").scxNumericField(h);this._input_longCycle=c.find("#scxIndicatorDialog_input_longCycle").scxNumericField(h);this._input_minAF=c.find("#scxIndicatorDialog_input_minAF").scxNumericField(g);
this._input_maxAF=c.find("#scxIndicatorDialog_input_maxAF").scxNumericField(g);this._input_levels=c.find("#scxIndicatorDialog_input_levels").scxNumericField(g);this._label_line1=c.find("#scxIndicatorDialog_label_line1");this._input_line1_width=c.find("#scxIndicatorDialog_input_line1_width").scxNumericField(h);this._input_line1_color=null;this._input_line1_style=c.find("#scxIndicatorDialog_input_line1_style");this._label_line2=c.find("#scxIndicatorDialog_label_line2");this._input_line2_width=c.find("#scxIndicatorDialog_input_line2_width").scxNumericField(h);
this._input_line2_color=null;this._input_line2_style=c.find("#scxIndicatorDialog_input_line2_style");this._label_line3=c.find("#scxIndicatorDialog_label_line3");this._input_line3_width=c.find("#scxIndicatorDialog_input_line3_width").scxNumericField(h);this._input_line3_color=null;this._input_line3_style=c.find("#scxIndicatorDialog_input_line3_style");this._input_histogram_line2_color=this._input_histogram_line1_color=null;this._input_baseType=c.find("#scxIndicatorDialog_input_baseType");this._input_area=
c.find("#scxIndicatorDialog_input_area").scxNumericField(h);this._input_stepPrice=c.find("#scxIndicatorDialog_input_stepPrice").scxNumericField(g);this._input_shiftBase=c.find("#scxIndicatorDialog_input_shiftBase").scxNumericField(h);this._input_minTREND=c.find("#scxIndicatorDialog_input_minTREND").scxNumericField(d);this._input_maxTREND=c.find("#scxIndicatorDialog_input_maxTREND").scxNumericField(d)};return e}(k.Dialog);k.IndicatorSettingsDialog=a})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h={Bands:1,General:2,Index:3,MovingAverage:4,Oscillator:5,Regression:6},g={Bands:{},General:{},Index:{},MovingAverage:{},Oscillator:{},Regression:{}},d=function(a){function b(e){e=a.call(this,e)||this;e._helpDownloaded=!1;e._helpEnabled=!1;e._tooltipHoverTimer=null;e._tooltipBodyHovered=!1;e._lastHoveredLi=null;e._tooltipHTMLObj=null;e._initFields();e._init();return e}__extends(b,a);b.prototype.show=function(e){e.chart.localize(this._dialog);this._config=e;this._inp_search.val("");
this._filterIndicators("");a.prototype.show.call(this,e);f.Environment.isMobile||this._inp_search.focus()};b.prototype.hide=function(){this._config=null;this._dialogContent.body.find(".scxHasTooltip").popover("hide");a.prototype.hide.call(this)};b.prototype._init=function(){var e=this,c=$("body");this._noResultObj.hide();this._generateObjects();for(var l in g)g.hasOwnProperty(l)&&this._resultContainer.append(g[l].group.root);this._inp_search.on("keyup",function(p){e._filterIndicators($(p.currentTarget).val())});
this._btnClearInput.on(eventClickByPlatform,function(){e._inp_search.val().length&&e._clearInput()});this._resultContainer.on(eventClickByPlatform,".scxIndicatorItem",function(p){var u=$(p.currentTarget);u.addClass("active");setTimeout(function(){u.removeClass("active")},200);try{if(e._config.done){var r=parseInt(u.attr("data-scx_id"),10);e._config.done(r)}}catch(w){p=i18next.t("notification.indicators.msg.noMoreSpace"),f.UI.Notification.warning(p)}});this._resultContainer.on("mouseover",".scxIndicatorItem",
function(p){if(e._helpEnabled){var u=$(p.currentTarget);e._tooltipBodyHovered=!1;e._tooltipHoverTimer=setTimeout(function(){e._lastHoveredLi=u;e._lastHoveredLi.popover("show");e._tooltipHoverTimer=null},500)}});this._resultContainer.on("mouseout",".scxIndicatorItem",function(){e._helpEnabled&&(e._tooltipHoverTimer&&(clearTimeout(e._tooltipHoverTimer),e._tooltipHoverTimer=null),setTimeout(function(){e._tooltipBodyHovered||e._lastHoveredLi&&e._lastHoveredLi.popover("hide")},100))});c.on("mouseover",
"div.popover",function(){e._helpEnabled&&(e._tooltipBodyHovered=!0)});c.on("mouseleave","div.popover",function(){e._helpEnabled&&(e._lastHoveredLi&&e._lastHoveredLi.popover("hide"),e._tooltipBodyHovered=!1)});if(f.Environment.isMobile)this._helpPanel.remove();else{var m=new Switchery(document.querySelector("#scxIndicators_chkHelpSwitcher"),{color:"#64bd63",secondaryColor:"#ddd",className:"scx_switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s"});c.bind("scxSwitcherChanged",function(p,u){$(u.target).is(e._tooltipSwitcher)&&
(!1===e._helpDownloaded?(e._tooltipLabel.hide(),e._tooltipDownloading.show(),m.disable(),k.HtmlLoader.getView("IndicatorsHelp.html?v=2",function(r){e._helpDownloaded=!0;e._tooltipDownloading.hide();e._tooltipLabel.show();m.enable();e._tooltipHTMLObj=$(r);e._helpEnabled=!0;e._switchHelpTooltips()})):(e._helpEnabled=u.checked,e._switchHelpTooltips()))})}};b.prototype._generateObjects=function(){var e={Bands:f.Indicator.bands(),General:f.Indicator.general(),Index:f.Indicator.indices(),MovingAverage:f.Indicator.movingAverages(),
Oscillator:f.Indicator.oscillators(),Regression:f.Indicator.regressions()},c;for(c in e){var l=c;if(e.hasOwnProperty(l)){for(var m=this._generateIndicatorGroup(h[l]),p=[],u=0,r=e[l];u<r.length;u++)p.push(this._generateIndicatorItem(r[u]));m.itemsContainer.append(p);this._sortItems(m.itemsContainer);this._applyColumns(m.itemsContainer);g[l]={indicators:p,group:m}}}};b.prototype._filterIndicators=function(e){e=e.toString().trim().toLowerCase();var c,l,m=0,p;for(p in g)if(g.hasOwnProperty(p)){var u=
0;for(c=g[p].indicators;u<c.length;u++)c[u].detach();u=g[p].group;u.itemsContainer.empty();for(var r=l=0;r<g[p].indicators.length;r++)c=g[p].indicators[r],0<=c.text().toLowerCase().indexOf(e)&&(l++,m++,u.itemsContainer.append(c));l?(this._sortItems(u.itemsContainer),this._applyColumns(u.itemsContainer),u.root.show()):u.root.hide()}m?this._noResultObj.hide():this._noResultObj.show()};b.prototype._sortItems=function(e){var c=e.children().detach();c.sort(function(l,m){return $(l).text()<$(m).text()?
-1:1});e.append(c)};b.prototype._applyColumns=function(e){e.autocolumnlist({columns:3,classname:"scxIndicatorColumn"})};b.prototype._switchHelpTooltips=function(){for(var e in g)if(g.hasOwnProperty(e))for(var c=0,l=g[e].indicators;c<l.length;c++){var m=l[c];this._helpEnabled?this._enableItemHelpTooltip(m):this._disableItemHelpTooltip(m)}};b.prototype._enableItemHelpTooltip=function(e){if(this._helpEnabled){var c=this._tooltipHTMLObj.find("#scxIndicatorTooltip_id"+e.attr("data-scx_id")).clone();c.length||
(c=$('<p style="margin-bottom: 0;">Sorry. There is no help for this indicator yet</p>'));c.css({display:"block"}).addClass("scxIndicators_tooltipWrapper");this._config.chart.localize(c);e.addClass("scxHasTooltip").popover({trigger:"manual",placement:"auto left",delay:{show:500,hide:100},container:f.UI.HtmlContainer.instance.componentsContainer,viewport:{selector:"body",padding:0},html:!0,content:function(){return $("<div></div>").append(c).html()}})}};b.prototype._disableItemHelpTooltip=function(e){e.removeClass("scxHasTooltip").popover("destroy")};
b.prototype._generateIndicatorGroup=function(e){var c=$('<div class="scxIndicatorsGroup"><h4 class="scxIndicatorsGroup_header"></h4><div class="scxIndicatorsGroup_indicators"><ul></ul></div></div>');c.find(".scxIndicatorsGroup_header").text(this._indicatorGroupToString(e));return{root:c,itemsContainer:c.find(".scxIndicatorsGroup_indicators ul")}};b.prototype._generateIndicatorItem=function(e){switch(e){case f.VolumeIndicator:var c="Volume";break;case f.ColoredVolumeIndicator:c="Colored Volume";break;
default:c=TASdk.indicatorToString(e)}return $('<li class="scxIndicatorItem" data-scx_id=""></li>').attr("data-scx_id",e).text(c)};b.prototype._clearInput=function(){this._inp_search.val("");this._filterIndicators("");this._inp_search.focus()};b.prototype._indicatorGroupToString=function(e){switch(parseInt(e,10)){case h.Bands:return"Bands";case h.General:return"General";case h.Index:return"Index";case h.MovingAverage:return"Moving Average";case h.Oscillator:return"Oscillator";case h.Regression:return"Regression";
default:return""}};b.prototype._initFields=function(){this._inp_search=this._dialog.find("#scxIndicators_inp_search");this._resultContainer=this._dialog.find("#scxIndicatorsResult");this._noResultObj=this._dialog.find(".scxNoResult");this._tooltipSwitcher=this._dialog.find("#scxIndicators_chkHelpSwitcher");this._tooltipDownloading=this._dialog.find(".scxLabel_downloading");this._tooltipLabel=this._dialog.find('label[for="scxIndicators_chkHelpSwitcher"]');this._btnClearInput=this._dialog.find("#scxIndicators_btn_clearInput");
this._helpPanel=this._dialog.find(".scxIndicators_helpControlPanel")};return b}(k.Dialog);k.IndicatorsDialog=d})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){var h=function(){function g(d,a){this._inputField=d;this._config=a;this._value=a.value||"";this._config.onChange=a.onChange;this._isDropDownVisible=!1;this._resultsCount=0;this._currentText="";this._searchDelayTimer=null;this._resultsDropDown=$('<div class="scxInstrumentSearchResults"></div>');this._noResults=$('<div class="scxInstrumentSearchNoResults">No results</div>');null!=a.instruments&&Array.isArray(a.instruments)&&0<a.instruments.length?this._config.instruments=a.instruments:
this._getInstruments=function(){return f.getAllInstruments()};this._init()}g.prototype.set=function(d){this.setText(d&&d.symbol)};g.prototype.setText=function(d){void 0===d&&(d="");this._setValue(d)};g.prototype.getSymbol=function(){return this._getInstrumentBySymbol(this._value)};g.prototype._init=function(){var d=this;this._inputField.addClass("scxInstrumentSearchInputField");this._inputField.attr("type","text");this._config.value?(this._inputField.val(this._value),this._currentText=this._value):
this._inputField.val("");k.HtmlContainer.instance.register("searchResult",this._resultsDropDown);this._inputField.on("input",function(){clearTimeout(d._searchDelayTimer);d._searchDelayTimer=setTimeout(function(){var a=d._getInputValue();if(a!==d._currentText){d._currentText=a;d._showDropDown();var b=d._search(a);d._resultsCount=b.length;d._generateSearchResults(a.toUpperCase(),b)}},250)});this._inputField.focus(function(a){$(a.currentTarget).addClass("active")});this._inputField.blur(function(a){$(a.currentTarget).removeClass("active")});
$(window).scroll(function(){d._hideDropDown()});$(window).resize(function(){d._hideDropDown()});this._inputField.keyup(function(a){27===a.which&&(d._inputField.val(d._value),d._hideDropDown(),d._inputField.blur());if(13===a.which){var b=d._getInputValue().toUpperCase();if(d._isDropDownVisible){var e=d._resultsDropDown.find(" > .active");0<e.length&&(b=e.attr("data-scxinstrument"))}d._setValue(b,!0);d._hideDropDown();d._inputField.blur()}d._isDropDownVisible||40!==a.which&&38!==a.which||(d._showDropDown(),
d._generateSearchResults(d._getInputValue().toUpperCase(),d._search(d._getInputValue())));0<d._resultsCount&&(40===a.which&&d._highlightDropDownItem(!1),38===a.which&&d._highlightDropDownItem(!0))});this._resultsDropDown.on(eventClickByPlatform,".scxInstrumentSearchItem",function(a){d._setValue($(a.currentTarget).attr("data-scxinstrument"),!0);d._hideDropDown()});this._resultsDropDown.on("mouseover",".scxInstrumentSearchItem",function(a){$(a.currentTarget).parent().children().removeClass("active");
$(a.currentTarget).addClass("active")});$(document).on(eventClickByPlatform,function(a){d._isDropDownVisible&&!$(a.currentTarget).is(d._inputField)&&0===$(a.currentTarget).parents(".scxInstrumentSearchResults").length&&(d._inputField.val(d._value),d._hideDropDown())});$("body").bind("scxContextMenuOpen",function(a){d._inputField.val(d._value);d._hideDropDown()})};g.prototype._getInputValue=function(){return $("<div></div>").text(this._inputField.val()).html()};g.prototype._highlightDropDownItem=function(d){var a=
this._resultsDropDown.find(" > .active"),b=this._resultsDropDown.children();0===a.length?d?b.last().addClass("active"):b.first().addClass("active"):(a.removeClass("active"),d?a.is(b.first())?b.last().addClass("active"):a.prev().addClass("active"):a.is(b.last())?b.first().addClass("active"):a.next().addClass("active"));a=this._resultsDropDown.find(" > .active");d=a.outerHeight()*a.index();a=d+a.outerHeight();d<this._resultsDropDown.scrollTop()?this._resultsDropDown.scrollTop(d):a>this._resultsDropDown.scrollTop()+
this._resultsDropDown.outerHeight()&&this._resultsDropDown.scrollTop(a-this._resultsDropDown.height())};g.prototype._setValue=function(d,a){this._inputField.val(d);this._currentText=this._value=d;if(a&&f.JsUtil.isFunction(this._config.onChange))this._config.onChange(this._getInstrumentBySymbol(d))};g.prototype._hideDropDown=function(){this._isDropDownVisible=!1;this._resultsDropDown.hide();this._currentText=this._inputField.val()};g.prototype._showDropDown=function(){var d=$(window).width();this._resultsDropDown.width("41.6651em");
var a=this._resultsDropDown.outerWidth(!0);d<a&&this._resultsDropDown.outerWidth(d);if(!this._isDropDownVisible){this._isDropDownVisible=!0;var b=this._inputField.outerHeight(),e=$(window).scrollTop(),c=$(window).scrollLeft(),l=this._inputField.offset().left;0<c&&(l-=c);0<e&&(b-=e);this._resultsDropDown.css({top:this._inputField.offset().top+b+2,left:l,maxHeight:$(window).height()-this._inputField.offset().top-b-10});d<a&&this._resultsDropDown.width(d);this._resultsDropDown.show()}};g.prototype._generateSearchResults=
function(d,a){this._noResults.detach();this._resultsDropDown.empty();if(0===a.length)this._noResults.appendTo(this._resultsDropDown);else{var b="",e;for(e in a)a.hasOwnProperty(e)&&(b+=this._generateListElement(d,a[e].symbol,a[e].company,a[e].exchange));""!==b&&this._resultsDropDown.append($(b))}};g.prototype._generateListElement=function(d,a,b,e){return'<div class="scxInstrumentSearchItem" data-scxinstrument="'+a+'"><div class="scxInstrumentSearchItem_SymbolContainer"><span class="scxInstrumentSearchItem_Symbol">'+
(this._highlightHTMLText(d,a)+'</span></div><div class="scxInstrumentSearchItem_NameContainer"><span class="scxInstrumentSearchItem_Name">')+(this._highlightHTMLText(d,b)+'</span></div><div class="scxInstrumentSearchItem_ExchangeContainer"><span class="scxInstrumentSearchItem_Exchange">')+(e+"</span></div></div>")};g.prototype._highlightHTMLText=function(d,a){if(""===d)return a;var b=this._searchTextPositions(d,a),e="",c=0;if(1===d.length&&1<b.length)for(d=b.length-1;0<d;d--)b[d].pos-1===b[d-1].pos&&
(b[d-1].len+=1,b.splice(d,1));for(d=0;d<b.length;d++){var l=b[d];e+=a.substr(c,l.pos-c)+'<span class="scxHighlightedText">'+a.substr(l.pos,l.len)+"</span>";c=l.pos+l.len}c<a.length&&(e+=a.substr(c,a.length-c));return e};g.prototype._searchTextPositions=function(d,a){var b=0,e=[],c=d.length;d=d.toLowerCase();for(a=a.toLowerCase();-1<(b=a.indexOf(d,b));)e.push({pos:b,len:c}),b+=1;return e};g.prototype._search=function(d){d=d.toLowerCase()||"";for(var a=[],b=0,e=this._getInstruments();b<e.length;b++){var c=
e[b];(-1<c.symbol.toLowerCase().indexOf(d)||-1<c.company.toLowerCase().indexOf(d))&&a.push(c)}return a};g.prototype._getInstrumentBySymbol=function(d){for(var a=0,b=this._getInstruments();a<b.length;a++){var e=b[a];if(e.symbol===d)return e}return null};g.prototype._getInstruments=function(){return this._config.instruments};return g}();k.InstrumentSearch=h})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){var h=jQuery,g=function(){function d(a){var b=this;this._visible=!0;k.HtmlLoader.getView("Navigation.html",function(e){b._init(e,a)})}Object.defineProperty(d.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible=a;this._updateVisibility()},enumerable:!0,configurable:!0});d.prototype._init=function(a,b){var e=this;this.container=h(a).appendTo(b.target);var c=this.chart=b.chart;this.container.find(".scxNavigation-btn-scrollLeft").on(eventClickByPlatform,
function(){c.scrollOnPixels(c.size.width/5);c.setNeedsUpdate(!0)});this.container.find(".scxNavigation-btn-scrollRight").on(eventClickByPlatform,function(){c.scrollOnPixels(-c.size.width/5);c.setNeedsUpdate(!0)});this.container.find(".scxNavigation-btn-zoomIn").on(eventClickByPlatform,function(){c.zoomOnPixels(c.size.width/5);c.setNeedsUpdate(!0)});this.container.find(".scxNavigation-btn-zoomOut").on(eventClickByPlatform,function(){c.zoomOnPixels(-c.size.width/5);c.setNeedsUpdate(!0)});this.container.find(".scxNavigation-btn-scrollToFirst").on(eventClickByPlatform,
function(){var l=e.chart.lastVisibleRecord-c.firstVisibleRecord;1<l&&(c.firstVisibleRecord=0,c.lastVisibleRecord=Math.min(l,c.recordCount-1),c.setNeedsUpdate(!0))});this.container.find(".scxNavigation-btn-scrollToLast").on(eventClickByPlatform,function(){var l=c.recordCount;if(0<l){var m=c.firstVisibleRecord,p=c.lastVisibleRecord;c.lastVisibleRecord=l-1;c.firstVisibleRecord=Math.max(l-(p-m+1),0);c.setNeedsUpdate(!0)}});this._updateVisibility()};d.prototype._updateVisibility=function(){this.container&&
f.HtmlUtil.setVisibility(this.container,this.visible)};d.prototype.draw=function(){this.dateScaleContainer||(this.dateScaleContainer=this.chart&&this.chart.rootDiv.find(".scxBottomDateScale"));this.dateScaleContainer&&this.container.css("bottom",this.dateScaleContainer.outerHeight(!0))};d.prototype.destroy=function(){this.chart=null};return d}();k.ChartNavigation=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h={showArrows:!0,maxValue:100,minValue:1,value:1},g={showArrows:!0,maxValue:100,minValue:.01,priceDecimals:5,value:1},d=function(a){function b(e){e=a.call(this,e)||this;e._isApplyClicked=!1;e._initFields();e._init();return e}__extends(b,a);b.prototype.show=function(e){this._config=e;this._priceStyleKind=e.priceStyle.chart.priceStyleKind;this._setValues(this._priceStyleKind);this._switchView(this._priceStyleKind);this._isApplyClicked=!1;a.prototype.show.call(this,e)};
b.prototype.hide=function(){this._config=null;a.prototype.hide.call(this)};b.prototype._init=function(){var e=this;this._input_ATRlength.scxNumericField(h);this._input_boxSize.scxNumericField(g);this._input_reversalAmount.scxNumericField(h);this._input_reversalDoubleAmount.scxNumericField(g);this._input_numberOfLine.scxNumericField(h);this._input_source.selectpicker({container:"body"});this._input_boxSizeKind.selectpicker({container:"body"});this._input_barStyle.selectpicker({container:"body"});this._input_coloredBarStyle.selectpicker({container:"body"});
this._input_source.on("change",function(){e._source=e._input_source.val();e._switchPriceStyleMethod()});this._input_boxSizeKind.on("change",function(){e._boxSizeKind=e._input_boxSizeKind.val();e._switchPriceStyleMethod()});this._input_barStyle.on("change",function(){e._barsStyle=e._input_barStyle.val()});this._input_coloredBarStyle.on("change",function(){e._coloredBarsStyle=e._input_coloredBarStyle.val()});this._dialog.find("#scxPriceStyleDialog_btn_save").on(eventClickByPlatform,function(){e._apply()})};
b.prototype._switchView=function(e){this._title.text(b._getTitle(e));this._panelFigureInputsPanel.show();switch(e){case f.PointAndFigurePriceStyle.className:this._switchPriceStyleMethod();this._panelFigureNumberOfLine.hide();this._panelFigureSource.show();this._panelFigureBoxCalculationMethods.show();this._panelFigureReversalAmount.show();this._panelFigureReversalDoubleAmount.hide();this._panelFigureBarStyle.hide();this._panelFigureColoredBarStyle.hide();break;case f.RenkoPriceStyle.className:this._switchPriceStyleMethod();
this._panelFigureNumberOfLine.hide();this._panelFigureSource.hide();this._panelFigureBoxCalculationMethods.show();this._panelFigureReversalAmount.hide();this._panelFigureReversalDoubleAmount.hide();this._panelFigureBarStyle.hide();this._panelFigureColoredBarStyle.hide();break;case f.KagiPriceStyle.className:this._switchPriceStyleMethod();this._panelFigureNumberOfLine.hide();this._panelFigureSource.hide();this._panelFigureBoxCalculationMethods.show();this._panelFigureBoxSize.hide();this._panelFigureATRLength.hide();
this._panelFigureBarStyle.hide();this._panelFigureColoredBarStyle.hide();break;case f.LineBreakPriceStyle.className:this._panelFigureNumberOfLine.show();this._panelFigureSource.hide();this._panelFigureBoxCalculationMethods.hide();this._panelFigureReversalAmount.hide();this._panelFigureBoxSize.hide();this._panelFigureATRLength.hide();this._panelFigureReversalDoubleAmount.hide();this._panelFigureBarStyle.hide();this._panelFigureColoredBarStyle.hide();break;case f.BarPriceStyle.className:case f.HLBarPriceStyle.className:case f.HLCBarPriceStyle.className:this._panelFigureBarStyle.show();
this._panelFigureNumberOfLine.hide();this._panelFigureSource.hide();this._panelFigureBoxCalculationMethods.hide();this._panelFigureReversalAmount.hide();this._panelFigureBoxSize.hide();this._panelFigureATRLength.hide();this._panelFigureReversalDoubleAmount.hide();this._panelFigureColoredBarStyle.hide();break;case f.ColoredBarPriceStyle.className:case f.ColoredHLBarPriceStyle.className:case f.ColoredHLCBarPriceStyle.className:this._panelFigureColoredBarStyle.show(),this._panelFigureBarStyle.hide(),
this._panelFigureNumberOfLine.hide(),this._panelFigureSource.hide(),this._panelFigureBoxCalculationMethods.hide(),this._panelFigureReversalAmount.hide(),this._panelFigureBoxSize.hide(),this._panelFigureATRLength.hide(),this._panelFigureReversalDoubleAmount.hide()}};b.prototype._switchPriceStyleMethod=function(){this._boxSizeKind===f.PointAndFigureBoxSizeKind.ATR?(this._panelFigureBoxSize.hide(),this._panelFigureATRLength.show()):(this._panelFigureBoxSize.show(),this._panelFigureATRLength.hide());
this._priceStyleKind===f.KagiPriceStyle.className&&(this._boxSizeKind===f.KagiReversalKind.ATR?(this._panelFigureATRLength.hide(),this._panelFigureReversalAmount.show(),this._panelFigureReversalDoubleAmount.hide()):(this._panelFigureBoxSize.hide(),this._panelFigureReversalAmount.hide(),this._panelFigureReversalDoubleAmount.show()))};b.prototype._setValues=function(e){switch(e){case f.PointAndFigurePriceStyle.className:e=this._config.priceStyle;this._source=e.source;this._input_source.selectpicker("val",
this._source||f.PointAndFigureSource.CLOSE).selectpicker("refresh");this._boxSizeKind=e.boxSize.kind;this._input_boxSizeKind.selectpicker("val",this._boxSizeKind||f.PointAndFigureBoxSizeKind.ATR).selectpicker("refresh");this._boxSizeKind===f.PointAndFigureBoxSizeKind.ATR?this._input_ATRlength.scxNumericField("setValue",e.boxSize.value||1):this._input_boxSize.scxNumericField("setValue",e.boxSize.value||1);this._input_reversalAmount.scxNumericField("setValue",e.reversal||1);break;case f.RenkoPriceStyle.className:e=
this._config.priceStyle;this._boxSizeKind=e.boxSize.kind;this._input_boxSizeKind.selectpicker("val",this._boxSizeKind||f.RenkoBoxSizeKind.ATR).selectpicker("refresh");this._boxSizeKind===f.RenkoBoxSizeKind.ATR?this._input_ATRlength.scxNumericField("setValue",e.boxSize.value||1):this._input_boxSize.scxNumericField("setValue",e.boxSizeValue||1);break;case f.KagiPriceStyle.className:e=this._config.priceStyle;this._boxSizeKind=e.reversal.kind;this._input_boxSizeKind.selectpicker("val",this._boxSizeKind||
f.KagiReversalKind.ATR).selectpicker("refresh");this._boxSizeKind===f.KagiReversalKind.ATR?this._input_reversalAmount.scxNumericField("setValue",e.reversal.value||1):this._input_reversalDoubleAmount.scxNumericField("setValue",e.reversal.value||1);break;case f.LineBreakPriceStyle.className:this._input_numberOfLine.scxNumericField("setValue",this._config.priceStyle.lines||1);break;case f.BarPriceStyle.className:case f.HLBarPriceStyle.className:case f.HLCBarPriceStyle.className:this._setBarStyle(e);
break;case f.ColoredBarPriceStyle.className:case f.ColoredHLBarPriceStyle.className:case f.ColoredHLCBarPriceStyle.className:this._setBarStyle(e,!0);break;default:this.hide()}};b.prototype._setBarStyle=function(e,c){c?(this._coloredBarsStyle=e,this._input_coloredBarStyle.selectpicker("val",e).selectpicker("refresh")):(this._barsStyle=e,this._input_barStyle.selectpicker("val",e).selectpicker("refresh"))};b.prototype._getValues=function(){var e=this._config.chart;switch(this._priceStyleKind){case f.PointAndFigurePriceStyle.className:e=
this._config.priceStyle;e.source=this._input_source.val();e.boxSize.kind=this._input_boxSizeKind.val();e.boxSize.value=e.boxSize.kind===f.PointAndFigureBoxSizeKind.ATR?this._input_ATRlength.scxNumericField("getValue"):this._input_boxSize.scxNumericField("getValue");e.reversal=this._input_reversalAmount.scxNumericField("getValue");break;case f.RenkoPriceStyle.className:e=this._config.priceStyle;e.boxSize.kind=this._input_boxSizeKind.val();e.boxSize.value=e.boxSize.kind===f.RenkoBoxSizeKind.ATR?this._input_ATRlength.scxNumericField("getValue"):
this._input_boxSize.scxNumericField("getValue");break;case f.KagiPriceStyle.className:e=this._config.priceStyle;e.reversal.kind=this._input_boxSizeKind.val();e.reversal.value=e.reversal.kind===f.KagiReversalKind.ATR?this._input_reversalAmount.scxNumericField("getValue"):this._input_reversalDoubleAmount.scxNumericField("getValue");break;case f.LineBreakPriceStyle.className:this._config.priceStyle.lines=this._input_numberOfLine.scxNumericField("getValue");break;case f.BarPriceStyle.className:case f.HLBarPriceStyle.className:case f.HLCBarPriceStyle.className:e.priceStyleKind=
this._barsStyle;e.update();break;case f.ColoredBarPriceStyle.className:case f.ColoredHLBarPriceStyle.className:case f.ColoredHLCBarPriceStyle.className:e.priceStyleKind=this._coloredBarsStyle;e.update();break;default:throw Error("Unknown price style: "+this._priceStyleKind);}};b.prototype._apply=function(){this._getValues();var e=this._config.chart.priceStyleKind;e!==f.BarPriceStyle.className&&e!==f.HLBarPriceStyle.className&&e!==f.HLCBarPriceStyle.className&&e!==f.ColoredBarPriceStyle.className&&
e!==f.ColoredHLBarPriceStyle.className&&e!==f.ColoredHLCBarPriceStyle.className&&this._config.priceStyle.apply();this._isApplyClicked=!0;this.hide()};b._getTitle=function(e){switch(e){case f.PointAndFigurePriceStyle.className:e="Point and Figure";break;case f.RenkoPriceStyle.className:e="Renko";break;case f.KagiPriceStyle.className:e="Kagi";break;case f.LineBreakPriceStyle.className:e="Line Break";break;case f.BarPriceStyle.className:case f.HLBarPriceStyle.className:case f.HLCBarPriceStyle.className:e=
"Bars";break;case f.ColoredBarPriceStyle.className:case f.ColoredHLBarPriceStyle.className:case f.ColoredHLCBarPriceStyle.className:e="Colored Bars";break;default:throw Error("Unknown price style: "+e);}return e+" Settings"};b.prototype._initFields=function(){var e=this._dialog;this._title=e.find("#scxPriceStyleDialog_title");this._panelFigureInputsPanel=e.find(".scxPriceStyleDialog_panel_ntb_inputsPanel");this._input_source=e.find(".scxPriceStyleDialog_input_source");this._input_boxSizeKind=e.find(".scxPriceStyleDialog_input_boxSizeKind");
this._input_ATRlength=e.find(".scxPriceStyleDialog_input_ATRLength");this._input_boxSize=e.find(".scxPriceStyleDialog_input_boxSize");this._input_reversalAmount=e.find(".scxPriceStyleDialog_input_reversalAmount");this._input_reversalDoubleAmount=e.find(".scxPriceStyleDialog_input_reversalDoubleAmount");this._input_numberOfLine=e.find(".scxPriceStyleDialog_input_numberOfLine");this._panelFigureSource=e.find(".scxPriceStyleDialog_panel_ntb_source");this._panelFigureBoxCalculationMethods=e.find(".scxPriceStyleDialog_panel_ntb_boxSizeKind");
this._panelFigureATRLength=e.find(".scxPriceStyleDialog_panel_ntb_ATRLength");this._panelFigureBoxSize=e.find(".scxPriceStyleDialog_panel_ntb_boxSize");this._panelFigureReversalAmount=e.find(".scxPriceStyleDialog_panel_ntb_reversalAmount");this._panelFigureReversalDoubleAmount=e.find(".scxPriceStyleDialog_panel_ntb_reversalDoubleAmount");this._panelFigureNumberOfLine=e.find(".scxPriceStyleDialog_panel_ntb_numberOfLine");this._panelFigureBarStyle=e.find(".scxPriceStyleDialog_panel_ntb_barStyle");this._input_barStyle=
e.find(".scxPriceStyleDialog_input_barStyle");this._panelFigureColoredBarStyle=e.find(".scxPriceStyleDialog_panel_ntb_coloredBarStyle");this._input_coloredBarStyle=e.find(".scxPriceStyleDialog_input_coloredBarStyle")};return b}(k.Dialog);k.PriceStyleSettingsDialog=d})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h=function(g){function d(a){a=g.call(this,a)||this;a._initFields();a._init();return a}__extends(d,g);d.prototype.show=function(a){this._config=$.extend(!0,{},a);this._setValues();this._hideNewThemeForm();g.prototype.show.call(this,a)};d.prototype.hide=function(){this._config=null;g.prototype.hide.call(this)};d.prototype._init=function(){var a=this;this._fieldTextFont.selectpicker({container:"body"}).change(function(b){a._fieldTextFont.next().css({"font-family":b.target.value})});
this._fieldTextSize.selectpicker({container:"body"});this._fieldTheme.selectpicker({container:"body"}).change(function(b){(b=$(b.currentTarget).val())&&a._config.theme.name!==b&&(a._setTitle(b),a._config.theme=f.Theme[b],a._setValues())});this._btnNewTheme.on(eventClickByPlatform,function(){var b=a._dialogBody.scrollTop();a._showNewThemeForm();a.resize();if(a._dialogBody[0].scrollHeight>$(window).height()){var e=a._wrapperTheme.position().top+a._wrapperTheme.outerHeight(!0)-a._dialogBody.height();
a._dialogBody.scrollTop(b<e?e:b)}});this._fieldNewThemeName.keyup(function(b){13===b.which&&a._addNewTheme()});this._fieldNewThemeName.on("input",function(b){a._highlightNewThemeNameInvalid(!1);a._switchNewThemeConfirmButton($(b.currentTarget).val().length)});this._btnNewThemeConfirm.on(eventClickByPlatform,function(){a._addNewTheme()});this._dialog.find(".scxSpectrum").scx().colorPicker({localStorageKey:"scxThemeDialog_spectrum"});this._chkUpBarBorderEnabled=new Switchery(document.querySelector("#scxThemeDialog_chk_upBarBorderColor"),
d._switcherySettings);this._chkDownBarBorderEnabled=new Switchery(document.querySelector("#scxThemeDialog_chk_downBarBorderColor"),d._switcherySettings);this._chkUpBarBorderEnabled.setPosition(!1);this._chkDownBarBorderEnabled.setPosition(!1);$("body").bind("scxSwitcherChanged",function(b,e){b=$(e.target);e=e.checked;b.is(a._fieldUpBarBorderEnabled)?a._setUpBarBorderState(e):b.is(a._fieldDownBarBorderEnabled)&&a._setDownBarBorderState(e)});this._btnSaveTheme.on(eventClickByPlatform,function(){var b=
a._getValues();a._saveTheme(b);a._apply(b)});this._btnApply.on(eventClickByPlatform,function(){a._apply()})};d.prototype._saveTheme=function(a){null==a&&(a=this._getValues());a.name=this._config.theme.name;this._config.theme=a;f.Theme[this._config.theme.name]=this._config.theme;a=i18next.t("notification.theme.msg.success");f.UI.Notification.success(a)};d.prototype._addNewTheme=function(){var a=f.JsUtil.filterText(this._fieldNewThemeName.val());"undefined"===typeof f.Theme[a]?(""!==a&&(this._setTitle(a),
this._fieldTheme.append(d._generateThemeSelectorItem(a)),this._config.theme=this._getValues(),this._config.theme.name=a,f.Theme[a]=this._config.theme,this._fieldTheme.selectpicker("val",a).selectpicker("refresh")),this._hideNewThemeForm()):this._highlightNewThemeNameInvalid(!0)};d.prototype._showNewThemeForm=function(){this._btnNewTheme.hide();this._wrapperTheme.show();f.Environment.isMobile||this._fieldNewThemeName.focus()};d.prototype._hideNewThemeForm=function(){this._fieldNewThemeName.val("");
this._wrapperTheme.hide();this._btnNewTheme.show()};d.prototype._switchNewThemeConfirmButton=function(a){a?this._btnNewThemeConfirm.text("OK").removeClass(d.CLASS_BTN_DEFAULT).addClass(d.CLASS_BTN_PRIMARY):this._btnNewThemeConfirm.text("Cancel").removeClass(d.CLASS_BTN_PRIMARY).addClass(d.CLASS_BTN_DEFAULT)};d.prototype._setTitle=function(a){this._dialogTitle.text(a)};d._generateThemeSelectorItem=function(a){a=f.JsUtil.filterText(a);return $('<option title="'+a+'" value="'+a+'">'+a+"</option>")};
d.prototype._setUpBarBorderState=function(a){a?(this._fieldUpBarBorderColor.spectrum("enable"),this._labelUpBarBorderColor.removeClass("disabled"),this._chkUpBarBorderEnabled.isChecked()||this._chkUpBarBorderEnabled.setPosition(!0)):(this._fieldUpBarBorderColor.spectrum("disable"),this._labelUpBarBorderColor.addClass("disabled"),this._chkUpBarBorderEnabled.isChecked()&&this._chkUpBarBorderEnabled.setPosition(!0))};d.prototype._setDownBarBorderState=function(a){a?(this._fieldDownBarBorderColor.spectrum("enable"),
this._labelDownBarBorderColor.removeClass("disabled"),this._chkDownBarBorderEnabled.isChecked()||this._chkDownBarBorderEnabled.setPosition(!0)):(this._fieldDownBarBorderColor.spectrum("disable"),this._labelDownBarBorderColor.addClass("disabled"),this._chkDownBarBorderEnabled.isChecked()&&this._chkDownBarBorderEnabled.setPosition(!0))};d.prototype._setValues=function(){var a=this._config.theme;this._setTitle(a.name);this._fieldLineBarColor.spectrum("set",a.plot.line.simple.strokeColor);this._fieldUpBarColor.spectrum("set",
a.plot.bar.candle.upCandle.fill.fillColor);this._fieldDownBarColor.spectrum("set",a.plot.bar.candle.downCandle.fill.fillColor);this._fieldUpBarBorderColor.spectrum("set",a.plot.bar.candle.upCandle.border.strokeColor);this._setUpBarBorderState(a.plot.bar.candle.upCandle.border.strokeEnabled);this._fieldDownBarBorderColor.spectrum("set",a.plot.bar.candle.downCandle.border.strokeColor);this._setDownBarBorderState(a.plot.bar.candle.downCandle.border.strokeEnabled);this._fieldWickColor.spectrum("set",
a.plot.bar.candle.upCandle.wick.strokeColor);this._fieldTextFont.selectpicker("val",a.valueScale.text.fontFamily).selectpicker("refresh");this._fieldTextSize.selectpicker("val",a.valueScale.text.fontSize).selectpicker("refresh");this._fieldTextColor.spectrum("set",a.valueScale.text.fillColor);this._fieldGradient1Color.spectrum("set",a.chart.background[0]);this._fieldGradient2Color.spectrum("set",a.chart.background[1]);this._fieldGridColor.spectrum("set",a.chartPanel.grid.strokeColor);a=[];for(var b in f.Theme)f.Theme.hasOwnProperty(b)&&
a.push(d._generateThemeSelectorItem(f.Theme[b].name));this._fieldTheme.empty().append(a);this._fieldTheme.selectpicker("val",this._config.theme.name).selectpicker("refresh")};d.prototype._getValues=function(){var a=$.extend(!0,{},this._config.theme),b=this._fieldLineBarColor.spectrum("get").toRgbString();a.plot.line.simple.strokeColor=b;a.plot.line.mountain.line.strokeColor=b;a.plot.bar.OHLC.strokeColor=b;a.plot.bar.HLC.strokeColor=b;a.plot.bar.HL.strokeColor=b;b=this._fieldUpBarColor.spectrum("get").toRgbString();
a.plot.bar.candle.upCandle.fill.fillColor=b;a.plot.bar.coloredOHLC.upBar.strokeColor=b;a.plot.bar.coloredHLC.upBar.strokeColor=b;a.plot.bar.coloredHL.upBar.strokeColor=b;a.plot.bar.candle.upCandle.fill.fillColor=b;a.plot.bar.hollowCandle.upCandle.fill.fillColor=b;a.plot.bar.hollowCandle.upHollowCandle.border.strokeColor=b;a.plot.bar.hollowCandle.upHollowCandle.wick.strokeColor=b;a.plot.bar.heikinAshi.upCandle.fill.fillColor=b;a.plot.bar.renko.upCandle.fill.fillColor=b;a.plot.bar.lineBreak.upCandle.fill.fillColor=
b;a.plot.bar.pointAndFigure.upCandle.border.strokeColor=b;a.plot.bar.kagi.upCandle.border.strokeColor=b;b=this._fieldDownBarColor.spectrum("get").toRgbString();a.plot.bar.candle.downCandle.fill.fillColor=b;a.plot.bar.coloredOHLC.downBar.strokeColor=b;a.plot.bar.coloredHLC.downBar.strokeColor=b;a.plot.bar.coloredHL.downBar.strokeColor=b;a.plot.bar.candle.downCandle.fill.fillColor=b;a.plot.bar.hollowCandle.downCandle.fill.fillColor=b;a.plot.bar.hollowCandle.downHollowCandle.border.strokeColor=b;a.plot.bar.hollowCandle.downHollowCandle.wick.strokeColor=
b;a.plot.bar.heikinAshi.downCandle.fill.fillColor=b;a.plot.bar.renko.downCandle.fill.fillColor=b;a.plot.bar.lineBreak.downCandle.fill.fillColor=b;a.plot.bar.pointAndFigure.downCandle.border.strokeColor=b;a.plot.bar.kagi.downCandle.border.strokeColor=b;a.plot.bar.candle.upCandle.border.strokeColor=this._fieldUpBarBorderColor.spectrum("get").toRgbString();a.plot.bar.candle.upCandle.border.strokeEnabled=this._chkUpBarBorderEnabled.isChecked();a.plot.bar.candle.downCandle.border.strokeColor=this._fieldDownBarBorderColor.spectrum("get").toRgbString();
a.plot.bar.candle.downCandle.border.strokeEnabled=this._chkDownBarBorderEnabled.isChecked();b=this._fieldWickColor.spectrum("get").toRgbString();a.plot.bar.candle.upCandle.wick.strokeColor=b;a.plot.bar.candle.downCandle.wick.strokeColor=b;a.plot.bar.hollowCandle.upCandle.wick.strokeColor=b;a.plot.bar.hollowCandle.downCandle.wick.strokeColor=b;a.plot.bar.heikinAshi.upCandle.wick.strokeColor=b;a.plot.bar.heikinAshi.downCandle.wick.strokeColor=b;if(b=this._fieldTextFont.selectpicker("val"))a.chartPanel.title.fontFamily=
b,a.valueScale.text.fontFamily=b,a.valueScale.valueMarker.text.fontFamily=b,a.dateScale.text.fontFamily=b,a.dateScale.dateMarker.text.fontFamily=b;b=parseInt(this._fieldTextSize.selectpicker("val"),10);a.chartPanel.title.fontSize=b;a.valueScale.text.fontSize=b;a.valueScale.valueMarker.text.fontSize=b;a.dateScale.text.fontSize=b;a.dateScale.dateMarker.text.fontSize=b;b=this._fieldTextColor.spectrum("get").toHexString();a.chartPanel.title.fillColor=b;a.valueScale.text.fillColor=b;a.valueScale.valueMarker.text.fillColor=
b;a.dateScale.text.fillColor=b;a.dateScale.dateMarker.text.fillColor=b;a.chart.background[0]=this._fieldGradient1Color.spectrum("get").toRgbString();a.chart.background[1]=this._fieldGradient2Color.spectrum("get").toRgbString();b=this._fieldGridColor.spectrum("get").toHexString();a.chartPanel.grid.strokeColor=b;a.dateScale.line.strokeColor=b;return a};d.prototype._apply=function(a){f.JsUtil.isFunction(this._config.done)&&(null==a&&(a=this._getValues()),this._config.done(a))};d.prototype._highlightNewThemeNameInvalid=
function(a){a?(this._fieldNewThemeName.addClass(d.CLASS_INVALID_VALUE),this._btnNewThemeConfirm.addClass(d.CLASS_INVALID_VALUE)):(this._fieldNewThemeName.removeClass(d.CLASS_INVALID_VALUE),this._btnNewThemeConfirm.removeClass(d.CLASS_INVALID_VALUE))};d.prototype._initFields=function(){this._dialogBody=this._dialog.find(".scxThemeDialog-body");this._dialogTitle=this._dialog.find("#scxThemeDialog_headerTitle");this._btnApply=this._dialog.find("#scxThemeDialog_btn_save");this._fieldLineBarColor=this._dialog.find("#scxThemeDialog_input_lineBarColor");
this._fieldUpBarColor=this._dialog.find("#scxThemeDialog_input_upBarColor");this._fieldDownBarColor=this._dialog.find("#scxThemeDialog_input_downBarColor");this._labelUpBarBorderColor=this._dialog.find("#scxThemeDialog_label_upBarBorderColor");this._fieldUpBarBorderColor=this._dialog.find("#scxThemeDialog_input_upBarBorderColor");this._fieldUpBarBorderEnabled=this._dialog.find("#scxThemeDialog_chk_upBarBorderColor");this._labelDownBarBorderColor=this._dialog.find("#scxThemeDialog_label_downBarBorderColor");
this._fieldDownBarBorderColor=this._dialog.find("#scxThemeDialog_input_downBarBorderColor");this._fieldDownBarBorderEnabled=this._dialog.find("#scxThemeDialog_chk_downBarBorderColor");this._fieldWickColor=this._dialog.find("#scxThemeDialog_input_wickColor");this._fieldTextFont=this._dialog.find("#scxThemeDialog_input_textFont");this._fieldTextSize=this._dialog.find("#scxThemeDialog_input_textSize");this._fieldTextColor=this._dialog.find("#scxThemeDialog_input_textColor");this._fieldGradient1Color=
this._dialog.find("#scxThemeDialog_input_gradient1Color");this._fieldGradient2Color=this._dialog.find("#scxThemeDialog_input_gradient2Color");this._fieldGridColor=this._dialog.find("#scxThemeDialog_input_gridColor");this._fieldTheme=this._dialog.find("#scxThemeDialog_input_theme");this._wrapperTheme=this._dialog.find("#scxThemeDialog_newThemeWrapper");this._btnNewTheme=this._dialog.find("#scxThemeDialog_btn_newTheme");this._btnNewThemeConfirm=this._dialog.find("#scxThemeDialog_btn_newThemeConfirm");
this._fieldNewThemeName=this._dialog.find("#scxThemeDialog_input_newThemeName");this._btnSaveTheme=this._dialog.find("#scxThemeDialog_btn_saveTheme")};d.CLASS_INVALID_VALUE="scxInvalidValue";d.CLASS_BTN_PRIMARY="btn-primary";d.CLASS_BTN_DEFAULT="btn-default";d._switcherySettings={color:"#64bd63",secondaryColor:"#ddd",className:"scx_switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s"};return d}(k.Dialog);k.ThemeDialog=h})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){var h={LEFT:0,RIGHT:1};Object.freeze(h);var g=function(){function d(a,b){this._hasCustomPicker=this._isActive=!1;this._last=new f.TimeFrame(f.Periodicity.MINUTE,1);b.timeInterval||(b.timeInterval=b.chart&&b.chart.timeInterval||f.TimeSpan.MILLISECONDS_IN_MINUTE);this._rootDomElement=a;this._config=b;this._init()}Object.defineProperty(d.prototype,"chart",{get:function(){return this._config.chart},set:function(a){this._config.chart=a},enumerable:!0,configurable:!0});d.prototype.set=
function(a){this._setValue(f.TimeFrame.timeIntervalToTimeFrame(a))};d.prototype._init=function(){var a=this;this._domObjects=d._getDomObjects(this._rootDomElement);this._btnWrapper=this._rootDomElement.find(".scxToolbarButton-buttonWrapper");k.HtmlContainer.instance.register("TimeFramePicker",this._domObjects.dropdown.wrapper);this._hasCustomPicker=0<this._domObjects.dropdown.customValueWrapper.length;this._rootDomElement.addClass("activated");this._rootDomElement.hover(function(){a._btnWrapper.addClass("hover")},
function(){a._btnWrapper.removeClass("hover")});this._domObjects.dropdown.inputInterval.scxNumericField({showArrows:!1,minValue:1,value:1}).keyup(function(m){13===m.which&&0!==a._getPickerIntervalValue()&&a._getPickerIntervalValue()&&a._hideDropDown()});if(!this._domObjects.dropdown.inputPeriodicity.children().length){var b=this._selectDistinctPredefinedPeriodicities(),e=[],c;for(c in f.Periodicity)if(f.Periodicity.hasOwnProperty(c)&&0<=b.indexOf(f.Periodicity[c])){var l=f.TimeFrame.periodicityToString(f.Periodicity[c]);
e.push($('<option value="'+f.Periodicity[c]+'">'+l+"</option>"))}this._domObjects.dropdown.inputPeriodicity.empty().append(e)}this._domObjects.dropdown.inputPeriodicity.selectpicker({container:"body"});this._domObjects.head.dropdownToggler.click(function(m){a._toggleDropDown();$(m.currentTarget).blur()});this._domObjects.head.activator.click(function(){a._domObjects.head.dropdownToggler.click()});$(window).on("scroll resize",function(){a._hideDropDown()});$("body").click(function(m){a._isActive&&
0===$(m.target).parents(a._rootDomElement.selector).length&&0===$(m.target).parents(".scxTimeFramePickerDropDown").length&&0===$(m.target).parents(".scxTimeFramePicker-CustomValueUnits").length&&a._hideDropDown()});this._domObjects.predefinedItems.click(function(m){a._setPredefinedValue($(m.currentTarget).index())});this._hasCustomPicker&&(f.Environment.isMobile?(this._hasCustomPicker=!1,this._domObjects.dropdown.customValueWrapper.remove()):(this._domObjects.dropdown.btnPlus.click(function(m){a._domObjects.predefinedItems.removeClass("active");
$(m.currentTarget).blur();a._domObjects.dropdown.inputInterval.scxNumericField("setValue",a._getPickerIntervalValue()+1)}),this._domObjects.dropdown.btnMinus.click(function(m){a._domObjects.predefinedItems.removeClass("active");$(m.currentTarget).blur();m=a._getPickerIntervalValue();1<m&&a._domObjects.dropdown.inputInterval.scxNumericField("setValue",m-1)})));this._setValue(f.TimeFrame.timeIntervalToTimeFrame(this._config.timeInterval))};d.prototype._setValue=function(a){this._domObjects.predefinedItems.removeClass("active");
this._last=a;this._setCustomPickerValues();this._setLabels();this._hideDropDown()};d.prototype._setPredefinedValue=function(a){a=this._domObjects.predefinedItems.eq(a);this._activateItem(a);this._last=d._extractDataFromItem(a);this._setCustomPickerValues();this._setLabels();this._hideDropDown();this._fire()};d._extractDataFromItem=function(a){return new f.TimeFrame(a.attr("data-scxUnits"),parseInt(a.attr("data-scxValue"),10))};d.prototype._activateItem=function(a){this._domObjects.predefinedItems.removeClass("active");
a.addClass("active")};d.prototype._setLabels=function(){this._domObjects.head.labelInterval.text(this._last.interval);this._domObjects.head.labelPeriodicity.text(this._last.periodicity)};d.prototype._setCustomPickerValues=function(){this._hasCustomPicker&&(this._domObjects.dropdown.inputInterval.scxNumericField("setValue",this._last.interval),this._domObjects.dropdown.inputPeriodicity.selectpicker("val",this._last.periodicity).selectpicker("refresh"))};d.prototype._toggleDropDown=function(){this._isActive?
this._hideDropDown():this._showDropDown()};d.prototype._showDropDown=function(){this._isActive=!0;var a=this._rootDomElement.addClass("active"),b=this._domObjects.dropdown.wrapper,e=this._domObjects.dropdown.container,c=window.innerWidth,l=window.innerHeight-1,m=a.offset().top-$(window).scrollTop(),p=a.offset().left-$(window).scrollLeft();e.css({width:"auto",height:"auto"});b.css({top:0,left:0,right:"auto"}).show();var u=b.outerWidth(!0),r=b.outerHeight(!0);b.hide();var w=p+u>c&&c-p<p+a.outerWidth(!0)?
h.LEFT:h.RIGHT;m={top:m+a.outerHeight(!0)-parseInt(a.css("margin-bottom"),10),left:null,right:null};r>l-r&&(r>l&&(r=l/2),r=l-(l-r),u+=20);switch(w){case h.RIGHT:m.left=p;m.right="auto";b.removeClass("scxLeft").addClass("scxRight");u>c-m.left&&(u=c-m.left-2);break;case h.LEFT:m.left="auto",m.right=c-p-a.outerWidth(!0),b.removeClass("scxRight").addClass("scxLeft"),u>c-m.right&&(u=c-m.right-2,m.left=0)}e.outerWidth(u).outerHeight(r);b.css(m).show()};d.prototype._hideDropDown=function(){this._domObjects.dropdown.wrapper.hide();
this._rootDomElement.removeClass("active");this._btnWrapper.removeClass("hover");this._isActive=!1;this._synchronizeWithCustomPicker()};d.prototype._synchronizeWithCustomPicker=function(){if(this._hasCustomPicker){var a=this._getPickerIntervalValue(),b=this._domObjects.dropdown.inputPeriodicity.selectpicker("val");if(a!==this._last.interval||b!==this._last.periodicity)this._last.interval=a,this._last.periodicity=b,this._setLabels(),this._fire()}};d.prototype._fire=function(){"function"===typeof this._config.selectionChanged&&
this._config.selectionChanged(this._last)};d.prototype._getPickerIntervalValue=function(){var a=$("<div></div>").text(this._domObjects.dropdown.inputInterval.scxNumericField("getValue")).html();return parseInt(a,10)};d.prototype._selectDistinctPredefinedPeriodicities=function(){var a=[],b;this._domObjects.predefinedItems.each(function(e,c){b=$(c).attr("data-scxUnits").toLowerCase();try{f.TimeFrame.periodicityToString(b)}catch(l){b=null}null!==b&&0>a.indexOf(b)&&a.push(b)});return a};d._getDomObjects=
function(a){return{head:{activator:a.find(".scxToolbarButton-activateBtn"),dropdownToggler:a.find(".scxToolbarButton-toggleDropdownBtn"),labelInterval:a.find(".scxTimeFramePicker-button-value"),labelPeriodicity:a.find(".scxTimeFramePicker-button-units")},dropdown:{wrapper:a.find(".scxTimeFramePickerDropDown"),container:a.find(".scxTimeFramePicker-dropdownContainer"),customValueWrapper:a.find(".scxTimeFramePicker-CustomValueWrapper"),btnPlus:a.find(".scxTimeFramePicker-CustomValuePlus"),btnMinus:a.find(".scxTimeFramePicker-CustomValueMinus"),
inputInterval:a.find(".scxTimeFramePicker-CustomValueText"),inputPeriodicity:a.find(".scxTimeFramePicker-CustomValueUnits")},predefinedItems:a.find(".scxToolbarButton-dropdownElement")}};return d}();k.TimeFramePicker=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){var h=function(){function g(d){var a=this;k.HtmlLoader.getView("Toolbar.html",function(b){a._init(b,d)})}Object.defineProperty(g.prototype,"chart",{get:function(){return this._chart},set:function(d){this._chart!==d&&(this._unsubscribeEvents(),this._chart=d,this._subscribeEvents(),this._updateForNewChart())},enumerable:!0,configurable:!0});g.prototype._init=function(d,a){var b=this,e=this.chart=a.chart;if(e.container){d=this._container=$(d).prependTo(a.parent);var c=this._controls=
{};f.Environment.isPhone&&this._container.addClass("scxPhone");c.instrument=d.find(".symbolSearch").scx().instrumentSearch({onChange:function(m){b._handleInstrumentChange(m)}});c.timeFrame=d.find(".scxTimeFramePicker").scx().timeFramePicker({selectionChanged:function(m){b._handleTimeFrameChange(m)}});d.find(".scxToolbar-btn").hover(function(m){$(m.target).addClass("hover")},function(m){$(m.target).removeClass("hover")});d.find(".scxToolbar-btn-indicators").on("click",function(m){$(m.target).removeClass("hover");
b._handleIndicatorsClick()});d.find(".scxToolbar-btn-theme").on("click",function(m){$(m.target).removeClass("hover");b._handleThemeClick()});c.priceStyle=d.find(".scxToolbarBarStyle").scx().toolbarDropDownButton({selectionChanged:function(m,p){b._handlePriceStyleChange(m,p)}});c.crossHair=d.find(".scxToolbarCrossHair").scx().toolbarDropDownButton({selectionChanged:function(m,p){b._handleCrossHairChange(m,p)}});c.markerDrawings=d.find(".scxToolbarMarkerDrawings").scx().toolbarDropDownButton({selectionChanged:function(m,
p){b._handleDrawingClick(m,p)}});c.geometricDrawings=d.find(".scxToolbarGeometricDrawings").scx().toolbarDropDownButton({selectionChanged:function(m,p){b._handleDrawingClick(m,p)}});c.fibonacciDrawings=d.find(".scxToolbarFibonacciDrawings").scx().toolbarDropDownButton({selectionChanged:function(m,p){b._handleDrawingClick(m,p)}});c.trendDrawings=d.find(".scxToolbarTrendDrawings").scx().toolbarDropDownButton({selectionChanged:function(m,p){b._handleDrawingClick(m,p)}});c.generalDrawings=d.find(".scxToolbarGeneralDrawings").scx().toolbarDropDownButton({selectionChanged:function(m,
p){b._handleDrawingClick(m,p)}});c.zoomIn=d.find(".scxToolbarZoomIn").scx().toolbarDropDownButton({selectionChanged:function(m,p){b._handleZoomInClick(m,p)}});c.hideDrawings=d.find(".scxToolbar-btn-hideDrawings").scx().toolbarDropDownButton({selectionChanged:function(m,p){b._handleHideDrawingsClick(p)}});c.stayInDrawingMode=d.find(".scxToolbar-btn-stayInDrawingMode").scx().toolbarDropDownButton({selectionChanged:function(m,p){b._handleDrawingModeClick(p)}});c.deleteObject=d.find(".scxToolbarDelete").scx().toolbarDropDownButton({selectionChanged:function(m,
p){b._handleDeleteClick(m,p)}});if(f.Environment.isIOS)d.find(".scxToolbarSaveImage").remove();else d.find(".scxToolbarSaveImage").on("click",function(m){$(m.target).removeClass("hover");b._handleSaveImageClick()});var l=d.find(".scxToolbarViewMode");!1===a.showViewMode?l.remove():f.Environment.isMobile?l.on("click",function(){b._handleViewModeChange("toggleFullWindow",!1)}).removeClass("scxToolbarButtonWithDropdown").removeClass("scxToolbarButton").addClass("scxToolbar-btn").children().remove():
l.scx().toolbarDropDownButton({chart:this.chart,selectionChanged:function(m,p){b._handleViewModeChange(m,p)}});c.templateOrder=d.find(".scxToolbarTemplate").scx().toolbarDropDownButton({selectionChanged:function(m,p){b._handleTemplateClick(m,p)}});c.setOnRealtime=d.find(".scxToolbarRealtime").scx().toolbarDropDownButton({selectionChanged:function(m,p){b._handleRealtimeClick(m,p,f.ConditionOrderType.BUY)}});c.trendlineOrderBuy=d.find(".scxToolbarTLbuy").scx().toolbarDropDownButton({selectionChanged:function(m,
p){c.trendlineOrderSell.deactivate(!1);c.trendlineOrderSL.deactivate(!1);c.trendlineOrderTP.deactivate(!1);b._handleDrawingTLOrderClick(m,p,f.ConditionOrderType.BUY)}});c.trendlineOrderSell=d.find(".scxToolbarTLsell").scx().toolbarDropDownButton({selectionChanged:function(m,p){c.trendlineOrderBuy.deactivate(!1);c.trendlineOrderSL.deactivate(!1);c.trendlineOrderTP.deactivate(!1);b._handleDrawingTLOrderClick(m,p,f.ConditionOrderType.SELL)}});c.trendlineOrderSL=d.find(".scxToolbarTLSL").scx().toolbarDropDownButton({selectionChanged:function(m,
p){c.trendlineOrderBuy.deactivate(!1);c.trendlineOrderSell.deactivate(!1);c.trendlineOrderTP.deactivate(!1);b._handleDrawingTLOrderClick(m,p,f.ConditionOrderType.STOPLOSS)}});c.trendlineOrderTP=d.find(".scxToolbarTLTP").scx().toolbarDropDownButton({selectionChanged:function(m,p){c.trendlineOrderBuy.deactivate(!1);c.trendlineOrderSell.deactivate(!1);c.trendlineOrderSL.deactivate(!1);b._handleDrawingTLOrderClick(m,p,f.ConditionOrderType.TAKEPROFIT)}});e&&e.fireValueChanged(f.ChartEvent.TOOLBAR_LOADED,
this);this._updateForNewChart()}};g.prototype.deactiveTrendlineOrder=function(){var d=this._controls;d.trendlineOrderBuy.deactivate(!1);d.trendlineOrderSell.deactivate(!1);d.trendlineOrderSL.deactivate(!1);d.trendlineOrderTP.deactivate(!1);this._handleDrawingTLOrderClick(null,!1,null)};g.prototype.prependTo=function(d){d&&(this._container.detach(),this._container=this._container.prependTo(d))};g.prototype._subscribeEvents=function(){var d=this,a=this.chart;if(a)a.on(f.ChartEvent.INSTRUMENT_CHANGED+
".scxToolbar",function(b){d._controls.instrument.set(b.value)}).on(f.ChartEvent.TIME_INTERVAL_CHANGED+".scxToolbar",function(b){d._controls.timeFrame.set(b.value)}).on(f.ChartEvent.PRICE_STYLE_CHANGED+".scxToolbar",function(){var b=d.chart&&d.chart.priceStyle;b&&(b instanceof f.HLBarPriceStyle||b instanceof f.HLCBarPriceStyle||b instanceof f.ColoredHLBarPriceStyle||b instanceof f.ColoredHLCBarPriceStyle||d._controls.priceStyle.selectItem(d.chart.priceStyleKind,!1))}).on(f.ChartEvent.CROSS_HAIR_CHANGED+
".scxToolbar",function(){d._controls.crossHair.selectItem(d.chart.crossHairType,!1)}).on(f.ChartEvent.ZOOM_IN_FINISHED+".scxToolbar "+f.ChartEvent.ZOOM_IN_CANCELLED+".scxToolbar",function(){d._controls.zoomIn.deactivate()}).on([f.ChartEvent.USER_DRAWING_FINISHED,f.ChartEvent.USER_DRAWING_CANCELLED,""].join(".scxToolbar "),function(){var b=d._controls;a.stayInDrawingMode||(b.markerDrawings.deactivate(),b.geometricDrawings.deactivate(),b.fibonacciDrawings.deactivate(),b.trendDrawings.deactivate(),b.generalDrawings.deactivate())}).on(f.ChartEvent.STATE_LOADED+
".scxToolbar",function(){d._controls.priceStyle.selectItem(d.chart.priceStyleKind,!1);d._controls.crossHair.selectItem(d.chart.crossHairType,!1)})};g.prototype._unsubscribeEvents=function(){this._chart&&(this._chart.cancelUserDrawing(),this._chart.cancelZoomIn(),this._chart.off(".scxToolbar"))};g.prototype._updateForNewChart=function(){var d=this.chart,a=this._controls;if(a){for(var b in a)a.hasOwnProperty(b)&&a[b]instanceof k.ToolbarDropDownButton&&(a[b].chart=d,"hideDrawings"!==b&&"stayInDrawingMode"!==
b&&a[b].deactivate());if(a.timeFrame.chart=d)a.instrument.set(d.instrument),a.timeFrame.set(d.timeInterval),a.priceStyle.selectItem(d.priceStyleKind,!1),a.crossHair.selectItem(d.crossHairType,!1),d.showDrawings?a.hideDrawings.deactivate():a.hideDrawings.activate(),d.stayInDrawingMode?a.stayInDrawingMode.activate():a.stayInDrawingMode.deactivate(),d.windowMode!==f.WindowMode.FULL_WINDOW&&d.windowMode!==f.WindowMode.FULL_SCREEN||d.windowModeHandler.adjustFullWindowSize()}};g.prototype._handleInstrumentChange=
function(d){if(d){var a=this.chart;a&&d.symbol.toUpperCase()!==a.instrument.symbol&&a.fireValueChanged(f.ChartEvent.SYMBOL_ENTERED,d)}};g.prototype._handleTimeFrameChange=function(d){var a=this.chart;a&&a.fireValueChanged(f.ChartEvent.TIME_FRAME_CHANGED,d)};g.prototype._handleIndicatorsClick=function(){var d=this;f.UI.ViewLoader.indicatorsDialog(function(a){a.show({chart:d.chart,done:function(b){var e=d.chart;if(e){switch(b){case 87:e.addIndicators(new f.IchimokuIndicator);break;case 88:e.addIndicators(new f.DarvasBox);
break;default:e.addIndicators(b)}e.update()}}})})};g.prototype._handleThemeClick=function(){var d=this;f.UI.ViewLoader.themeDialog(function(a){a.show({chart:d.chart,theme:d.chart.theme,done:function(b){var e=d.chart;e&&(e.theme=b,e.setNeedsUpdate())}})})};g.prototype._handlePriceStyleChange=function(d,a){var b=this.chart;b&&a&&d&&(b.priceStyleKind=d,b.setNeedsUpdate())};g.prototype._handleCrossHairChange=function(d,a){var b=this.chart;b&&a&&d&&(b.crossHairType=d)};g.prototype._handleDrawingClick=
function(d,a){var b=this.chart;b&&(a?a&&d&&(d=f.Drawing.deserialize({className:d}),b.startUserDrawing(d)):b.cancelUserDrawing())};g.prototype._handleDrawingTLOrderClick=function(d,a,b){var e=this.chart;e&&(a?a&&d&&(d=f.Drawing.deserialize({className:d}),d.tlType=b,e.startUserDrawing(d)):e.cancelUserDrawing())};g.prototype._handleRealtimeClick=function(d,a,b){realtimeMode(a)};g.prototype._handleZoomInClick=function(d,a){var b=this.chart;b&&(a?d&&a&&b.startZoomIn(d):b.cancelZoomIn())};g.prototype._handleHideDrawingsClick=
function(d){var a=this.chart;a&&(a.showDrawings=!d,a.setNeedsUpdate())};g.prototype._handleDrawingModeClick=function(d){var a=this.chart;a&&((a.stayInDrawingMode=d)||a.cancelUserDrawing())};g.prototype._handleDeleteClick=function(d,a){var b=this.chart;if(b){if("deleteDrawing"===d){var e=b.selectedObject,c=e instanceof f.Drawing&&e.chartPanel;c&&(c.removeDrawings(e),c.update())}a&&"deleteAllDrawings"===d&&(b.removeDrawings(),b.setNeedsUpdate(!0));a&&"deleteAllIndicators"===d&&(b.removeIndicators(),
b.setNeedsUpdate(!0))}};g.prototype._handleSaveImageClick=function(){var d=this.chart;d&&d.saveImage()};g.prototype._handleTemplateClick=function(d,a){var b=this.chart;b&&("templateSave"===d?f.UI.ViewLoader.templateDialog(function(e){e.show({chart:b,templateType:"save",done:function(c){}})}):"templateLoad"===d&&f.UI.ViewLoader.templateDialog(function(e){e.show({chart:b,templateType:"load",done:function(c){}})}))};g.prototype._handleViewModeChange=function(d,a){var b=this.chart;if(b){var e=b.windowMode;
switch(d){case "toggleFullWindow":switch(e){case f.WindowMode.NORMAL:case f.WindowMode.FULL_SCREEN:b.setWindowMode(f.WindowMode.FULL_WINDOW);break;case f.WindowMode.FULL_WINDOW:b.setWindowMode(f.WindowMode.NORMAL);break;default:throw Error("Unknown window mode.");}break;case "toggleFullScreen":if(a)switch(e){case f.WindowMode.NORMAL:case f.WindowMode.FULL_WINDOW:b.setWindowMode(f.WindowMode.FULL_SCREEN);break;case f.WindowMode.FULL_SCREEN:b.setWindowMode(b.windowModeHandler.prevMode);break;default:throw Error("Unknown window mode.");
}}}};return g}();k.Toolbar=h})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));$(document).ready(function(){setTimeout(function(){$(".scxToolbar").css({width:window.innerWidth})},500)});window.addEventListener("resize",function(){$(".scxToolbar").css({width:window.innerWidth})});
(function(f){(function(k){var h={LEFT:0,RIGHT:1};Object.freeze(h);var g=function(){function d(a,b){this._canToggle=!0;this._isActive=this._isActivated=this._hasChildren=!1;this._config=b;this._rootElement=a;this._body=$("body");this._init()}Object.defineProperty(d.prototype,"chart",{get:function(){return this._config.chart},set:function(a){this._config.chart=a},enumerable:!0,configurable:!0});d.prototype.selectItem=function(a,b){this._setValue(a,b)};d.prototype.deactivate=function(a){this._deactivateButton(a)};
d.prototype.activate=function(){this._activateButton()};d.prototype._init=function(){var a=this;this._btnWrapper=this._rootElement.find(".scxToolbarButton-buttonWrapper");this._btnActivate=this._rootElement.find(".scxToolbarButton-activateBtn");this._btn_toggleDropDown=this._rootElement.find(".scxToolbarButton-toggleDropdownBtn");this._itemsWrapper=this._rootElement.find(".scxToolbarButton-dropdownWrapper");this._itemsContainer=this._rootElement.find(".scxToolbarButton-dropdownElementsContainer");
this._items=this._rootElement.find(".scxToolbarButton-dropdownElement");k.HtmlContainer.instance.register("scxToolbarButton-dropdownWrapper",this._itemsWrapper,!1);this._canToggle=this._rootElement.hasClass("scxToolbarCanToggle");this._canFireFromHead=this._rootElement.hasClass("scxToolbarCanFireFromHead");this._rootElement.hasClass("scxToolbarButtonWithDropdown")&&0<this._btn_toggleDropDown.length&&0<this._items.length&&(this._hasChildren=!0);this._btnWrapper.on("click",function(b){var e=$(b.target);
e.is(a._btnActivate)?(a._btnWrapper.removeClass("hover"),a._canToggle?a._toggleButton(b):a._canFireFromHead?a._fireFromHead():!a._hasChildren||a._canToggle||a._canFireFromHead||a._toggleDropDown()):e.is(a._btn_toggleDropDown)?a._toggleDropDown():a._hasChildren&&a._toggleDropDown()});this._btnWrapper.hover(function(){a._btnWrapper.addClass("hover")},function(){a._btnWrapper.removeClass("hover")});this._btnActivate.focus(function(b){$(b.currentTarget).blur()});this._body.bind("scxToolbarButton-anotherButtonActivated",
function(b,e){a._triggerActiveButton(e.button,e.chart);a._hideDropDown()});this._hasChildren&&(this._itemsWrapper.hide().addClass(this._rootElement.attr("data-type")).appendTo(k.HtmlContainer.instance.componentsContainer),this._body.bind("scxToolbarButton-anotherDropdownActivated scxContextMenuOpen",function(){a._hideDropDown();a._deactivateButton()}),this._canFireFromHead||this._btnActivate.attr("data-scxValue",this._items.first().attr("data-scxValue")),this._btn_toggleDropDown.focus(function(b){$(b.currentTarget).blur()}),
this._body.click(function(b){a._isActive&&0===$(b.target).parents(a._rootElement.selector).length&&a._hideDropDown()}),this._body.on("touchstart",function(b){a._isActive&&0===$(b.target).parents(a._rootElement.selector).length&&a._hideDropDown()}),this._items.click(function(b){b=$(b.currentTarget).attr("data-scxValue");a._setValue(b)}),this._config.selectedItem&&this._setValue(this._config.selectedItem),$(window).on("scroll resize",function(){a._hideDropDown()}))};d.prototype._setValue=function(a,
b){this._deactivateButton(b);this._items.removeClass("active");this._canFireFromHead||(this._items.parent().find('[data-scxValue="'+a+'"]').addClass("active"),this._btnActivate.attr("data-scxValue",a));this._activateButton(b,a);this._hideDropDown()};d.prototype._triggerActiveButton=function(a,b){this.chart===b&&(this._rootElement.hasClass("scxToolbarButtonManuallySwitchable")||!$(a).is(this._btnActivate)&&this._canToggle&&this._deactivateButton())};d.prototype._activateButton=function(a,b){this._isActivated=
!0;this._canToggle&&(this._rootElement.addClass("activated"),this._itemsWrapper.addClass("activated"),this._body.trigger("scxToolbarButton-anotherButtonActivated",{button:this._btnActivate,chart:this.chart}));this._canFireFromHead?this._config.selectionChanged(b,this._isActivated):!1!==a&&this._config.selectionChanged&&this._config.selectionChanged(this._btnActivate.attr("data-scxValue"),this._isActivated)};d.prototype._deactivateButton=function(a){this._isActivated&&(this._isActivated=!1,this._canToggle&&
(this._rootElement.removeClass("activated"),this._itemsWrapper.removeClass("activated")),!1!==a&&this._config.selectionChanged&&!this._canFireFromHead&&this._config.selectionChanged(this._btnActivate.attr("data-scxValue"),this._isActivated))};d.prototype._toggleButton=function(a){this._isActivated?this._deactivateButton():this._activateButton()};d.prototype._fireFromHead=function(){if(this._isActive)this._hideDropDown();else{var a=this._btnActivate.attr("data-scxValue");this._config.selectionChanged(a)}};
d.prototype._showDropDown=function(){this._body.trigger("scxToolbarButton-anotherDropdownActivated");this._isActive=!0;var a=this._rootElement.addClass("active"),b=this._itemsWrapper,e=this._itemsContainer,c=window.innerWidth,l=window.innerHeight-1,m=a.offset().top-$(window).scrollTop(),p=a.offset().left-$(window).scrollLeft();e.css({width:"auto",height:"auto"});b.css({top:0,left:0}).removeClass("visible").show();var u=b.outerWidth(!0)+10,r=b.outerHeight(!0);b.hide().addClass("visible");var w=p+u>
c&&c-p<p+a.outerWidth(!0)?h.LEFT:h.RIGHT;m={top:m+a.outerHeight(!0)-parseInt(a.css("margin-bottom"),10),left:null};r>l-m.top&&(r=l-m.top);switch(w){case h.RIGHT:m.left=p;b.removeClass("scxLeft").addClass("scxRight");u>c-m.left&&(u=c-m.left);break;case h.LEFT:a=p+a.outerWidth(!0),m.left=a-u-2,b.removeClass("scxRight").addClass("scxLeft"),u>a&&(u=a-2,m.left=0)}e.outerWidth(u).outerHeight(r);b.css(m).show()};d.prototype._hideDropDown=function(){this._itemsWrapper.hide();this._rootElement.removeClass("active");
this._btnWrapper.removeClass("hover");this._isActive=!1};d.prototype._toggleDropDown=function(){this._isActive?this._hideDropDown():this._showDropDown()};return d}();k.ToolbarDropDownButton=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){var h={DRAWING_DIALOG:"DrawingSettingsDialog.html",FIBONACCI_DRAWING_DIALOG:"FibonacciDrawingSettingsDialog.html",ICHIMOKU_INDICATOR_DIALOG:"IchimokuIndicatorSettingsDialog.html",INDICATOR_INFO_DIALOG:"IndicatorInfoDialog.html",INDICATORS_DIALOG:"IndicatorsDialog.html",INDICATOR_DIALOG:"IndicatorSettingsDialog.html?v=3",PRICE_STYLE_DIALOG:"PriceStyleSettingsDialog.html",DARVAS_BOX_DIALOG:"DarvasBoxSettingsDialog.html",THEME_DIALOG:"ThemeDialog.html",TEMPLATE_DIALOG:"TemplateDialog.html?v=1"};
Object.freeze(h);var g=function(){function d(){}d.drawingSettingsDialog=function(a){var b=this;this._drawingSettingsDialog?this._invokeOnLoad(a,this._drawingSettingsDialog):k.HtmlLoader.getView(h.DRAWING_DIALOG,function(e){e=k.HtmlContainer.instance.register("DrawingSettingsDialog",e);b._drawingSettingsDialog=new k.DrawingSettingsDialog(e);b._invokeOnLoad(a,b._drawingSettingsDialog)})};d.fibonacciDrawingSettingsDialog=function(a){var b=this;this._fibonacciDrawingSettingsDialog?this._invokeOnLoad(a,
this._fibonacciDrawingSettingsDialog):k.HtmlLoader.getView(h.FIBONACCI_DRAWING_DIALOG,function(e){e=k.HtmlContainer.instance.register("FibonacciDrawingSettingsDialog",e);b._fibonacciDrawingSettingsDialog=new k.FibonacciDrawingSettingsDialog(e);b._invokeOnLoad(a,b._fibonacciDrawingSettingsDialog)})};d.ichimokuIndicatorSettingsDialog=function(a){var b=this;this._ichimokuIndicatorSettingsDialog?this._invokeOnLoad(a,this._ichimokuIndicatorSettingsDialog):k.HtmlLoader.getView(h.ICHIMOKU_INDICATOR_DIALOG,
function(e){e=k.HtmlContainer.instance.register("IchimokuIndicatorSettingsDialog",e);b._ichimokuIndicatorSettingsDialog=new k.IchimokuIndicatorSettingsDialog(e);b._invokeOnLoad(a,b._ichimokuIndicatorSettingsDialog)})};d.darvasBoxSettingsDialog=function(a){var b=this;this._darvasBoxSettingsDialog?this._invokeOnLoad(a,this._darvasBoxSettingsDialog):k.HtmlLoader.getView(h.DARVAS_BOX_DIALOG,function(e){e=k.HtmlContainer.instance.register("DarvasBoxSettingsDialog",e);b._darvasBoxSettingsDialog=new k.DarvasBoxSettingsDialog(e);
b._invokeOnLoad(a,b._darvasBoxSettingsDialog)})};d.indicatorInfoDialog=function(a){var b=this;this._indicatorInfoDialog?this._invokeOnLoad(a,this._indicatorInfoDialog):k.HtmlLoader.getView(h.INDICATOR_INFO_DIALOG,function(e){e=k.HtmlContainer.instance.register("IndicatorInfoDialog",e);b._indicatorInfoDialog=new k.IndicatorInfoDialog(e);b._invokeOnLoad(a,b._indicatorInfoDialog)})};d.indicatorsDialog=function(a){var b=this;this._indicatorsDialog?this._invokeOnLoad(a,this._indicatorsDialog):k.HtmlLoader.getView(h.INDICATORS_DIALOG,
function(e){e=k.HtmlContainer.instance.register("IndicatorsDialog",e);b._indicatorsDialog=new k.IndicatorsDialog(e);b._invokeOnLoad(a,b._indicatorsDialog)})};d.indicatorSettingsDialog=function(a){var b=this;this._indicatorPropertiesDialog?this._invokeOnLoad(a,this._indicatorPropertiesDialog):k.HtmlLoader.getView(h.INDICATOR_DIALOG,function(e){e=k.HtmlContainer.instance.register("IndicatorSettingsDialog",e);b._indicatorPropertiesDialog=new k.IndicatorSettingsDialog(e);b._invokeOnLoad(a,b._indicatorPropertiesDialog)})};
d.priceStyleSettingsDialog=function(a){var b=this;this._priceStyleSettingsDialog?this._invokeOnLoad(a,this._priceStyleSettingsDialog):k.HtmlLoader.getView(h.PRICE_STYLE_DIALOG,function(e){e=k.HtmlContainer.instance.register("PriceStyleSettingsDialog",e);b._priceStyleSettingsDialog=new k.PriceStyleSettingsDialog(e);b._invokeOnLoad(a,b._priceStyleSettingsDialog)})};d.themeDialog=function(a){var b=this;this._themeDialog?this._invokeOnLoad(a,this._themeDialog):k.HtmlLoader.getView(h.THEME_DIALOG,function(e){e=
k.HtmlContainer.instance.register("ThemeDialog",e);b._themeDialog=new k.ThemeDialog(e);b._invokeOnLoad(a,b._themeDialog)})};d.templateDialog=function(a){var b=this;this._templateDialog?this._invokeOnLoad(a,this._templateDialog):k.HtmlLoader.getView(h.TEMPLATE_DIALOG,function(e){e=k.HtmlContainer.instance.register("TemplateDialog",e);b._templateDialog=new k.TemplateDialog(e);b._invokeOnLoad(a,b._templateDialog)})};d._invokeOnLoad=function(a,b){f.JsUtil.isFunction(a)&&a(b);b._config.chart.localize(b)};
return d}();k.ViewLoader=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){var h=jQuery,g=function(){function d(a){this._callersCount=0;this._parentContainer=a}d.prototype.show=function(a){this._callersCount++;1<this._callersCount||(this._config=h.extend({text:"Loading...",dotsCount:7},a),this._createDom(),this._container.show())};d.prototype.hide=function(a){this._callersCount&&((this._callersCount=a?0:this._callersCount-1)||this._destroy())};d.prototype.isShown=function(){return!!this._callersCount};d.prototype._createDom=function(){this._container=
h('<div class="scxWaitingBarContainer"></div>').appendTo(this._parentContainer);h('<span class="scxWaitingBarText">'+this._config.text+"</span>").appendTo(this._container);for(var a=h('<div class="scxDotsContainer"></div>').appendTo(this._container),b=[],e=0;e<this._config.dotsCount;e++)b.push(h('<div class="scxWaitingBarDot"></div>'));a.append(b)};d.prototype._destroy=function(){this._container.remove();this._container=null};return d}();k.WaitingBar=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX=
{}));
(function(f){(function(k){var h=function(){function g(){}g.warning=function(d,a){a||(a=i18next.t("notification.title.warning"));toastr.warning(d,a,this._options)};g.error=function(d,a){a||(a=i18next.t("notification.title.error"));toastr.error(d,a,this._options)};g.success=function(d,a){a||(a=i18next.t("notification.title.success"));toastr.success(d,a,this._options)};g.info=function(d,a){a||(a=i18next.t("notification.title.info"));toastr.info(d,a,this._options)};g._options={closeButton:!0,debug:!1,newestOnTop:!1,
progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:300,hideDuration:1E3,timeOut:5E3,extendedTimeOut:1E3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};return g}();k.Notification=h})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){k.TooltipPosition={AUTO:"auto",TOP:"top",BOTTOM:"bottom"};k.TooltipContentKind={TEXT:"text",IMAGE:"image",HTML:"html"};Object.freeze(k.TooltipContentKind);var h=jQuery,g=function(){function d(a){this._maxContentWidth=270;this._minSize={width:280,height:29};this._isInDom=!1;this._options=a.options||h.extend(!0,{},d.defaults);this._parent=a.parent;this.initDomObjects()}Object.defineProperty(d.prototype,"UID",{get:function(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{get:function(){return this._isInDom?{width:this._tooltipElement.outerWidth(),height:this._tooltipElement.outerHeight()}:this._minSize},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"theme",{get:function(){return this._options.theme},set:function(a){this._options.theme=a;this.applyTheme()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"actualTheme",{get:function(){var a=this.theme;return a?
a:this.defaultTheme},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"defaultTheme",{get:function(){var a=this._parent.chart;return a?f.JsUtil.clone(a.theme.tooltip):null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"visible",{get:function(){return this._visible},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"contentKind",{get:function(){return this._options.kind},set:function(a){this._options.kind=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"position",{get:function(){return this._options.position},set:function(a){this._options.position=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"text",{get:function(){return this._options.text},set:function(a){this._options.text=a;this._applyText()},enumerable:!0,configurable:!0});d.prototype.initDomObjects=function(){this._id="tooltip-"+this.UID;var a=this._tooltipElement=h('<div id="'+this._id+'"><style class="scxTooltipArrowStyleAfter"></style><style class="scxTooltipArrowStyleBefore"></style><style class="scxTooltipThemeArrowStyleAfter"></style><style class="scxTooltipThemeArrowStyleBefore"></style><div class="scxTooltipContent"></div></div>');
a.addClass("scxTooltip").addClass("scxArrowBox");this._arrowAfter=a.find(".scxTooltipArrowStyleAfter");this._arrowBefore=a.find(".scxTooltipArrowStyleBefore");this._arrowMainAfter=a.find(".scxTooltipThemeArrowStyleAfter");this._arrowMainBefore=a.find(".scxTooltipThemeArrowStyleBefore");this._contentElement=a.find(".scxTooltipContent");this._applyText()};d.prototype._applyText=function(){var a=this.text,b=this.actualTheme,e=1;b&&(e=b.border.enabled?b.border.width:0);this._contentElement.empty();try{switch(this.contentKind){case k.TooltipContentKind.TEXT:this._contentElement.text(a).css("white-space",
"pre-wrap");this._tooltipElement.css("pointer-events","none");break;case k.TooltipContentKind.IMAGE:h('<img src="'+a+'" style="max-width: '+(this._maxContentWidth-2*e)+'px">').appendTo(this._contentElement);this._tooltipElement.css("pointer-events","none");break;case k.TooltipContentKind.HTML:this._contentElement.css("white-space","normal"),this._tooltipElement.css("width","auto"),this._tooltipElement.css("height","auto"),f.HtmlUtil.removeUnsecureTags(a).appendTo(this._contentElement),this._tooltipElement.css("pointer-events",
"auto")}}catch(c){}};d.prototype.saveState=function(){return f.JsUtil.clone(this._options)};d.prototype.loadState=function(a){this._options=a||h.extend(!0,{},d.defaults);this.applyTheme();this._applyText()};d.prototype.show=function(a){this.text&&(this._visible=!0,this._isInDom||(this._tooltipElement=k.HtmlContainer.instance.register(this._id,this._tooltipElement),this._isInDom=!0),this.moveTo(a),this._tooltipElement.css("visibility","visible"))};d.prototype.hide=function(){this._visible=!1;this._tooltipElement.css("visibility",
"hidden")};d.prototype._actualPosition=function(a){var b=this.layoutRect;if(!b)return k.TooltipPosition.TOP;var e=this.size.height+15;return a.y-e>=b.top?k.TooltipPosition.TOP:a.y+e<=b.top+b.height?k.TooltipPosition.BOTTOM:k.TooltipPosition.TOP};d.prototype._adjustArrow=function(a,b){var e=this.theme,c=e?e.border.color:"transparent";e=(e?e.fill.enabled:1)&&e?e.fill.color:"transparent";var l=(b=b===k.TooltipPosition.BOTTOM)?"bottom: 100%; top: auto;":"top: 100%; bottom: auto;",m=b?"border-top-color: transparent;":
"border-bottom-color: transparent;",p=5>a||95<a?"display: none;":"display: block;";c="#"+this._id+":before {left: "+a+"%; "+(b?"border-bottom-color: "+c+";":"border-top-color: "+c+";")+" "+l+" "+m+" "+p+" }";this._arrowAfter.text("#"+this._id+":after {left: "+a+"%; "+(b?"border-bottom-color: "+e+";":"border-top-color: "+e+";")+" "+l+" "+m+" "+p+" }");this._arrowBefore.text(c)};d.prototype.applyTheme=function(){if(this._tooltipElement){var a=this.actualTheme;if(a){var b=a.border.enabled?a.border.width:
0,e="solid",c=a.border.color,l=a.fill.enabled?a.fill.color:"transparent",m=a.text.fillColor,p=a.text.fontSize,u=a.text.fontFamily,r=a.text.fontWeight,w=a.text.fontStyle,D=a.text.decoration;switch(a.border.lineStyle){case f.LineStyle.DOT:e="dotted";break;case f.LineStyle.DASH_DOT:e="dashed";break;case f.LineStyle.DASH:e="dashed"}this._tooltipElement.css({background:l,"border-color":c,"border-width":b,"border-style":e});this._contentElement.css({color:m,"font-family":u,"font-size":p+"px","font-weight":r,
"font-style":w,"text-decoration":D,"word-wrap":"break-word"});this._applyText();this._arrowMainBefore.text("#"+this._id+":before { border-width: "+b+" }")}}};d.prototype.moveTo=function(a){var b=this._actualPosition(a),e=this._calculateLocation(b,a);this._adjustArrow((a.x-e.x)/this.size.width*100,b);this._tooltipElement.css("left",e.x).css("top",e.y)};d.prototype._calculateLocation=function(a,b){var e=this.size,c=b.x-e.width/2,l=e.height+15;switch(a){case k.TooltipPosition.TOP:a=b.y-l;break;case k.TooltipPosition.BOTTOM:a=
b.y+30;break;default:throw Error("Unknown tooltip position: "+a);}if(b=this.layoutRect)c<b.left&&(c=b.left),b=b.left+b.width,c+e.width>b&&(c=b-e.width);return{x:c,y:a}};d.prototype.destroy=function(){this._tooltipElement&&(this._tooltipElement.remove(),this._tooltipElement=null,this._isInDom=!1)};d.defaults={text:"",kind:k.TooltipContentKind.TEXT};return d}();k.Tooltip=g})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
(function(f){(function(k){var h=function(){function g(d){var a=this;this._scrollingPanelMinWidth=20;this._scrollingPanelWidth=0;k.HtmlLoader.getView("Scrollbar.html",function(b){a._init(b,d)})}Object.defineProperty(g.prototype,"chart",{get:function(){return this._chart},set:function(d){this._chart!==d&&(this._unsubscribeEvents(),this._chart=d,this._subscribeEvents())},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"outerHeight",{get:function(){return this._scrollbar?this._scrollbar.outerHeight():
0},enumerable:!0,configurable:!0});g.prototype._init=function(d,a){var b=this;a=this._chart=a.chart;null!=a&&a.container&&(this._scrollbar=$(d).insertAfter(a.rootDiv),this._scrollingPanel=this._scrollbar.find(".scxScrollingPanel"),this._scrollingPanel.draggable({drag:function(e,c){return b._update(c.position.left)},stop:function(e,c){return b._update(c.position.left)},axis:"x",containment:".scxScrollbar"}),this._scrollingPanel.resizable({container:a.container,minWidth:this._scrollingPanelMinWidth,
direction:"horizontal",start:function(){b._scrollingPanel.draggable({disabled:!0})},resize:function(){b._update(b._scrollingPanel.position().left)},stop:function(){b._scrollingPanel.draggable({disabled:!1})}}),this._subscribeEvents(),a&&a.fireValueChanged(f.ChartEvent.SCROLLBAR_LOADED,this))};g.prototype._subscribeEvents=function(){var d=this,a=this.chart;if(a)a.on(f.ChartEvent.WINDOW_MODE_CHANGED,function(b){d.adjustDimensions()})};g.prototype._unsubscribeEvents=function(){this._chart&&this._chart.off(f.ChartEvent.WINDOW_MODE_CHANGED)};
g.prototype.adjustDimensions=function(){if(null!=this._chart){var d=this._chart.visibleDataRange(),a=d.firstVisibleDataRecord,b=d.lastVisibleDataRecord,e=this._chart.recordCount;d=this._scrollbar.width();this._scrollingPanelWidth=(b-a)/e*d*100/100;a=this._chart.firstVisibleRecord/e*d*100/100;a+this._scrollingPanelMinWidth>=this._scrollbar.width()&&(a=d-this._scrollingPanelMinWidth);this._scrollingPanel.css({left:a});this._scrollingPanel.width(Math.max(this._scrollingPanelWidth,this._scrollingPanelMinWidth));
this._updateMinChartZooming()}};g.prototype._update=function(d){if(null!=this._chart){var a=this._scrollbar.width(),b=d+this._scrollingPanel.width(),e=this._chart.recordCount;this._chart.firstVisibleRecord=d/a*100*e/100;this._chart.lastVisibleRecord=b/a*100*e/100;this._chartUpdate()}};g.prototype._updateMinChartZooming=function(){var d=this._scrollingPanelMinWidth/this._scrollbar.width()*100;this._chart.dateScale.minVisibleRecords=Math.max(5,d*this._chart.recordCount/100)};g.prototype._chartUpdate=
function(){this._chart.setNeedsUpdate(!0)};g.prototype.appendTo=function(d){d&&(this._scrollbar.detach(),this._scrollbar=this._scrollbar.insertAfter(this.chart.rootDiv))};return g}();k.Scrollbar=h})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
__extends=this&&this.__extends||function(){var f=function(k,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var a in d)d.hasOwnProperty(a)&&(g[a]=d[a])};return f(k,h)};return function(k,h){function g(){this.constructor=k}f(k,h);k.prototype=null===h?Object.create(h):(g.prototype=h.prototype,new g)}}();
(function(f){(function(k){var h=function(g){function d(a){a=g.call(this,a)||this;a._initFields();a._init();return a}__extends(d,g);d.prototype.show=function(a){this._config=$.extend(!0,{},a);this._setValues();this.refreshUI();g.prototype.show.call(this,a)};d.prototype.refreshUI=function(){"save"==this._config.templateType?(this._panelSaveBody.show(),this._btnSaveTemplate.show(),this._panelLoadBody.hide(),this._btnLoadTemplate.hide(),this._btnDeleteTemplate.hide()):(this._panelLoadBody.show(),this._btnLoadTemplate.show(),
this._panelSaveBody.hide(),this._btnSaveTemplate.hide(),this._btnDeleteTemplate.show())};d.prototype.hide=function(){this._config=null;g.prototype.hide.call(this)};d.prototype._init=function(){var a=this;this._btnSaveTemplate.on(eventClickByPlatform,function(){var b=$("#scxTemplateDialog_input_templateNameSave").val().trim();a._saveTemplate(b);a._config.done()});this._btnLoadTemplate.on(eventClickByPlatform,function(){var b=a._fieldTemplateSelect.val();a._loadChartState(a._templates[b].state)});this._fieldTemplateSelect.selectpicker({container:"body"}).change(function(b){});
this._btnDeleteTemplate.on(eventClickByPlatform,function(){var b=a._fieldTemplateSelect.val();a._deleteTemplate(b)})};d.prototype._setTitle=function(a){this._dialogTitle.text(a)};d.prototype._setValues=function(){"save"==this._config.templateType?$("#scxTemplateDialog_input_templateNameSave").val(""):this._loadTemplateLists()};d.prototype._loadTemplateLists=function(){this._templates={};this._fieldTemplateSelect.html('<option value="Loading...">Loading...</option>');setTimeout(function(b){return function(){b._fieldTemplateSelect.selectpicker("val",
"Loading...").selectpicker("refresh")}}(this),1);var a=document.location.protocol+"//"+document.domain.toString()+"/ChartAPI/api/TemplateChart?u="+encodeURIComponent(userClient);$.get(a,function(b){return function(e,c){if("undefined"!=typeof e){b._fieldTemplateSelect.html("");for(c=0;c<e.Templates.length;c++)b._fieldTemplateSelect.append($("<option></option>").attr("value",c).text(e.Templates[c].TemplateName)),b._templates[c]={},b._templates[c].name=e.Templates[c].TemplateName,b._templates[c].state=
e.Templates[c].State;b._fieldTemplateSelect.selectpicker("refresh")}}}(this))};d.prototype._deleteTemplate=function(a){var b=this;if(a&&""!=a){var e=document.location.protocol+"//"+document.domain.toString()+"/ChartAPI/api/TemplateChart",c={},l=this._templates[a].name;c.Username=userClient;c.TemplateName=l;c.Type=1;$.ajax({url:e,data:JSON.stringify(c),type:"POST",contentType:"application/json; charset=utf-8",dataType:"JSON",timeout:3E4,async:!0,success:function(m){m.Success?(f.UI.Notification.info("Delete template '"+
l+"' complete."),b._loadTemplateLists()):f.UI.Notification.error(m.Error)},error:function(m){f.UI.Notification.error(m.responseText)},failure:function(m){f.UI.Notification.error(m.responseText)}})}else f.UI.Notification.warning("Please set template name.")};d.prototype._saveTemplate=function(a){if(a&&""!=a){var b=document.location.protocol+"//"+document.domain.toString()+"/ChartAPI/api/TemplateChart",e={};e.State=this._getChartState();e.Username=userClient;e.TemplateName=a;e.Type=0;$.ajax({url:b,
data:JSON.stringify(e),type:"POST",contentType:"application/json; charset=utf-8",dataType:"JSON",timeout:3E4,async:!0,success:function(c){c.Success?f.UI.Notification.success("Save template complete."):f.UI.Notification.error(c.Error)},error:function(c){f.UI.Notification.error(c.responseText)},failure:function(c){f.UI.Notification.error(c.responseText)}})}else f.UI.Notification.warning("Please set template name.")};d.prototype._getChartState=function(){var a=this._config.chart.saveState();return JSON.stringify(a)};
d.prototype._loadChartState=function(a){a=JSON.parse(a);var b=this._config.chart.firstVisibleRecord,e=this._config.chart.lastVisibleRecord,c=this._config.chart.saveDrawingsState();a.drawings=c;this._config.chart.loadState(a);this._config.chart.firstVisibleRecord=b;this._config.chart.lastVisibleRecord=e;this._config.chart.setNeedsUpdate(!0)};d.prototype._setUpBarBorderState=function(a){a?(this._fieldUpBarBorderColor.spectrum("enable"),this._labelUpBarBorderColor.removeClass("disabled"),this._chkUpBarBorderEnabled.isChecked()||
this._chkUpBarBorderEnabled.setPosition(!0)):(this._fieldUpBarBorderColor.spectrum("disable"),this._labelUpBarBorderColor.addClass("disabled"),this._chkUpBarBorderEnabled.isChecked()&&this._chkUpBarBorderEnabled.setPosition(!0))};d.prototype._setDownBarBorderState=function(a){a?(this._fieldDownBarBorderColor.spectrum("enable"),this._labelDownBarBorderColor.removeClass("disabled"),this._chkDownBarBorderEnabled.isChecked()||this._chkDownBarBorderEnabled.setPosition(!0)):(this._fieldDownBarBorderColor.spectrum("disable"),
this._labelDownBarBorderColor.addClass("disabled"),this._chkDownBarBorderEnabled.isChecked()&&this._chkDownBarBorderEnabled.setPosition(!0))};d.prototype._save=function(a){f.JsUtil.isFunction(this._config.done)&&(null==a&&(a=this._getValues()),this._config.done(a))};d.prototype._highlightNewtemplateNameInvalid=function(a){a?(this._fieldNewtemplateName.addClass(d.CLASS_INVALID_VALUE),this._btnNewThemeConfirm.addClass(d.CLASS_INVALID_VALUE)):(this._fieldNewtemplateName.removeClass(d.CLASS_INVALID_VALUE),
this._btnNewThemeConfirm.removeClass(d.CLASS_INVALID_VALUE))};d.prototype._initFields=function(){this._panelSaveBody=$("#templateSaveBody");this._panelLoadBody=$("#templateLoadBody");this._btnLoadTemplate=$("#btnLoadTemplate");this._btnSaveTemplate=$("#btnSaveTemplate");this._btnDeleteTemplate=$("#btnDeleteTemplate");this._fieldTemplateSelect=this._dialog.find("#scxTemplateDialog_input_templateNameLoad")};d.CLASS_INVALID_VALUE="scxInvalidValue";d.CLASS_BTN_PRIMARY="btn-primary";d.CLASS_BTN_DEFAULT=
"btn-default";d._switcherySettings={color:"#64bd63",secondaryColor:"#ddd",className:"scx_switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s"};return d}(k.Dialog);k.TemplateDialog=h})(f.UI||(f.UI={}))})(StockChartX||(StockChartX={}));
