<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script type="text/javascript" src="Periodicity.js"></script>
    <script type="text/javascript" src="moment.js"></script>
    <script type="text/javascript" src="chart.js"></script>
    <script type="text/javascript">
        function $$$(ele) { return document.getElementById(ele); }

        function initChartTM(ele, id, querystring = "") {
            var newframe = document.createElement('iframe');

            //newframe.style.width = ele.clientWidth + "px";
            //newframe.style.height = ele.clientHeight + "px";
            //id = id + '_' + (typeof getCookie("username") !== "undefined" ? getCookie("username") : "");
            id = id + '_' + 't001';
            newframe.className += " iframe_content";
            newframe.id = id;
            newframe.src = '/chartlibs/chartlibs/Chart Library Source/StockChartX/index.html?uid=' + id + querystring + '&user=' + encodeURI("test1234");
            newframe.scrolling = "no";
            //fix width / height
            newframe.width = 800;
            newframe.height = 600;
            ele.appendChild(newframe);
            return newframe;
        }

        function frameChild(id, unique) {
            //if (_booleanCheckBrowserFirefox) return frames[id].contentWindow;
            //else return frames[id];

            if (unique) id = id + '_' + 't001';

            if (frames[id] && typeof frames[id].contentWindow != "undefined") return frames[id].contentWindow;
            else return frames[id];
        }

        var symbols = {};

        $(document).ready(function (e) {
            var requestOptions = {
                method: 'GET',
                redirect: 'follow'
            };

            fetch("http://27.254.47.6/DataServerAPI/api/MarketSymbol", requestOptions)
                .then(response => response.text())
                .then(result => {
                    var obj = JSON.parse(result);
                    symbols = {};
                    for (var i = 0; i < obj.length; i++) {
                        symbols[obj[i].Symbol] = obj[i];
                    }

                    chartTM_init();
                })
                .catch(error => console.log('error', error));



        });
    </script>
</head>
<body>
    <div class="tab-pane oy" role="tabpanel" id="chartTM">
        <div class="chart_content oy">
        </div>
    </div>
</body>
</html>
